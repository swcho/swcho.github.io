"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{58566:(e,t,r)=>{r.d(t,{S:()=>x});var n=r(44501),o=r(14232),a=r(66691),l=r(88360),i=r(60138);let u=new a.Q1f,c=(0,i.A)();function s(e,t){let{right:r,top:n,left:o,bottom:a,width:l,height:i}=t,u=t.bottom<0||n>e.height||r<0||t.left>e.width,c=e.top+e.height;return{position:{width:l,height:i,left:o-e.left,top:n,bottom:c-a,right:r},isOffscreen:u}}function p(e,{left:t,bottom:r,width:n,height:o}){let a,l,i=n/o;return(l=e.camera)&&l.isOrthographicCamera?e.camera.manual?e.camera.updateProjectionMatrix():(e.camera.left!==-(n/2)||e.camera.right!==n/2||e.camera.top!==o/2||e.camera.bottom!==-(o/2))&&(Object.assign(e.camera,{left:-(n/2),right:n/2,top:o/2,bottom:-(o/2)}),e.camera.updateProjectionMatrix()):e.camera.aspect!==i&&(e.camera.aspect=i,e.camera.updateProjectionMatrix()),a=e.gl.autoClear,e.gl.autoClear=!1,e.gl.setViewport(t,r,n,o),e.gl.setScissor(t,r,n,o),e.gl.setScissorTest(!0),a}function d(e,t){e.gl.setScissorTest(!1),e.gl.autoClear=t}function m(e){e.gl.getClearColor(u),e.gl.setClearColor(u,e.gl.getClearAlpha()),e.gl.clear(!0,!0)}function f({visible:e=!0,canvasSize:t,scene:r,index:n,children:a,frames:i,rect:u,track:c}){let f=(0,l.C)(),[g,y]=o.useState(!1),x=0;return(0,l.D)(n=>{if(i===1/0||x<=i){var o;c&&(u.current=null==(o=c.current)?void 0:o.getBoundingClientRect()),x++}if(u.current){let{position:o,isOffscreen:l}=s(t,u.current);if(g!==l&&y(l),e&&!g&&u.current){let e=p(n,o);n.gl.render(a?n.scene:r,n.camera),d(n,e)}}},n),o.useLayoutEffect(()=>{let r=u.current;if(r&&(!e||!g)){let{position:e}=s(t,r),n=p(f,e);m(f),d(f,n)}},[e,g]),o.useEffect(()=>{if(!c)return;let e=u.current,r=f.get().events.connected;return f.setEvents({connected:c.current}),()=>{if(e){let{position:r}=s(t,e),n=p(f,r);m(f),d(f,n)}f.setEvents({connected:r})}},[c]),o.createElement(o.Fragment,null,a,o.createElement("group",{onPointerOver:()=>null}))}let g=o.forwardRef(({track:e,visible:t=!0,index:r=1,id:i,style:u,className:c,frames:s=1/0,children:p,...d},m)=>{var g,y,x,w;let P=o.useRef(null),{size:h,scene:b}=(0,l.C)(),[E]=o.useState(()=>new a.Z58),[v,C]=o.useReducer(()=>!0,!1),M=o.useCallback((t,r)=>{if(P.current&&e&&e.current&&t.target===e.current){let{width:e,height:n,left:o,top:a}=P.current,l=t.clientX-o,i=t.clientY-a;r.pointer.set(l/e*2-1,-(i/n*2)+1),r.raycaster.setFromCamera(r.pointer,r.camera)}},[P,e]);return o.useEffect(()=>{var t;e&&(P.current=null==(t=e.current)?void 0:t.getBoundingClientRect()),C()},[e]),o.createElement("group",(0,n.A)({ref:m},d),v&&(0,l.o)(o.createElement(f,{visible:t,canvasSize:h,frames:s,scene:b,track:e,rect:P,index:r},p),E,{events:{compute:M,priority:r},size:{width:null==(g=P.current)?void 0:g.width,height:null==(y=P.current)?void 0:y.height,top:null==(x=P.current)?void 0:x.top,left:null==(w=P.current)?void 0:w.left}}))}),y=o.forwardRef(({as:e="div",id:t,visible:r,className:a,style:l,index:i=1,track:u,frames:s=1/0,children:p,...d},m)=>{let f=o.useId(),y=o.useRef(null);return o.useImperativeHandle(m,()=>y.current),o.createElement(o.Fragment,null,o.createElement(e,(0,n.A)({ref:y,id:t,className:a,style:l},d)),o.createElement(c.In,null,o.createElement(g,{visible:r,key:f,track:y,frames:s,index:i},p)))}),x=(()=>{let e=o.forwardRef((e,t)=>o.useContext(l.q)?o.createElement(g,(0,n.A)({ref:t},e)):o.createElement(y,(0,n.A)({ref:t},e)));return e.Port=()=>o.createElement(c.Out,null),e})()},60138:(e,t,r)=>{r.d(t,{A:()=>m});var n,o,a=r(14232);let l=e=>{let t,r=new Set,n=(e,n)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=n?n:"object"!=typeof o||null===o)?o:Object.assign({},t,o),r.forEach(r=>r(t,e))}},o=()=>t,a={setState:n,getState:o,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,o,a);return a};var i=r(45712);let{useDebugValue:u}=a,{useSyncExternalStoreWithSelector:c}=i,s=!1,p=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?(e=>e?l(e):l)(e):e,r=(e,r)=>(function(e,t=e=>e,r){r&&!s&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),s=!0);let n=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return u(n),n})(t,e,r);return Object.assign(r,t),r},d="undefined"!=typeof window&&(null!=(n=window.document)&&n.createElement||(null==(o=window.navigator)?void 0:o.product)==="ReactNative")?a.useLayoutEffect:a.useEffect;function m(){let e,t=(e=e=>({current:[],version:0,set:e}))?p(e):p;return{In:({children:e})=>{let r=t(e=>e.set),n=t(e=>e.version);return d(()=>{r(e=>({version:e.version+1}))},[]),d(()=>(r(({current:t})=>({current:[...t,e]})),()=>r(({current:t})=>({current:t.filter(t=>t!==e)}))),[e,n]),null},Out:()=>{let e=t(e=>e.current);return a.createElement(a.Fragment,null,e)}}}},64870:(e,t,r)=>{r.d(t,{n:()=>eo});var n=r(44501),o=r(88360),a=r(14232),l=r(66691),i=r(39745),u=r(55822);let c=a.createContext(null),s=new l.Pq0,p=new l.Pq0,d=new l.Pq0(0,1,0),m=new l.kn4,f=({direction:e,axis:t})=>{let{translation:r,translationLimits:n,annotations:f,annotationsClass:g,depthTest:y,scale:x,lineWidth:w,fixed:P,axisColors:h,hoveredColor:b,opacity:E,renderOrder:v,onDragStart:C,onDrag:M,onDragEnd:k,userData:R}=a.useContext(c),q=(0,o.C)(e=>e.controls),F=a.useRef(null),S=a.useRef(null),z=a.useRef(null),O=a.useRef(0),[W,I]=a.useState(!1),T=a.useCallback(n=>{f&&(F.current.innerText=`${r.current[t].toFixed(2)}`,F.current.style.display="block"),n.stopPropagation();let o=new l.kn4().extractRotation(S.current.matrixWorld),a=n.point.clone(),i=new l.Pq0().setFromMatrixPosition(S.current.matrixWorld),u=e.clone().applyMatrix4(o).normalize();z.current={clickPoint:a,dir:u},O.current=r.current[t],C({component:"Arrow",axis:t,origin:i,directions:[u]}),q&&(q.enabled=!1),n.target.setPointerCapture(n.pointerId)},[f,e,q,C,r,t]),A=a.useCallback(e=>{if(e.stopPropagation(),W||I(!0),z.current){let{clickPoint:o,dir:a}=z.current,[l,i]=(null==n?void 0:n[t])||[void 0,void 0],u=((e,t,r,n)=>{let o=t.dot(t),a=t.dot(e)-t.dot(r),l=t.dot(n);return 0===l?-a/o:(s.copy(n).multiplyScalar(o/l).sub(t),p.copy(n).multiplyScalar(a/l).add(r).sub(e),-s.dot(p)/s.dot(s))})(o,a,e.ray.origin,e.ray.direction);void 0!==l&&(u=Math.max(u,l-O.current)),void 0!==i&&(u=Math.min(u,i-O.current)),r.current[t]=O.current+u,f&&(F.current.innerText=`${r.current[t].toFixed(2)}`),m.makeTranslation(a.x*u,a.y*u,a.z*u),M(m)}},[f,M,W,r,n,t]),D=a.useCallback(e=>{f&&(F.current.style.display="none"),e.stopPropagation(),z.current=null,k(),q&&(q.enabled=!0),e.target.releasePointerCapture(e.pointerId)},[f,q,k]),B=a.useCallback(e=>{e.stopPropagation(),I(!1)},[]),{cylinderLength:N,coneWidth:j,coneLength:$,matrixL:U}=a.useMemo(()=>{let t=P?w/x*1.6:x/20,r=P?.2:x/5,n=P?1-r:x-r,o=new l.PTz().setFromUnitVectors(d,e.clone().normalize());return{cylinderLength:n,coneWidth:t,coneLength:r,matrixL:new l.kn4().makeRotationFromQuaternion(o)}},[e,x,w,P]),L=W?b:h[t];return a.createElement("group",{ref:S},a.createElement("group",{matrix:U,matrixAutoUpdate:!1,onPointerDown:T,onPointerMove:A,onPointerUp:D,onPointerOut:B},f&&a.createElement(u.E,{position:[0,-$,0]},a.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:g,ref:F})),a.createElement("mesh",{visible:!1,position:[0,(N+$)/2,0],userData:R},a.createElement("cylinderGeometry",{args:[1.4*j,1.4*j,N+$,8,1]})),a.createElement(i.N,{transparent:!0,raycast:()=>null,depthTest:y,points:[0,0,0,0,N,0],lineWidth:w,side:l.$EB,color:L,opacity:E,polygonOffset:!0,renderOrder:v,polygonOffsetFactor:-10,fog:!1}),a.createElement("mesh",{raycast:()=>null,position:[0,N+$/2,0],renderOrder:v},a.createElement("coneGeometry",{args:[j,$,24,1]}),a.createElement("meshBasicMaterial",{transparent:!0,depthTest:y,color:L,opacity:E,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},g=new l.Pq0,y=new l.Pq0,x=e=>180*e/Math.PI,w=e=>{let t=((e,t)=>{let r=Math.floor(e/t);return e-(r=r<0?r+1:r)*t})(e,2*Math.PI);return 1e-6>Math.abs(t)?0:(t<0&&(t+=2*Math.PI),t)},P=new l.kn4,h=new l.Pq0,b=new l.RlV,E=new l.Pq0,v=({dir1:e,dir2:t,axis:r})=>{let{rotationLimits:n,annotations:s,annotationsClass:p,depthTest:d,scale:m,lineWidth:f,fixed:v,axisColors:C,hoveredColor:M,renderOrder:k,opacity:R,onDragStart:q,onDrag:F,onDragEnd:S,userData:z}=a.useContext(c),O=(0,o.C)(e=>e.controls),W=a.useRef(null),I=a.useRef(null),T=a.useRef(0),A=a.useRef(0),D=a.useRef(null),[B,N]=a.useState(!1),j=a.useCallback(e=>{s&&(W.current.innerText=`${x(A.current).toFixed(0)}\xba`,W.current.style.display="block"),e.stopPropagation();let t=e.point.clone(),n=new l.Pq0().setFromMatrixPosition(I.current.matrixWorld),o=new l.Pq0().setFromMatrixColumn(I.current.matrixWorld,0).normalize(),a=new l.Pq0().setFromMatrixColumn(I.current.matrixWorld,1).normalize(),i=new l.Pq0().setFromMatrixColumn(I.current.matrixWorld,2).normalize(),u=new l.Zcv().setFromNormalAndCoplanarPoint(i,n);D.current={clickPoint:t,origin:n,e1:o,e2:a,normal:i,plane:u},q({component:"Rotator",axis:r,origin:n,directions:[o,a,i]}),O&&(O.enabled=!1),e.target.setPointerCapture(e.pointerId)},[s,O,q,r]),$=a.useCallback(e=>{if(e.stopPropagation(),B||N(!0),D.current){let{clickPoint:t,origin:o,e1:a,e2:i,normal:u,plane:c}=D.current,[p,d]=(null==n?void 0:n[r])||[void 0,void 0];b.copy(e.ray),b.intersectPlane(c,E),b.direction.negate(),b.intersectPlane(c,E);let m=((e,t,r,n,o)=>{g.copy(e).sub(r),y.copy(t).sub(r);let a=n.dot(n),l=o.dot(o),i=g.dot(n)/a,u=g.dot(o)/l,c=y.dot(n)/a;return Math.atan2(y.dot(o)/l,c)-Math.atan2(u,i)})(t,E,o,a,i),f=x(m);e.shiftKey&&(m=(f=10*Math.round(f/10))*Math.PI/180),void 0!==p&&void 0!==d&&d-p<2*Math.PI?(m=(m=w(m))>Math.PI?m-2*Math.PI:m,m=l.cj9.clamp(m,p-T.current,d-T.current),A.current=T.current+m):(A.current=w(T.current+m),A.current=A.current>Math.PI?A.current-2*Math.PI:A.current),s&&(f=x(A.current),W.current.innerText=`${f.toFixed(0)}\xba`),P.makeRotationAxis(u,m),h.copy(o).applyMatrix4(P).sub(o).negate(),P.setPosition(h),F(P)}},[s,F,B,n,r]),U=a.useCallback(e=>{s&&(W.current.style.display="none"),e.stopPropagation(),T.current=A.current,D.current=null,S(),O&&(O.enabled=!0),e.target.releasePointerCapture(e.pointerId)},[s,O,S]),L=a.useCallback(e=>{e.stopPropagation(),N(!1)},[]),V=a.useMemo(()=>{let r=e.clone().normalize(),n=t.clone().normalize();return new l.kn4().makeBasis(r,n,r.clone().cross(n))},[e,t]),G=v?.65:.65*m,Q=a.useMemo(()=>{let e=[];for(let t=0;t<=32;t++){let r=Math.PI/2*t/32;e.push(new l.Pq0(Math.cos(r)*G,Math.sin(r)*G,0))}return e},[G]);return a.createElement("group",{ref:I,onPointerDown:j,onPointerMove:$,onPointerUp:U,onPointerOut:L,matrix:V,matrixAutoUpdate:!1},s&&a.createElement(u.E,{position:[G,G,0]},a.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:W})),a.createElement(i.N,{points:Q,lineWidth:4*f,visible:!1,userData:z}),a.createElement(i.N,{transparent:!0,raycast:()=>null,depthTest:d,points:Q,lineWidth:f,side:l.$EB,color:B?M:C[r],opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,renderOrder:k,fog:!1}))},C=new l.RlV,M=new l.Pq0,k=new l.kn4,R=({dir1:e,dir2:t,axis:r})=>{let{translation:n,translationLimits:s,annotations:p,annotationsClass:d,depthTest:m,scale:f,lineWidth:g,fixed:y,axisColors:x,hoveredColor:w,opacity:P,renderOrder:h,onDragStart:b,onDrag:E,onDragEnd:v,userData:R}=a.useContext(c),q=(0,o.C)(e=>e.controls),F=a.useRef(null),S=a.useRef(null),z=a.useRef(null),O=a.useRef(0),W=a.useRef(0),[I,T]=a.useState(!1),A=a.useCallback(e=>{p&&(F.current.innerText=`${n.current[(r+1)%3].toFixed(2)}, ${n.current[(r+2)%3].toFixed(2)}`,F.current.style.display="block"),e.stopPropagation();let t=e.point.clone(),o=new l.Pq0().setFromMatrixPosition(S.current.matrixWorld),a=new l.Pq0().setFromMatrixColumn(S.current.matrixWorld,0).normalize(),i=new l.Pq0().setFromMatrixColumn(S.current.matrixWorld,1).normalize(),u=new l.Pq0().setFromMatrixColumn(S.current.matrixWorld,2).normalize();z.current={clickPoint:t,e1:a,e2:i,plane:new l.Zcv().setFromNormalAndCoplanarPoint(u,o)},O.current=n.current[(r+1)%3],W.current=n.current[(r+2)%3],b({component:"Slider",axis:r,origin:o,directions:[a,i,u]}),q&&(q.enabled=!1),e.target.setPointerCapture(e.pointerId)},[p,q,b,r]),D=a.useCallback(e=>{if(e.stopPropagation(),I||T(!0),z.current){let{clickPoint:t,e1:o,e2:a,plane:l}=z.current,[i,u]=(null==s?void 0:s[(r+1)%3])||[void 0,void 0],[c,d]=(null==s?void 0:s[(r+2)%3])||[void 0,void 0];C.copy(e.ray),C.intersectPlane(l,M),C.direction.negate(),C.intersectPlane(l,M),M.sub(t);let[m,f]=((e,t,r)=>{let n=Math.abs(e.x)>=Math.abs(e.y)&&Math.abs(e.x)>=Math.abs(e.z)?0:Math.abs(e.y)>=Math.abs(e.x)&&Math.abs(e.y)>=Math.abs(e.z)?1:2,o=[0,1,2].sort((e,r)=>Math.abs(t.getComponent(r))-Math.abs(t.getComponent(e))),a=n===o[0]?o[1]:o[0],l=e.getComponent(n),i=e.getComponent(a),u=t.getComponent(n),c=t.getComponent(a),s=r.getComponent(n),p=(r.getComponent(a)-i/l*s)/(c-i/l*u);return[(s-p*u)/l,p]})(o,a,M);void 0!==i&&(m=Math.max(m,i-O.current)),void 0!==u&&(m=Math.min(m,u-O.current)),void 0!==c&&(f=Math.max(f,c-W.current)),void 0!==d&&(f=Math.min(f,d-W.current)),n.current[(r+1)%3]=O.current+m,n.current[(r+2)%3]=W.current+f,p&&(F.current.innerText=`${n.current[(r+1)%3].toFixed(2)}, ${n.current[(r+2)%3].toFixed(2)}`),k.makeTranslation(m*o.x+f*a.x,m*o.y+f*a.y,m*o.z+f*a.z),E(k)}},[p,E,I,n,s,r]),B=a.useCallback(e=>{p&&(F.current.style.display="none"),e.stopPropagation(),z.current=null,v(),q&&(q.enabled=!0),e.target.releasePointerCapture(e.pointerId)},[p,q,v]),N=a.useCallback(e=>{e.stopPropagation(),T(!1)},[]),j=a.useMemo(()=>{let r=e.clone().normalize(),n=t.clone().normalize();return new l.kn4().makeBasis(r,n,r.clone().cross(n))},[e,t]),$=y?1/7:f/7,U=y?.225:.225*f,L=I?w:x[r],V=a.useMemo(()=>[new l.Pq0(0,0,0),new l.Pq0(0,U,0),new l.Pq0(U,U,0),new l.Pq0(U,0,0),new l.Pq0(0,0,0)],[U]);return a.createElement("group",{ref:S,matrix:j,matrixAutoUpdate:!1},p&&a.createElement(u.E,{position:[0,0,0]},a.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:d,ref:F})),a.createElement("group",{position:[1.7*$,1.7*$,0]},a.createElement("mesh",{visible:!0,onPointerDown:A,onPointerMove:D,onPointerUp:B,onPointerOut:N,scale:U,userData:R,renderOrder:h},a.createElement("planeGeometry",null),a.createElement("meshBasicMaterial",{transparent:!0,depthTest:m,color:L,polygonOffset:!0,polygonOffsetFactor:-10,side:l.$EB,fog:!1})),a.createElement(i.N,{position:[-U/2,-U/2,0],transparent:!0,depthTest:m,points:V,lineWidth:g,color:L,opacity:P,polygonOffset:!0,polygonOffsetFactor:-10,userData:R,fog:!1,renderOrder:h})))},q=new l.Pq0,F=new l.Pq0,S=new l.Pq0,z=(e,t,r,n=1)=>{let o=q.set(e.x/r.width*2-1,-(2*(e.y/r.height))+1,n);return o.unproject(t),o},O=(e,t,r,n)=>{let o=((e,t,r)=>{let n=r.width/2,o=r.height/2;t.updateMatrixWorld(!1);let a=e.project(t);return a.x=a.x*n+n,a.y=-(a.y*o)+o,a})(S.copy(e),r,n),a=0;for(let l=0;l<2;++l){let i=F.copy(o).setComponent(l,o.getComponent(l)+t),u=z(i,r,n,i.z);a=Math.max(a,e.distanceTo(u))}return a},W=new l.Pq0,I=new l.Pq0,T=new l.Pq0(0,1,0),A=new l.Pq0,D=new l.kn4,B=({direction:e,axis:t})=>{let{scaleLimits:r,annotations:n,annotationsClass:i,depthTest:s,scale:p,lineWidth:d,fixed:m,axisColors:f,hoveredColor:g,opacity:y,renderOrder:x,onDragStart:w,onDrag:P,onDragEnd:h,userData:b}=a.useContext(c),E=(0,o.C)(e=>e.size),v=(0,o.C)(e=>e.controls),C=a.useRef(null),M=a.useRef(null),k=a.useRef(null),R=a.useRef(1),q=a.useRef(1),F=a.useRef(null),[S,z]=a.useState(!1),B=m?1.2:1.2*p,N=a.useCallback(r=>{n&&(C.current.innerText=`${q.current.toFixed(2)}`,C.current.style.display="block"),r.stopPropagation();let o=new l.kn4().extractRotation(M.current.matrixWorld),a=r.point.clone(),i=new l.Pq0().setFromMatrixPosition(M.current.matrixWorld),u=e.clone().applyMatrix4(o).normalize(),c=M.current.matrixWorld.clone(),s=c.clone().invert();F.current={clickPoint:a,dir:u,mPLG:c,mPLGInv:s,offsetMultiplier:m?1/O(M.current.getWorldPosition(W),p,r.camera,E):1},w({component:"Sphere",axis:t,origin:i,directions:[u]}),v&&(v.enabled=!1),r.target.setPointerCapture(r.pointerId)},[n,v,e,w,t,m,p,E]),j=a.useCallback(e=>{if(e.stopPropagation(),S||z(!0),F.current){let{clickPoint:o,dir:a,mPLG:l,mPLGInv:i,offsetMultiplier:u}=F.current,[c,s]=(null==r?void 0:r[t])||[1e-5,void 0],d=((e,t,r,n)=>{let o=t.dot(t),a=t.dot(e)-t.dot(r),l=t.dot(n);return 0===l?-a/o:(W.copy(n).multiplyScalar(o/l).sub(t),I.copy(n).multiplyScalar(a/l).add(r).sub(e),-W.dot(I)/W.dot(W))})(o,a,e.ray.origin,e.ray.direction)*u,f=Math.pow(2,.2*(m?d:d/p));e.shiftKey&&(f=Math.round(10*f)/10),f=Math.max(f,c/R.current),void 0!==s&&(f=Math.min(f,s/R.current)),q.current=R.current*f,k.current.position.set(0,B+d,0),n&&(C.current.innerText=`${q.current.toFixed(2)}`),A.set(1,1,1),A.setComponent(t,f),D.makeScale(A.x,A.y,A.z).premultiply(l).multiply(i),P(D)}},[n,B,P,S,r,t]),$=a.useCallback(e=>{n&&(C.current.style.display="none"),e.stopPropagation(),R.current=q.current,F.current=null,k.current.position.set(0,B,0),h(),v&&(v.enabled=!0),e.target.releasePointerCapture(e.pointerId)},[n,v,h,B]),U=a.useCallback(e=>{e.stopPropagation(),z(!1)},[]),{radius:L,matrixL:V}=a.useMemo(()=>{let t=m?d/p*1.8:p/22.5,r=new l.PTz().setFromUnitVectors(T,e.clone().normalize());return{radius:t,matrixL:new l.kn4().makeRotationFromQuaternion(r)}},[e,p,d,m]),G=S?g:f[t];return a.createElement("group",{ref:M},a.createElement("group",{matrix:V,matrixAutoUpdate:!1,onPointerDown:N,onPointerMove:j,onPointerUp:$,onPointerOut:U},n&&a.createElement(u.E,{position:[0,B/2,0]},a.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:i,ref:C})),a.createElement("mesh",{ref:k,position:[0,B,0],renderOrder:x,userData:b},a.createElement("sphereGeometry",{args:[L,12,12]}),a.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:G,opacity:y,polygonOffset:!0,polygonOffsetFactor:-10}))))},N=new l.kn4,j=new l.kn4,$=new l.kn4,U=new l.kn4,L=new l.kn4,V=new l.kn4,G=new l.kn4,Q=new l.kn4,_=new l.kn4,H=new l.NRn,Z=new l.NRn,K=new l.Pq0,X=new l.Pq0,Y=new l.Pq0,J=new l.Pq0,ee=new l.Pq0,et=new l.Pq0(1,0,0),er=new l.Pq0(0,1,0),en=new l.Pq0(0,0,1),eo=a.forwardRef(({enabled:e=!0,matrix:t,onDragStart:r,onDrag:i,onDragEnd:u,autoTransform:s=!0,anchor:p,disableAxes:d=!1,disableSliders:m=!1,disableRotations:g=!1,disableScaling:y=!1,activeAxes:x=[!0,!0,!0],offset:w=[0,0,0],rotation:P=[0,0,0],scale:h=1,lineWidth:b=4,fixed:E=!1,translationLimits:C,rotationLimits:M,scaleLimits:k,depthTest:q=!0,renderOrder:F=500,axisColors:S=["#ff2060","#20df80","#2080ff"],hoveredColor:z="#ffff40",annotations:W=!1,annotationsClass:I,opacity:T=1,visible:A=!0,userData:D,children:eo,...ea},el)=>{let ei=(0,o.C)(e=>e.invalidate),eu=a.useRef(null),ec=a.useRef(null),es=a.useRef(null),ep=a.useRef(null),ed=a.useRef([0,0,0]),em=a.useRef(new l.Pq0(1,1,1)),ef=a.useRef(new l.Pq0(1,1,1));a.useLayoutEffect(()=>{p&&(ep.current.updateWorldMatrix(!0,!0),U.copy(ep.current.matrixWorld).invert(),H.makeEmpty(),ep.current.traverse(e=>{e.geometry&&(e.geometry.boundingBox||e.geometry.computeBoundingBox(),V.copy(e.matrixWorld).premultiply(U),Z.copy(e.geometry.boundingBox),Z.applyMatrix4(V),H.union(Z))}),K.copy(H.max).add(H.min).multiplyScalar(.5),X.copy(H.max).sub(H.min).multiplyScalar(.5),Y.copy(X).multiply(new l.Pq0(...p)).add(K),J.set(...w).add(Y),es.current.position.copy(J),ei())});let eg=a.useMemo(()=>({onDragStart:e=>{N.copy(ec.current.matrix),j.copy(ec.current.matrixWorld),r&&r(e),ei()},onDrag:e=>{$.copy(eu.current.matrixWorld),U.copy($).invert(),L.copy(j).premultiply(e),V.copy(L).premultiply(U),G.copy(N).invert(),Q.copy(V).multiply(G),s&&ec.current.matrix.copy(V),i&&i(V,Q,L,e),ei()},onDragEnd:()=>{u&&u(),ei()},translation:ed,translationLimits:C,rotationLimits:M,axisColors:S,hoveredColor:z,opacity:T,scale:h,lineWidth:b,fixed:E,depthTest:q,renderOrder:F,userData:D,annotations:W,annotationsClass:I}),[r,i,u,ed,C,M,k,q,h,b,E,...S,z,T,D,s,W,I]),ey=new l.Pq0;return(0,o.D)(e=>{if(E){let t=O(es.current.getWorldPosition(ey),h,e.camera,e.size);em.current.setScalar(t)}t&&t instanceof l.kn4&&(ec.current.matrix=t),ec.current.updateWorldMatrix(!0,!0),_.makeRotationFromEuler(es.current.rotation).setPosition(es.current.position).premultiply(ec.current.matrixWorld),ef.current.setFromMatrixScale(_),ee.copy(em.current).divide(ef.current),(Math.abs(es.current.scale.x-ee.x)>1e-4||Math.abs(es.current.scale.y-ee.y)>1e-4||Math.abs(es.current.scale.z-ee.z)>1e-4)&&(es.current.scale.copy(ee),e.invalidate())}),a.useImperativeHandle(el,()=>ec.current,[]),a.createElement(c.Provider,{value:eg},a.createElement("group",{ref:eu},a.createElement("group",(0,n.A)({ref:ec,matrix:t,matrixAutoUpdate:!1},ea),a.createElement("group",{visible:A,ref:es,position:w,rotation:P},e&&a.createElement(a.Fragment,null,!d&&x[0]&&a.createElement(f,{axis:0,direction:et}),!d&&x[1]&&a.createElement(f,{axis:1,direction:er}),!d&&x[2]&&a.createElement(f,{axis:2,direction:en}),!m&&x[0]&&x[1]&&a.createElement(R,{axis:2,dir1:et,dir2:er}),!m&&x[0]&&x[2]&&a.createElement(R,{axis:1,dir1:en,dir2:et}),!m&&x[2]&&x[1]&&a.createElement(R,{axis:0,dir1:er,dir2:en}),!g&&x[0]&&x[1]&&a.createElement(v,{axis:2,dir1:et,dir2:er}),!g&&x[0]&&x[2]&&a.createElement(v,{axis:1,dir1:en,dir2:et}),!g&&x[2]&&x[1]&&a.createElement(v,{axis:0,dir1:er,dir2:en}),!y&&x[0]&&a.createElement(B,{axis:0,direction:et}),!y&&x[1]&&a.createElement(B,{axis:1,direction:er}),!y&&x[2]&&a.createElement(B,{axis:2,direction:en}))),a.createElement("group",{ref:ep},eo))))})},78925:(e,t,r)=>{r.d(t,{j:()=>l});var n=r(14232),o=r(66691),a=r(88360);function l(e,t,r){let l=(0,a.C)(e=>e.size),i=(0,a.C)(e=>e.viewport),u="number"==typeof e?e:l.width*i.dpr,c="number"==typeof t?t:l.height*i.dpr,s=("number"==typeof e?r:e)||{},{samples:p=0,depth:d,...m}=s,f=null!=d?d:s.depthBuffer,g=n.useMemo(()=>{let e=new o.nWS(u,c,{minFilter:o.k6q,magFilter:o.k6q,type:o.ix0,...m});return f&&(e.depthTexture=new o.VCu(u,c,o.RQf)),e.samples=p,e},[]);return n.useLayoutEffect(()=>{g.setSize(u,c),p&&(g.samples=p)},[p,g,u,c]),n.useEffect(()=>()=>g.dispose(),[]),g}},99893:(e,t,r)=>{r.d(t,{o:()=>l});var n=r(44501),o=r(66691),a=r(14232);let l=a.forwardRef(function({children:e,object:t,disable:r,disableX:l,disableY:i,disableZ:u,left:c,right:s,top:p,bottom:d,front:m,back:f,onCentered:g,precise:y=!0,cacheKey:x=0,...w},P){let h=a.useRef(null),b=a.useRef(null),E=a.useRef(null),[v]=a.useState(()=>new o.NRn),[C]=a.useState(()=>new o.Pq0),[M]=a.useState(()=>new o.iyt);return a.useLayoutEffect(()=>{b.current.matrixWorld.identity(),v.setFromObject(null!=t?t:E.current,y);let e=v.max.x-v.min.x,n=v.max.y-v.min.y,o=v.max.z-v.min.z;v.getCenter(C),v.getBoundingSphere(M);let a=p?n/2:d?-n/2:0,x=c?-e/2:s?e/2:0,w=m?o/2:f?-o/2:0;b.current.position.set(r||l?0:-C.x+x,r||i?0:-C.y+a,r||u?0:-C.z+w),null==g||g({parent:h.current.parent,container:h.current,width:e,height:n,depth:o,boundingBox:v,boundingSphere:M,center:C,verticalAlignment:a,horizontalAlignment:x,depthAlignment:w})},[x,g,p,c,m,r,l,i,u,t,y,s,d,f,v,C,M]),a.useImperativeHandle(P,()=>h.current,[]),a.createElement("group",(0,n.A)({ref:h},w),a.createElement("group",{ref:b},a.createElement("group",{ref:E},e)))})}}]);
//# sourceMappingURL=483-f5c06b6ab3ad7aca.js.map