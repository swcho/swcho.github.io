<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="726px" preserveAspectRatio="none" style="width:931px;height:726px;background:#FFFFFF;" version="1.1" viewBox="0 0 931 726" width="931px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="714.48" style="stroke:#181818;stroke-width:0.5;" width="479.5" x="56" y="6"/><text fill="#000000" font-family="D2Coding" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="239.75" y="18.09">@temporal/worker</text><rect fill="#DDDDDD" height="714.48" style="stroke:#181818;stroke-width:0.5;" width="176" x="537.5" y="6"/><text fill="#000000" font-family="D2Coding" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="573" y="18.09">workflow-worker</text><rect fill="#FFFFFF" height="481.84" style="stroke:#181818;stroke-width:1.0;" width="10" x="83" y="112.32"/><rect fill="#FFFFFF" height="205.64" style="stroke:#181818;stroke-width:1.0;" width="10" x="88" y="149.4"/><rect fill="#FFFFFF" height="188.04" style="stroke:#181818;stroke-width:1.0;" width="10" x="88" y="392.12"/><rect fill="#FFFFFF" height="9" style="stroke:#181818;stroke-width:1.0;" width="10" x="83" y="623.24"/><rect fill="#FFFFFF" height="130.32" style="stroke:#181818;stroke-width:1.0;" width="10" x="254" y="224.72"/><rect fill="#FFFFFF" height="87.24" style="stroke:#181818;stroke-width:1.0;" width="10" x="259" y="253.8"/><rect fill="#FFFFFF" height="58.16" style="stroke:#181818;stroke-width:1.0;" width="10" x="264" y="282.88"/><rect fill="#FFFFFF" height="143.96" style="stroke:#181818;stroke-width:1.0;" width="10" x="432" y="436.2"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="620.5" y="524.92"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="81.24" y2="641.24"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="81.24" y2="641.24"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="258.5" x2="258.5" y1="193.02" y2="641.24"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="436.5" x2="436.5" y1="435.74" y2="641.24"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="625.5" x2="625.5" y1="485.1" y2="641.24"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="750.5" x2="750.5" y1="81.24" y2="641.24"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="858.5" x2="858.5" y1="563.54" y2="641.24"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="28" x="5" y="78.02">User</text><ellipse cx="22" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22,21.5 L22,48.5 M9,29.5 L35,29.5 M22,48.5 L9,63.5 M22,48.5 L35,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="28" x="5" y="653.26">User</text><ellipse cx="22" cy="664.98" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22,672.98 L22,699.98 M9,680.98 L35,680.98 M22,699.98 L9,714.98 M22,699.98 L35,714.98 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="60" y="50"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="42" x="67" y="70.02">Worker</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="60" y="640.24"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="42" x="67" y="660.26">Worker</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="185.5" y="640.24"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="133" x="192.5" y="660.26">WorkflowCodeBundler</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="342.5" y="640.24"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="175" x="349.5" y="660.26">ThreadedVMWorkflowCreator</text><rect fill="#E2E2F0" height="46.48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="541.5" y="640.24"/><text fill="#000000" font-family="D2Coding" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="597.5" y="660.26">«worker»</text><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="154" x="548.5" y="676.5">workflow-worker-thread</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="719.5" y="50"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="49" x="726.5" y="70.02">webpack</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="719.5" y="640.24"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="49" x="726.5" y="660.26">webpack</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="792.5" y="640.24"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="119" x="799.5" y="660.26">VMWorkflowCreator</text><rect fill="#FFFFFF" height="481.84" style="stroke:#181818;stroke-width:1.0;" width="10" x="83" y="112.32"/><rect fill="#FFFFFF" height="205.64" style="stroke:#181818;stroke-width:1.0;" width="10" x="88" y="149.4"/><rect fill="#FFFFFF" height="188.04" style="stroke:#181818;stroke-width:1.0;" width="10" x="88" y="392.12"/><rect fill="#FFFFFF" height="9" style="stroke:#181818;stroke-width:1.0;" width="10" x="83" y="623.24"/><rect fill="#FFFFFF" height="130.32" style="stroke:#181818;stroke-width:1.0;" width="10" x="254" y="224.72"/><rect fill="#FFFFFF" height="87.24" style="stroke:#181818;stroke-width:1.0;" width="10" x="259" y="253.8"/><rect fill="#FFFFFF" height="58.16" style="stroke:#181818;stroke-width:1.0;" width="10" x="264" y="282.88"/><rect fill="#FFFFFF" height="143.96" style="stroke:#181818;stroke-width:1.0;" width="10" x="432" y="436.2"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="620.5" y="524.92"/><polygon fill="#181818" points="71,108.32,81,112.32,71,116.32,75,112.32" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22" x2="77" y1="112.32" y2="112.32"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="42" x="29" y="107.33">create</text><line style="stroke:#181818;stroke-width:1.0;" x1="93" x2="140" y1="136.4" y2="136.4"/><line style="stroke:#181818;stroke-width:1.0;" x1="140" x2="140" y1="136.4" y2="149.4"/><line style="stroke:#181818;stroke-width:1.0;" x1="99" x2="140" y1="149.4" y2="149.4"/><polygon fill="#181818" points="109,145.4,99,149.4,109,153.4,105,149.4" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="119" x="105" y="131.41">getOrCreateBundle</text><polygon fill="#181818" points="173.5,164.4,183.5,168.4,173.5,172.4,177.5,168.4" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="179.5" y1="168.4" y2="168.4"/><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="185.5" y="162.4"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="133" x="192.5" y="182.42">WorkflowCodeBundler</text><polygon fill="#181818" points="242,220.72,252,224.72,242,228.72,246,224.72" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="248" y1="224.72" y2="224.72"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="84" x="105" y="219.73">createBundle</text><polygon fill="#181818" points="247,249.8,257,253.8,247,257.8,251,253.8" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="253" y1="253.8" y2="253.8"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="91" x="105" y="248.81">genEntrypoint</text><polygon fill="#181818" points="252,278.88,262,282.88,252,286.88,256,282.88" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="258" y1="282.88" y2="282.88"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="42" x="105" y="277.89">bundle</text><polygon fill="#181818" points="739,307.96,749,311.96,739,315.96,743,311.96" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="745" y1="311.96" y2="311.96"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="49" x="281" y="306.97">webpack</text><polygon fill="#181818" points="739,337.04,749,341.04,739,345.04,743,341.04" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="264" x2="745" y1="341.04" y2="341.04"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="49" x="271" y="336.05">compile</text><polygon fill="#181818" points="104,351.04,94,355.04,104,359.04,100,355.04" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="98" x2="258" y1="355.04" y2="355.04"/><line style="stroke:#181818;stroke-width:1.0;" x1="93" x2="140" y1="379.12" y2="379.12"/><line style="stroke:#181818;stroke-width:1.0;" x1="140" x2="140" y1="379.12" y2="392.12"/><line style="stroke:#181818;stroke-width:1.0;" x1="99" x2="140" y1="392.12" y2="392.12"/><polygon fill="#181818" points="109,388.12,99,392.12,109,396.12,105,392.12" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="147" x="105" y="374.13">createWorkflowCreator</text><polygon fill="#181818" points="330.5,422.2,340.5,426.2,330.5,430.2,334.5,426.2" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="336.5" y1="426.2" y2="426.2"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="42" x="105" y="421.21">create</text><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="342.5" y="405.12"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="175" x="349.5" y="425.14">ThreadedVMWorkflowCreator</text><polygon fill="#181818" points="529.5,448.36,539.5,452.36,529.5,456.36,533.5,452.36" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="535.5" y1="452.36" y2="452.36"/><rect fill="#E2E2F0" height="46.48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="541.5" y="446.36"/><text fill="#000000" font-family="D2Coding" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="597.5" y="466.38">«worker»</text><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="154" x="548.5" y="482.62">workflow-worker-thread</text><polygon fill="#181818" points="608.5,520.92,618.5,524.92,608.5,528.92,612.5,524.92" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="442" x2="614.5" y1="524.92" y2="524.92"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="28" x="449" y="519.93">init</text><polygon fill="#181818" points="780.5,534.92,790.5,538.92,780.5,542.92,784.5,538.92" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="625.5" x2="786.5" y1="538.92" y2="538.92"/><rect fill="#E2E2F0" height="30.24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="792.5" y="532.92"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="119" x="799.5" y="552.94">VMWorkflowCreator</text><polygon fill="#181818" points="104,576.16,94,580.16,104,584.16,100,580.16" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="98" x2="436" y1="580.16" y2="580.16"/><polygon fill="#181818" points="33,590.16,23,594.16,33,598.16,29,594.16" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="27" x2="87" y1="594.16" y2="594.16"/><polygon fill="#181818" points="71,619.24,81,623.24,71,627.24,75,623.24" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22" x2="77" y1="623.24" y2="623.24"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="21" x="29" y="618.25">run</text><!--MD5=[86623d3a1cc63e3777b8f1a65ece49f3]
@startuml initial

skinparam defaultFontName D2Coding

ACTOR User

box "@temporal/worker"
participant Worker
participant WorkflowCodeBundler
participant ThreadedVMWorkflowCreator
end box

box "workflow-worker"
participant "workflow-worker-thread" as workerThread <<worker>>
end box


participant webpack

User -> Worker: create
activate Worker
Worker -> Worker: getOrCreateBundle
activate Worker
Worker -> WorkflowCodeBundler**
Worker -> WorkflowCodeBundler: createBundle
activate WorkflowCodeBundler
Worker -> WorkflowCodeBundler: genEntrypoint
activate WorkflowCodeBundler
Worker -> WorkflowCodeBundler: bundle
activate WorkflowCodeBundler
WorkflowCodeBundler -> webpack: webpack
WorkflowCodeBundler -> webpack: compile 
deactivate WorkflowCodeBundler
deactivate WorkflowCodeBundler
return
deactivate Worker

Worker -> Worker: createWorkflowCreator
activate Worker

Worker -> ThreadedVMWorkflowCreator**: create
activate ThreadedVMWorkflowCreator
ThreadedVMWorkflowCreator -> workerThread**
ThreadedVMWorkflowCreator - -> workerThread: init
activate workerThread
workerThread -> VMWorkflowCreator**
deactivate workerThread
return
deactivate Worker
return

User -> Worker: run
activate Worker

@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 KST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ko
Country: KR
--></g></svg>