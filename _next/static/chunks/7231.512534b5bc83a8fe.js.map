{"version":3,"file":"static/chunks/7231.512534b5bc83a8fe.js","mappings":"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","sources":["webpack://_N_E/./pages/blogs/2021-10-05-scales/VisxLegend.tsx","webpack://_N_E/./pages/blogs/2021-10-05-scales/Legend.ts","webpack://_N_E/./node_modules/@visx/axis/esm/axis/AxisLeft.js","webpack://_N_E/./node_modules/@visx/axis/esm/axis/AxisTop.js","webpack://_N_E/./node_modules/@visx/legend/esm/legends/Legend/LegendItem.js","webpack://_N_E/./node_modules/@visx/legend/esm/legends/Legend/LegendLabel.js","webpack://_N_E/./node_modules/@visx/legend/esm/shapes/Rect.js","webpack://_N_E/./node_modules/@visx/legend/esm/shapes/Circle.js","webpack://_N_E/./node_modules/@visx/legend/esm/shapes/Line.js","webpack://_N_E/./node_modules/@visx/legend/esm/util/renderShape.js","webpack://_N_E/./node_modules/@visx/legend/esm/legends/Legend/LegendShape.js","webpack://_N_E/./node_modules/@visx/legend/esm/util/valueOrIdentity.js","webpack://_N_E/./node_modules/@visx/legend/esm/util/labelTransformFactory.js","webpack://_N_E/./node_modules/@visx/legend/esm/legends/Legend/index.js","webpack://_N_E/./node_modules/@visx/legend/esm/util/defaultDomain.js","webpack://_N_E/./node_modules/@visx/legend/esm/legends/Linear.js","webpack://_N_E/./node_modules/@visx/scale/esm/scales/band.js","webpack://_N_E/./pages/blogs/2021-10-05-scales/utils.ts","webpack://_N_E/./pages/blogs/2021-10-05-scales/Scales.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport * as React from 'react';\n\nimport { format } from 'd3-format';\nimport { interpolate, interpolateRound, quantize } from 'd3-interpolate';\nimport { ScaleLinear, ScaleSequential } from 'd3-scale';\n\nimport { AxisBottom } from '@visx/axis';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isLinear<T>(scale: any): scale is T {\n  return Boolean(scale.interpolate);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isSequential<T>(scale: any): scale is T {\n  return Boolean(scale.interpolator);\n}\n\n// function isLinear<T>(scale: any): scale is T {\n//   // eslint-disable-next-line @typescript-eslint/no-explicit-any\n//   return Boolean((scale as any).interpolate);\n// }\n\nfunction ramp(color: (num: number) => string, n = 256) {\n  const canvas = document.createElement('canvas');\n  canvas.width = n;\n  canvas.height = 1;\n  const context = canvas.getContext('2d');\n  if (context) {\n    for (let i = 0; i < n; i += 1) {\n      context.fillStyle = color(i / (n - 1));\n      context.fillRect(i, 0, 1, 1);\n    }\n  }\n  return canvas;\n}\n\nexport type Props = {\n  className?: string;\n  children?: React.ReactNode;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  color: any;\n  title?: string;\n  tickSize?: number;\n  width?: number;\n  height?: number;\n  marginTop?: number;\n  marginRight?: number;\n  marginBottom?: number;\n  marginLeft?: number;\n  ticks?: number;\n  tickFormat?: ReturnType<typeof format> | string;\n  tickValues?: number[];\n};\n\nconst VisxLegend = React.memo((props: Props) => {\n  const {\n    className,\n    color,\n    title = '',\n    tickSize = 6,\n    width = 320,\n    height = 44 + tickSize,\n    marginTop = 18,\n    marginRight = 0,\n    marginBottom = 16 + tickSize,\n    marginLeft = 0,\n    ticks = width / 64,\n  } = props;\n\n  // adjustedScale = color\n  //   .copy()\n  //   .rangeRound(quantize(interpolate(marginLeft, width - marginRight), n));\n\n  // const scale = React.useMemo(() => {\n  //   if (isLinear<ScaleForAxis>(color)) {\n  //     console.log('VisxLegend: linear');\n  //     const n = Math.min(color.domain().length, color.range().length);\n  //     return color\n  //       .copy()\n  //       .rangeRound(quantize(interpolate(marginLeft, width - marginRight), n));\n  //   }\n  //   if (isSequential<ScaleSequentialForAxis>(color)) {\n  //     console.log('VisxLegend: sequential');\n  //     return Object.assign(\n  //       color\n  //         .copy()\n  //         .interpolator(interpolateRound(marginLeft, width - marginRight)),\n  //       {\n  //         range() {\n  //           return [marginLeft, width - marginRight];\n  //         },\n  //       }\n  //     );\n  //   }\n  //   return undefined;\n  // }, [color]);\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const refScale = React.useRef<any>(undefined);\n  const [imageUrl, setImageUrl] = React.useState('');\n  React.useEffect(() => {\n    if (isLinear<ScaleLinear<number, unknown>>(color)) {\n      // eslint-disable-next-line no-console\n      console.log(`visx:${title}: linear`);\n      const n = Math.min(color.domain().length, color.range().length);\n      const scaleNext = color.copy().rangeRound(quantize(interpolate(marginLeft, width - marginRight), n));\n      refScale.current = scaleNext;\n      setImageUrl(ramp(color.copy().domain(quantize(interpolate(0, 1), n)) as ScaleLinear<number, string>).toDataURL());\n    }\n    if (isSequential<ScaleSequential<string, unknown>>(color)) {\n      // eslint-disable-next-line no-console\n      console.log(`visx:${title}: sequential`);\n      const scaleNext = Object.assign(\n        color.copy().interpolator(interpolateRound(marginLeft, width - marginRight))\n        // {\n        //   range() {\n        //     return [marginLeft, width - marginRight];\n        //   },\n        // }\n      );\n      refScale.current = scaleNext;\n      setImageUrl(ramp(color.interpolator()).toDataURL());\n    }\n  }, [color]);\n\n  return (\n    <svg\n      className={className}\n      width={width}\n      height={height}\n      viewBox={[0, 0, width, height].join(',')}\n      style={{\n        overflow: 'visible',\n        display: 'block',\n      }}\n    >\n      <image\n        preserveAspectRatio=\"none\"\n        x={marginLeft}\n        y={marginTop}\n        width={width - marginLeft - marginRight}\n        height={height - marginTop - marginBottom}\n        xlinkHref={imageUrl}\n      />\n      <g transform={`translate(0, ${height - marginBottom})`}>\n        {refScale.current && <AxisBottom scale={refScale.current} numTicks={ticks} />}\n        <text\n          x={marginLeft}\n          y={marginTop + marginBottom - height - 6}\n          fill=\"currentColor\"\n          textAnchor=\"start\"\n          fontWeight=\"bold\"\n        >\n          {title}\n        </text>\n      </g>\n    </svg>\n  );\n});\n\nexport default VisxLegend;\n","/* eslint-disable no-nested-ternary */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable no-param-reassign */\n\n/* eslint-disable @typescript-eslint/no-shadow */\nimport { range, quantile } from 'd3-array';\nimport { axisBottom } from 'd3-axis';\nimport { format } from 'd3-format';\nimport { quantize, interpolate, interpolateRound } from 'd3-interpolate';\nimport {\n  ScaleSequential,\n  ScaleSequentialQuantile,\n  ScaleQuantize,\n  ScaleQuantile,\n  ScaleThreshold,\n  ScaleLinear,\n  ScaleOrdinal,\n  scaleLinear,\n  scaleBand,\n} from 'd3-scale';\nimport { create, Selection, BaseType } from 'd3-selection';\n\ntype ScaleThresholdLike<Output> = ScaleQuantize<number> | ScaleQuantile<number> | ScaleThreshold<number, Output>;\n\ntype Scale<Output> =\n  | ScaleLinear<unknown, Output>\n  | ScaleSequential<Output>\n  | ScaleSequentialQuantile<Output>\n  | ScaleThresholdLike<Output>\n  | ScaleOrdinal<number, Output>;\ntype StringOutputScale = Scale<string>;\n\nfunction isLinear(scale: StringOutputScale): scale is ScaleLinear<unknown, string> {\n  return (scale as any).interpolate;\n}\n\nfunction isSequential(scale: StringOutputScale): scale is ScaleSequential<string> | ScaleSequentialQuantile<string> {\n  return (scale as any).interpolator;\n}\n\nfunction isSequentialQuantile(scale: StringOutputScale): scale is ScaleSequentialQuantile<string> {\n  return !(scale as any).ticks;\n}\n\nfunction isThresholdLike(scale: StringOutputScale): scale is ScaleThresholdLike<string> {\n  return (scale as any).invertExtent;\n}\n\nfunction isQuantize(scale: StringOutputScale): scale is ScaleQuantize<number> {\n  return (scale as any).thresholds;\n}\n\nfunction isQuantile(scale: StringOutputScale): scale is ScaleQuantile<number> {\n  return (scale as any).quantile;\n}\n\nfunction isOrdinal(scale: StringOutputScale): scale is ScaleOrdinal<number, string> {\n  return scale as any;\n}\n\n// const scaleX = scaleSequential()\n//   .domain([0, 100])\n//   .interpolator(interpolateBlues);\n\nexport function notEmpty<TValue>(value: TValue | null | undefined | ''): value is TValue {\n  return value !== null && value !== undefined && value !== '';\n}\n\n// https://observablehq.com/@d3/color-legend#legend\n\nexport type Options = {\n  title?: string;\n  tickSize?: number;\n  width?: number;\n  height?: number;\n  marginTop?: number;\n  marginRight?: number;\n  marginBottom?: number;\n  marginLeft?: number;\n  ticks?: number;\n  tickFormat?: ReturnType<typeof format> | string;\n  tickValues?: number[];\n};\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function Legend(\n  color: StringOutputScale,\n  {\n    title = '',\n    tickSize = 6,\n    width = 320,\n    height = 44 + tickSize,\n    marginTop = 18,\n    marginRight = 0,\n    marginBottom = 16 + tickSize,\n    marginLeft = 0,\n    ticks = width / 64,\n    tickFormat,\n    tickValues,\n  }: Options = {}\n) {\n  function ramp(color: (num: number) => string, n = 256) {\n    const canvas = document.createElement('canvas');\n    canvas.width = n;\n    canvas.height = 1;\n    const context = canvas.getContext('2d');\n    if (context) {\n      for (let i = 0; i < n; i += 1) {\n        context.fillStyle = color(i / (n - 1));\n        context.fillRect(i, 0, 1, 1);\n      }\n    }\n    return canvas;\n  }\n\n  const svg = create('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', [0, 0, width, height].join(','))\n    .style('overflow', 'visible')\n    .style('display', 'block');\n\n  let tickAdjust = (\n    g: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  ): Selection<BaseType, unknown, SVGGElement, unknown> | void =>\n    g.selectAll('.tick line').attr('y1', marginTop + marginBottom - height);\n  let adjustedScale: any; // (domain: number) => string;\n\n  // Continuous\n  if (isLinear(color)) {\n    const n = Math.min(color.domain().length, color.range().length);\n    // eslint-disable-next-line no-console\n    console.log(`d3:${title}: Continuous`, { n });\n\n    adjustedScale = color.copy().rangeRound(quantize(interpolate(marginLeft, width - marginRight), n));\n\n    svg\n      .append('image')\n      .attr('x', marginLeft)\n      .attr('y', marginTop)\n      .attr('width', width - marginLeft - marginRight)\n      .attr('height', height - marginTop - marginBottom)\n      .attr('preserveAspectRatio', 'none')\n      .attr('xlink:href', ramp(color.copy().domain(quantize(interpolate(0, 1), n))).toDataURL());\n  }\n\n  // Sequential\n  else if (isSequential(color)) {\n    // eslint-disable-next-line no-console\n    console.log(`d3:${title}: Sequential`);\n\n    adjustedScale = Object.assign(color.copy().interpolator(interpolateRound(marginLeft, width - marginRight)), {\n      range() {\n        return [marginLeft, width - marginRight];\n      },\n    });\n\n    svg\n      .append('image')\n      .attr('x', marginLeft)\n      .attr('y', marginTop)\n      .attr('width', width - marginLeft - marginRight)\n      .attr('height', height - marginTop - marginBottom)\n      .attr('preserveAspectRatio', 'none')\n      .attr('xlink:href', ramp(color.interpolator()).toDataURL());\n\n    // scaleSequentialQuantile doesn’t implement ticks or tickFormat.\n    if (isSequentialQuantile(color)) {\n      // eslint-disable-next-line no-console\n      console.log(`d3:${title}: Sequential Quantile`);\n      if (tickValues === undefined) {\n        const n = Math.round(ticks + 1);\n        tickValues = range(n)\n          .map((i) => quantile(color.domain(), i / (n - 1)))\n          .filter(notEmpty);\n      }\n      if (typeof tickFormat !== 'function') {\n        tickFormat = format(tickFormat === undefined ? ',f' : tickFormat);\n      }\n    }\n  }\n\n  // Threshold\n  else if (isThresholdLike(color)) {\n    // eslint-disable-next-line no-console\n    console.log(`d3:${title}: Threshold`);\n    const thresholds = isQuantize(color)\n      ? color.thresholds() // scaleQuantize\n      : isQuantile(color)\n      ? color.quantiles() // scaleQuantile\n      : color.domain(); // scaleThreshold\n\n    const thresholdFormat =\n      tickFormat === undefined ? (d: any) => d : typeof tickFormat === 'string' ? format(tickFormat) : tickFormat;\n\n    const scale = scaleLinear()\n      .domain([-1, color.range().length - 1])\n      .rangeRound([marginLeft, width - marginRight]);\n\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data<number | string>(color.range())\n      .join('rect')\n      .attr('x', (_, i) => scale(i - 1))\n      .attr('y', marginTop)\n      .attr('width', (_, i) => scale(i) - scale(i - 1))\n      .attr('height', height - marginTop - marginBottom)\n      .attr('fill', (d) => d);\n\n    tickValues = range(thresholds.length);\n    tickFormat = (i) => typeof i === 'number' && thresholdFormat(thresholds[i]);\n    // tickFormat = (i: number) => thresholdFormat(thresholds[i], i);\n    adjustedScale = scale;\n  }\n\n  // Ordinal\n  else if (isOrdinal(color)) {\n    // eslint-disable-next-line no-console\n    console.log(`d3:${title}: Ordinal`);\n    const scale = scaleBand()\n      .domain(color.domain().map((value) => `${value}`))\n      .rangeRound([marginLeft, width - marginRight]);\n\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(color.domain())\n      .join('rect')\n      .attr('x', scale as any)\n      .attr('y', marginTop)\n      .attr('width', Math.max(0, scale.bandwidth() - 1))\n      .attr('height', height - marginTop - marginBottom)\n      .attr('fill', color);\n\n    tickAdjust = (): void => {};\n\n    adjustedScale = scale;\n  }\n\n  // console.log('Legend', { tickFormat, ticks });\n  svg\n    .append('g')\n    .attr('transform', `translate(0,${height - marginBottom})`)\n    .call(\n      axisBottom(adjustedScale)\n        .ticks(ticks, typeof tickFormat === 'string' ? tickFormat : undefined)\n        .tickFormat((typeof tickFormat === 'function' ? tickFormat : undefined) as any)\n        .tickSize(tickSize)\n        .tickValues(tickValues as any)\n    )\n    .call(tickAdjust as any)\n    .call((g) => g.select('.domain').remove())\n    .call((g) =>\n      g\n        .append('text')\n        .attr('x', marginLeft)\n        .attr('y', marginTop + marginBottom - height - 6)\n        .attr('fill', 'currentColor')\n        .attr('text-anchor', 'start')\n        .attr('font-weight', 'bold')\n        .attr('class', 'title')\n        .text(title)\n    );\n\n  return svg.node();\n}\n","var _excluded = [\"axisClassName\", \"labelOffset\", \"tickLength\", \"tickLabelProps\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport cx from 'classnames';\nimport Axis from './Axis';\nimport Orientation from '../constants/orientation';\nexport var leftTickLabelProps = {\n  dx: '-0.25em',\n  dy: '0.25em',\n  fill: '#222',\n  fontFamily: 'Arial',\n  fontSize: 10,\n  textAnchor: 'end'\n};\nexport default function AxisLeft(_ref) {\n  var axisClassName = _ref.axisClassName,\n    _ref$labelOffset = _ref.labelOffset,\n    labelOffset = _ref$labelOffset === void 0 ? 36 : _ref$labelOffset,\n    _ref$tickLength = _ref.tickLength,\n    tickLength = _ref$tickLength === void 0 ? 8 : _ref$tickLength,\n    tickLabelProps = _ref.tickLabelProps,\n    restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var tickLabelPropsFinal = typeof tickLabelProps === 'function' ? tickLabelProps : _extends({}, leftTickLabelProps, tickLabelProps);\n  return /*#__PURE__*/React.createElement(Axis, _extends({\n    axisClassName: cx('visx-axis-left', axisClassName),\n    labelOffset: labelOffset,\n    orientation: Orientation.left,\n    tickLabelProps: tickLabelPropsFinal,\n    tickLength: tickLength\n  }, restProps));\n}","var _excluded = [\"axisClassName\", \"labelOffset\", \"tickLength\", \"tickLabelProps\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport cx from 'classnames';\nimport Axis from './Axis';\nimport Orientation from '../constants/orientation';\nexport var topTickLabelProps = {\n  dy: '-0.75em',\n  fill: '#222',\n  fontFamily: 'Arial',\n  fontSize: 10,\n  textAnchor: 'middle'\n};\nexport default function AxisTop(_ref) {\n  var axisClassName = _ref.axisClassName,\n    _ref$labelOffset = _ref.labelOffset,\n    labelOffset = _ref$labelOffset === void 0 ? 8 : _ref$labelOffset,\n    _ref$tickLength = _ref.tickLength,\n    tickLength = _ref$tickLength === void 0 ? 8 : _ref$tickLength,\n    tickLabelProps = _ref.tickLabelProps,\n    restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var tickLabelPropsFinal = typeof tickLabelProps === 'function' ? tickLabelProps : _extends({}, topTickLabelProps, tickLabelProps);\n  return /*#__PURE__*/React.createElement(Axis, _extends({\n    axisClassName: cx('visx-axis-top', axisClassName),\n    labelOffset: labelOffset,\n    orientation: Orientation.top,\n    tickLabelProps: tickLabelPropsFinal,\n    tickLength: tickLength\n  }, restProps));\n}","import _pt from \"prop-types\";\nvar _excluded = [\"flexDirection\", \"alignItems\", \"margin\", \"display\", \"children\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nexport default function LegendItem(_ref) {\n  var _ref$flexDirection = _ref.flexDirection,\n    flexDirection = _ref$flexDirection === void 0 ? 'row' : _ref$flexDirection,\n    _ref$alignItems = _ref.alignItems,\n    alignItems = _ref$alignItems === void 0 ? 'center' : _ref$alignItems,\n    _ref$margin = _ref.margin,\n    margin = _ref$margin === void 0 ? '0' : _ref$margin,\n    _ref$display = _ref.display,\n    display = _ref$display === void 0 ? 'flex' : _ref$display,\n    children = _ref.children,\n    restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"visx-legend-item\",\n    style: {\n      display: display,\n      alignItems: alignItems,\n      flexDirection: flexDirection,\n      margin: margin\n    }\n  }, restProps), children);\n}\nLegendItem.propTypes = {\n  alignItems: _pt.string,\n  margin: _pt.oneOfType([_pt.string, _pt.number]),\n  children: _pt.node,\n  display: _pt.string\n};","import _pt from \"prop-types\";\nvar _excluded = [\"flex\", \"label\", \"margin\", \"align\", \"children\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nexport default function LegendLabel(_ref) {\n  var _ref$flex = _ref.flex,\n    flex = _ref$flex === void 0 ? '1' : _ref$flex,\n    label = _ref.label,\n    _ref$margin = _ref.margin,\n    margin = _ref$margin === void 0 ? '5px 0' : _ref$margin,\n    _ref$align = _ref.align,\n    align = _ref$align === void 0 ? 'left' : _ref$align,\n    children = _ref.children,\n    restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"visx-legend-label\",\n    style: {\n      justifyContent: align,\n      display: 'flex',\n      flex: flex,\n      margin: margin\n    }\n  }, restProps), children || label);\n}\nLegendLabel.propTypes = {\n  align: _pt.string,\n  label: _pt.node,\n  flex: _pt.oneOfType([_pt.string, _pt.number]),\n  margin: _pt.oneOfType([_pt.string, _pt.number]),\n  children: _pt.node\n};","import _pt from \"prop-types\";\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nexport default function ShapeRect(_ref) {\n  var fill = _ref.fill,\n    width = _ref.width,\n    height = _ref.height,\n    style = _ref.style;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _extends({\n      width: width,\n      height: height,\n      background: fill\n    }, style)\n  });\n}\nShapeRect.propTypes = {\n  fill: _pt.string,\n  width: _pt.oneOfType([_pt.string, _pt.number]),\n  height: _pt.oneOfType([_pt.string, _pt.number])\n};","import _pt from \"prop-types\";\nimport React from 'react';\nimport { Group } from '@visx/group';\nexport default function ShapeCircle(_ref) {\n  var fill = _ref.fill,\n    width = _ref.width,\n    height = _ref.height,\n    style = _ref.style;\n  var cleanWidth = typeof width === 'string' || typeof width === 'undefined' ? 0 : width;\n  var cleanHeight = typeof height === 'string' || typeof height === 'undefined' ? 0 : height;\n  var size = Math.max(cleanWidth, cleanHeight);\n  var radius = size / 2;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: size,\n    height: size\n  }, /*#__PURE__*/React.createElement(Group, {\n    top: radius,\n    left: radius\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    r: radius,\n    fill: fill,\n    style: style\n  })));\n}\nShapeCircle.propTypes = {\n  fill: _pt.string,\n  width: _pt.oneOfType([_pt.string, _pt.number]),\n  height: _pt.oneOfType([_pt.string, _pt.number])\n};","import _pt from \"prop-types\";\nimport React from 'react';\nimport { Group } from '@visx/group';\nexport default function ShapeLine(_ref) {\n  var fill = _ref.fill,\n    width = _ref.width,\n    height = _ref.height,\n    style = _ref.style;\n  var cleanHeight = typeof height === 'string' || typeof height === 'undefined' ? 0 : height;\n  var lineThickness = typeof (style == null ? void 0 : style.strokeWidth) === 'number' ? style == null ? void 0 : style.strokeWidth : 2;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height\n  }, /*#__PURE__*/React.createElement(Group, {\n    top: cleanHeight / 2 - lineThickness / 2\n  }, /*#__PURE__*/React.createElement(\"line\", {\n    x1: 0,\n    x2: width,\n    y1: 0,\n    y2: 0,\n    stroke: fill,\n    strokeWidth: lineThickness,\n    style: style\n  })));\n}\nShapeLine.propTypes = {\n  fill: _pt.string,\n  width: _pt.oneOfType([_pt.string, _pt.number]),\n  height: _pt.oneOfType([_pt.string, _pt.number])\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport RectShape from '../shapes/Rect';\nimport CircleShape from '../shapes/Circle';\nimport LineShape from '../shapes/Line';\nvar NO_OP = function NO_OP() {\n  return undefined;\n};\nexport default function renderShape(_ref) {\n  var _ref$shape = _ref.shape,\n    shape = _ref$shape === void 0 ? 'rect' : _ref$shape,\n    _ref$fill = _ref.fill,\n    fill = _ref$fill === void 0 ? NO_OP : _ref$fill,\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? NO_OP : _ref$size,\n    width = _ref.width,\n    height = _ref.height,\n    label = _ref.label,\n    item = _ref.item,\n    itemIndex = _ref.itemIndex,\n    _ref$shapeStyle = _ref.shapeStyle,\n    shapeStyle = _ref$shapeStyle === void 0 ? NO_OP : _ref$shapeStyle;\n  var props = {\n    width: width,\n    height: height,\n    item: item,\n    itemIndex: itemIndex,\n    label: label,\n    fill: fill(_extends({}, label)),\n    size: size(_extends({}, label)),\n    style: shapeStyle(_extends({}, label))\n  };\n  if (typeof shape === 'string') {\n    if (shape === 'circle') {\n      return /*#__PURE__*/React.createElement(CircleShape, props);\n    }\n    if (shape === 'line') {\n      return /*#__PURE__*/React.createElement(LineShape, props);\n    }\n    return /*#__PURE__*/React.createElement(RectShape, props);\n  }\n  if ( /*#__PURE__*/React.isValidElement(shape)) {\n    return /*#__PURE__*/React.cloneElement(shape, props);\n  }\n  if (shape) {\n    return /*#__PURE__*/React.createElement(shape, props);\n  }\n  return null;\n}","import _pt from \"prop-types\";\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport ShapeRect from '../../shapes/Rect';\nimport renderShape from '../../util/renderShape';\nexport default function LegendShape(_ref) {\n  var _ref$shape = _ref.shape,\n    shape = _ref$shape === void 0 ? ShapeRect : _ref$shape,\n    width = _ref.width,\n    height = _ref.height,\n    margin = _ref.margin,\n    label = _ref.label,\n    item = _ref.item,\n    itemIndex = _ref.itemIndex,\n    fill = _ref.fill,\n    size = _ref.size,\n    shapeStyle = _ref.shapeStyle;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"visx-legend-shape\",\n    style: {\n      display: 'flex',\n      width: size ? size(_extends({}, label)) : width,\n      height: size ? size(_extends({}, label)) : height,\n      margin: margin\n    }\n  }, renderShape({\n    shape: shape,\n    item: item,\n    itemIndex: itemIndex,\n    label: label,\n    width: width,\n    height: height,\n    fill: fill,\n    shapeStyle: shapeStyle\n  }));\n}\nLegendShape.propTypes = {\n  itemIndex: _pt.number.isRequired,\n  margin: _pt.oneOfType([_pt.string, _pt.number]),\n  width: _pt.oneOfType([_pt.string, _pt.number]),\n  height: _pt.oneOfType([_pt.string, _pt.number])\n};","/** Returns an object's value if defined, or the object. */\nexport default function valueOrIdentity(_) {\n  if (_ && typeof _ === 'object' && 'value' in _ && typeof _.value !== 'undefined') return _.value;\n  return _;\n}\n\n/** Returns an object's value if defined, or the object, coerced to a string. */\nexport function valueOrIdentityString(_) {\n  return String(valueOrIdentity(_));\n}","/** Returns a function which takes a Datum and index as input, and returns a formatted label object. */\nexport default function labelTransformFactory(_ref) {\n  var scale = _ref.scale,\n    labelFormat = _ref.labelFormat;\n  return function (d, i) {\n    return {\n      datum: d,\n      index: i,\n      text: \"\" + labelFormat(d, i),\n      value: scale(d)\n    };\n  };\n}","import _pt from \"prop-types\";\nvar _excluded = [\"className\", \"style\", \"scale\", \"shape\", \"domain\", \"fill\", \"size\", \"labelFormat\", \"labelTransform\", \"shapeWidth\", \"shapeHeight\", \"shapeMargin\", \"shapeStyle\", \"labelAlign\", \"labelFlex\", \"labelMargin\", \"itemMargin\", \"direction\", \"itemDirection\", \"legendLabelProps\", \"children\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport cx from 'classnames';\nimport LegendItem from './LegendItem';\nimport LegendLabel from './LegendLabel';\nimport LegendShape from './LegendShape';\nimport valueOrIdentity, { valueOrIdentityString } from '../../util/valueOrIdentity';\nimport labelTransformFactory from '../../util/labelTransformFactory';\nvar defaultStyle = {\n  display: 'flex'\n};\nexport default function Legend(_ref) {\n  var className = _ref.className,\n    _ref$style = _ref.style,\n    style = _ref$style === void 0 ? defaultStyle : _ref$style,\n    scale = _ref.scale,\n    shape = _ref.shape,\n    inputDomain = _ref.domain,\n    _ref$fill = _ref.fill,\n    fill = _ref$fill === void 0 ? valueOrIdentityString : _ref$fill,\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? valueOrIdentityString : _ref$size,\n    _ref$labelFormat = _ref.labelFormat,\n    labelFormat = _ref$labelFormat === void 0 ? valueOrIdentity : _ref$labelFormat,\n    _ref$labelTransform = _ref.labelTransform,\n    labelTransform = _ref$labelTransform === void 0 ? labelTransformFactory : _ref$labelTransform,\n    _ref$shapeWidth = _ref.shapeWidth,\n    shapeWidth = _ref$shapeWidth === void 0 ? 15 : _ref$shapeWidth,\n    _ref$shapeHeight = _ref.shapeHeight,\n    shapeHeight = _ref$shapeHeight === void 0 ? 15 : _ref$shapeHeight,\n    _ref$shapeMargin = _ref.shapeMargin,\n    shapeMargin = _ref$shapeMargin === void 0 ? '2px 4px 2px 0' : _ref$shapeMargin,\n    shapeStyle = _ref.shapeStyle,\n    _ref$labelAlign = _ref.labelAlign,\n    labelAlign = _ref$labelAlign === void 0 ? 'left' : _ref$labelAlign,\n    _ref$labelFlex = _ref.labelFlex,\n    labelFlex = _ref$labelFlex === void 0 ? '1' : _ref$labelFlex,\n    _ref$labelMargin = _ref.labelMargin,\n    labelMargin = _ref$labelMargin === void 0 ? '0 4px' : _ref$labelMargin,\n    _ref$itemMargin = _ref.itemMargin,\n    itemMargin = _ref$itemMargin === void 0 ? '0' : _ref$itemMargin,\n    _ref$direction = _ref.direction,\n    direction = _ref$direction === void 0 ? 'column' : _ref$direction,\n    _ref$itemDirection = _ref.itemDirection,\n    itemDirection = _ref$itemDirection === void 0 ? 'row' : _ref$itemDirection,\n    legendLabelProps = _ref.legendLabelProps,\n    children = _ref.children,\n    legendItemProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  // `Scale extends ScaleType` constraint is tricky\n  //  could consider removing `scale` altogether in the future and making `domain: Datum[]` required\n  var domain = inputDomain || ('domain' in scale ? scale.domain() : []);\n  var labelFormatter = labelTransform({\n    scale: scale,\n    labelFormat: labelFormat\n  });\n  var labels = domain.map(labelFormatter);\n  if (children) return /*#__PURE__*/React.createElement(React.Fragment, null, children(labels));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('visx-legend', className),\n    style: _extends({}, style, {\n      flexDirection: direction\n    })\n  }, labels.map(function (label, i) {\n    return /*#__PURE__*/React.createElement(LegendItem, _extends({\n      key: \"legend-\" + label.text + \"-\" + i,\n      margin: itemMargin,\n      flexDirection: itemDirection\n    }, legendItemProps), /*#__PURE__*/React.createElement(LegendShape, {\n      shape: shape,\n      height: shapeHeight,\n      width: shapeWidth,\n      margin: shapeMargin,\n      item: domain[i],\n      itemIndex: i,\n      label: label,\n      fill: fill,\n      size: size,\n      shapeStyle: shapeStyle\n    }), /*#__PURE__*/React.createElement(LegendLabel, _extends({\n      label: label.text,\n      flex: labelFlex,\n      margin: labelMargin,\n      align: labelAlign\n    }, legendLabelProps)));\n  }));\n}\nLegend.propTypes = {\n  children: _pt.func,\n  className: _pt.string,\n  domain: _pt.array,\n  shapeWidth: _pt.oneOfType([_pt.string, _pt.number]),\n  shapeHeight: _pt.oneOfType([_pt.string, _pt.number]),\n  shapeMargin: _pt.oneOfType([_pt.string, _pt.number]),\n  labelAlign: _pt.string,\n  labelFlex: _pt.oneOfType([_pt.string, _pt.number]),\n  labelMargin: _pt.oneOfType([_pt.string, _pt.number]),\n  itemMargin: _pt.oneOfType([_pt.string, _pt.number]),\n  fill: _pt.func,\n  size: _pt.func,\n  shapeStyle: _pt.func\n};","export default function defaultDomain(_ref) {\n  var _ref$steps = _ref.steps,\n    steps = _ref$steps === void 0 ? 5 : _ref$steps,\n    scale = _ref.scale;\n  var domain = scale.domain();\n  var start = domain[0];\n  var end = domain[domain.length - 1];\n  if (typeof start === 'number' && typeof end === 'number') {\n    var step = (end - start) / (steps - 1);\n    return new Array(steps).fill(1).reduce(function (acc, cur, i) {\n      acc.push(start + i * step);\n      return acc;\n    }, []);\n  }\n  return [];\n}","import _pt from \"prop-types\";\nvar _excluded = [\"scale\", \"domain\", \"steps\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport Legend from './Legend';\nimport defaultDomain from '../util/defaultDomain';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n/** Linear scales map from continuous inputs to continuous outputs. */\nexport default function Linear(_ref) {\n  var scale = _ref.scale,\n    inputDomain = _ref.domain,\n    _ref$steps = _ref.steps,\n    steps = _ref$steps === void 0 ? 5 : _ref$steps,\n    restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var domain = inputDomain || defaultDomain({\n    steps: steps,\n    scale: scale\n  });\n  return /*#__PURE__*/React.createElement(Legend, _extends({\n    scale: scale,\n    domain: domain\n  }, restProps));\n}\nLinear.propTypes = {\n  steps: _pt.number\n};","import { scaleBand } from '@visx/vendor/d3-scale';\nimport scaleOperator from '../operators/scaleOperator';\nexport var updateBandScale = scaleOperator('domain', 'range', 'reverse', 'align', 'padding', 'round');\nexport default function createBandScale(config) {\n  return updateBandScale(scaleBand(), config);\n}","/* eslint-disable no-param-reassign */\n\nfunction padZero(str: string, len?: number) {\n  len = len || 2;\n  const zeros = new Array(len).join('0');\n  return (zeros + str).slice(-len);\n}\n\nexport function invertColor(hex: string, bw?: boolean): string {\n  if (hex.indexOf('#') === 0) {\n    hex = hex.slice(1);\n  }\n  // convert 3-digit hex to 6-digits.\n  if (hex.length === 3) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n  if (hex.length !== 6) {\n    throw new Error('Invalid HEX color.');\n  }\n  const r = parseInt(hex.slice(0, 2), 16);\n  const g = parseInt(hex.slice(2, 4), 16);\n  const b = parseInt(hex.slice(4, 6), 16);\n  if (bw) {\n    // http://stackoverflow.com/a/3943023/112731\n    return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#FFFFFF';\n  }\n  // invert color components\n  const red = (255 - r).toString(16);\n  const green = (255 - g).toString(16);\n  const blue = (255 - b).toString(16);\n  // pad each with zeros and return\n  const ret = `#${padZero(red)}${padZero(green)}${padZero(blue)}`;\n  return ret;\n}\n","import * as React from 'react';\n\nimport { max } from 'd3-array';\nimport { rgb } from 'd3-color';\nimport { scaleSequential } from 'd3-scale';\nimport { interpolateBlues } from 'd3-scale-chromatic';\n\nimport { AxisLeft, AxisTop } from '@visx/axis';\nimport { LegendLinear } from '@visx/legend';\nimport { ParentSize } from '@visx/responsive';\nimport { scaleLinear, scaleBand } from '@visx/scale';\n\nimport { Legend } from './Legend';\nimport VisxLegend from './VisxLegend';\nimport { invertColor } from './utils';\n\nexport type Props = {\n  width: number;\n  height: number;\n};\n\nconst fruits = [\n  { name: '🍊', count: 21 },\n  { name: '🍇', count: 13 },\n  { name: '🍏', count: 8 },\n  { name: '🍌', count: 5 },\n  { name: '🍐', count: 3 },\n  { name: '🍋', count: 2 },\n  { name: '🍎', count: 1 },\n  { name: '🍉', count: 1 },\n];\n\nconst MARGIN = { top: 30, right: 0, bottom: 0, left: 30 };\n\nconst Content = React.memo((props: Props) => {\n  // eslint-disable-next-line\n  const { width, height } = props;\n\n  const xScale = React.useMemo(\n    () =>\n      scaleLinear({\n        domain: [0, Math.max(...fruits.map(({ count }) => count))],\n        range: [MARGIN.left, width - MARGIN.right],\n      }),\n    [width]\n  );\n\n  const yScale = React.useMemo(\n    () =>\n      scaleBand({\n        domain: fruits.map(({ name }) => name),\n        range: [MARGIN.top, height - MARGIN.bottom],\n        padding: 0.1,\n        round: true,\n      }),\n    [height]\n  );\n\n  const refD3Legend = React.useRef<HTMLDivElement>(null);\n  const colorScaleD3 = React.useMemo(\n    () =>\n      scaleSequential()\n        .domain([0, max(fruits, (d) => d.count) || 0])\n        .interpolator(interpolateBlues),\n    [fruits]\n  );\n  React.useEffect(() => {\n    const svg = Legend(colorScaleD3, { title: 'Number of fruit' });\n    if (refD3Legend.current && svg) {\n      refD3Legend.current.innerHTML = '';\n      refD3Legend.current.appendChild(svg);\n    }\n  }, []);\n\n  const colorScaleVisx = React.useMemo(\n    () =>\n      scaleLinear({\n        domain: [0, Math.max(...fruits.map(({ count }) => count))],\n        range: [interpolateBlues(0), interpolateBlues(1)],\n      }),\n    [height]\n  );\n\n  // console.log('Content', { fruits });\n  return (\n    <>\n      <svg width={width} height={height}>\n        <AxisLeft scale={yScale} left={MARGIN.left} />\n        <AxisTop scale={xScale} top={MARGIN.top} />\n        <g fill=\"steelblue\">\n          {fruits.map(({ name, count }, i) => (\n            <rect\n              key={i}\n              y={yScale(name)}\n              x={xScale(0)}\n              width={xScale(count) - xScale(0)}\n              height={yScale.bandwidth()}\n              fill={colorScaleVisx(count)}\n            />\n          ))}\n        </g>\n        <g fill=\"white\" textAnchor=\"end\" transform={`translate(-6, ${yScale.bandwidth() / 2})`}>\n          {fruits.map(({ name, count }, i) => (\n            <text\n              key={i}\n              y={yScale(name)}\n              x={xScale(count)}\n              dy=\"0.35em\"\n              fill={invertColor(rgb(colorScaleVisx(count)).formatHex(), true)}\n            >\n              {count}\n            </text>\n          ))}\n        </g>\n      </svg>\n      <div ref={refD3Legend} />\n      <VisxLegend color={colorScaleVisx} title=\"Number of fruit\" />\n      <LegendLinear scale={colorScaleVisx} />\n    </>\n  );\n});\n\nconst Scales = React.memo(() => <ParentSize>{({ width }) => <Content width={width} height={300} />}</ParentSize>);\n\nexport default Scales;\n"],"names":["ramp","color","n","canvas","document","createElement","width","height","context","getContext","i","fillStyle","fillRect","React","className","VisxLegend","title","tickSize","marginTop","marginRight","marginBottom","marginLeft","ticks","props","refScale","undefined","imageUrl","setImageUrl","isLinear","interpolate","console","log","Math","min","domain","length","range","current","scaleNext","rangeRound","quantize","copy","toDataURL","interpolator","Object","assign","interpolateRound","svg","viewBox","join","style","overflow","display","image","preserveAspectRatio","x","y","xlinkHref","g","transform","AxisBottom","scale","numTicks","text","fill","textAnchor","fontWeight","notEmpty","value","Legend","adjustedScale","tickFormat","tickValues","create","attr","tickAdjust","selectAll","append","isSequential","round","map","quantile","filter","format","isThresholdLike","invertExtent","thresholds","isQuantize","quantiles","thresholdFormat","d","scaleLinear","data","_","isOrdinal","scaleBand","max","bandwidth","call","axisBottom","select","remove","node","padZero","str","len","slice","fruits","name","count","MARGIN","top","right","bottom","left","Content","xScale","yScale","padding","refD3Legend","colorScaleD3","scaleSequential","interpolateBlues","innerHTML","appendChild","colorScaleVisx","AxisLeft","AxisTop","rect","dy","invertColor","bw","hex","indexOf","r","parseInt","b","red","toString","green","blue","ret","rgb","formatHex","div","ref","LegendLinear","ParentSize","Scales"],"sourceRoot":"","ignoreList":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}