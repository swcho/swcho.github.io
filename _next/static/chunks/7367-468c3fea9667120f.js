(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7367],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},28724:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(14232),i=n(88360);function o(e,t,...n){let s=r.useRef(null),l=(0,i.C)(e=>e.scene);return r.useLayoutEffect(()=>{let r;if(e&&null!=e&&e.current&&t&&(s.current=r=new t(e.current,...n)),r)return r.traverse(e=>e.raycast=()=>null),l.add(r),()=>{s.current=void 0,l.remove(r),null==r.dispose||r.dispose()}},[l,t,e,...n]),(0,i.D)(()=>{var e;null==(e=s.current)||null==e.update||e.update()}),s}},33191:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(44501),i=n(14232),o=n(1825),s=n(88360),l=n(41401);let a=i.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:a,fontSize:u=1,children:c,characters:f,onSync:d,...p},h)=>{let y=(0,s.C)(({invalidate:e})=>e),[m]=i.useState(()=>new o.EY),[g,x]=i.useMemo(()=>{let e=[],t="";return i.Children.forEach(c,n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)}),[e,t]},[c]);return(0,l.DY)(()=>new Promise(e=>(0,o.PY)({font:a,characters:f},e)),["troika-text",a,f]),i.useLayoutEffect(()=>void m.sync(()=>{y(),d&&d(m)})),i.useEffect(()=>()=>m.dispose(),[m]),i.createElement("primitive",(0,r.A)({object:m,ref:h,font:a,text:x,anchorX:t,anchorY:n,fontSize:u,sdfGlyphSize:e},p),g)})},47653:(e,t,n)=>{"use strict";let r,i,o,s,l,a;n.d(t,{e:()=>e6});var u=n(66691);function c(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function f(e){let t=-1,n=-1/0;for(let r=0;r<3;r++){let i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function d(e,t,n){let r,i;for(let o=0;o<3;o++){let s=o+3;r=e[o],i=t[o],n[o]=r<i?r:i,r=e[s],i=t[s],n[s]=r>i?r:i}}function p(e,t,n){for(let r=0;r<3;r++){let i=t[e+2*r],o=t[e+2*r+1],s=i-o,l=i+o;s<n[r]&&(n[r]=s),l>n[r+3]&&(n[r+3]=l)}}function h(e){let t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}let y=Symbol("SKIP_GENERATION");function m(e){return(e.index?e.index.count:e.attributes.position.count)/3}function g(e,t){let n=m(e),r=t||e.drawRange,i=r.start/3,o=(r.start+r.count)/3,s=Math.max(0,i),l=Math.min(n,o)-s;return[{offset:Math.floor(s),count:Math.floor(l)}]}function x(e,t){if(!e.groups||!e.groups.length)return g(e,t);let n=[],r=new Set,i=t||e.drawRange,o=i.start/3,s=(i.start+i.count)/3;for(let t of e.groups){let e=t.start/3,n=(t.start+t.count)/3;r.add(Math.max(o,e)),r.add(Math.min(s,n))}let l=Array.from(r.values()).sort((e,t)=>e-t);for(let e=0;e<l.length-1;e++){let t=l[e],r=l[e+1];n.push({offset:Math.floor(t),count:Math.floor(r-t)})}return n}function w(e,t,n,r,i){let o=1/0,s=1/0,l=1/0,a=-1/0,u=-1/0,c=-1/0,f=1/0,d=1/0,p=1/0,h=-1/0,y=-1/0,m=-1/0;for(let r=6*t,i=(t+n)*6;r<i;r+=6){let t=e[r+0],n=e[r+1],i=t-n,g=t+n;i<o&&(o=i),g>a&&(a=g),t<f&&(f=t),t>h&&(h=t);let x=e[r+2],w=e[r+3],b=x-w,P=x+w;b<s&&(s=b),P>u&&(u=P),x<d&&(d=x),x>y&&(y=x);let B=e[r+4],T=e[r+5],v=B-T,A=B+T;v<l&&(l=v),A>c&&(c=A),B<p&&(p=B),B>m&&(m=B)}r[0]=o,r[1]=s,r[2]=l,r[3]=a,r[4]=u,r[5]=c,i[0]=f,i[1]=d,i[2]=p,i[3]=h,i[4]=y,i[5]=m}let b=(e,t)=>e.candidate-t.candidate,P=Array(32).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),B=new Float32Array(6);class T{constructor(){this.boundingData=new Float32Array(6)}}function v(e,t,n,r,i,o){let s=r,l=r+i-1,a=o.pos,u=2*o.axis;for(;;){for(;s<=l&&n[6*s+u]<a;)s++;for(;s<=l&&n[6*l+u]>=a;)l--;if(!(s<l))return s;for(let e=0;e<3;e++){let n=t[3*s+e];t[3*s+e]=t[3*l+e],t[3*l+e]=n}for(let e=0;e<6;e++){let t=n[6*s+e];n[6*s+e]=n[6*l+e],n[6*l+e]=t}s++,l--}}function A(e,t,n,r,i,o){let s=r,l=r+i-1,a=o.pos,u=2*o.axis;for(;;){for(;s<=l&&n[6*s+u]<a;)s++;for(;s<=l&&n[6*l+u]>=a;)l--;if(!(s<l))return s;{let t=e[s];e[s]=e[l],e[l]=t;for(let e=0;e<6;e++){let t=n[6*s+e];n[6*s+e]=n[6*l+e],n[6*l+e]=t}s++,l--}}}function M(e,t){return 65535===t[e+15]}function S(e,t){return t[e+14]}class q{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,r=-1/0;for(let i=0,o=e.length;i<o;i++){let o=e[i][t];n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}setFromPoints(e,t){let n=1/0,r=-1/0;for(let i=0,o=t.length;i<o;i++){let o=t[i],s=e.dot(o);n=s<n?s:n,r=s>r?s:r}this.min=n,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}q.prototype.setFromBox=function(){let e=new u.Pq0;return function(t,n){let r=n.min,i=n.max,o=1/0,s=-1/0;for(let n=0;n<=1;n++)for(let l=0;l<=1;l++)for(let a=0;a<=1;a++){e.x=r.x*n+i.x*(1-n),e.y=r.y*l+i.y*(1-l),e.z=r.z*a+i.z*(1-a);let u=t.dot(e);o=Math.min(u,o),s=Math.max(u,s)}this.min=o,this.max=s}}(),new q;let I=function(){let e=new u.Pq0,t=new u.Pq0,n=new u.Pq0;return function(r,i,o){let s,l,a=r.start,u=i.start;n.subVectors(a,u),e.subVectors(r.end,r.start),t.subVectors(i.end,i.start);let c=n.dot(t),f=t.dot(e),d=t.dot(t),p=n.dot(e),h=e.dot(e)*d-f*f;s=0!==h?(c*f-p*d)/h:0,l=(c+s*f)/d,o.x=s,o.y=l}}(),U=function(){let e=new u.I9Y,t=new u.Pq0,n=new u.Pq0;return function(r,i,o,s){I(r,i,e);let l=e.x,a=e.y;if(l>=0&&l<=1&&a>=0&&a<=1){r.at(l,o),i.at(a,s);return}if(l>=0&&l<=1){a<0?i.at(0,s):i.at(1,s),r.closestPointToPoint(s,!0,o);return}if(a>=0&&a<=1){l<0?r.at(0,o):r.at(1,o),i.closestPointToPoint(o,!0,s);return}{let e,u;if(e=l<0?r.start:r.end,u=a<0?i.start:i.end,r.closestPointToPoint(u,!0,t),i.closestPointToPoint(e,!0,n),t.distanceToSquared(u)<=n.distanceToSquared(e)){o.copy(t),s.copy(u);return}o.copy(e),s.copy(n);return}}}(),_=function(){let e=new u.Pq0,t=new u.Pq0,n=new u.Zcv,r=new u.cZY;return function(i,o){let{radius:s,center:l}=i,{a,b:u,c}=o;if(r.start=a,r.end=u,r.closestPointToPoint(l,!0,e).distanceTo(l)<=s||(r.start=a,r.end=c,r.closestPointToPoint(l,!0,e).distanceTo(l)<=s)||(r.start=u,r.end=c,r.closestPointToPoint(l,!0,e).distanceTo(l)<=s))return!0;let f=o.getPlane(n);if(Math.abs(f.distanceToPoint(l))<=s){let e=f.projectPoint(l,t);if(o.containsPoint(e))return!0}return!1}}(),F=["x","y","z"],E=1e-15*1e-15;function R(e){return 1e-15>Math.abs(e)}class z extends u.lMl{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=[,,,,].fill().map(()=>new u.Pq0),this.satBounds=[,,,,].fill().map(()=>new q),this.points=[this.a,this.b,this.c],this.plane=new u.Zcv,this.isDegenerateIntoSegment=!1,this.isDegenerateIntoPoint=!1,this.degenerateSegment=new u.cZY,this.needsUpdate=!0}intersectsSphere(e){return _(e,this)}update(){let e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,o=this.satBounds,s=i[0],l=o[0];this.getNormal(s),l.setFromPoints(s,r);let a=i[1],u=o[1];a.subVectors(e,t),u.setFromPoints(a,r);let c=i[2],f=o[2];c.subVectors(t,n),f.setFromPoints(c,r);let d=i[3],p=o[3];d.subVectors(n,e),p.setFromPoints(d,r);let h=a.length(),y=c.length(),m=d.length();this.isDegenerateIntoPoint=!1,this.isDegenerateIntoSegment=!1,h<1e-15?y<1e-15||m<1e-15?this.isDegenerateIntoPoint=!0:(this.isDegenerateIntoSegment=!0,this.degenerateSegment.start.copy(e),this.degenerateSegment.end.copy(n)):y<1e-15?m<1e-15?this.isDegenerateIntoPoint=!0:(this.isDegenerateIntoSegment=!0,this.degenerateSegment.start.copy(t),this.degenerateSegment.end.copy(e)):m<1e-15&&(this.isDegenerateIntoSegment=!0,this.degenerateSegment.start.copy(n),this.degenerateSegment.end.copy(t)),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}}z.prototype.closestPointToSegment=function(){let e=new u.Pq0,t=new u.Pq0,n=new u.cZY;return function(r,i=null,o=null){let s,{start:l,end:a}=r,u=this.points,c=1/0;for(let l=0;l<3;l++){let a=(l+1)%3;n.start.copy(u[l]),n.end.copy(u[a]),U(n,r,e,t),(s=e.distanceToSquared(t))<c&&(c=s,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(l,e),(s=l.distanceToSquared(e))<c&&(c=s,i&&i.copy(e),o&&o.copy(l)),this.closestPointToPoint(a,e),(s=a.distanceToSquared(e))<c&&(c=s,i&&i.copy(e),o&&o.copy(a)),Math.sqrt(c)}}(),z.prototype.intersectsTriangle=function(){let e=new z,t=new q,n=new q,r=new u.Pq0,i=new u.Pq0,o=new u.Pq0,s=new u.Pq0,l=new u.cZY,a=new u.cZY,c=new u.Pq0,f=new u.I9Y,d=new u.I9Y;function p(e,i,o,l){e.isDegenerateIntoPoint||e.isDegenerateIntoSegment?r.copy(i.plane.normal):r.copy(e.plane.normal);let a=e.satBounds,u=e.satAxes;for(let o=1;o<4;o++){let l=a[o],c=u[o];if(t.setFromPoints(c,i.points),l.isSeparated(t)||(s.copy(r).cross(c),t.setFromPoints(s,e.points),n.setFromPoints(s,i.points),t.isSeparated(n)))return!1}let c=i.satBounds,f=i.satAxes;for(let o=1;o<4;o++){let l=c[o],a=f[o];if(t.setFromPoints(a,e.points),l.isSeparated(t)||(s.crossVectors(r,a),t.setFromPoints(s,e.points),n.setFromPoints(s,i.points),t.isSeparated(n)))return!1}return o&&(l||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),o.start.set(0,0,0),o.end.set(0,0,0)),!0}function h(e,t,n,r,i,o,s,l,a,u,c){let f=s/(s-l);u.x=r+(i-r)*f,c.start.subVectors(t,e).multiplyScalar(f).add(e),u.y=r+(o-r)*(f=s/(s-a)),c.end.subVectors(n,e).multiplyScalar(f).add(e)}function y(e,t,n,r,i,o,s,l,a,u,c){if(i>0)h(e.c,e.a,e.b,r,t,n,a,s,l,u,c);else if(o>0)h(e.b,e.a,e.c,n,t,r,l,s,a,u,c);else if(l*a>0||0!=s)h(e.a,e.b,e.c,t,n,r,s,l,a,u,c);else if(0!=l)h(e.b,e.a,e.c,n,t,r,l,s,a,u,c);else{if(0==a)return!0;h(e.c,e.a,e.b,r,t,n,a,s,l,u,c)}return!1}function m(e,t,n,i){let o=t.degenerateSegment,s=e.plane.distanceToPoint(o.start),l=e.plane.distanceToPoint(o.end);if(R(s))if(R(l))return p(e,t,n,i);else return n&&(n.start.copy(o.start),n.end.copy(o.start)),e.containsPoint(o.start);return R(l)?(n&&(n.start.copy(o.end),n.end.copy(o.end)),e.containsPoint(o.end)):null!=e.plane.intersectLine(o,r)&&(n&&(n.start.copy(r),n.end.copy(r)),e.containsPoint(r))}function g(e,t,n){let r=t.a;return!!(R(e.plane.distanceToPoint(r))&&e.containsPoint(r))&&(n&&(n.start.copy(r),n.end.copy(r)),!0)}function x(e,t,n){let i=e.degenerateSegment,o=t.a;return i.closestPointToPoint(o,!0,r),o.distanceToSquared(r)<E&&(n&&(n.start.copy(o),n.end.copy(o)),!0)}return function(t,n=null,s=!1){this.needsUpdate&&this.update(),t.isExtendedTriangle?t.needsUpdate&&t.update():(e.copy(t),e.update(),t=e);let u=function(e,t,n,s){if(e.isDegenerateIntoSegment)if(t.isDegenerateIntoSegment){let s=e.degenerateSegment,l=t.degenerateSegment;s.delta(i),l.delta(o);let a=r.subVectors(l.start,s.start),u=i.x*o.y-i.y*o.x;if(R(u))return!1;let c=(a.x*o.y-a.y*o.x)/u,f=-(i.x*a.y-i.y*a.x)/u;return!(c<0)&&!(c>1)&&!(f<0)&&!(f>1)&&!!R(s.start.z+i.z*c-(l.start.z+o.z*f))&&(n&&(n.start.copy(s.start).addScaledVector(i,c),n.end.copy(s.start).addScaledVector(i,c)),!0)}else if(t.isDegenerateIntoPoint)return x(e,t,n);else return m(t,e,n,s);if(e.isDegenerateIntoPoint)if(t.isDegenerateIntoPoint)if(t.a.distanceToSquared(e.a)<E)return n&&(n.start.copy(e.a),n.end.copy(e.a)),!0;else return!1;else if(t.isDegenerateIntoSegment)return x(t,e,n);else return g(t,e,n);return t.isDegenerateIntoPoint?g(e,t,n):t.isDegenerateIntoSegment?m(e,t,n,s):void 0}(this,t,n,s);if(void 0!==u)return u;let h=this.plane,w=t.plane,b=w.distanceToPoint(this.a),P=w.distanceToPoint(this.b),B=w.distanceToPoint(this.c);R(b)&&(b=0),R(P)&&(P=0),R(B)&&(B=0);let T=b*P,v=b*B;if(T>0&&v>0)return!1;let A=h.distanceToPoint(t.a),M=h.distanceToPoint(t.b),S=h.distanceToPoint(t.c);R(A)&&(A=0),R(M)&&(M=0),R(S)&&(S=0);let q=A*M,I=A*S;if(q>0&&I>0)return!1;i.copy(h.normal),o.copy(w.normal);let U=i.cross(o),_=0,z=Math.abs(U.x),O=Math.abs(U.y);O>z&&(z=O,_=1),Math.abs(U.z)>z&&(_=2);let D=F[_],V=this.a[D],C=this.b[D],N=this.c[D],Y=t.a[D],k=t.b[D],H=t.c[D];if(y(this,V,C,N,T,v,b,P,B,f,l)||y(t,Y,k,H,q,I,A,M,S,d,a))return p(this,t,n,s);if(f.y<f.x){let e=f.y;f.y=f.x,f.x=e,c.copy(l.start),l.start.copy(l.end),l.end.copy(c)}if(d.y<d.x){let e=d.y;d.y=d.x,d.x=e,c.copy(a.start),a.start.copy(a.end),a.end.copy(c)}return!(f.y<d.x)&&!(d.y<f.x)&&(n&&(d.x>f.x?n.start.copy(a.start):n.start.copy(l.start),d.y<f.y?n.end.copy(a.end):n.end.copy(l.end)),!0)}}(),z.prototype.distanceToPoint=function(){let e=new u.Pq0;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),z.prototype.distanceToTriangle=function(){let e=new u.Pq0,t=new u.Pq0,n=["a","b","c"],r=new u.cZY,i=new u.cZY;return function(o,s=null,l=null){let a=s||l?r:null;if(this.intersectsTriangle(o,a))return(s||l)&&(s&&a.getCenter(s),l&&a.getCenter(l)),0;let u=1/0;for(let t=0;t<3;t++){let r,i=n[t],a=o[i];this.closestPointToPoint(a,e),(r=a.distanceToSquared(e))<u&&(u=r,s&&s.copy(e),l&&l.copy(a));let c=this[i];o.closestPointToPoint(c,e),(r=c.distanceToSquared(e))<u&&(u=r,s&&s.copy(c),l&&l.copy(e))}for(let a=0;a<3;a++){let c=n[a],f=n[(a+1)%3];r.set(this[c],this[f]);for(let a=0;a<3;a++){let c=n[a],f=n[(a+1)%3];i.set(o[c],o[f]),U(r,i,e,t);let d=e.distanceToSquared(t);d<u&&(u=d,s&&s.copy(e),l&&l.copy(t))}}return Math.sqrt(u)}}();class O{constructor(e,t,n){this.isOrientedBox=!0,this.min=new u.Pq0,this.max=new u.Pq0,this.matrix=new u.kn4,this.invMatrix=new u.kn4,this.points=Array(8).fill().map(()=>new u.Pq0),this.satAxes=[,,,].fill().map(()=>new u.Pq0),this.satBounds=[,,,].fill().map(()=>new q),this.alignedSatBounds=[,,,].fill().map(()=>new q),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}O.prototype.update=function(){let e=this.matrix,t=this.min,n=this.max,r=this.points;for(let i=0;i<=1;i++)for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){let l=r[i|2*o|4*s];l.x=i?n.x:t.x,l.y=o?n.y:t.y,l.z=s?n.z:t.z,l.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,s=r[0];for(let e=0;e<3;e++){let t=o[e],n=i[e],l=r[1<<e];t.subVectors(s,l),n.setFromPoints(t,r)}let l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},O.prototype.intersectsBox=function(){let e=new q;return function(t){this.needsUpdate&&this.update();let n=t.min,r=t.max,i=this.satBounds,o=this.satAxes,s=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,s[0].isSeparated(e)||(e.min=n.y,e.max=r.y,s[1].isSeparated(e))||(e.min=n.z,e.max=r.z,s[2].isSeparated(e)))return!1;for(let n=0;n<3;n++){let r=o[n],s=i[n];if(e.setFromBox(r,t),s.isSeparated(e))return!1}return!0}}(),O.prototype.intersectsTriangle=function(){let e=new z,t=[,,,],n=new q,r=new q,i=new u.Pq0;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let s=this.satBounds,l=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let e=0;e<3;e++){let r=s[e],i=l[e];if(n.setFromPoints(i,t),r.isSeparated(n))return!1}let a=o.satBounds,u=o.satAxes,c=this.points;for(let e=0;e<3;e++){let t=a[e],r=u[e];if(n.setFromPoints(r,c),t.isSeparated(n))return!1}for(let e=0;e<3;e++){let o=l[e];for(let e=0;e<4;e++){let s=u[e];if(i.crossVectors(o,s),n.setFromPoints(i,t),r.setFromPoints(i,c),n.isSeparated(r))return!1}}return!0}}(),O.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},O.prototype.distanceToPoint=function(){let e=new u.Pq0;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),O.prototype.distanceToBox=function(){let e=["x","y","z"],t=Array(12).fill().map(()=>new u.cZY),n=Array(12).fill().map(()=>new u.cZY),r=new u.Pq0,i=new u.Pq0;return function(o,s=0,l=null,a=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||a)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),a&&a.copy(i)),0;let u=s*s,c=o.min,f=o.max,d=this.points,p=1/0;for(let e=0;e<8;e++){let t=d[e];i.copy(t).clamp(c,f);let n=t.distanceToSquared(i);if(n<p&&(p=n,l&&l.copy(t),a&&a.copy(i),n<u))return Math.sqrt(n)}let h=0;for(let r=0;r<3;r++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let s=(r+1)%3,l=(r+2)%3,a=i<<s|o<<l,u=1<<r|i<<s|o<<l,p=d[a],y=d[u];t[h].set(p,y);let m=e[r],g=e[s],x=e[l],w=n[h],b=w.start,P=w.end;b[m]=c[m],b[g]=i?c[g]:f[g],b[x]=o?c[x]:f[g],P[m]=f[m],P[g]=i?c[g]:f[g],P[x]=o?c[x]:f[g],h++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){i.x=e?f.x:c.x,i.y=t?f.y:c.y,i.z=n?f.z:c.z,this.closestPointToPoint(i,r);let o=i.distanceToSquared(r);if(o<p&&(p=o,l&&l.copy(r),a&&a.copy(i),o<u))return Math.sqrt(o)}for(let e=0;e<12;e++){let o=t[e];for(let e=0;e<12;e++){U(o,n[e],r,i);let t=r.distanceToSquared(i);if(t<p&&(p=t,l&&l.copy(r),a&&a.copy(i),t<u))return Math.sqrt(t)}}return Math.sqrt(p)}}();class D{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class V extends D{constructor(){super(()=>new z)}}let C=new V;class N{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;let e=[],t=null;this.setBuffer=n=>{t&&e.push(t),t=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,0!==e.length&&this.setBuffer(e.pop())}}}let Y=new N,k=[],H=new D(()=>new u.NRn),Z=new u.Pq0,j=new u.Pq0,L=parseInt(u.sPf)>=169,X=161>=parseInt(u.sPf),W=new u.Pq0,G=new u.Pq0,$=new u.Pq0,K=new u.I9Y,Q=new u.I9Y,J=new u.I9Y,ee=new u.Pq0,et=new u.Pq0,en=new u.Pq0,er=new u.Pq0;function ei(e,t,n,r,i,o,s){let l=3*r,a=l+0,c=l+1,f=l+2,d=e.index;e.index&&(a=d.getX(a),c=d.getX(c),f=d.getX(f));let{position:p,normal:h,uv:y,uv1:m}=e.attributes,g=function(e,t,n,r,i,o,s,l,a,c,f){W.fromBufferAttribute(t,o),G.fromBufferAttribute(t,s),$.fromBufferAttribute(t,l);let d=function(e,t,n,r,i,o,s,l){if(null===(o===u.hsX?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,o!==u.$EB,i)))return null;let a=e.origin.distanceTo(i);return a<s||a>l?null:{distance:a,point:i.clone()}}(e,W,G,$,er,a,c,f);if(d){if(r){K.fromBufferAttribute(r,o),Q.fromBufferAttribute(r,s),J.fromBufferAttribute(r,l),d.uv=new u.I9Y;let e=u.lMl.getInterpolation(er,W,G,$,K,Q,J,d.uv);L||(d.uv=e)}if(i){K.fromBufferAttribute(i,o),Q.fromBufferAttribute(i,s),J.fromBufferAttribute(i,l),d.uv1=new u.I9Y;let e=u.lMl.getInterpolation(er,W,G,$,K,Q,J,d.uv1);L||(d.uv1=e),X&&(d.uv2=d.uv1)}if(n){ee.fromBufferAttribute(n,o),et.fromBufferAttribute(n,s),en.fromBufferAttribute(n,l),d.normal=new u.Pq0;let t=u.lMl.getInterpolation(er,W,G,$,ee,et,en,d.normal);d.normal.dot(e.direction)>0&&d.normal.multiplyScalar(-1),L||(d.normal=t)}let t={a:o,b:s,c:l,normal:new u.Pq0,materialIndex:0};if(u.lMl.getNormal(W,G,$,t.normal),d.face=t,d.faceIndex=o,L){let e=new u.Pq0;u.lMl.getBarycoord(er,W,G,$,e),d.barycoord=e}}return d}(n,p,h,y,m,a,c,f,t,o,s);return g?(g.faceIndex=r,i&&i.push(g),g):null}function eo(e,t,n,r){let i=e.a,o=e.b,s=e.c,l=t,a=t+1,u=t+2;n&&(l=n.getX(l),a=n.getX(a),u=n.getX(u)),i.x=r.getX(l),i.y=r.getY(l),i.z=r.getZ(l),o.x=r.getX(a),o.y=r.getY(a),o.z=r.getZ(a),s.x=r.getX(u),s.y=r.getY(u),s.z=r.getZ(u)}function es(e,t,n,r,i,o,s){let{geometry:l}=n,{index:a}=l,u=l.attributes.position;for(let n=e,l=t+e;n<l;n++){let e;if(eo(s,3*(e=n),a,u),s.needsUpdate=!0,r(s,e,i,o))return!0}return!1}function el(e,t,n,r,i){let o,s,l,a,u,c,f=1/n.direction.x,d=1/n.direction.y,p=1/n.direction.z,h=n.origin.x,y=n.origin.y,m=n.origin.z,g=t[e],x=t[e+3],w=t[e+1],b=t[e+3+1],P=t[e+2],B=t[e+3+2];return f>=0?(o=(g-h)*f,s=(x-h)*f):(o=(x-h)*f,s=(g-h)*f),d>=0?(l=(w-y)*d,a=(b-y)*d):(l=(b-y)*d,a=(w-y)*d),!(o>a)&&!(l>s)&&((l>o||isNaN(o))&&(o=l),(a<s||isNaN(s))&&(s=a),p>=0?(u=(P-m)*p,c=(B-m)*p):(u=(B-m)*p,c=(P-m)*p),!(o>c)&&!(u>s)&&((u>o||o!=o)&&(o=u),(c<s||s!=s)&&(s=c),o<=i&&s>=r))}function ea(e,t,n,r,i,o,s){Y.setBuffer(e._roots[t]),function e(t,n,r,i,o,s,l){let{float32Array:a,uint16Array:u,uint32Array:c}=Y,f=2*t;if(M(f,u)){let e=c[t+6],a=S(f,u),{geometry:d,_indirectBuffer:p}=n;for(let t=e,n=e+a;t<n;t++)ei(d,r,i,t,o,s,l)}else{let u=t+8;el(u,a,i,s,l)&&e(u,n,r,i,o,s,l);let f=c[t+6];el(f,a,i,s,l)&&e(f,n,r,i,o,s,l)}}(0,e,n,r,i,o,s),Y.clearBuffer()}let eu=["x","y","z"];function ec(e,t,n,r,i,o){Y.setBuffer(e._roots[t]);let s=function e(t,n,r,i,o,s){let{float32Array:l,uint16Array:a,uint32Array:u}=Y,c=2*t;if(M(c,a))return function(e,t,n,r,i,o,s){let{geometry:l,_indirectBuffer:a}=e,u=1/0,c=null;for(let e=r,a=r+i;e<a;e++){let r;(r=ei(l,t,n,e,null,o,s))&&r.distance<u&&(c=r,u=r.distance)}return c}(n,r,i,u[t+6],S(c,a),o,s);{let a,c,f=u[t+7],d=eu[f],p=i.direction[d]>=0;p?(a=t+8,c=u[t+6]):(a=u[t+6],c=t+8);let h=el(a,l,i,o,s)?e(a,n,r,i,o,s):null;if(h){let e=h.point[d];if(p?e<=l[c+f]:e>=l[c+f+3])return h}let y=el(c,l,i,o,s)?e(c,n,r,i,o,s):null;return h&&y?h.distance<=y.distance?h:y:h||y||null}}(0,e,n,r,i,o);return Y.clearBuffer(),s}let ef=new u.NRn,ed=new z,ep=new z,eh=new u.kn4,ey=new O,em=new O;function eg(e,t,n,r){Y.setBuffer(e._roots[t]);let i=function e(t,n,r,i,o=null){let{float32Array:s,uint16Array:l,uint32Array:a}=Y,u=2*t;if(null===o&&(r.boundingBox||r.computeBoundingBox(),ey.set(r.boundingBox.min,r.boundingBox.max,i),o=ey),M(u,l)){let e=n.geometry,o=e.index,f=e.attributes.position,d=r.index,p=r.attributes.position,h=a[t+6],y=S(u,l);if(eh.copy(i).invert(),r.boundsTree)return c(t,s,em),em.matrix.copy(eh),em.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:e=>em.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=3*h,n=(y+h)*3;t<n;t+=3)if(eo(ep,t,o,f),ep.needsUpdate=!0,e.intersectsTriangle(ep))return!0;return!1}});{let e=m(r);for(let t=3*h,n=(y+h)*3;t<n;t+=3){eo(ed,t,o,f),ed.a.applyMatrix4(eh),ed.b.applyMatrix4(eh),ed.c.applyMatrix4(eh),ed.needsUpdate=!0;for(let t=0,n=3*e;t<n;t+=3)if(eo(ep,t,d,p),ep.needsUpdate=!0,ed.intersectsTriangle(ep))return!0}}}else{let l=t+8,u=a[t+6];return c(l,s,ef),!!(o.intersectsBox(ef)&&e(l,n,r,i,o))||(c(u,s,ef),!!(o.intersectsBox(ef)&&e(u,n,r,i,o)))}}(0,e,n,r);return Y.clearBuffer(),i}let ex=new u.kn4,ew=new O,eb=new O,eP=new u.Pq0,eB=new u.Pq0,eT=new u.Pq0,ev=new u.Pq0;function eA(e,t,n,r,i,o,s){let{geometry:l}=n,{index:a}=l,u=l.attributes.position;for(let l=e,c=t+e;l<c;l++){let e;if(eo(s,3*(e=n.resolveTriangleIndex(l)),a,u),s.needsUpdate=!0,r(s,e,i,o))return!0}return!1}function eM(e,t,n,r,i,o,s){Y.setBuffer(e._roots[t]),function e(t,n,r,i,o,s,l){let{float32Array:a,uint16Array:u,uint32Array:c}=Y,f=2*t;if(M(f,u)){let e=c[t+6],a=S(f,u),{geometry:d,_indirectBuffer:p}=n;for(let t=e,n=e+a;t<n;t++)ei(d,r,i,p?p[t]:t,o,s,l)}else{let u=t+8;el(u,a,i,s,l)&&e(u,n,r,i,o,s,l);let f=c[t+6];el(f,a,i,s,l)&&e(f,n,r,i,o,s,l)}}(0,e,n,r,i,o,s),Y.clearBuffer()}let eS=["x","y","z"];function eq(e,t,n,r,i,o){Y.setBuffer(e._roots[t]);let s=function e(t,n,r,i,o,s){let{float32Array:l,uint16Array:a,uint32Array:u}=Y,c=2*t;if(M(c,a))return function(e,t,n,r,i,o,s){let{geometry:l,_indirectBuffer:a}=e,u=1/0,c=null;for(let e=r,f=r+i;e<f;e++){let r;(r=ei(l,t,n,a?a[e]:e,null,o,s))&&r.distance<u&&(c=r,u=r.distance)}return c}(n,r,i,u[t+6],S(c,a),o,s);{let a,c,f=u[t+7],d=eS[f],p=i.direction[d]>=0;p?(a=t+8,c=u[t+6]):(a=u[t+6],c=t+8);let h=el(a,l,i,o,s)?e(a,n,r,i,o,s):null;if(h){let e=h.point[d];if(p?e<=l[c+f]:e>=l[c+f+3])return h}let y=el(c,l,i,o,s)?e(c,n,r,i,o,s):null;return h&&y?h.distance<=y.distance?h:y:h||y||null}}(0,e,n,r,i,o);return Y.clearBuffer(),s}let eI=new u.NRn,eU=new z,e_=new z,eF=new u.kn4,eE=new O,eR=new O;function ez(e,t,n,r){Y.setBuffer(e._roots[t]);let i=function e(t,n,r,i,o=null){let{float32Array:s,uint16Array:l,uint32Array:a}=Y,u=2*t;if(null===o&&(r.boundingBox||r.computeBoundingBox(),eE.set(r.boundingBox.min,r.boundingBox.max,i),o=eE),M(u,l)){let e=n.geometry,o=e.index,f=e.attributes.position,d=r.index,p=r.attributes.position,h=a[t+6],y=S(u,l);if(eF.copy(i).invert(),r.boundsTree)return c(t,s,eR),eR.matrix.copy(eF),eR.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:e=>eR.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=h,r=y+h;t<r;t++)if(eo(e_,3*n.resolveTriangleIndex(t),o,f),e_.needsUpdate=!0,e.intersectsTriangle(e_))return!0;return!1}});{let e=m(r);for(let t=h,r=y+h;t<r;t++){eo(eU,3*n.resolveTriangleIndex(t),o,f),eU.a.applyMatrix4(eF),eU.b.applyMatrix4(eF),eU.c.applyMatrix4(eF),eU.needsUpdate=!0;for(let t=0,n=3*e;t<n;t+=3)if(eo(e_,t,d,p),e_.needsUpdate=!0,eU.intersectsTriangle(e_))return!0}}}else{let l=t+8,u=a[t+6];return c(l,s,eI),!!(o.intersectsBox(eI)&&e(l,n,r,i,o))||(c(u,s,eI),!!(o.intersectsBox(eI)&&e(u,n,r,i,o)))}}(0,e,n,r);return Y.clearBuffer(),i}let eO=new u.kn4,eD=new O,eV=new O,eC=new u.Pq0,eN=new u.Pq0,eY=new u.Pq0,ek=new u.Pq0,eH=new Y.constructor,eZ=new Y.constructor,ej=new D(()=>new u.NRn),eL=new u.NRn,eX=new u.NRn,eW=new u.NRn,eG=new u.NRn,e$=!1,eK=new O,eQ=new u.NRn,eJ={strategy:0,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class e0{static serialize(e,t={}){t={cloneBuffers:!0,...t};let n=e.geometry,r=e._roots,i=e._indirectBuffer,o=n.getIndex();return t.cloneBuffers?{roots:r.map(e=>e.slice()),index:o?o.array.slice():null,indirectBuffer:i?i.slice():null}:{roots:r,index:o?o.array:null,indirectBuffer:i}}static deserialize(e,t,n={}){n={setIndex:!0,indirect:!!e.indirectBuffer,...n};let{index:r,roots:i,indirectBuffer:o}=e,s=new e0(t,{...n,[y]:!0});if(s._roots=i,s._indirectBuffer=o||null,n.setIndex){let n=t.getIndex();if(null===n){let n=new u.THS(e.index,1,!1);t.setIndex(n)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return s}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw Error("MeshBVH: Only BufferGeometries are supported.");if((t=Object.assign({...eJ,[y]:!1},t)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[y]||(!function(e,t){let n=e.geometry;t.indirect&&(e._indirectBuffer=function(e,t){let n=(e.index?e.index.count:e.attributes.position.count)/3,r=n>65536,i=r?4:2,o=t?new SharedArrayBuffer(n*i):new ArrayBuffer(n*i),s=r?new Uint32Array(o):new Uint16Array(o);for(let e=0,t=s.length;e<t;e++)s[e]=e;return s}(n,t.useSharedArrayBuffer),function(e,t){let n=m(e),r=x(e,t).sort((e,t)=>e.offset-t.offset),i=r[r.length-1];i.count=Math.min(n-i.offset,i.count);let o=0;return r.forEach(({count:e})=>o+=e),n!==o}(n,t.range)&&!t.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),e._indirectBuffer||function(e,t){if(!e.index){let n=e.attributes.position.count,r=function(e,t=ArrayBuffer){return e>65535?new Uint32Array(new t(4*e)):new Uint16Array(new t(2*e))}(n,t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer);e.setIndex(new u.THS(r,1));for(let e=0;e<n;e++)r[e]=e}}(n,t);let l=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,a=g(n,t.range),c=function(e,t=null,n=null,r=null){let i,o=e.attributes.position,s=e.index?e.index.array:null,l=m(e),a=o.normalized;i=null===t?new Float32Array(6*l):t,n=n||0,r=r||l;let u=o.array,c=o.offset||0,f=3;o.isInterleavedBufferAttribute&&(f=o.data.stride);let d=["getX","getY","getZ"];for(let e=n;e<n+r;e++){let t=3*e,n=6*e,r=t+0,l=t+1,p=t+2;s&&(r=s[r],l=s[l],p=s[p]),a||(r=r*f+c,l=l*f+c,p=p*f+c);for(let e=0;e<3;e++){let t,s,c;a?(t=o[d[e]](r),s=o[d[e]](l),c=o[d[e]](p)):(t=u[r+e],s=u[l+e],c=u[p+e]);let f=t;s<f&&(f=s),c<f&&(f=c);let h=t;s>h&&(h=s),c>h&&(h=c);let y=(h-f)/2,m=2*e;i[n+m+0]=f+y,i[n+m+1]=y+(Math.abs(f)+y)*5960464477539063e-23}}return i}(n,null,a[0].offset,a[0].count);e._roots=(t.indirect?a:x(n,t.range)).map(n=>{let a=function(e,t,n,r,i){let{maxDepth:o,verbose:s,maxLeafTris:l,strategy:a,onProgress:u,indirect:c}=i,y=e._indirectBuffer,g=e.geometry,x=g.index?g.index.array:null,M=c?A:v,S=m(g),q=new Float32Array(6),I=!1,U=new T;return w(t,n,r,U.boundingData,q),function e(n,r,i,u=null,c=0){if(!I&&c>=o&&(I=!0,s&&(console.warn(`MeshBVH: Max depth of ${o} reached when generating BVH. Consider increasing maxDepth.`),console.warn(g))),i<=l||c>=o)return _(r+i),n.offset=r,n.count=i,n;let m=function(e,t,n,r,i,o){let s=-1,l=0;if(0===o)-1!==(s=f(t))&&(l=(t[s]+t[s+3])/2);else if(1===o)-1!==(s=f(e))&&(l=function(e,t,n,r){let i=0;for(let o=t,s=t+n;o<s;o++)i+=e[6*o+2*r];return i/n}(n,r,i,s));else if(2===o){let o=h(e),u=1.25*i,c=6*r,f=(r+i)*6;for(let e=0;e<3;e++){let r=t[e],y=(t[e+3]-r)/32;if(i<8){let t=[...P];t.length=i;let r=0;for(let i=c;i<f;i+=6,r++){let o=t[r];o.candidate=n[i+2*e],o.count=0;let{bounds:s,leftCacheBounds:l,rightCacheBounds:a}=o;for(let e=0;e<3;e++)a[e]=1/0,a[e+3]=-1/0,l[e]=1/0,l[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0;p(i,n,s)}t.sort(b);let a=i;for(let e=0;e<a;e++){let n=t[e];for(;e+1<a&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),a--}for(let r=c;r<f;r+=6){let i=n[r+2*e];for(let e=0;e<a;e++){let o=t[e];i>=o.candidate?p(r,n,o.rightCacheBounds):(p(r,n,o.leftCacheBounds),o.count++)}}for(let n=0;n<a;n++){let r=t[n],a=r.count,c=i-r.count,f=r.leftCacheBounds,d=r.rightCacheBounds,p=0;0!==a&&(p=h(f)/o);let y=0;0!==c&&(y=h(d)/o);let m=1+1.25*(p*a+y*c);m<u&&(s=e,u=m,l=r.candidate)}}else{var a;for(let e=0;e<32;e++){let t=P[e];t.count=0,t.candidate=r+y+e*y;let n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let t=c;t<f;t+=6){let i=~~((n[t+2*e]-r)/y);i>=32&&(i=31);let o=P[i];o.count++,p(t,n,o.bounds)}let t=P[31];a=t.bounds,t.rightCacheBounds.set(a);for(let e=30;e>=0;e--){let t=P[e],n=P[e+1];d(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let m=0;for(let t=0;t<31;t++){let n=P[t],r=n.count,a=n.bounds,c=P[t+1].rightCacheBounds;0!==r&&(0===m?B.set(a):d(a,B,B));let f=0,p=0;0!==(m+=r)&&(f=h(B)/o);let y=i-m;0!==y&&(p=h(c)/o);let g=1+1.25*(f*m+p*y);g<u&&(s=e,u=g,l=n.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:s,pos:l}}(n.boundingData,u,t,r,i,a);if(-1===m.axis)return _(r+i),n.offset=r,n.count=i,n;let v=M(y,x,t,r,i,m);if(v===r||v===r+i)_(r+i),n.offset=r,n.count=i;else{n.splitAxis=m.axis;let o=new T,s=v-r;n.left=o,w(t,r,s,o.boundingData,q),e(o,r,s,q,c+1);let l=new T,a=i-s;n.right=l,w(t,v,a,l.boundingData,q),e(l,v,a,q,c+1)}return n}(U,n,r,q),U;function _(e){u&&u(e/S)}}(e,c,n.offset,n.count,t),u=new l(32*function e(t){return"count"in t?1:1+e(t.left)+e(t.right)}(a));return r=new Float32Array(u),i=new Uint32Array(u),o=new Uint16Array(u),s=new Uint8Array(u),function e(t,n){let l=t/4,a=t/2,u="count"in n,c=n.boundingData;for(let e=0;e<6;e++)r[l+e]=c[e];if(u)if(n.buffer){let e=n.buffer;s.set(new Uint8Array(e),t);for(let n=t,r=t+e.byteLength;n<r;n+=32)M(n/2,o)||(i[n/4+6]+=l);return t+e.byteLength}else{let e=n.offset,r=n.count;return i[l+6]=e,o[a+14]=r,o[a+15]=65535,t+32}{let r,o=n.left,s=n.right,a=n.splitAxis;if((r=e(t+32,o))/4>0x100000000)throw Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[l+6]=r/4,r=e(r,s),i[l+7]=a,r}}(0,a),u})}(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new u.NRn))),this.resolveTriangleIndex=t.indirect?e=>this._indirectBuffer[e]:e=>e}refit(e=null){return(this.indirect?function(e,t=null){let n,r,i,o;t&&Array.isArray(t)&&(t=new Set(t));let s=e.geometry,l=s.index?s.index.array:null,a=s.attributes.position,u=0,c=e._roots;for(let s=0,f=c.length;s<f;s++)r=new Uint32Array(n=c[s]),i=new Uint16Array(n),o=new Float32Array(n),function n(s,u,c=!1){let f=2*s;if(65535===i[f+15]){let t=r[s+6],n=i[f+14],u=1/0,c=1/0,d=1/0,p=-1/0,h=-1/0,y=-1/0;for(let r=t,i=t+n;r<i;r++){let t=3*e.resolveTriangleIndex(r);for(let e=0;e<3;e++){let n=t+e;n=l?l[n]:n;let r=a.getX(n),i=a.getY(n),o=a.getZ(n);r<u&&(u=r),r>p&&(p=r),i<c&&(c=i),i>h&&(h=i),o<d&&(d=o),o>y&&(y=o)}}return(o[s+0]!==u||o[s+1]!==c||o[s+2]!==d||o[s+3]!==p||o[s+4]!==h||o[s+5]!==y)&&(o[s+0]=u,o[s+1]=c,o[s+2]=d,o[s+3]=p,o[s+4]=h,o[s+5]=y,!0)}{let e=s+8,i=r[s+6],l=e+u,a=i+u,f=c,d=!1,p=!1;t?f||(d=t.has(l),p=t.has(a),f=!d&&!p):(d=!0,p=!0);let h=f||d,y=f||p,m=!1;h&&(m=n(e,u,f));let g=!1;y&&(g=n(i,u,f));let x=m||g;if(x)for(let t=0;t<3;t++){let n=e+t,r=i+t,l=o[n],a=o[n+3],u=o[r],c=o[r+3];o[s+t]=l<u?l:u,o[s+t+3]=a>c?a:c}return x}}(0,u),u+=n.byteLength}:function(e,t=null){let n,r,i,o;t&&Array.isArray(t)&&(t=new Set(t));let s=e.geometry,l=s.index?s.index.array:null,a=s.attributes.position,u=0,c=e._roots;for(let e=0,s=c.length;e<s;e++)r=new Uint32Array(n=c[e]),i=new Uint16Array(n),o=new Float32Array(n),function e(n,s,u=!1){let c=2*n;if(65535===i[c+15]){let e=r[n+6],t=i[c+14],s=1/0,u=1/0,f=1/0,d=-1/0,p=-1/0,h=-1/0;for(let n=3*e,r=3*(e+t);n<r;n++){let e=l[n],t=a.getX(e),r=a.getY(e),i=a.getZ(e);t<s&&(s=t),t>d&&(d=t),r<u&&(u=r),r>p&&(p=r),i<f&&(f=i),i>h&&(h=i)}return(o[n+0]!==s||o[n+1]!==u||o[n+2]!==f||o[n+3]!==d||o[n+4]!==p||o[n+5]!==h)&&(o[n+0]=s,o[n+1]=u,o[n+2]=f,o[n+3]=d,o[n+4]=p,o[n+5]=h,!0)}{let i=n+8,l=r[n+6],a=i+s,c=l+s,f=u,d=!1,p=!1;t?f||(d=t.has(a),p=t.has(c),f=!d&&!p):(d=!0,p=!0);let h=f||d,y=f||p,m=!1;h&&(m=e(i,s,f));let g=!1;y&&(g=e(l,s,f));let x=m||g;if(x)for(let e=0;e<3;e++){let t=i+e,r=l+e,s=o[t],a=o[t+3],u=o[r],c=o[r+3];o[n+e]=s<u?s:u,o[n+e+3]=a>c?a:c}return x}}(0,u),u+=n.byteLength})(this,e)}traverse(e,t=0){let n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(o,s=0){let l=2*o,a=65535===i[l+15];if(a){let t=r[o+6],u=i[l+14];e(s,a,new Float32Array(n,4*o,6),t,u)}else{let i=r[o+6],l=r[o+7];e(s,a,new Float32Array(n,4*o,6),l)||(t(o+8,s+1),t(i,s+1))}}(0)}raycast(e,t=u.hB5,n=0,r=1/0){let i=this._roots,o=this.geometry,s=[],l=t.isMaterial,a=Array.isArray(t),c=o.groups,f=l?t.side:t,d=this.indirect?eM:ea;for(let o=0,l=i.length;o<l;o++){let i=a?t[c[o].materialIndex].side:f,l=s.length;if(d(this,o,i,e,s,n,r),a){let e=c[o].materialIndex;for(let t=l,n=s.length;t<n;t++)s[t].face.materialIndex=e}}return s}raycastFirst(e,t=u.hB5,n=0,r=1/0){let i=this._roots,o=this.geometry,s=t.isMaterial,l=Array.isArray(t),a=null,c=o.groups,f=s?t.side:t,d=this.indirect?eq:ec;for(let o=0,s=i.length;o<s;o++){let i=l?t[c[o].materialIndex].side:f,s=d(this,o,i,e,n,r);null!=s&&(null==a||s.distance<a.distance)&&(a=s,l&&(s.face.materialIndex=c[o].materialIndex))}return a}intersectsGeometry(e,t){let n=!1,r=this._roots,i=this.indirect?ez:eg;for(let o=0,s=r.length;o<s&&!(n=i(this,o,e,t));o++);return n}shapecast(e){let t=C.getPrimitive(),n=this.indirect?eA:es,{boundsTraverseOrder:r,intersectsBounds:i,intersectsRange:o,intersectsTriangle:s}=e;if(o&&s){let e=o;o=(r,i,o,l,a)=>!!e(r,i,o,l,a)||n(r,i,this,s,o,l,t)}else o||(o=s?(e,r,i,o)=>n(e,r,this,s,i,o,t):(e,t,n)=>n);let u=!1,f=0,d=this._roots;for(let e=0,t=d.length;e<t;e++){let t=d[e];if(u=function(e,t,n,r,i,o){l=H.getPrimitive(),a=H.getPrimitive(),k.push(l,a),Y.setBuffer(e._roots[t]);let s=function e(t,n,r,i,o=null,s=0,u=0){let{float32Array:f,uint16Array:d,uint32Array:p}=Y,h=2*t;if(M(h,d)){let e=p[t+6],n=S(h,d);return c(t,f,l),i(e,n,!1,u,s+t,l)}{let h,g,x,w,b,P,B=t+8,T=p[t+6],v=B,A=T;if(o&&(x=l,w=a,c(v,f,x),c(A,f,w),h=o(x),(g=o(w))<h)){v=T,A=B;let e=h;h=g,g=e,x=w}x||c(v,f,x=l);let q=r(x,M(2*v,d),h,u+1,s+v);if(2===q){let e=y(v);b=i(e,m(v)-e,!0,u+1,s+v,x)}else b=q&&e(v,n,r,i,o,s,u+1);if(b)return!0;c(A,f,w=a);let I=r(w,M(2*A,d),g,u+1,s+A);if(2===I){let e=y(A);P=i(e,m(A)-e,!0,u+1,s+A,w)}else P=I&&e(A,n,r,i,o,s,u+1);if(P)return!0;return!1;function y(e){let{uint16Array:t,uint32Array:n}=Y,r=2*e;for(;!M(r,t);)r=2*(e+=8);return n[e+6]}function m(e){let{uint16Array:t,uint32Array:n}=Y,r=2*e;for(;!M(r,t);)r=2*(e=n[e+6]);return n[e+6]+S(r,t)}}}(0,e.geometry,n,r,i,o);Y.clearBuffer(),H.releasePrimitive(l),H.releasePrimitive(a),k.pop(),k.pop();let u=k.length;return u>0&&(a=k[u-1],l=k[u-2]),s}(this,e,i,o,r,f))break;f+=t.byteLength}return C.releasePrimitive(t),u}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:i}=n,o=C.getPrimitive(),s=this.geometry.index,l=this.geometry.attributes.position,a=this.indirect?e=>{eo(o,3*this.resolveTriangleIndex(e),s,l)}:e=>{eo(o,3*e,s,l)},f=C.getPrimitive(),d=e.geometry.index,p=e.geometry.attributes.position,h=e.indirect?t=>{eo(f,3*e.resolveTriangleIndex(t),d,p)}:e=>{eo(f,3*e,d,p)};if(i){let e=(e,n,r,s,l,u,c,d)=>{for(let p=r,y=r+s;p<y;p++){h(p),f.a.applyMatrix4(t),f.b.applyMatrix4(t),f.c.applyMatrix4(t),f.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++)if(a(t),o.needsUpdate=!0,i(o,f,t,p,l,u,c,d))return!0}return!1};if(r){let t=r;r=function(n,r,i,o,s,l,a,u){return!!t(n,r,i,o,s,l,a,u)||e(n,r,i,o,s,l,a,u)}}else r=e}return function(e,t,n,r){let i;if(e$)throw Error("MeshBVH: Recursive calls to bvhcast not supported.");e$=!0;let o=e._roots,s=t._roots,l=0,a=0,f=new u.kn4().copy(n).invert();for(let e=0,t=o.length;e<t;e++){eH.setBuffer(o[e]),a=0;let t=ej.getPrimitive();c(0,eH.float32Array,t),t.applyMatrix4(f);for(let e=0,o=s.length;e<o&&(eZ.setBuffer(s[e]),i=function e(t,n,r,i,o,s=0,l=0,a=0,u=0,f=null,d=!1){let p,h;d?(p=eZ,h=eH):(p=eH,h=eZ);let y=p.float32Array,m=p.uint32Array,g=p.uint16Array,x=h.float32Array,w=h.uint32Array,b=h.uint16Array,P=2*n,B=M(2*t,g),T=M(P,b),v=!1;if(T&&B)v=d?o(w[n+6],S(2*n,b),m[t+6],S(2*t,g),u,l+n,a,s+t):o(m[t+6],S(2*t,g),w[n+6],S(2*n,b),a,s+t,u,l+n);else if(T){let f=ej.getPrimitive();c(n,x,f),f.applyMatrix4(r);let p=t+8,h=m[t+6];c(p,y,eL),c(h,y,eX);let g=f.intersectsBox(eL),w=f.intersectsBox(eX);v=g&&e(n,p,i,r,o,l,s,u,a+1,f,!d)||w&&e(n,h,i,r,o,l,s,u,a+1,f,!d),ej.releasePrimitive(f)}else{let p=n+8,h=w[n+6];c(p,x,eW),c(h,x,eG);let g=f.intersectsBox(eW),b=f.intersectsBox(eG);if(g&&b)v=e(t,p,r,i,o,s,l,a,u+1,f,d)||e(t,h,r,i,o,s,l,a,u+1,f,d);else if(g)if(B)v=e(t,p,r,i,o,s,l,a,u+1,f,d);else{let n=ej.getPrimitive();n.copy(eW).applyMatrix4(r);let f=t+8,h=m[t+6];c(f,y,eL),c(h,y,eX);let g=n.intersectsBox(eL),x=n.intersectsBox(eX);v=g&&e(p,f,i,r,o,l,s,u,a+1,n,!d)||x&&e(p,h,i,r,o,l,s,u,a+1,n,!d),ej.releasePrimitive(n)}else if(b)if(B)v=e(t,h,r,i,o,s,l,a,u+1,f,d);else{let n=ej.getPrimitive();n.copy(eG).applyMatrix4(r);let f=t+8,p=m[t+6];c(f,y,eL),c(p,y,eX);let g=n.intersectsBox(eL),x=n.intersectsBox(eX);v=g&&e(h,f,i,r,o,l,s,u,a+1,n,!d)||x&&e(h,p,i,r,o,l,s,u,a+1,n,!d),ej.releasePrimitive(n)}}return v}(0,0,n,f,r,l,a,0,0,t),eZ.clearBuffer(),a+=s[e].length,!i);e++);if(ej.releasePrimitive(t),eH.clearBuffer(),l+=o[e].length,i)break}return e$=!1,i}(this,e,t,r)}intersectsBox(e,t){return eK.set(e.min,e.max,t),eK.needsUpdate=!0,this.shapecast({intersectsBounds:e=>eK.intersectsBox(e),intersectsTriangle:e=>eK.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},r={},i=0,o=1/0){return(this.indirect?function(e,t,n,r={},i={},o=0,s=1/0){t.boundingBox||t.computeBoundingBox(),eD.set(t.boundingBox.min,t.boundingBox.max,n),eD.needsUpdate=!0;let l=e.geometry,a=l.attributes.position,u=l.index,c=t.attributes.position,f=t.index,d=C.getPrimitive(),p=C.getPrimitive(),h=null,y=null;i&&(h=eY,y=ek);let g=1/0,x=null,w=null;return(eO.copy(n).invert(),eV.matrix.copy(eO),e.shapecast({boundsTraverseOrder:e=>eD.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s&&(t&&(eV.min.copy(e.min),eV.max.copy(e.max),eV.needsUpdate=!0),!0),intersectsRange:(r,i)=>{if(t.boundsTree){let l=t.boundsTree;return l.shapecast({boundsTraverseOrder:e=>eV.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s,intersectsRange:(t,s)=>{for(let m=t,b=t+s;m<b;m++){eo(p,3*l.resolveTriangleIndex(m),f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=r,n=r+i;t<n;t++){eo(d,3*e.resolveTriangleIndex(t),u,a),d.needsUpdate=!0;let n=d.distanceToTriangle(p,eC,h);if(n<g&&(eN.copy(eC),y&&y.copy(h),g=n,x=t,w=m),n<o)return!0}}}})}{let s=m(t);for(let t=0;t<s;t++){eo(p,3*t,f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let n=r,s=r+i;n<s;n++){eo(d,3*e.resolveTriangleIndex(n),u,a),d.needsUpdate=!0;let r=d.distanceToTriangle(p,eC,h);if(r<g&&(eN.copy(eC),y&&y.copy(h),g=r,x=n,w=t),r<o)return!0}}}}}),C.releasePrimitive(d),C.releasePrimitive(p),g===1/0)?null:(r.point?r.point.copy(eN):r.point=eN.clone(),r.distance=g,r.faceIndex=x,i&&(i.point?i.point.copy(y):i.point=y.clone(),i.point.applyMatrix4(eO),eN.applyMatrix4(eO),i.distance=eN.sub(i.point).length(),i.faceIndex=w),r)}:function(e,t,n,r={},i={},o=0,s=1/0){t.boundingBox||t.computeBoundingBox(),ew.set(t.boundingBox.min,t.boundingBox.max,n),ew.needsUpdate=!0;let l=e.geometry,a=l.attributes.position,u=l.index,c=t.attributes.position,f=t.index,d=C.getPrimitive(),p=C.getPrimitive(),h=null,y=null;i&&(h=eT,y=ev);let g=1/0,x=null,w=null;return(ex.copy(n).invert(),eb.matrix.copy(ex),e.shapecast({boundsTraverseOrder:e=>ew.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s&&(t&&(eb.min.copy(e.min),eb.max.copy(e.max),eb.needsUpdate=!0),!0),intersectsRange:(e,r)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:e=>eb.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s,intersectsRange:(t,i)=>{for(let s=t,l=t+i;s<l;s++){eo(p,3*s,f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=e,n=e+r;t<n;t++){eo(d,3*t,u,a),d.needsUpdate=!0;let e=d.distanceToTriangle(p,eP,h);if(e<g&&(eB.copy(eP),y&&y.copy(h),g=e,x=t,w=s),e<o)return!0}}}});{let i=m(t);for(let t=0;t<i;t++){eo(p,3*t,f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let n=e,i=e+r;n<i;n++){eo(d,3*n,u,a),d.needsUpdate=!0;let e=d.distanceToTriangle(p,eP,h);if(e<g&&(eB.copy(eP),y&&y.copy(h),g=e,x=n,w=t),e<o)return!0}}}}}),C.releasePrimitive(d),C.releasePrimitive(p),g===1/0)?null:(r.point?r.point.copy(eB):r.point=eB.clone(),r.distance=g,r.faceIndex=x,i&&(i.point?i.point.copy(y):i.point=y.clone(),i.point.applyMatrix4(ex),eB.applyMatrix4(ex),i.distance=eB.sub(i.point).length(),i.faceIndex=w),r)})(this,e,t,n,r,i,o)}closestPointToPoint(e,t={},n=0,r=1/0){return function(e,t,n={},r=0,i=1/0){let o=r*r,s=i*i,l=1/0,a=null;if(e.shapecast({boundsTraverseOrder:e=>(Z.copy(t).clamp(e.min,e.max),Z.distanceToSquared(t)),intersectsBounds:(e,t,n)=>n<l&&n<s,intersectsTriangle:(e,n)=>{e.closestPointToPoint(t,Z);let r=t.distanceToSquared(Z);return r<l&&(j.copy(Z),l=r,a=n),r<o}}),l===1/0)return null;let u=Math.sqrt(l);return n.point?n.point.copy(j):n.point=j.clone(),n.distance=u,n.faceIndex=a,n}(this,e,t,n,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{c(0,new Float32Array(t),eQ),e.union(eQ)}),e}}let e1=new u.NRn,e3=new u.kn4;class e2 extends u.B69{get isMesh(){return!this.displayEdges}get isLineSegments(){return this.displayEdges}get isLine(){return this.displayEdges}getVertexPosition(...e){return u.eaF.prototype.getVertexPosition.call(this,...e)}constructor(e,t,n=10,r=0){super(),this.material=t,this.geometry=new u.LoY,this.name="MeshBVHRootHelper",this.depth=n,this.displayParents=!1,this.bvh=e,this.displayEdges=!0,this._group=r}raycast(){}update(){let e=this.geometry,t=this.bvh,n=this._group;if(e.dispose(),this.visible=!1,t){let r,i,o=this.depth-1,s=this.displayParents,l=0;t.traverse((e,t)=>{if(e>=o||t)return l++,!0;s&&l++},n);let a=0,f=new Float32Array(24*l);t.traverse((e,t,n)=>{let r=e>=o||t;if(r||s){c(0,n,e1);let{min:e,max:t}=e1;for(let n=-1;n<=1;n+=2){let r=n<0?e.x:t.x;for(let n=-1;n<=1;n+=2){let i=n<0?e.y:t.y;for(let n=-1;n<=1;n+=2){let o=n<0?e.z:t.z;f[a+0]=r,f[a+1]=i,f[a+2]=o,a+=3}}}return r}},n),i=new Uint8Array(this.displayEdges?[0,4,1,5,2,6,3,7,0,2,1,3,4,6,5,7,0,1,2,3,4,5,6,7]:[0,1,2,2,1,3,4,6,5,6,7,5,1,4,5,0,4,1,2,3,6,3,7,6,0,2,4,2,6,4,1,5,3,3,5,7]),r=f.length>65535?new Uint32Array(i.length*l):new Uint16Array(i.length*l);let d=i.length;for(let e=0;e<l;e++){let t=8*e,n=e*d;for(let e=0;e<d;e++)r[n+e]=t+i[e]}e.setIndex(new u.THS(r,1,!1)),e.setAttribute("position",new u.THS(f,3,!1)),this.visible=!0}}}class e6 extends u.YJl{get color(){return this.edgeMaterial.color}get opacity(){return this.edgeMaterial.opacity}set opacity(e){this.edgeMaterial.opacity=e,this.meshMaterial.opacity=e}constructor(e=null,t=null,n=10){e instanceof e0&&(n=t||10,t=e,e=null),"number"==typeof t&&(n=t,t=null),super(),this.name="MeshBVHHelper",this.depth=n,this.mesh=e,this.bvh=t,this.displayParents=!1,this.displayEdges=!0,this.objectIndex=0,this._roots=[];let r=new u.mrM({color:65416,transparent:!0,opacity:.3,depthWrite:!1}),i=new u.V9B({color:65416,transparent:!0,opacity:.3,depthWrite:!1});i.color=r.color,this.edgeMaterial=r,this.meshMaterial=i,this.update()}update(){let e=this.mesh,t=this.bvh||e.geometry.boundsTree||null;if(e&&e.isBatchedMesh&&e.boundsTrees&&!t){let n=e._drawInfo[this.objectIndex];n&&(t=e.boundsTrees[n.geometryIndex]||t)}let n=t?t._roots.length:0;for(;this._roots.length>n;){let e=this._roots.pop();e.geometry.dispose(),this.remove(e)}for(let e=0;e<n;e++){let{depth:n,edgeMaterial:r,meshMaterial:i,displayParents:o,displayEdges:s}=this;if(e>=this._roots.length){let i=new e2(t,r,n,e);this.add(i),this._roots.push(i)}let l=this._roots[e];l.bvh=t,l.depth=n,l.displayParents=o,l.displayEdges=s,l.material=s?r:i,l.update()}}updateMatrixWorld(...e){let t=this.mesh,n=this.parent;null!==t&&(t.updateWorldMatrix(!0,!1),n?this.matrix.copy(n.matrixWorld).invert().multiply(t.matrixWorld):this.matrix.copy(t.matrixWorld),(t.isInstancedMesh||t.isBatchedMesh)&&(t.getMatrixAt(this.objectIndex,e3),this.matrix.multiply(e3)),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(...e)}copy(e){this.depth=e.depth,this.mesh=e.mesh,this.bvh=e.bvh,this.opacity=e.opacity,this.color.copy(e.color)}clone(){return new e6(this.mesh,this.bvh,this.depth)}dispose(){this.edgeMaterial.dispose(),this.meshMaterial.dispose();let e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].geometry.dispose()}}},49082:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var r=n(44501),i=n(88360),o=n(14232),s=n(78961);let l=o.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:l,enableDamping:a=!0,keyEvents:u=!1,onChange:c,onStart:f,onEnd:d,...p},h)=>{let y=(0,i.C)(e=>e.invalidate),m=(0,i.C)(e=>e.camera),g=(0,i.C)(e=>e.gl),x=(0,i.C)(e=>e.events),w=(0,i.C)(e=>e.setEvents),b=(0,i.C)(e=>e.set),P=(0,i.C)(e=>e.get),B=(0,i.C)(e=>e.performance),T=t||m,v=l||x.connected||g.domElement,A=o.useMemo(()=>new s.N(T),[T]);return(0,i.D)(()=>{A.enabled&&A.update()},-1),o.useEffect(()=>(u&&A.connect(!0===u?v:u),A.connect(v),()=>void A.dispose()),[u,v,n,A,y]),o.useEffect(()=>{let e=e=>{y(),n&&B.regress(),c&&c(e)},t=e=>{f&&f(e)},r=e=>{d&&d(e)};return A.addEventListener("change",e),A.addEventListener("start",t),A.addEventListener("end",r),()=>{A.removeEventListener("start",t),A.removeEventListener("end",r),A.removeEventListener("change",e)}},[c,f,d,A,y,w]),o.useEffect(()=>{if(e){let e=P().controls;return b({controls:A}),()=>b({controls:e})}},[e,A]),o.createElement("primitive",(0,r.A)({ref:h,object:A,enableDamping:a},p))})},56486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.identifierTypes=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}(n(14232)),i=function(e){return e&&e.__esModule?e:{default:e}}(n(95062));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=["pathname","url","title","og:title","issue-number","issue-term"],u=function(e,t,n){if(0>a.indexOf(e))return void console.warn("Wrong type: "+e);if("pathname"===e)return"pathname";if("url"===e)return"url";if("title"===e)return"title";if("og:title"===e)return"og:title";if("issue-term"===e)return t;else if("issue-number"===e)return n},c=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(e){var t,i;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return(t=(i=s(n).call(this,e))&&("object"===o(i)||"function"==typeof i)?i:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).myRef=r.default.createRef(),t.state={pending:!0},t}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&l(n,e),t=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.repo,r=t.type,i=t.specificTerm,o=t.issueNumber,s=0>a.indexOf(r)?void console.warn("Wrong type: "+r):"issue-number"===r?"issue-number":"issue-term",l=u(r,i,o);if("issue-term"===r&&!l)return void console.warn("When type is '".concat(r,"', 'specificTerm' prop must be provided"));if("issue-number"===r&&(isNaN(l)||l<1))return void console.warn("When type is '".concat(r,"', valid 'issueNumber' prop must be provided"));var c=document.createElement("script");c.src="https://utteranc.es/client.js",c.async=!0,c.setAttribute("repo",n),c.setAttribute("crossorigin","anonymous"),c.setAttribute(s,l),c.onload=function(){return e.setState({pending:!1})},this.myRef.current.appendChild(c)}},{key:"render",value:function(){return r.default.createElement("div",{className:"react-utterences",ref:this.myRef},this.props.debug&&r.default.createElement("pre",{style:{background:"#cccccc",padding:10}},"\nthis.props: ".concat(JSON.stringify(this.props,null,2),'\nlocation.pathname: "').concat(window.location.pathname,'"\nlocation.href: "').concat(window.location.href,'"\n          ').trim()),this.props.debug&&r.default.createElement("div",null,"\uD83D\uDC47\uD83D\uDC47If the settings are valid, the comment widget appear below\uD83D\uDC47\uD83D\uDC47"),this.state.pending&&r.default.createElement("div",null,"Loading script..."))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(r.Component);t.identifierTypes={pathname:{attrValue:"",summary:"Issue title contains page pathname"},url:{attrValue:"url",summary:"Issue title contains page URL"},title:{attrValue:"title",summary:"Issue title contains page title"},"og:title":{attrValue:"og:title",summary:"Issue title contains page og:title"},"issue-number":{attrValue:-1,summary:"Specific issue number"},"issue-term":{attrValue:"",summary:"Issue title contains specific term"}},c.propTypes={type:i.default.string.isRequired,repo:i.default.string.isRequired,specificTerm:i.default.string,issueNumber:i.default.number,hashKey:i.default.string,debug:i.default.bool},t.default=c},79271:(e,t,n)=>{"use strict";let r,i,o,s,l,a;n.d(t,{Z:()=>ts});var u=n(44501),c=n(88360),f=n(14232),d=n(66691);let p=2,h=Symbol("SKIP_GENERATION");function y(e,t,n){return null===e?null:(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(n.ray.origin),e.object=t,e)}function m(e){return(e.index?e.index.count:e.attributes.position.count)/3}function g(e,t){let n=m(e),r=t||e.drawRange,i=r.start/3,o=(r.start+r.count)/3,s=Math.max(0,i),l=Math.min(n,o)-s;return[{offset:Math.floor(s),count:Math.floor(l)}]}function x(e,t){if(!e.groups||!e.groups.length)return g(e,t);let n=[],r=new Set,i=t||e.drawRange,o=i.start/3,s=(i.start+i.count)/3;for(let t of e.groups){let e=t.start/3,n=(t.start+t.count)/3;r.add(Math.max(o,e)),r.add(Math.min(s,n))}let l=Array.from(r.values()).sort((e,t)=>e-t);for(let e=0;e<l.length-1;e++){let t=l[e],r=l[e+1];n.push({offset:Math.floor(t),count:Math.floor(r-t)})}return n}function w(e,t,n,r,i){let o=1/0,s=1/0,l=1/0,a=-1/0,u=-1/0,c=-1/0,f=1/0,d=1/0,p=1/0,h=-1/0,y=-1/0,m=-1/0;for(let r=6*t,i=(t+n)*6;r<i;r+=6){let t=e[r+0],n=e[r+1],i=t-n,g=t+n;i<o&&(o=i),g>a&&(a=g),t<f&&(f=t),t>h&&(h=t);let x=e[r+2],w=e[r+3],b=x-w,P=x+w;b<s&&(s=b),P>u&&(u=P),x<d&&(d=x),x>y&&(y=x);let B=e[r+4],T=e[r+5],v=B-T,A=B+T;v<l&&(l=v),A>c&&(c=A),B<p&&(p=B),B>m&&(m=B)}r[0]=o,r[1]=s,r[2]=l,r[3]=a,r[4]=u,r[5]=c,i[0]=f,i[1]=d,i[2]=p,i[3]=h,i[4]=y,i[5]=m}function b(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function P(e){let t=-1,n=-1/0;for(let r=0;r<3;r++){let i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function B(e,t,n){let r,i;for(let o=0;o<3;o++){let s=o+3;r=e[o],i=t[o],n[o]=r<i?r:i,r=e[s],i=t[s],n[s]=r>i?r:i}}function T(e,t,n){for(let r=0;r<3;r++){let i=t[e+2*r],o=t[e+2*r+1],s=i-o,l=i+o;s<n[r]&&(n[r]=s),l>n[r+3]&&(n[r+3]=l)}}function v(e){let t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}let A=(e,t)=>e.candidate-t.candidate,M=Array(32).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),S=new Float32Array(6);class q{constructor(){this.boundingData=new Float32Array(6)}}function I(e,t,n,r,i,o){let s=r,l=r+i-1,a=o.pos,u=2*o.axis;for(;;){for(;s<=l&&n[6*s+u]<a;)s++;for(;s<=l&&n[6*l+u]>=a;)l--;if(!(s<l))return s;for(let e=0;e<3;e++){let n=t[3*s+e];t[3*s+e]=t[3*l+e],t[3*l+e]=n}for(let e=0;e<6;e++){let t=n[6*s+e];n[6*s+e]=n[6*l+e],n[6*l+e]=t}s++,l--}}function U(e,t,n,r,i,o){let s=r,l=r+i-1,a=o.pos,u=2*o.axis;for(;;){for(;s<=l&&n[6*s+u]<a;)s++;for(;s<=l&&n[6*l+u]>=a;)l--;if(!(s<l))return s;{let t=e[s];e[s]=e[l],e[l]=t;for(let e=0;e<6;e++){let t=n[6*s+e];n[6*s+e]=n[6*l+e],n[6*l+e]=t}s++,l--}}}function _(e,t){return 65535===t[e+15]}function F(e,t){return t[e+14]}class E{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,r=-1/0;for(let i=0,o=e.length;i<o;i++){let o=e[i][t];n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}setFromPoints(e,t){let n=1/0,r=-1/0;for(let i=0,o=t.length;i<o;i++){let o=t[i],s=e.dot(o);n=s<n?s:n,r=s>r?s:r}this.min=n,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}E.prototype.setFromBox=function(){let e=new d.Pq0;return function(t,n){let r=n.min,i=n.max,o=1/0,s=-1/0;for(let n=0;n<=1;n++)for(let l=0;l<=1;l++)for(let a=0;a<=1;a++){e.x=r.x*n+i.x*(1-n),e.y=r.y*l+i.y*(1-l),e.z=r.z*a+i.z*(1-a);let u=t.dot(e);o=Math.min(u,o),s=Math.max(u,s)}this.min=o,this.max=s}}(),new E;let R=function(){let e=new d.Pq0,t=new d.Pq0,n=new d.Pq0;return function(r,i,o){let s,l,a=r.start,u=i.start;n.subVectors(a,u),e.subVectors(r.end,r.start),t.subVectors(i.end,i.start);let c=n.dot(t),f=t.dot(e),d=t.dot(t),p=n.dot(e),h=e.dot(e)*d-f*f;s=0!==h?(c*f-p*d)/h:0,l=(c+s*f)/d,o.x=s,o.y=l}}(),z=function(){let e=new d.I9Y,t=new d.Pq0,n=new d.Pq0;return function(r,i,o,s){R(r,i,e);let l=e.x,a=e.y;if(l>=0&&l<=1&&a>=0&&a<=1){r.at(l,o),i.at(a,s);return}if(l>=0&&l<=1){a<0?i.at(0,s):i.at(1,s),r.closestPointToPoint(s,!0,o);return}if(a>=0&&a<=1){l<0?r.at(0,o):r.at(1,o),i.closestPointToPoint(o,!0,s);return}{let e,u;if(e=l<0?r.start:r.end,u=a<0?i.start:i.end,r.closestPointToPoint(u,!0,t),i.closestPointToPoint(e,!0,n),t.distanceToSquared(u)<=n.distanceToSquared(e)){o.copy(t),s.copy(u);return}o.copy(e),s.copy(n);return}}}(),O=function(){let e=new d.Pq0,t=new d.Pq0,n=new d.Zcv,r=new d.cZY;return function(i,o){let{radius:s,center:l}=i,{a,b:u,c}=o;if(r.start=a,r.end=u,r.closestPointToPoint(l,!0,e).distanceTo(l)<=s||(r.start=a,r.end=c,r.closestPointToPoint(l,!0,e).distanceTo(l)<=s)||(r.start=u,r.end=c,r.closestPointToPoint(l,!0,e).distanceTo(l)<=s))return!0;let f=o.getPlane(n);if(Math.abs(f.distanceToPoint(l))<=s){let e=f.projectPoint(l,t);if(o.containsPoint(e))return!0}return!1}}();function D(e){return 1e-15>Math.abs(e)}class V extends d.lMl{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=[,,,,].fill().map(()=>new d.Pq0),this.satBounds=[,,,,].fill().map(()=>new E),this.points=[this.a,this.b,this.c],this.sphere=new d.iyt,this.plane=new d.Zcv,this.needsUpdate=!0}intersectsSphere(e){return O(e,this)}update(){let e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,o=this.satBounds,s=i[0],l=o[0];this.getNormal(s),l.setFromPoints(s,r);let a=i[1],u=o[1];a.subVectors(e,t),u.setFromPoints(a,r);let c=i[2],f=o[2];c.subVectors(t,n),f.setFromPoints(c,r);let d=i[3],p=o[3];d.subVectors(n,e),p.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}}V.prototype.closestPointToSegment=function(){let e=new d.Pq0,t=new d.Pq0,n=new d.cZY;return function(r,i=null,o=null){let s,{start:l,end:a}=r,u=this.points,c=1/0;for(let l=0;l<3;l++){let a=(l+1)%3;n.start.copy(u[l]),n.end.copy(u[a]),z(n,r,e,t),(s=e.distanceToSquared(t))<c&&(c=s,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(l,e),(s=l.distanceToSquared(e))<c&&(c=s,i&&i.copy(e),o&&o.copy(l)),this.closestPointToPoint(a,e),(s=a.distanceToSquared(e))<c&&(c=s,i&&i.copy(e),o&&o.copy(a)),Math.sqrt(c)}}(),V.prototype.intersectsTriangle=function(){let e=new V,t=[,,,],n=[,,,],r=new E,i=new E,o=new d.Pq0,s=new d.Pq0,l=new d.Pq0,a=new d.Pq0,u=new d.Pq0,c=new d.cZY,f=new d.cZY,p=new d.cZY,h=new d.Pq0;function y(e,t,n){let r=e.points,i=0,o=-1;for(let e=0;e<3;e++){let{start:l,end:a}=c;l.copy(r[e]),a.copy(r[(e+1)%3]),c.delta(s);let u=D(t.distanceToPoint(l));if(D(t.normal.dot(s))&&u){n.copy(c),i=2;break}let f=t.intersectLine(c,h);if(!f&&u&&h.copy(l),(f||u)&&!D(h.distanceTo(a))){if(i<=1)(1===i?n.start:n.end).copy(h),u&&(o=i);else if(i>=2){(1===o?n.start:n.end).copy(h),i=2;break}if(2==++i&&-1===o)break}}return i}return function(s,c=null,d=!1){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let h=this.plane,m=s.plane;if(Math.abs(h.normal.dot(m.normal))>1-1e-10){let e=this.satBounds,l=this.satAxes;n[0]=s.a,n[1]=s.b,n[2]=s.c;for(let t=0;t<4;t++){let i=e[t],o=l[t];if(r.setFromPoints(o,n),i.isSeparated(r))return!1}let a=s.satBounds,u=s.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let e=0;e<4;e++){let n=a[e],i=u[e];if(r.setFromPoints(i,t),n.isSeparated(r))return!1}for(let e=0;e<4;e++){let s=l[e];for(let e=0;e<4;e++){let l=u[e];if(o.crossVectors(s,l),r.setFromPoints(o,t),i.setFromPoints(o,n),r.isSeparated(i))return!1}}return c&&(d||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),c.start.set(0,0,0),c.end.set(0,0,0)),!0}{let e=y(this,m,f);if(1===e&&s.containsPoint(f.end))return c&&(c.start.copy(f.end),c.end.copy(f.end)),!0;if(2!==e)return!1;let t=y(s,h,p);if(1===t&&this.containsPoint(p.end))return c&&(c.start.copy(p.end),c.end.copy(p.end)),!0;if(2!==t)return!1;if(f.delta(l),p.delta(a),0>l.dot(a)){let e=p.start;p.start=p.end,p.end=e}let n=f.start.dot(l),r=f.end.dot(l),i=p.start.dot(l),o=p.end.dot(l);return(n===o||i===r||r<i!=n<o)&&(c&&(u.subVectors(f.start,p.start),u.dot(l)>0?c.start.copy(f.start):c.start.copy(p.start),u.subVectors(f.end,p.end),0>u.dot(l)?c.end.copy(f.end):c.end.copy(p.end)),!0)}}}(),V.prototype.distanceToPoint=function(){let e=new d.Pq0;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),V.prototype.distanceToTriangle=function(){let e=new d.Pq0,t=new d.Pq0,n=["a","b","c"],r=new d.cZY,i=new d.cZY;return function(o,s=null,l=null){let a=s||l?r:null;if(this.intersectsTriangle(o,a))return(s||l)&&(s&&a.getCenter(s),l&&a.getCenter(l)),0;let u=1/0;for(let t=0;t<3;t++){let r,i=n[t],a=o[i];this.closestPointToPoint(a,e),(r=a.distanceToSquared(e))<u&&(u=r,s&&s.copy(e),l&&l.copy(a));let c=this[i];o.closestPointToPoint(c,e),(r=c.distanceToSquared(e))<u&&(u=r,s&&s.copy(c),l&&l.copy(e))}for(let a=0;a<3;a++){let c=n[a],f=n[(a+1)%3];r.set(this[c],this[f]);for(let a=0;a<3;a++){let c=n[a],f=n[(a+1)%3];i.set(o[c],o[f]),z(r,i,e,t);let d=e.distanceToSquared(t);d<u&&(u=d,s&&s.copy(e),l&&l.copy(t))}}return Math.sqrt(u)}}();class C{constructor(e,t,n){this.isOrientedBox=!0,this.min=new d.Pq0,this.max=new d.Pq0,this.matrix=new d.kn4,this.invMatrix=new d.kn4,this.points=Array(8).fill().map(()=>new d.Pq0),this.satAxes=[,,,].fill().map(()=>new d.Pq0),this.satBounds=[,,,].fill().map(()=>new E),this.alignedSatBounds=[,,,].fill().map(()=>new E),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}C.prototype.update=function(){let e=this.matrix,t=this.min,n=this.max,r=this.points;for(let i=0;i<=1;i++)for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){let l=r[i|2*o|4*s];l.x=i?n.x:t.x,l.y=o?n.y:t.y,l.z=s?n.z:t.z,l.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,s=r[0];for(let e=0;e<3;e++){let t=o[e],n=i[e],l=r[1<<e];t.subVectors(s,l),n.setFromPoints(t,r)}let l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},C.prototype.intersectsBox=function(){let e=new E;return function(t){this.needsUpdate&&this.update();let n=t.min,r=t.max,i=this.satBounds,o=this.satAxes,s=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,s[0].isSeparated(e)||(e.min=n.y,e.max=r.y,s[1].isSeparated(e))||(e.min=n.z,e.max=r.z,s[2].isSeparated(e)))return!1;for(let n=0;n<3;n++){let r=o[n],s=i[n];if(e.setFromBox(r,t),s.isSeparated(e))return!1}return!0}}(),C.prototype.intersectsTriangle=function(){let e=new V,t=[,,,],n=new E,r=new E,i=new d.Pq0;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let s=this.satBounds,l=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let e=0;e<3;e++){let r=s[e],i=l[e];if(n.setFromPoints(i,t),r.isSeparated(n))return!1}let a=o.satBounds,u=o.satAxes,c=this.points;for(let e=0;e<3;e++){let t=a[e],r=u[e];if(n.setFromPoints(r,c),t.isSeparated(n))return!1}for(let e=0;e<3;e++){let o=l[e];for(let e=0;e<4;e++){let s=u[e];if(i.crossVectors(o,s),n.setFromPoints(i,t),r.setFromPoints(i,c),n.isSeparated(r))return!1}}return!0}}(),C.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},C.prototype.distanceToPoint=function(){let e=new d.Pq0;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),C.prototype.distanceToBox=function(){let e=["x","y","z"],t=Array(12).fill().map(()=>new d.cZY),n=Array(12).fill().map(()=>new d.cZY),r=new d.Pq0,i=new d.Pq0;return function(o,s=0,l=null,a=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||a)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),a&&a.copy(i)),0;let u=s*s,c=o.min,f=o.max,d=this.points,p=1/0;for(let e=0;e<8;e++){let t=d[e];i.copy(t).clamp(c,f);let n=t.distanceToSquared(i);if(n<p&&(p=n,l&&l.copy(t),a&&a.copy(i),n<u))return Math.sqrt(n)}let h=0;for(let r=0;r<3;r++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let s=(r+1)%3,l=(r+2)%3,a=i<<s|o<<l,u=1<<r|i<<s|o<<l,p=d[a],y=d[u];t[h].set(p,y);let m=e[r],g=e[s],x=e[l],w=n[h],b=w.start,P=w.end;b[m]=c[m],b[g]=i?c[g]:f[g],b[x]=o?c[x]:f[g],P[m]=f[m],P[g]=i?c[g]:f[g],P[x]=o?c[x]:f[g],h++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){i.x=e?f.x:c.x,i.y=t?f.y:c.y,i.z=n?f.z:c.z,this.closestPointToPoint(i,r);let o=i.distanceToSquared(r);if(o<p&&(p=o,l&&l.copy(r),a&&a.copy(i),o<u))return Math.sqrt(o)}for(let e=0;e<12;e++){let o=t[e];for(let e=0;e<12;e++){z(o,n[e],r,i);let t=r.distanceToSquared(i);if(t<p&&(p=t,l&&l.copy(r),a&&a.copy(i),t<u))return Math.sqrt(t)}}return Math.sqrt(p)}}();class N{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class Y extends N{constructor(){super(()=>new V)}}let k=new Y;class H{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;let e=[],t=null;this.setBuffer=n=>{t&&e.push(t),t=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,0!==e.length&&this.setBuffer(e.pop())}}}let Z=new H,j=[],L=new N(()=>new d.NRn),X=new d.Pq0,W=new d.Pq0,G=parseInt(d.sPf)>=169,$=new d.Pq0,K=new d.Pq0,Q=new d.Pq0,J=new d.I9Y,ee=new d.I9Y,et=new d.I9Y,en=new d.Pq0,er=new d.Pq0,ei=new d.Pq0,eo=new d.Pq0;function es(e,t,n,r,i,o,s){let l=3*r,a=l+0,u=l+1,c=l+2,f=e.index;e.index&&(a=f.getX(a),u=f.getX(u),c=f.getX(c));let{position:p,normal:h,uv:y,uv1:m}=e.attributes,g=function(e,t,n,r,i,o,s,l,a,u,c){$.fromBufferAttribute(t,o),K.fromBufferAttribute(t,s),Q.fromBufferAttribute(t,l);let f=function(e,t,n,r,i,o,s,l){if(null===(o===d.hsX?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,o!==d.$EB,i)))return null;let a=e.origin.distanceTo(i);return a<s||a>l?null:{distance:a,point:i.clone()}}(e,$,K,Q,eo,a,u,c);if(f){let t=new d.Pq0;d.lMl.getBarycoord(eo,$,K,Q,t),r&&(J.fromBufferAttribute(r,o),ee.fromBufferAttribute(r,s),et.fromBufferAttribute(r,l),f.uv=d.lMl.getInterpolation(eo,$,K,Q,J,ee,et,new d.I9Y)),i&&(J.fromBufferAttribute(i,o),ee.fromBufferAttribute(i,s),et.fromBufferAttribute(i,l),f.uv1=d.lMl.getInterpolation(eo,$,K,Q,J,ee,et,new d.I9Y)),n&&(en.fromBufferAttribute(n,o),er.fromBufferAttribute(n,s),ei.fromBufferAttribute(n,l),f.normal=d.lMl.getInterpolation(eo,$,K,Q,en,er,ei,new d.Pq0),f.normal.dot(e.direction)>0&&f.normal.multiplyScalar(-1));let a={a:o,b:s,c:l,normal:new d.Pq0,materialIndex:0};d.lMl.getNormal($,K,Q,a.normal),f.face=a,f.faceIndex=o,G&&(f.barycoord=t)}return f}(n,p,h,y,m,a,u,c,t,o,s);return g?(g.faceIndex=r,i&&i.push(g),g):null}function el(e,t,n,r){let i=e.a,o=e.b,s=e.c,l=t,a=t+1,u=t+2;n&&(l=n.getX(l),a=n.getX(a),u=n.getX(u)),i.x=r.getX(l),i.y=r.getY(l),i.z=r.getZ(l),o.x=r.getX(a),o.y=r.getY(a),o.z=r.getZ(a),s.x=r.getX(u),s.y=r.getY(u),s.z=r.getZ(u)}function ea(e,t,n,r,i,o,s){let{geometry:l}=n,{index:a}=l,u=l.attributes.position;for(let n=e,l=t+e;n<l;n++){let e;if(el(s,3*(e=n),a,u),s.needsUpdate=!0,r(s,e,i,o))return!0}return!1}function eu(e,t,n,r,i){let o,s,l,a,u,c,f=1/n.direction.x,d=1/n.direction.y,p=1/n.direction.z,h=n.origin.x,y=n.origin.y,m=n.origin.z,g=t[e],x=t[e+3],w=t[e+1],b=t[e+3+1],P=t[e+2],B=t[e+3+2];return f>=0?(o=(g-h)*f,s=(x-h)*f):(o=(x-h)*f,s=(g-h)*f),d>=0?(l=(w-y)*d,a=(b-y)*d):(l=(b-y)*d,a=(w-y)*d),!(o>a)&&!(l>s)&&((l>o||isNaN(o))&&(o=l),(a<s||isNaN(s))&&(s=a),p>=0?(u=(P-m)*p,c=(B-m)*p):(u=(B-m)*p,c=(P-m)*p),!(o>c)&&!(u>s)&&((u>o||o!=o)&&(o=u),(c<s||s!=s)&&(s=c),o<=i&&s>=r))}function ec(e,t,n,r,i,o,s){Z.setBuffer(e._roots[t]),function e(t,n,r,i,o,s,l){let{float32Array:a,uint16Array:u,uint32Array:c}=Z,f=2*t;if(_(f,u)){let e=c[t+6],a=F(f,u),{geometry:d,_indirectBuffer:p}=n;for(let t=e,n=e+a;t<n;t++)es(d,r,i,t,o,s,l)}else{let u=t+8;eu(u,a,i,s,l)&&e(u,n,r,i,o,s,l);let f=c[t+6];eu(f,a,i,s,l)&&e(f,n,r,i,o,s,l)}}(0,e,n,r,i,o,s),Z.clearBuffer()}let ef=["x","y","z"];function ed(e,t,n,r,i,o){Z.setBuffer(e._roots[t]);let s=function e(t,n,r,i,o,s){let{float32Array:l,uint16Array:a,uint32Array:u}=Z,c=2*t;if(_(c,a))return function(e,t,n,r,i,o,s){let{geometry:l,_indirectBuffer:a}=e,u=1/0,c=null;for(let e=r,a=r+i;e<a;e++){let r;(r=es(l,t,n,e,null,o,s))&&r.distance<u&&(c=r,u=r.distance)}return c}(n,r,i,u[t+6],F(c,a),o,s);{let a,c,f=u[t+7],d=ef[f],p=i.direction[d]>=0;p?(a=t+8,c=u[t+6]):(a=u[t+6],c=t+8);let h=eu(a,l,i,o,s)?e(a,n,r,i,o,s):null;if(h){let e=h.point[d];if(p?e<=l[c+f]:e>=l[c+f+3])return h}let y=eu(c,l,i,o,s)?e(c,n,r,i,o,s):null;return h&&y?h.distance<=y.distance?h:y:h||y||null}}(0,e,n,r,i,o);return Z.clearBuffer(),s}let ep=new d.NRn,eh=new V,ey=new V,em=new d.kn4,eg=new C,ex=new C;function ew(e,t,n,r){Z.setBuffer(e._roots[t]);let i=function e(t,n,r,i,o=null){let{float32Array:s,uint16Array:l,uint32Array:a}=Z,u=2*t;if(null===o&&(r.boundingBox||r.computeBoundingBox(),eg.set(r.boundingBox.min,r.boundingBox.max,i),o=eg),_(u,l)){let e=n.geometry,o=e.index,c=e.attributes.position,f=r.index,d=r.attributes.position,p=a[t+6],h=F(u,l);if(em.copy(i).invert(),r.boundsTree)return b(t,s,ex),ex.matrix.copy(em),ex.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:e=>ex.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=3*p,n=(h+p)*3;t<n;t+=3)if(el(ey,t,o,c),ey.needsUpdate=!0,e.intersectsTriangle(ey))return!0;return!1}});for(let e=3*p,t=(h+p)*3;e<t;e+=3){el(eh,e,o,c),eh.a.applyMatrix4(em),eh.b.applyMatrix4(em),eh.c.applyMatrix4(em),eh.needsUpdate=!0;for(let e=0,t=f.count;e<t;e+=3)if(el(ey,e,f,d),ey.needsUpdate=!0,eh.intersectsTriangle(ey))return!0}}else{let l=t+8,u=a[t+6];return b(l,s,ep),!!(o.intersectsBox(ep)&&e(l,n,r,i,o))||(b(u,s,ep),!!(o.intersectsBox(ep)&&e(u,n,r,i,o)))}}(0,e,n,r);return Z.clearBuffer(),i}let eb=new d.kn4,eP=new C,eB=new C,eT=new d.Pq0,ev=new d.Pq0,eA=new d.Pq0,eM=new d.Pq0;function eS(e,t,n,r,i,o,s){let{geometry:l}=n,{index:a}=l,u=l.attributes.position;for(let l=e,c=t+e;l<c;l++){let e;if(el(s,3*(e=n.resolveTriangleIndex(l)),a,u),s.needsUpdate=!0,r(s,e,i,o))return!0}return!1}function eq(e,t,n,r,i,o,s){Z.setBuffer(e._roots[t]),function e(t,n,r,i,o,s,l){let{float32Array:a,uint16Array:u,uint32Array:c}=Z,f=2*t;if(_(f,u)){let e=c[t+6],a=F(f,u),{geometry:d,_indirectBuffer:p}=n;for(let t=e,n=e+a;t<n;t++)es(d,r,i,p?p[t]:t,o,s,l)}else{let u=t+8;eu(u,a,i,s,l)&&e(u,n,r,i,o,s,l);let f=c[t+6];eu(f,a,i,s,l)&&e(f,n,r,i,o,s,l)}}(0,e,n,r,i,o,s),Z.clearBuffer()}let eI=["x","y","z"];function eU(e,t,n,r,i,o){Z.setBuffer(e._roots[t]);let s=function e(t,n,r,i,o,s){let{float32Array:l,uint16Array:a,uint32Array:u}=Z,c=2*t;if(_(c,a))return function(e,t,n,r,i,o,s){let{geometry:l,_indirectBuffer:a}=e,u=1/0,c=null;for(let e=r,f=r+i;e<f;e++){let r;(r=es(l,t,n,a?a[e]:e,null,o,s))&&r.distance<u&&(c=r,u=r.distance)}return c}(n,r,i,u[t+6],F(c,a),o,s);{let a,c,f=u[t+7],d=eI[f],p=i.direction[d]>=0;p?(a=t+8,c=u[t+6]):(a=u[t+6],c=t+8);let h=eu(a,l,i,o,s)?e(a,n,r,i,o,s):null;if(h){let e=h.point[d];if(p?e<=l[c+f]:e>=l[c+f+3])return h}let y=eu(c,l,i,o,s)?e(c,n,r,i,o,s):null;return h&&y?h.distance<=y.distance?h:y:h||y||null}}(0,e,n,r,i,o);return Z.clearBuffer(),s}let e_=new d.NRn,eF=new V,eE=new V,eR=new d.kn4,ez=new C,eO=new C;function eD(e,t,n,r){Z.setBuffer(e._roots[t]);let i=function e(t,n,r,i,o=null){let{float32Array:s,uint16Array:l,uint32Array:a}=Z,u=2*t;if(null===o&&(r.boundingBox||r.computeBoundingBox(),ez.set(r.boundingBox.min,r.boundingBox.max,i),o=ez),_(u,l)){let e=n.geometry,o=e.index,c=e.attributes.position,f=r.index,d=r.attributes.position,p=a[t+6],h=F(u,l);if(eR.copy(i).invert(),r.boundsTree)return b(t,s,eO),eO.matrix.copy(eR),eO.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:e=>eO.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=p,r=h+p;t<r;t++)if(el(eE,3*n.resolveTriangleIndex(t),o,c),eE.needsUpdate=!0,e.intersectsTriangle(eE))return!0;return!1}});for(let e=p,t=h+p;e<t;e++){el(eF,3*n.resolveTriangleIndex(e),o,c),eF.a.applyMatrix4(eR),eF.b.applyMatrix4(eR),eF.c.applyMatrix4(eR),eF.needsUpdate=!0;for(let e=0,t=f.count;e<t;e+=3)if(el(eE,e,f,d),eE.needsUpdate=!0,eF.intersectsTriangle(eE))return!0}}else{let l=t+8,u=a[t+6];return b(l,s,e_),!!(o.intersectsBox(e_)&&e(l,n,r,i,o))||(b(u,s,e_),!!(o.intersectsBox(e_)&&e(u,n,r,i,o)))}}(0,e,n,r);return Z.clearBuffer(),i}let eV=new d.kn4,eC=new C,eN=new C,eY=new d.Pq0,ek=new d.Pq0,eH=new d.Pq0,eZ=new d.Pq0,ej=new Z.constructor,eL=new Z.constructor,eX=new N(()=>new d.NRn),eW=new d.NRn,eG=new d.NRn,e$=new d.NRn,eK=new d.NRn,eQ=!1,eJ=new C,e0=new d.NRn,e1={strategy:0,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class e3{static serialize(e,t={}){t={cloneBuffers:!0,...t};let n=e.geometry,r=e._roots,i=e._indirectBuffer,o=n.getIndex();return t.cloneBuffers?{roots:r.map(e=>e.slice()),index:o?o.array.slice():null,indirectBuffer:i?i.slice():null}:{roots:r,index:o?o.array:null,indirectBuffer:i}}static deserialize(e,t,n={}){n={setIndex:!0,indirect:!!e.indirectBuffer,...n};let{index:r,roots:i,indirectBuffer:o}=e,s=new e3(t,{...n,[h]:!0});if(s._roots=i,s._indirectBuffer=o||null,n.setIndex){let n=t.getIndex();if(null===n){let n=new d.THS(e.index,1,!1);t.setIndex(n)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return s}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw Error("MeshBVH: Only BufferGeometries are supported.");if((t=Object.assign({...e1,[h]:!1},t)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[h]||(!function(e,t){let n=e.geometry;t.indirect&&(e._indirectBuffer=function(e,t){let n=(e.index?e.index.count:e.attributes.position.count)/3,r=n>65536,i=r?4:2,o=t?new SharedArrayBuffer(n*i):new ArrayBuffer(n*i),s=r?new Uint32Array(o):new Uint16Array(o);for(let e=0,t=s.length;e<t;e++)s[e]=e;return s}(n,t.useSharedArrayBuffer),function(e,t){let n=m(e),r=x(e,t).sort((e,t)=>e.offset-t.offset),i=r[r.length-1];i.count=Math.min(n-i.offset,i.count);let o=0;return r.forEach(({count:e})=>o+=e),n!==o}(n,t.range)&&!t.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),e._indirectBuffer||function(e,t){if(!e.index){let n=e.attributes.position.count,r=function(e,t=ArrayBuffer){return e>65535?new Uint32Array(new t(4*e)):new Uint16Array(new t(2*e))}(n,t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer);e.setIndex(new d.THS(r,1));for(let e=0;e<n;e++)r[e]=e}}(n,t);let l=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,a=function(e,t=null,n=null,r=null){let i,o=e.attributes.position,s=e.index?e.index.array:null,l=m(e),a=o.normalized;null===t?(i=new Float32Array(6*l),n=0,r=l):(i=t,n=n||0,r=r||l);let u=o.array,c=o.offset||0,f=3;o.isInterleavedBufferAttribute&&(f=o.data.stride);let d=["getX","getY","getZ"];for(let e=n;e<n+r;e++){let t=3*e,n=6*e,r=t+0,l=t+1,p=t+2;s&&(r=s[r],l=s[l],p=s[p]),a||(r=r*f+c,l=l*f+c,p=p*f+c);for(let e=0;e<3;e++){let t,s,c;a?(t=o[d[e]](r),s=o[d[e]](l),c=o[d[e]](p)):(t=u[r+e],s=u[l+e],c=u[p+e]);let f=t;s<f&&(f=s),c<f&&(f=c);let h=t;s>h&&(h=s),c>h&&(h=c);let y=(h-f)/2,m=2*e;i[n+m+0]=f+y,i[n+m+1]=y+(Math.abs(f)+y)*5960464477539063e-23}}return i}(n);e._roots=(t.indirect?g(n,t.range):x(n,t.range)).map(n=>{let u=function(e,t,n,r,i){let{maxDepth:o,verbose:s,maxLeafTris:l,strategy:a,onProgress:u,indirect:c}=i,f=e._indirectBuffer,d=e.geometry,h=d.index?d.index.array:null,y=c?U:I,g=m(d),x=new Float32Array(6),b=!1,_=new q;return w(t,n,r,_.boundingData,x),function e(n,r,i,u=null,c=0){if(!b&&c>=o&&(b=!0,s&&(console.warn(`MeshBVH: Max depth of ${o} reached when generating BVH. Consider increasing maxDepth.`),console.warn(d))),i<=l||c>=o)return F(r+i),n.offset=r,n.count=i,n;let m=function(e,t,n,r,i,o){let s=-1,l=0;if(0===o)-1!==(s=P(t))&&(l=(t[s]+t[s+3])/2);else if(1===o)-1!==(s=P(e))&&(l=function(e,t,n,r){let i=0;for(let o=t,s=t+n;o<s;o++)i+=e[6*o+2*r];return i/n}(n,r,i,s));else if(o===p){let o=v(e),u=1.25*i,c=6*r,f=(r+i)*6;for(let e=0;e<3;e++){let r=t[e],d=(t[e+3]-r)/32;if(i<8){let t=[...M];t.length=i;let r=0;for(let i=c;i<f;i+=6,r++){let o=t[r];o.candidate=n[i+2*e],o.count=0;let{bounds:s,leftCacheBounds:l,rightCacheBounds:a}=o;for(let e=0;e<3;e++)a[e]=1/0,a[e+3]=-1/0,l[e]=1/0,l[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0;T(i,n,s)}t.sort(A);let a=i;for(let e=0;e<a;e++){let n=t[e];for(;e+1<a&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),a--}for(let r=c;r<f;r+=6){let i=n[r+2*e];for(let e=0;e<a;e++){let o=t[e];i>=o.candidate?T(r,n,o.rightCacheBounds):(T(r,n,o.leftCacheBounds),o.count++)}}for(let n=0;n<a;n++){let r=t[n],a=r.count,c=i-r.count,f=r.leftCacheBounds,d=r.rightCacheBounds,p=0;0!==a&&(p=v(f)/o);let h=0;0!==c&&(h=v(d)/o);let y=1+1.25*(p*a+h*c);y<u&&(s=e,u=y,l=r.candidate)}}else{var a;for(let e=0;e<32;e++){let t=M[e];t.count=0,t.candidate=r+d+e*d;let n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let t=c;t<f;t+=6){let i=~~((n[t+2*e]-r)/d);i>=32&&(i=31);let o=M[i];o.count++,T(t,n,o.bounds)}let t=M[31];a=t.bounds,t.rightCacheBounds.set(a);for(let e=30;e>=0;e--){let t=M[e],n=M[e+1];B(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let p=0;for(let t=0;t<31;t++){let n=M[t],r=n.count,a=n.bounds,c=M[t+1].rightCacheBounds;0!==r&&(0===p?S.set(a):B(a,S,S));let f=0,d=0;0!==(p+=r)&&(f=v(S)/o);let h=i-p;0!==h&&(d=v(c)/o);let y=1+1.25*(f*p+d*h);y<u&&(s=e,u=y,l=n.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:s,pos:l}}(n.boundingData,u,t,r,i,a);if(-1===m.axis)return F(r+i),n.offset=r,n.count=i,n;let g=y(f,h,t,r,i,m);if(g===r||g===r+i)F(r+i),n.offset=r,n.count=i;else{n.splitAxis=m.axis;let o=new q,s=g-r;n.left=o,w(t,r,s,o.boundingData,x),e(o,r,s,x,c+1);let l=new q,a=i-s;n.right=l,w(t,g,a,l.boundingData,x),e(l,g,a,x,c+1)}return n}(_,n,r,x),_;function F(e){u&&u(e/g)}}(e,a,n.offset,n.count,t),c=new l(32*function e(t){return"count"in t?1:1+e(t.left)+e(t.right)}(u));return r=new Float32Array(c),i=new Uint32Array(c),o=new Uint16Array(c),s=new Uint8Array(c),function e(t,n){let l=t/4,a=t/2,u="count"in n,c=n.boundingData;for(let e=0;e<6;e++)r[l+e]=c[e];if(u)if(n.buffer){let e=n.buffer;s.set(new Uint8Array(e),t);for(let n=t,r=t+e.byteLength;n<r;n+=32)_(n/2,o)||(i[n/4+6]+=l);return t+e.byteLength}else{let e=n.offset,r=n.count;return i[l+6]=e,o[a+14]=r,o[a+15]=65535,t+32}{let r,o=n.left,s=n.right,a=n.splitAxis;if((r=e(t+32,o))/4>0x100000000)throw Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[l+6]=r/4,r=e(r,s),i[l+7]=a,r}}(0,u),c})}(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new d.NRn))),this.resolveTriangleIndex=t.indirect?e=>this._indirectBuffer[e]:e=>e}refit(e=null){return(this.indirect?function(e,t=null){let n,r,i,o;t&&Array.isArray(t)&&(t=new Set(t));let s=e.geometry,l=s.index?s.index.array:null,a=s.attributes.position,u=0,c=e._roots;for(let s=0,f=c.length;s<f;s++)r=new Uint32Array(n=c[s]),i=new Uint16Array(n),o=new Float32Array(n),function n(s,u,c=!1){let f=2*s;if(65535===i[f+15]){let t=r[s+6],n=i[f+14],u=1/0,c=1/0,d=1/0,p=-1/0,h=-1/0,y=-1/0;for(let r=t,i=t+n;r<i;r++){let t=3*e.resolveTriangleIndex(r);for(let e=0;e<3;e++){let n=t+e;n=l?l[n]:n;let r=a.getX(n),i=a.getY(n),o=a.getZ(n);r<u&&(u=r),r>p&&(p=r),i<c&&(c=i),i>h&&(h=i),o<d&&(d=o),o>y&&(y=o)}}return(o[s+0]!==u||o[s+1]!==c||o[s+2]!==d||o[s+3]!==p||o[s+4]!==h||o[s+5]!==y)&&(o[s+0]=u,o[s+1]=c,o[s+2]=d,o[s+3]=p,o[s+4]=h,o[s+5]=y,!0)}{let e=s+8,i=r[s+6],l=e+u,a=i+u,f=c,d=!1,p=!1;t?f||(d=t.has(l),p=t.has(a),f=!d&&!p):(d=!0,p=!0);let h=f||d,y=f||p,m=!1;h&&(m=n(e,u,f));let g=!1;y&&(g=n(i,u,f));let x=m||g;if(x)for(let t=0;t<3;t++){let n=e+t,r=i+t,l=o[n],a=o[n+3],u=o[r],c=o[r+3];o[s+t]=l<u?l:u,o[s+t+3]=a>c?a:c}return x}}(0,u),u+=n.byteLength}:function(e,t=null){let n,r,i,o;t&&Array.isArray(t)&&(t=new Set(t));let s=e.geometry,l=s.index?s.index.array:null,a=s.attributes.position,u=0,c=e._roots;for(let e=0,s=c.length;e<s;e++)r=new Uint32Array(n=c[e]),i=new Uint16Array(n),o=new Float32Array(n),function e(n,s,u=!1){let c=2*n;if(65535===i[c+15]){let e=r[n+6],t=i[c+14],s=1/0,u=1/0,f=1/0,d=-1/0,p=-1/0,h=-1/0;for(let n=3*e,r=3*(e+t);n<r;n++){let e=l[n],t=a.getX(e),r=a.getY(e),i=a.getZ(e);t<s&&(s=t),t>d&&(d=t),r<u&&(u=r),r>p&&(p=r),i<f&&(f=i),i>h&&(h=i)}return(o[n+0]!==s||o[n+1]!==u||o[n+2]!==f||o[n+3]!==d||o[n+4]!==p||o[n+5]!==h)&&(o[n+0]=s,o[n+1]=u,o[n+2]=f,o[n+3]=d,o[n+4]=p,o[n+5]=h,!0)}{let i=n+8,l=r[n+6],a=i+s,c=l+s,f=u,d=!1,p=!1;t?f||(d=t.has(a),p=t.has(c),f=!d&&!p):(d=!0,p=!0);let h=f||d,y=f||p,m=!1;h&&(m=e(i,s,f));let g=!1;y&&(g=e(l,s,f));let x=m||g;if(x)for(let e=0;e<3;e++){let t=i+e,r=l+e,s=o[t],a=o[t+3],u=o[r],c=o[r+3];o[n+e]=s<u?s:u,o[n+e+3]=a>c?a:c}return x}}(0,u),u+=n.byteLength})(this,e)}traverse(e,t=0){let n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(o,s=0){let l=2*o,a=65535===i[l+15];if(a){let t=r[o+6],u=i[l+14];e(s,a,new Float32Array(n,4*o,6),t,u)}else{let i=r[o+6],l=r[o+7];e(s,a,new Float32Array(n,4*o,6),l)||(t(o+8,s+1),t(i,s+1))}}(0)}raycast(e,t=d.hB5,n=0,r=1/0){let i=this._roots,o=this.geometry,s=[],l=t.isMaterial,a=Array.isArray(t),u=o.groups,c=l?t.side:t,f=this.indirect?eq:ec;for(let o=0,l=i.length;o<l;o++){let i=a?t[u[o].materialIndex].side:c,l=s.length;if(f(this,o,i,e,s,n,r),a){let e=u[o].materialIndex;for(let t=l,n=s.length;t<n;t++)s[t].face.materialIndex=e}}return s}raycastFirst(e,t=d.hB5,n=0,r=1/0){let i=this._roots,o=this.geometry,s=t.isMaterial,l=Array.isArray(t),a=null,u=o.groups,c=s?t.side:t,f=this.indirect?eU:ed;for(let o=0,s=i.length;o<s;o++){let i=l?t[u[o].materialIndex].side:c,s=f(this,o,i,e,n,r);null!=s&&(null==a||s.distance<a.distance)&&(a=s,l&&(s.face.materialIndex=u[o].materialIndex))}return a}intersectsGeometry(e,t){let n=!1,r=this._roots,i=this.indirect?eD:ew;for(let o=0,s=r.length;o<s&&!(n=i(this,o,e,t));o++);return n}shapecast(e){let t=k.getPrimitive(),n=this.indirect?eS:ea,{boundsTraverseOrder:r,intersectsBounds:i,intersectsRange:o,intersectsTriangle:s}=e;if(o&&s){let e=o;o=(r,i,o,l,a)=>!!e(r,i,o,l,a)||n(r,i,this,s,o,l,t)}else o||(o=s?(e,r,i,o)=>n(e,r,this,s,i,o,t):(e,t,n)=>n);let u=!1,c=0,f=this._roots;for(let e=0,t=f.length;e<t;e++){let t=f[e];if(u=function(e,t,n,r,i,o){l=L.getPrimitive(),a=L.getPrimitive(),j.push(l,a),Z.setBuffer(e._roots[t]);let s=function e(t,n,r,i,o=null,s=0,u=0){let{float32Array:c,uint16Array:f,uint32Array:d}=Z,p=2*t;if(_(p,f)){let e=d[t+6],n=F(p,f);return b(t,c,l),i(e,n,!1,u,s+t,l)}{let p,m,g,x,w,P,B=t+8,T=d[t+6],v=B,A=T;if(o&&(g=l,x=a,b(v,c,g),b(A,c,x),p=o(g),(m=o(x))<p)){v=T,A=B;let e=p;p=m,m=e,g=x}g||b(v,c,g=l);let M=r(g,_(2*v,f),p,u+1,s+v);if(2===M){let e=h(v);w=i(e,y(v)-e,!0,u+1,s+v,g)}else w=M&&e(v,n,r,i,o,s,u+1);if(w)return!0;b(A,c,x=a);let S=r(x,_(2*A,f),m,u+1,s+A);if(2===S){let e=h(A);P=i(e,y(A)-e,!0,u+1,s+A,x)}else P=S&&e(A,n,r,i,o,s,u+1);if(P)return!0;return!1;function h(e){let{uint16Array:t,uint32Array:n}=Z,r=2*e;for(;!_(r,t);)r=2*(e+=8);return n[e+6]}function y(e){let{uint16Array:t,uint32Array:n}=Z,r=2*e;for(;!_(r,t);)r=2*(e=n[e+6]);return n[e+6]+F(r,t)}}}(0,e.geometry,n,r,i,o);Z.clearBuffer(),L.releasePrimitive(l),L.releasePrimitive(a),j.pop(),j.pop();let u=j.length;return u>0&&(a=j[u-1],l=j[u-2]),s}(this,e,i,o,r,c))break;c+=t.byteLength}return k.releasePrimitive(t),u}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:i}=n,o=k.getPrimitive(),s=this.geometry.index,l=this.geometry.attributes.position,a=this.indirect?e=>{el(o,3*this.resolveTriangleIndex(e),s,l)}:e=>{el(o,3*e,s,l)},u=k.getPrimitive(),c=e.geometry.index,f=e.geometry.attributes.position,p=e.indirect?t=>{el(u,3*e.resolveTriangleIndex(t),c,f)}:e=>{el(u,3*e,c,f)};if(i){let e=(e,n,r,s,l,c,f,d)=>{for(let h=r,y=r+s;h<y;h++){p(h),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++)if(a(t),o.needsUpdate=!0,i(o,u,t,h,l,c,f,d))return!0}return!1};if(r){let t=r;r=function(n,r,i,o,s,l,a,u){return!!t(n,r,i,o,s,l,a,u)||e(n,r,i,o,s,l,a,u)}}else r=e}return function(e,t,n,r){let i;if(eQ)throw Error("MeshBVH: Recursive calls to bvhcast not supported.");eQ=!0;let o=e._roots,s=t._roots,l=0,a=0,u=new d.kn4().copy(n).invert();for(let e=0,t=o.length;e<t;e++){ej.setBuffer(o[e]),a=0;let t=eX.getPrimitive();b(0,ej.float32Array,t),t.applyMatrix4(u);for(let e=0,o=s.length;e<o&&(eL.setBuffer(s[e]),i=function e(t,n,r,i,o,s=0,l=0,a=0,u=0,c=null,f=!1){let d,p;f?(d=eL,p=ej):(d=ej,p=eL);let h=d.float32Array,y=d.uint32Array,m=d.uint16Array,g=p.float32Array,x=p.uint32Array,w=p.uint16Array,P=2*n,B=_(2*t,m),T=_(P,w),v=!1;if(T&&B)v=f?o(x[n+6],F(2*n,w),y[t+6],F(2*t,m),u,l+n,a,s+t):o(y[t+6],F(2*t,m),x[n+6],F(2*n,w),a,s+t,u,l+n);else if(T){let c=eX.getPrimitive();b(n,g,c),c.applyMatrix4(r);let d=t+8,p=y[t+6];b(d,h,eW),b(p,h,eG);let m=c.intersectsBox(eW),x=c.intersectsBox(eG);v=m&&e(n,d,i,r,o,l,s,u,a+1,c,!f)||x&&e(n,p,i,r,o,l,s,u,a+1,c,!f),eX.releasePrimitive(c)}else{let d=n+8,p=x[n+6];b(d,g,e$),b(p,g,eK);let m=c.intersectsBox(e$),w=c.intersectsBox(eK);if(m&&w)v=e(t,d,r,i,o,s,l,a,u+1,c,f)||e(t,p,r,i,o,s,l,a,u+1,c,f);else if(m)if(B)v=e(t,d,r,i,o,s,l,a,u+1,c,f);else{let n=eX.getPrimitive();n.copy(e$).applyMatrix4(r);let c=t+8,p=y[t+6];b(c,h,eW),b(p,h,eG);let m=n.intersectsBox(eW),g=n.intersectsBox(eG);v=m&&e(d,c,i,r,o,l,s,u,a+1,n,!f)||g&&e(d,p,i,r,o,l,s,u,a+1,n,!f),eX.releasePrimitive(n)}else if(w)if(B)v=e(t,p,r,i,o,s,l,a,u+1,c,f);else{let n=eX.getPrimitive();n.copy(eK).applyMatrix4(r);let c=t+8,d=y[t+6];b(c,h,eW),b(d,h,eG);let m=n.intersectsBox(eW),g=n.intersectsBox(eG);v=m&&e(p,c,i,r,o,l,s,u,a+1,n,!f)||g&&e(p,d,i,r,o,l,s,u,a+1,n,!f),eX.releasePrimitive(n)}}return v}(0,0,n,u,r,l,a,0,0,t),eL.clearBuffer(),a+=s[e].length,!i);e++);if(eX.releasePrimitive(t),ej.clearBuffer(),l+=o[e].length,i)break}return eQ=!1,i}(this,e,t,r)}intersectsBox(e,t){return eJ.set(e.min,e.max,t),eJ.needsUpdate=!0,this.shapecast({intersectsBounds:e=>eJ.intersectsBox(e),intersectsTriangle:e=>eJ.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},r={},i=0,o=1/0){return(this.indirect?function(e,t,n,r={},i={},o=0,s=1/0){t.boundingBox||t.computeBoundingBox(),eC.set(t.boundingBox.min,t.boundingBox.max,n),eC.needsUpdate=!0;let l=e.geometry,a=l.attributes.position,u=l.index,c=t.attributes.position,f=t.index,d=k.getPrimitive(),p=k.getPrimitive(),h=null,y=null;i&&(h=eH,y=eZ);let g=1/0,x=null,w=null;return(eV.copy(n).invert(),eN.matrix.copy(eV),e.shapecast({boundsTraverseOrder:e=>eC.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s&&(t&&(eN.min.copy(e.min),eN.max.copy(e.max),eN.needsUpdate=!0),!0),intersectsRange:(r,i)=>{if(t.boundsTree){let l=t.boundsTree;return l.shapecast({boundsTraverseOrder:e=>eN.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s,intersectsRange:(t,s)=>{for(let m=t,b=t+s;m<b;m++){el(p,3*l.resolveTriangleIndex(m),f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=r,n=r+i;t<n;t++){el(d,3*e.resolveTriangleIndex(t),u,a),d.needsUpdate=!0;let n=d.distanceToTriangle(p,eY,h);if(n<g&&(ek.copy(eY),y&&y.copy(h),g=n,x=t,w=m),n<o)return!0}}}})}{let s=m(t);for(let t=0;t<s;t++){el(p,3*t,f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let n=r,s=r+i;n<s;n++){el(d,3*e.resolveTriangleIndex(n),u,a),d.needsUpdate=!0;let r=d.distanceToTriangle(p,eY,h);if(r<g&&(ek.copy(eY),y&&y.copy(h),g=r,x=n,w=t),r<o)return!0}}}}}),k.releasePrimitive(d),k.releasePrimitive(p),g===1/0)?null:(r.point?r.point.copy(ek):r.point=ek.clone(),r.distance=g,r.faceIndex=x,i&&(i.point?i.point.copy(y):i.point=y.clone(),i.point.applyMatrix4(eV),ek.applyMatrix4(eV),i.distance=ek.sub(i.point).length(),i.faceIndex=w),r)}:function(e,t,n,r={},i={},o=0,s=1/0){t.boundingBox||t.computeBoundingBox(),eP.set(t.boundingBox.min,t.boundingBox.max,n),eP.needsUpdate=!0;let l=e.geometry,a=l.attributes.position,u=l.index,c=t.attributes.position,f=t.index,d=k.getPrimitive(),p=k.getPrimitive(),h=null,y=null;i&&(h=eA,y=eM);let g=1/0,x=null,w=null;return(eb.copy(n).invert(),eB.matrix.copy(eb),e.shapecast({boundsTraverseOrder:e=>eP.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s&&(t&&(eB.min.copy(e.min),eB.max.copy(e.max),eB.needsUpdate=!0),!0),intersectsRange:(e,r)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:e=>eB.distanceToBox(e),intersectsBounds:(e,t,n)=>n<g&&n<s,intersectsRange:(t,i)=>{for(let s=t,l=t+i;s<l;s++){el(p,3*s,f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let t=e,n=e+r;t<n;t++){el(d,3*t,u,a),d.needsUpdate=!0;let e=d.distanceToTriangle(p,eT,h);if(e<g&&(ev.copy(eT),y&&y.copy(h),g=e,x=t,w=s),e<o)return!0}}}});{let i=m(t);for(let t=0;t<i;t++){el(p,3*t,f,c),p.a.applyMatrix4(n),p.b.applyMatrix4(n),p.c.applyMatrix4(n),p.needsUpdate=!0;for(let n=e,i=e+r;n<i;n++){el(d,3*n,u,a),d.needsUpdate=!0;let e=d.distanceToTriangle(p,eT,h);if(e<g&&(ev.copy(eT),y&&y.copy(h),g=e,x=n,w=t),e<o)return!0}}}}}),k.releasePrimitive(d),k.releasePrimitive(p),g===1/0)?null:(r.point?r.point.copy(ev):r.point=ev.clone(),r.distance=g,r.faceIndex=x,i&&(i.point?i.point.copy(y):i.point=y.clone(),i.point.applyMatrix4(eb),ev.applyMatrix4(eb),i.distance=ev.sub(i.point).length(),i.faceIndex=w),r)})(this,e,t,n,r,i,o)}closestPointToPoint(e,t={},n=0,r=1/0){return function(e,t,n={},r=0,i=1/0){let o=r*r,s=i*i,l=1/0,a=null;if(e.shapecast({boundsTraverseOrder:e=>(X.copy(t).clamp(e.min,e.max),X.distanceToSquared(t)),intersectsBounds:(e,t,n)=>n<l&&n<s,intersectsTriangle:(e,n)=>{e.closestPointToPoint(t,X);let r=t.distanceToSquared(X);return r<l&&(W.copy(X),l=r,a=n),r<o}}),l===1/0)return null;let u=Math.sqrt(l);return n.point?n.point.copy(W):n.point=W.clone(),n.distance=u,n.faceIndex=a,n}(this,e,t,n,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{b(0,new Float32Array(t),e0),e.union(e0)}),e}}parseInt(d.sPf);let e2=new d.RlV,e6=new d.Pq0,e4=new d.kn4,e5=d.eaF.prototype.raycast,e8=d.$Ed.prototype.raycast,e7=new d.Pq0,e9=new d.eaF,te=[];function tt(e,t){this.isBatchedMesh?tn.call(this,e,t):tr.call(this,e,t)}function tn(e,t){if(this.boundsTrees){let n=this.boundsTrees,r=this._drawInfo||this._instanceInfo,i=this._drawRanges||this._geometryInfo,o=this.matrixWorld;e9.material=this.material,e9.geometry=this.geometry;let s=e9.geometry.boundsTree,l=e9.geometry.drawRange;null===e9.geometry.boundingSphere&&(e9.geometry.boundingSphere=new d.iyt);for(let s=0,l=r.length;s<l;s++){if(!this.getVisibleAt(s))continue;let l=r[s].geometryIndex;if(e9.geometry.boundsTree=n[l],this.getMatrixAt(s,e9.matrixWorld).premultiply(o),!e9.geometry.boundsTree){this.getBoundingBoxAt(l,e9.geometry.boundingBox),this.getBoundingSphereAt(l,e9.geometry.boundingSphere);let e=i[l];e9.geometry.setDrawRange(e.start,e.count)}e9.raycast(e,te);for(let e=0,n=te.length;e<n;e++){let n=te[e];n.object=this,n.batchId=s,t.push(n)}te.length=0}e9.geometry.boundsTree=s,e9.geometry.drawRange=l,e9.material=null,e9.geometry=null}else e8.call(this,e,t)}function tr(e,t){if(this.geometry.boundsTree){if(void 0===this.material)return;e4.copy(this.matrixWorld).invert(),e2.copy(e.ray).applyMatrix4(e4),e7.setFromMatrixScale(this.matrixWorld),e6.copy(e2.direction).multiply(e7);let n=e6.length(),r=e.near/n,i=e.far/n,o=this.geometry.boundsTree;if(!0===e.firstHitOnly){let n=y(o.raycastFirst(e2,this.material,r,i),this,e);n&&t.push(n)}else{let n=o.raycast(e2,this.material,r,i);for(let r=0,i=n.length;r<i;r++){let i=y(n[r],this,e);i&&t.push(i)}}}else e5.call(this,e,t)}function ti(e={}){return this.boundsTree=new e3(this,e),this.boundsTree}function to(){this.boundsTree=null}let ts=f.forwardRef(({enabled:e=!0,firstHitOnly:t=!1,children:n,strategy:r=p,verbose:i=!1,setBoundingBox:o=!0,maxDepth:s=40,maxLeafTris:l=10,indirect:a=!1,...h},y)=>{let m=f.useRef(null),g=(0,c.C)(e=>e.raycaster);return f.useImperativeHandle(y,()=>m.current,[]),f.useEffect(()=>{if(e){let e={strategy:r,verbose:i,setBoundingBox:o,maxDepth:s,maxLeafTris:l,indirect:a},n=m.current;return g.firstHitOnly=t,n.traverse(t=>{t.isMesh&&!t.geometry.boundsTree&&t.raycast===d.eaF.prototype.raycast&&(t.raycast=tt,t.geometry.computeBoundsTree=ti,t.geometry.disposeBoundsTree=to,t.geometry.computeBoundsTree(e))}),()=>{delete g.firstHitOnly,n.traverse(e=>{e.isMesh&&e.geometry.boundsTree&&(e.geometry.disposeBoundsTree(),e.raycast=d.eaF.prototype.raycast)})}}},[]),f.createElement("group",(0,u.A)({ref:m},h),n)})},79706:(e,t,n)=>{"use strict";var r=n(3717);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},86089:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return r.default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}(n(56486))},92015:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var r=n(44501),i=n(14232),o=n(66691),s=n(88360);let l=i.forwardRef(function({children:e,follow:t=!0,lockX:n=!1,lockY:l=!1,lockZ:a=!1,...u},c){let f=i.useRef(null),d=i.useRef(null),p=new o.PTz;return(0,s.D)(({camera:e})=>{if(!t||!d.current)return;let r=f.current.rotation.clone();d.current.updateMatrix(),d.current.updateWorldMatrix(!1,!1),d.current.getWorldQuaternion(p),e.getWorldQuaternion(f.current.quaternion).premultiply(p.invert()),n&&(f.current.rotation.x=r.x),l&&(f.current.rotation.y=r.y),a&&(f.current.rotation.z=r.z)}),i.useImperativeHandle(c,()=>d.current,[]),i.createElement("group",(0,r.A)({ref:d},u),i.createElement("group",{ref:f},e))})},95062:(e,t,n)=>{e.exports=n(79706)()}}]);
//# sourceMappingURL=7367-468c3fea9667120f.js.map