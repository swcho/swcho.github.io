{"version":3,"file":"static/chunks/pages/blogs/2025-08-16-r3f-instances-9b39f1b5e8d9b933.js","mappings":"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","sources":["webpack://_N_E/./components/Area.tsx","webpack://_N_E/?6e6f","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/src/App01.tsx","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/src/App02.tsx","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/src/App03.tsx","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/index.page.mdx","webpack://_N_E/./components/Footer.tsx","webpack://_N_E/./components/Header.tsx","webpack://_N_E/./components/Layout.tsx","webpack://_N_E/./components/BlogPostContext.tsx","webpack://_N_E/./components/HeadPost.tsx","webpack://_N_E/./components/BlogPost.tsx"],"sourcesContent":["import * as React from 'react';\n\nexport type Props = Omit<React.ComponentPropsWithRef<'div'>, 'children'> & {\n  children: (el: HTMLDivElement) => React.ReactNode;\n};\n\nconst Area = React.forwardRef<HTMLDivElement, Props>((props) => {\n  const { children, ...rest } = props;\n  const ref = React.useRef<HTMLDivElement>(null);\n  const [el, setEl] = React.useState<HTMLDivElement>();\n  React.useEffect(() => {\n    setEl(ref.current!);\n  }, []);\n  // console.log('Area', { el });\n  return (\n    <div\n      ref={ref}\n      css={{ border: '1px solid', borderRadius: '4px', width: '100%', height: '300px', marginBottom: '1rem' }}\n      {...rest}\n    >\n      {el && children(el)}\n    </div>\n  );\n});\n\nexport default React.memo(Area);\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/blogs/2025-08-16-r3f-instances\",\n      function () {\n        return require(\"private-next-pages/blogs/2025-08-16-r3f-instances/index.page.mdx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/blogs/2025-08-16-r3f-instances\"])\n      });\n    }\n  ","import Area from '@/components/Area';\nimport { CameraControls } from '@react-three/drei';\nimport { Canvas, GroupProps } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\n// import { schemeCategory10 } from 'd3-scale-chromatic';\n\ntype BoxesProps = {\n  edgeCount?: number;\n  size?: [number, number, number];\n} & GroupProps;\n\n// const c = new THREE.Color();\nconst o = new THREE.Object3D();\n\nfunction Boxes({ edgeCount = 10, size = [0.15, 0.15, 0.15], ...props }: BoxesProps) {\n  const count = edgeCount ** 3;\n  const ref = React.useRef<THREE.InstancedMesh>(null!);\n  // const colors = React.useMemo(\n  //   () =>\n  //     new Float32Array(\n  //       Array.from({ length: count }, () => c.set(schemeCategory10[Math.floor(Math.random() * 10)]).toArray()).flat()\n  //     ),\n  //   [count]\n  // );\n  React.useLayoutEffect(() => {\n    let i = 0;\n    // const root = Math.round(Math.cbrt(count));\n    const root = edgeCount;\n    const halfRoot = root / 2;\n    console.log('root', root, 'halfRoot', halfRoot);\n    for (let x = 0; x < root; x++) {\n      for (let y = 0; y < root; y++) {\n        for (let z = 0; z < root; z++) {\n          const id = i++;\n          o.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n          o.position.set(halfRoot - x + Math.random(), halfRoot - y + Math.random(), halfRoot - z + Math.random());\n          o.updateMatrix();\n          ref.current.setMatrixAt(id, o.matrix);\n\n          // o.position.set(halfRoot - x, halfRoot - y, halfRoot - z);\n          // o.position.set(x, y, z);\n          // console.log('id', id, 'x', x, 'y', y, 'z', z, 'position', o.position);\n        }\n      }\n    }\n    ref.current.instanceMatrix.needsUpdate = true;\n  }, [edgeCount]);\n\n  return (\n    <group {...props}>\n      <instancedMesh ref={ref} args={[undefined, undefined, count]}>\n        <boxGeometry args={size}>\n          {/* <instancedBufferAttribute attach=\"attributes-color\" args={[colors, 3]} /> */}\n          {/* <instancedBufferAttribute attach=\"instancePosition\" args={[new Float32Array(length * 3), 3]} /> */}\n        </boxGeometry>\n        <meshLambertMaterial vertexColors toneMapped={false} />\n        {/* <meshStandardMaterial toneMapped={false} /> */}\n      </instancedMesh>\n    </group>\n  );\n}\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n\n  return (\n    <Area>\n      {() => (\n        <Canvas>\n          <ambientLight intensity={0.85} />\n          <directionalLight position={[150, 150, 150]} intensity={1} />\n          <Boxes />\n          {/* <mesh>\n            <boxGeometry args={[1, 1, 1]} />\n            <meshStandardMaterial color=\"red\" />\n          </mesh> */}\n          <gridHelper args={[10, 10]} />\n          <axesHelper args={[5]} />\n          <CameraControls />\n          {/* <OrbitControls /> */}\n        </Canvas>\n      )}\n    </Area>\n  );\n}\n\nexport default React.memo(App01);\n","import Area from '@/components/Area';\nimport { CameraControls } from '@react-three/drei';\nimport { Canvas, GroupProps } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\n\ntype BoxesProps = {\n  edgeCount?: number;\n  size?: [number, number, number];\n} & GroupProps;\n\nconst c = new THREE.Color();\nconst o = new THREE.Object3D();\n\nfunction Boxes({ edgeCount = 10, size = [0.15, 0.15, 0.15], ...props }: BoxesProps) {\n  const count = edgeCount ** 3;\n  const ref = React.useRef<THREE.InstancedMesh>(null!);\n  const colors = React.useMemo(\n    () =>\n      new Float32Array(\n        Array.from({ length: count }, () => c.set(schemeCategory10[Math.floor(Math.random() * 10)]).toArray()).flat()\n      ),\n    [count]\n  );\n  React.useLayoutEffect(() => {\n    let i = 0;\n    // const root = Math.round(Math.cbrt(count));\n    const root = edgeCount;\n    const halfRoot = root / 2;\n    console.log('root', root, 'halfRoot', halfRoot);\n    for (let x = 0; x < root; x++) {\n      for (let y = 0; y < root; y++) {\n        for (let z = 0; z < root; z++) {\n          const id = i++;\n          o.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n          o.position.set(halfRoot - x + Math.random(), halfRoot - y + Math.random(), halfRoot - z + Math.random());\n          o.updateMatrix();\n          ref.current.setMatrixAt(id, o.matrix);\n\n          // o.position.set(halfRoot - x, halfRoot - y, halfRoot - z);\n          // o.position.set(x, y, z);\n          // console.log('id', id, 'x', x, 'y', y, 'z', z, 'position', o.position);\n        }\n      }\n    }\n    ref.current.instanceMatrix.needsUpdate = true;\n  }, [edgeCount]);\n\n  return (\n    <group {...props}>\n      <instancedMesh ref={ref} args={[undefined, undefined, count]}>\n        <boxGeometry args={size}>\n          {/* <instancedBufferAttribute attach=\"instancePosition\" args={[new Float32Array(length * 3), 3]} /> */}\n          <instancedBufferAttribute attach=\"attributes-color\" args={[colors, 3]} />\n        </boxGeometry>\n        <meshLambertMaterial vertexColors toneMapped={false} />\n        {/* <meshStandardMaterial toneMapped={false} /> */}\n      </instancedMesh>\n    </group>\n  );\n}\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n\n  return (\n    <Area>\n      {() => (\n        <Canvas>\n          <ambientLight intensity={0.85} />\n          <directionalLight position={[150, 150, 150]} intensity={1} />\n          <Boxes />\n          {/* <mesh>\n            <boxGeometry args={[1, 1, 1]} />\n            <meshStandardMaterial color=\"red\" />\n          </mesh> */}\n          <gridHelper args={[10, 10]} />\n          <axesHelper args={[5]} />\n          <CameraControls />\n          {/* <OrbitControls /> */}\n        </Canvas>\n      )}\n    </Area>\n  );\n}\n\nexport default React.memo(App01);\n","import Area from '@/components/Area';\nimport { CameraControls, shaderMaterial } from '@react-three/drei';\nimport { Canvas, extend, GroupProps, ReactThreeFiber } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\n\ntype MeshEdgesMaterialProps = {\n  color?: THREE.ColorRepresentation;\n  size?: THREE.Vector3 | THREE.Vector3Tuple;\n  thickness?: number;\n  smoothness?: number;\n};\n\nconst MeshEdgesMaterial = shaderMaterial(\n  {\n    color: new THREE.Color('white'),\n    size: new THREE.Vector3(1, 1, 1),\n    thickness: 0.01,\n    smoothness: 0.2,\n  },\n  /*glsl*/ `varying vec3 vPosition;\n  void main() {\n    vPosition = position;\n    gl_Position = projectionMatrix * viewMatrix * instanceMatrix * vec4(position, 1.0);\n  }`,\n  /*glsl*/ `varying vec3 vPosition;\n  uniform vec3 size;\n  uniform vec3 color;\n  uniform float thickness;\n  uniform float smoothness;\n  void main() {\n    vec3 d = abs(vPosition) - (size * 0.5);\n    float a = smoothstep(thickness, thickness + smoothness, min(min(length(d.xy), length(d.yz)), length(d.xz)));\n    gl_FragColor = vec4(color, 1.0 - a);\n  }`\n);\n\nextend({ MeshEdgesMaterial });\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      meshEdgesMaterial: ReactThreeFiber.Node<\n        typeof MeshEdgesMaterial & JSX.IntrinsicElements['shaderMaterial'],\n        MeshEdgesMaterialProps\n      > &\n        MeshEdgesMaterialProps;\n    }\n  }\n}\n\ntype BoxesProps = {\n  edgeCount?: number;\n  size?: [number, number, number];\n} & GroupProps;\n\nconst c = new THREE.Color();\nconst o = new THREE.Object3D();\n\nfunction Boxes({ edgeCount = 10, size = [0.15, 0.15, 0.15], ...props }: BoxesProps) {\n  const count = edgeCount ** 3;\n  const ref = React.useRef<THREE.InstancedMesh>(null!);\n  const outlines = React.useRef<THREE.InstancedMesh>(null!);\n  const colors = React.useMemo(\n    () =>\n      new Float32Array(\n        Array.from({ length: count }, () => c.set(schemeCategory10[Math.floor(Math.random() * 10)]).toArray()).flat()\n      ),\n    [count]\n  );\n  React.useLayoutEffect(() => {\n    let i = 0;\n    // const root = Math.round(Math.cbrt(count));\n    const root = edgeCount;\n    const halfRoot = root / 2;\n    console.log('root', root, 'halfRoot', halfRoot);\n    for (let x = 0; x < root; x++) {\n      for (let y = 0; y < root; y++) {\n        for (let z = 0; z < root; z++) {\n          const id = i++;\n          o.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n          o.position.set(halfRoot - x + Math.random(), halfRoot - y + Math.random(), halfRoot - z + Math.random());\n          o.updateMatrix();\n          ref.current.setMatrixAt(id, o.matrix);\n          // o.position.set(halfRoot - x, halfRoot - y, halfRoot - z);\n          // o.position.set(x, y, z);\n          // console.log('id', id, 'x', x, 'y', y, 'z', z, 'position', o.position);\n        }\n      }\n    }\n    ref.current.instanceMatrix.needsUpdate = true;\n    outlines.current.geometry = ref.current.geometry;\n    outlines.current.instanceMatrix = ref.current.instanceMatrix;\n  }, [edgeCount]);\n\n  return (\n    <group {...props}>\n      <instancedMesh ref={ref} args={[undefined, undefined, count]}>\n        <boxGeometry args={size}>\n          {/* <instancedBufferAttribute attach=\"instancePosition\" args={[new Float32Array(length * 3), 3]} /> */}\n          <instancedBufferAttribute attach=\"attributes-color\" args={[colors, 3]} />\n        </boxGeometry>\n        <meshLambertMaterial vertexColors toneMapped={false} />\n        {/* <meshStandardMaterial toneMapped={false} /> */}\n      </instancedMesh>\n      <instancedMesh ref={outlines} args={[undefined, undefined, count]}>\n        <meshEdgesMaterial\n          transparent\n          polygonOffset\n          polygonOffsetFactor={-1}\n          size={size}\n          color=\"black\"\n          thickness={0.001}\n          smoothness={0.05}\n        />\n      </instancedMesh>\n    </group>\n  );\n}\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n\n  return (\n    <Area>\n      {() => (\n        <Canvas>\n          <ambientLight intensity={0.85} />\n          <directionalLight position={[150, 150, 150]} intensity={1} />\n          <Boxes />\n          {/* <mesh>\n            <boxGeometry args={[1, 1, 1]} />\n            <meshStandardMaterial color=\"red\" />\n          </mesh> */}\n          <gridHelper args={[10, 10]} />\n          <axesHelper args={[5]} />\n          <CameraControls />\n          {/* <OrbitControls /> */}\n        </Canvas>\n      )}\n    </Area>\n  );\n}\n\nexport default React.memo(App01);\n",null,"import * as React from 'react';\n\n// import Anchor from './Anchor';\n\nconst Footer = React.memo(() => (\n  <>\n    {/* <footer className=\"bg-white border-t border-gray-400 shadow\">\n        <div className=\"container flex max-w-4xl py-8 mx-auto\">\n          <div className=\"flex flex-wrap w-full mx-auto\">\n            <div className=\"flex w-full md:w-1/2\">\n              <div className=\"px-8\">\n                <h3 className=\"font-bold text-gray-900\">About</h3>\n                <p className=\"py-4 text-sm text-gray-600\">My blog</p>\n              </div>\n            </div>\n\n            <div className=\"flex w-full md:w-1/2\">\n              <div className=\"px-8\">\n                <h3 className=\"font-bold text-gray-900\">Social</h3>\n                <ul className=\"items-center pt-3 text-sm list-reset\">\n                  <li>\n                    <Anchor>Add social link</Anchor>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </footer> */}\n  </>\n));\n\nexport default Footer;\n","import { useRouter } from 'next/dist/client/router';\nimport Link from 'next/link';\n\nimport * as React from 'react';\n\ntype MenuItem = {\n  link: string;\n  text: string;\n};\n\nconst MENU_ITEMS: MenuItem[] = [\n  {\n    link: '/',\n    text: 'Home',\n  },\n  // {\n  //   link: '/about',\n  //   text: 'About',\n  // },\n];\n\nconst Header = React.memo(() => {\n  const router = useRouter();\n  const [openMenu, setOpenMenu] = React.useState(false);\n  // console.log(`Header openMenu=${openMenu}`);\n  return (\n    <nav className=\"w-full\">\n      <div\n        id=\"progress\"\n        className=\"top-0 z-20 h-1\"\n        style={{\n          background: 'linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)',\n        }}\n      />\n\n      <div className=\"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl\">\n        <div className=\"pl-4\">\n          <Link\n            legacyBehavior\n            className=\"text-xl font-extrabold text-gray-900 no-underline hover:no-underline\"\n            href=\"/\"\n          >\n            lifetime trails\n          </Link>\n        </div>\n\n        <div className=\"block pr-4 lg:hidden\">\n          <button\n            id=\"nav-toggle\"\n            type=\"button\"\n            className=\"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none\"\n            onMouseDown={(e) => e.preventDefault()}\n            onClick={() => setOpenMenu(!openMenu)}\n            onBlur={() => setOpenMenu(false)}\n          >\n            <svg className=\"w-3 h-3 fill-current\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n              <title>Menu</title>\n              <path d=\"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z\" />\n            </svg>\n          </button>\n        </div>\n\n        <div\n          id=\"nav-content\"\n          className={`bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ${\n            openMenu ? 'block' : 'hidden'\n          }`}\n        >\n          <ul className=\"items-center justify-end flex-1 list-reset lg:flex\">\n            {MENU_ITEMS.map(({ link, text }) => (\n              <li key={link} className=\"mr-3\">\n                <Link\n                  legacyBehavior\n                  className={\n                    router.pathname === link\n                      ? 'inline-block py-2 px-4 text-gray-900 font-bold no-underline'\n                      : 'inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4'\n                  }\n                  href={link}\n                >\n                  {text}\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n});\n\nexport default Header;\n","import Head from 'next/head';\n\nimport React, { PropsWithChildren } from 'react';\n\nimport Footer from './Footer';\nimport Header from './Header';\n\n// import typography from '../utils/typography';\n\ntype Props = PropsWithChildren<{\n  title?: string;\n}>;\n\nconst Layout = React.memo(({ children, title = 'This is the default title' }: Props) => (\n  <div className=\"leading-normal tracking-normal bg-gray-100 min-h-screen\">\n    <Head>\n      <title>{title}</title>\n      <meta charSet=\"utf-8\" />\n      <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n      {/* typography */}\n      {/* <TypographyStyle typography={typography} /> */}\n    </Head>\n    <Header />\n    <div className=\"container w-full px-4 pb-10 mx-auto md:max-w-3xl\">{children}</div>\n    <Footer />\n  </div>\n));\n\nexport default Layout;\n","import React from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst Context = React.createContext<any>({});\n\nexport type Props = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  staticProps: any;\n  children?: React.ReactNode;\n};\n\nexport function BlogContextProvider({ staticProps, children }: Props) {\n  return <Context.Provider value={staticProps}>{children}</Context.Provider>;\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function useBlogPostContext() {\n  return React.useContext(Context);\n}\n","import * as React from 'react';\n\nexport type Props = {\n  meta: MetaData;\n  isBlogPost?: boolean;\n};\n\nconst HeadPost = ({ meta, isBlogPost }: Props) => (\n  <>\n    <h1 className={`font-bold text-gray-800 mb-4 ${isBlogPost ? 'text-5xl mt-8 mb-8' : 'text-lg'}`}>{meta.title}</h1>\n    <div className=\"details\">\n      <p className=\"text-gray-500\">{meta.description}</p>\n      <p className=\"text-gray-400 text-right -mt-1\">\n        <span className=\"mr-4\">{meta.date}</span>\n      </p>\n    </div>\n  </>\n);\n\nexport default HeadPost;\n","import hljs from 'highlight.js';\n\nimport * as React from 'react';\nimport ReactUtterances from 'react-utterances';\n\nimport { BlogContextProvider } from './BlogPostContext';\nimport HeadPost from './HeadPost';\nimport Layout from './Layout';\n\nconst prd = process.env.NODE_ENV === 'production';\n\nexport type Props = React.PropsWithChildren<{\n  meta: MetaData;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, react/require-default-props\n  staticProps?: any;\n}>;\n\nexport default function BlogPost({ children, meta, staticProps }: Props) {\n  React.useEffect(() => {\n    // console.log('initHighlighting');\n    hljs.highlightAll();\n  }, []);\n  // console.log('BlogPost', { staticProps });\n  return (\n    <>\n      <Layout title={meta.title}>\n        <HeadPost meta={meta} isBlogPost />\n        <BlogContextProvider staticProps={staticProps}>\n          <article className=\"markdown\">{children}</article>\n        </BlogContextProvider>\n        {prd && <ReactUtterances repo=\"swcho/blog-comments\" type=\"pathname\" label=\"utterances\" theme=\"github-light\" />}\n      </Layout>\n    </>\n  );\n}\n"],"names":["Area","React","props","children","rest","ref","el","setEl","current","div","css","border","borderRadius","width","height","marginBottom","o","THREE","Boxes","edgeCount","size","count","i","halfRoot","root","console","log","x","y","z","id","rotation","set","Math","random","PI","position","updateMatrix","setMatrixAt","matrix","instanceMatrix","needsUpdate","group","instancedMesh","args","undefined","boxGeometry","meshLambertMaterial","vertexColors","toneMapped","App01","Canvas","ambientLight","intensity","directionalLight","gridHelper","axesHelper","CameraControls","c","colors","Float32Array","Array","from","length","schemeCategory10","floor","toArray","flat","instancedBufferAttribute","attach","MeshEdgesMaterial","shaderMaterial","color","thickness","smoothness","extend","outlines","geometry","meshEdgesMaterial","transparent","polygonOffset","polygonOffsetFactor","meta","title","description","date","readTime","BlogPost","Footer","MENU_ITEMS","link","text","Header","router","useRouter","openMenu","setOpenMenu","nav","className","style","background","Link","legacyBehavior","href","button","type","onMouseDown","e","preventDefault","onClick","onBlur","svg","viewBox","xmlns","path","d","ul","map","li","pathname","Layout","Head","charSet","name","content","Context","BlogContextProvider","staticProps","Provider","value","useBlogPostContext","isBlogPost","HeadPost","h1","p","span","hljs","article","ReactUtterances","repo","label","theme"],"sourceRoot":"","ignoreList":[]}