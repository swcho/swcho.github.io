(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4739],{46234:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-04-27-r3f-7-paring-ui",function(){return r(50235)}])},49034:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(18153),s=r(77328),i=r.n(s),l=r(14232);let a=l.memo(()=>(0,n.Y)(n.FK,{}));var o=r(71745),c=r(48230),u=r.n(c);let d=[{link:"/",text:"Home"}],v=l.memo(()=>{let e=(0,o.useRouter)(),[t,r]=l.useState(!1);return(0,n.FD)("nav",{className:"w-full",children:[(0,n.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,n.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,n.Y)("div",{className:"pl-4",children:(0,n.Y)(u(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,n.Y)("div",{className:"block pr-4 lg:hidden",children:(0,n.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>r(!t),onBlur:()=>r(!1),children:(0,n.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.Y)("title",{children:"Menu"}),(0,n.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,n.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,n.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:d.map(t=>{let{link:r,text:s}=t;return(0,n.Y)("li",{className:"mr-3",children:(0,n.Y)(u(),{legacyBehavior:!0,className:e.pathname===r?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:r,children:s})},r)})})})]})]})}),m=l.memo(e=>{let{children:t,title:r="This is the default title"}=e;return(0,n.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,n.FD)(i(),{children:[(0,n.Y)("title",{children:r}),(0,n.Y)("meta",{charSet:"utf-8"}),(0,n.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,n.Y)(v,{}),(0,n.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,n.Y)(a,{})]})})},49082:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(44501),s=r(71804),i=r(14232),l=r(78961);let a=i.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:a,enableDamping:o=!0,keyEvents:c=!1,onChange:u,onStart:d,onEnd:v,...m},h)=>{let f=(0,s.C)(e=>e.invalidate),p=(0,s.C)(e=>e.camera),x=(0,s.C)(e=>e.gl),g=(0,s.C)(e=>e.events),b=(0,s.C)(e=>e.setEvents),y=(0,s.C)(e=>e.set),D=(0,s.C)(e=>e.get),j=(0,s.C)(e=>e.performance),w=t||p,U=a||g.connected||x.domElement,Y=i.useMemo(()=>new l.N(w),[w]);return(0,s.D)(()=>{Y.enabled&&Y.update()},-1),i.useEffect(()=>(c&&Y.connect(!0===c?U:c),Y.connect(U),()=>void Y.dispose()),[c,U,r,Y,f]),i.useEffect(()=>{let e=e=>{f(),r&&j.regress(),u&&u(e)},t=e=>{d&&d(e)},n=e=>{v&&v(e)};return Y.addEventListener("change",e),Y.addEventListener("start",t),Y.addEventListener("end",n),()=>{Y.removeEventListener("start",t),Y.removeEventListener("end",n),Y.removeEventListener("change",e)}},[u,d,v,Y,f,b]),i.useEffect(()=>{if(e){let e=D().controls;return y({controls:Y}),()=>y({controls:e})}},[e,Y]),i.createElement("primitive",(0,n.A)({ref:h,object:Y,enableDamping:o},m))})},50235:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j,meta:()=>b});var n=r(37876),s=r(91668),i=r(91013),l=r(18153),a=r(14232),o=r(31861),c=r(60138),u=r(45302),d=r(35577);let v=a.memo(function(e){let{url:t,...r}=e,n=a.useDeferredValue(t),{scene:s,...i}=(0,d.p)(n);return console.log("Model",{restGltf:i}),(0,l.Y)("primitive",{object:s,...r})});var m=r(94892),h=r(49082);let f={Beech:"https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/tree-beech/model.gltf",Lime:"https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/tree-lime/model.gltf",Spruce:"https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/tree-spruce/model.gltf"},p=Object.keys(f),x=(0,c.A)(),g=a.memo(function(e){let{}=e,{model:t}=(0,o._5)({model:{value:p[0],options:p}});return(0,l.FD)("div",{style:{widows:"100%",height:"200px",marginBottom:"4rem"},children:[(0,l.FD)("header",{children:[(0,l.Y)("p",{children:t}),(0,l.Y)(x.Out,{})]}),(0,l.FD)(u.Hl,{camera:{position:[-10,10,40],fov:50},children:[(0,l.Y)("hemisphereLight",{intensity:.75,color:"white",groundColor:"blue"}),(0,l.Y)("spotLight",{position:[50,50,10],angle:.15,penumbra:1}),(0,l.FD)("group",{position:[0,-10,0],children:[(0,l.Y)(a.Suspense,{fallback:(0,l.Y)(x.In,{children:"Loading..."}),children:(0,l.Y)(v,{position:[0,.25,0],url:f[t]})}),(0,l.Y)(m._,{scale:20,blur:10,far:20})]}),(0,l.FD)("mesh",{children:[(0,l.Y)("boxGeometry",{args:[1,1,1]}),(0,l.Y)("meshStandardMaterial",{color:"orange"})]}),(0,l.Y)(h.N,{})]})]})}),b={title:"R3f: Pairing Three.js to UI",description:"react-three-fiber에서 leva와 tunnel-rat을 사용한 UI 연동 예제를 살펴 봅니다.",date:"2025-04-27",readTime:5},y=e=>{let{children:t}=e;return(0,n.jsx)(i.A,{meta:b,children:t})};function D(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{children:"Pairing Three.js to UI"}),"\n",(0,n.jsx)(t.p,{children:"다음 R3F 예제를 살펴봅니다."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://codesandbox.io/s/wlz1o0",children:"Pairing Three.js to UI"})}),"\n"]}),"\n",(0,n.jsx)(g,{}),"\n",(0,n.jsxs)(t.p,{children:["이 예제는 ",(0,n.jsx)(t.a,{href:"https://github.com/pmndrs/leva",children:"pmndrs/leva"})," UI를 통해 렌더링할 GLTF 모델을 선택합니다."]}),"\n",(0,n.jsxs)(t.p,{children:["선택한 GLTF 모델에 따라 GLTF 파일이 있는 url을 ",(0,n.jsx)(t.a,{href:"https://drei.docs.pmnd.rs/loaders/gltf-use-gltf",children:"useGLTF"})," hook으로 전달합니다."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"useGLTF"})," 파일 변경이 이루어지면 비동기 파일 로딩이 이루어지면서 해당 컴포넌트를 suspend 합니다."]}),"\n",(0,n.jsxs)(t.p,{children:["따라서 ",(0,n.jsx)(t.code,{children:"React.Suspend"})," 컴포넌트로 fallback 처리를 해 줍니다."]}),"\n",(0,n.jsxs)(t.p,{children:["이 과정에서 ",(0,n.jsx)(t.a,{href:"https://github.com/pmndrs/tunnel-rat",children:"pmndrs/tunnel-rat: \uD83D\uDC00 Non gratum anus rodentum"})," 패키지를 사용합니다."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"tunnel-rat"}),"은 ",(0,n.jsx)(t.code,{children:"<Tunnel.In />"})," 컴포넌트 태그 안에서 랜더링한 컴포넌트를 ",(0,n.jsx)(t.code,{children:"<Tunnel.Out />"})," 컴포넌트 태그 안에 표시하는 기능입니다."]}),"\n",(0,n.jsx)(t.p,{children:"초기화는 다음과 같이 합니다."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"import tunnel from 'tunnel-rat';\nconst t = tunnel();\n"})}),"\n",(0,n.jsxs)(t.p,{children:["특정 위치에 ",(0,n.jsx)(t.code,{children:"tunnel-rat"}),"을 사용해서 컴포넌트를 표시할 위치에 다음과 같이 ",(0,n.jsx)(t.code,{children:"Out"})," 컴포넌트를 배치 합니다."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"<t.out />\n"})}),"\n",(0,n.jsxs)(t.p,{children:["이후 다음과 같은 컴포넌트를 마운트하면 ",(0,n.jsx)(t.code,{children:"In"})," 컴포넌트 안에 있는 내용을 ",(0,n.jsx)(t.code,{children:"Out"}),"으로 출력합니다."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"<t.In>\n  <h1>tunnel-rat</h1>\n  <p>이 내용을 `t.Out` 컴포넌트에 표시합니다.</p>\n</t.In>\n"})}),"\n",(0,n.jsxs)(t.p,{children:["three.js 컴포넌트에서 UI 메시지나 디버그 용으로 html tag를 구성해서 마운트 하면 ",(0,n.jsx)(t.code,{children:"<Canvas />"})," 객체 밖에 배치한 ",(0,n.jsx)(t.code,{children:"Out"})," 컴포넌트에 표시할 수 있습니다."]})]})}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.jsx)(y,{...e,children:(0,n.jsx)(D,{...e})})}},60138:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n,s,i=r(14232);let l=e=>{let t,r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,i={setState:n,getState:s,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,s,i);return i};var a=r(45712);let{useDebugValue:o}=i,{useSyncExternalStoreWithSelector:c}=a,u=!1,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?(e=>e?l(e):l)(e):e,r=(e,r)=>(function(e,t=e=>e,r){r&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let n=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return o(n),n})(t,e,r);return Object.assign(r,t),r},v="undefined"!=typeof window&&(null!=(n=window.document)&&n.createElement||(null==(s=window.navigator)?void 0:s.product)==="ReactNative")?i.useLayoutEffect:i.useEffect;function m(){let e,t=(e=e=>({current:[],version:0,set:e}))?d(e):d;return{In:({children:e})=>{let r=t(e=>e.set),n=t(e=>e.version);return v(()=>{r(e=>({version:e.version+1}))},[]),v(()=>(r(({current:t})=>({current:[...t,e]})),()=>r(({current:t})=>({current:t.filter(t=>t!==e)}))),[e,n]),null},Out:()=>{let e=t(e=>e.current);return i.createElement(i.Fragment,null,e)}}}},60158:(e,t,r)=>{"use strict";r.d(t,{J:()=>a,j:()=>l});var n=r(18153),s=r(14232);let i=s.createContext({});function l(e){let{staticProps:t,children:r}=e;return(0,n.Y)(i.Provider,{value:t,children:r})}function a(){return s.useContext(i)}},85419:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(18153);r(14232);let s=e=>{let{meta:t,isBlogPost:r}=e;return(0,n.FD)(n.FK,{children:[(0,n.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(r?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,n.FD)("div",{className:"details",children:[(0,n.Y)("p",{className:"text-gray-500",children:t.description}),(0,n.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,n.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(18153),s=r(73146),i=r.n(s),l=r(14232),a=r(86089),o=r(60158),c=r(85419),u=r(49034);function d(e){let{children:t,meta:r,staticProps:s}=e;return l.useEffect(()=>{i().highlightAll()},[]),(0,n.Y)(n.FK,{children:(0,n.FD)(u.A,{title:r.title,children:[(0,n.Y)(c.A,{meta:r,isBlogPost:!0}),(0,n.Y)(o.j,{staticProps:s,children:(0,n.Y)("article",{className:"markdown",children:t})}),(0,n.Y)(a.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}},94892:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var n=r(44501),s=r(14232),i=r(14796),l=r(71804);let a={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},o={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},c=s.forwardRef(({scale:e=10,frames:t=1/0,opacity:r=1,width:c=1,height:u=1,blur:d=1,near:v=0,far:m=10,resolution:h=512,smooth:f=!0,color:p="#000000",depthWrite:x=!1,renderOrder:g,...b},y)=>{let D,j,w=s.useRef(null),U=(0,l.C)(e=>e.scene),Y=(0,l.C)(e=>e.gl),E=s.useRef(null);c*=Array.isArray(e)?e[0]:e||1,u*=Array.isArray(e)?e[1]:e||1;let[N,C,F,T,M,S,k]=s.useMemo(()=>{let e=new i.WebGLRenderTarget(h,h),t=new i.WebGLRenderTarget(h,h);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;let r=new i.PlaneGeometry(c,u).rotateX(Math.PI/2),n=new i.Mesh(r),s=new i.MeshDepthMaterial;s.depthTest=s.depthWrite=!1,s.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new i.Color(p)}},e.fragmentShader=e.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};let l=new i.ShaderMaterial(a),d=new i.ShaderMaterial(o);return d.depthTest=l.depthTest=!1,[e,r,s,n,l,d,t]},[h,c,u,e,p]),I=e=>{T.visible=!0,T.material=M,M.uniforms.tDiffuse.value=N.texture,M.uniforms.h.value=e/256,Y.setRenderTarget(k),Y.render(T,E.current),T.material=S,S.uniforms.tDiffuse.value=k.texture,S.uniforms.v.value=e/256,Y.setRenderTarget(N),Y.render(T,E.current),T.visible=!1},A=0;return(0,l.D)(()=>{E.current&&(t===1/0||A<t)&&(A++,D=U.background,j=U.overrideMaterial,w.current.visible=!1,U.background=null,U.overrideMaterial=F,Y.setRenderTarget(N),Y.render(U,E.current),I(d),f&&I(.4*d),Y.setRenderTarget(null),w.current.visible=!0,U.overrideMaterial=j,U.background=D)}),s.useImperativeHandle(y,()=>w.current,[]),s.createElement("group",(0,n.A)({"rotation-x":Math.PI/2},b,{ref:w}),s.createElement("mesh",{renderOrder:g,geometry:C,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},s.createElement("meshBasicMaterial",{transparent:!0,map:N.texture,opacity:r,depthWrite:x})),s.createElement("orthographicCamera",{ref:E,args:[-c/2,c/2,u/2,-u/2,v,m]}))})}},e=>{e.O(0,[7391,683,5695,5302,2077,3665,5003,1861,636,6593,8792],()=>e(e.s=46234)),_N_E=e.O()}]);
//# sourceMappingURL=2025-04-27-r3f-7-paring-ui-a0ac737399035c88.js.map