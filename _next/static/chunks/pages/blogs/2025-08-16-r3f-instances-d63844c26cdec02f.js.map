{"version":3,"file":"static/chunks/pages/blogs/2025-08-16-r3f-instances-d63844c26cdec02f.js","mappings":"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","sources":["webpack://_N_E/./components/Area.tsx","webpack://_N_E/?6e6f","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/src/App01.tsx","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/src/App02.tsx","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/src/App03.tsx","webpack://_N_E/./pages/blogs/2025-08-16-r3f-instances/index.page.mdx","webpack://_N_E/./components/Footer.tsx","webpack://_N_E/./components/Header.tsx","webpack://_N_E/./components/Layout.tsx","webpack://_N_E/./components/BlogPostContext.tsx","webpack://_N_E/./components/HeadPost.tsx","webpack://_N_E/./components/BlogPost.tsx"],"sourcesContent":["import * as React from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nexport type Props = Omit<React.ComponentPropsWithRef<'div'>, 'children'> & {\n  children: (el: HTMLDivElement) => React.ReactNode;\n};\n\nconst Area = React.forwardRef<HTMLDivElement, Props>((props, ref) => {\n  const { children, ...rest } = props;\n  const [el, setEl] = React.useState<HTMLDivElement | null>(null);\n\n  // Callback ref to set both local state and forward ref\n  const handleRef = React.useCallback(\n    (node: HTMLDivElement | null) => {\n      setEl(node);\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref && 'current' in ref) {\n        (ref as React.MutableRefObject<HTMLDivElement | null>).current = node;\n      }\n    },\n    [ref]\n  );\n\n  const [key, setKey] = React.useState(0);\n\n  return (\n    <div\n      ref={handleRef}\n      css={{\n        position: 'relative',\n        border: '1px solid',\n        borderRadius: '4px',\n        width: '100%',\n        height: '300px',\n        marginBottom: '1rem',\n      }}\n      {...rest}\n    >\n      <button onClick={() => setKey((k) => k + 1)} css={{ position: 'absolute', right: 0, zIndex: 1 }}>\n        <IconRefresh />\n      </button>\n      {el && <React.Fragment key={key}>{children(el)}</React.Fragment>}\n    </div>\n  );\n});\n\nexport default React.memo(Area);\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/blogs/2025-08-16-r3f-instances\",\n      function () {\n        return require(\"private-next-pages/blogs/2025-08-16-r3f-instances/index.page.mdx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/blogs/2025-08-16-r3f-instances\"])\n      });\n    }\n  ","import Area from '@/components/Area';\nimport { CameraControls } from '@react-three/drei';\nimport { Canvas, GroupProps } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\n// import { schemeCategory10 } from 'd3-scale-chromatic';\n\ntype BoxesProps = {\n  edgeCount?: number;\n  size?: [number, number, number];\n} & GroupProps;\n\n// const c = new THREE.Color();\nconst o = new THREE.Object3D();\n\nfunction Boxes({ edgeCount = 10, size = [0.15, 0.15, 0.15], ...props }: BoxesProps) {\n  const count = edgeCount ** 3;\n  const ref = React.useRef<THREE.InstancedMesh>(null!);\n  // const colors = React.useMemo(\n  //   () =>\n  //     new Float32Array(\n  //       Array.from({ length: count }, () => c.set(schemeCategory10[Math.floor(Math.random() * 10)]).toArray()).flat()\n  //     ),\n  //   [count]\n  // );\n  React.useLayoutEffect(() => {\n    let i = 0;\n    // const root = Math.round(Math.cbrt(count));\n    const root = edgeCount;\n    const halfRoot = root / 2;\n    console.log('root', root, 'halfRoot', halfRoot);\n    for (let x = 0; x < root; x++) {\n      for (let y = 0; y < root; y++) {\n        for (let z = 0; z < root; z++) {\n          const id = i++;\n          o.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n          o.position.set(halfRoot - x + Math.random(), halfRoot - y + Math.random(), halfRoot - z + Math.random());\n          o.updateMatrix();\n          ref.current.setMatrixAt(id, o.matrix);\n\n          // o.position.set(halfRoot - x, halfRoot - y, halfRoot - z);\n          // o.position.set(x, y, z);\n          // console.log('id', id, 'x', x, 'y', y, 'z', z, 'position', o.position);\n        }\n      }\n    }\n    ref.current.instanceMatrix.needsUpdate = true;\n  }, [edgeCount]);\n\n  return (\n    <group {...props}>\n      <instancedMesh ref={ref} args={[undefined, undefined, count]}>\n        <boxGeometry args={size}>\n          {/* <instancedBufferAttribute attach=\"attributes-color\" args={[colors, 3]} /> */}\n          {/* <instancedBufferAttribute attach=\"instancePosition\" args={[new Float32Array(length * 3), 3]} /> */}\n        </boxGeometry>\n        <meshLambertMaterial vertexColors toneMapped={false} />\n        {/* <meshStandardMaterial toneMapped={false} /> */}\n      </instancedMesh>\n    </group>\n  );\n}\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n\n  return (\n    <Area>\n      {() => (\n        <Canvas>\n          <ambientLight intensity={0.85} />\n          <directionalLight position={[150, 150, 150]} intensity={1} />\n          <Boxes />\n          {/* <mesh>\n            <boxGeometry args={[1, 1, 1]} />\n            <meshStandardMaterial color=\"red\" />\n          </mesh> */}\n          <gridHelper args={[10, 10]} />\n          <axesHelper args={[5]} />\n          <CameraControls />\n          {/* <OrbitControls /> */}\n        </Canvas>\n      )}\n    </Area>\n  );\n}\n\nexport default React.memo(App01);\n","import Area from '@/components/Area';\nimport { CameraControls } from '@react-three/drei';\nimport { Canvas, GroupProps } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\n\ntype BoxesProps = {\n  edgeCount?: number;\n  size?: [number, number, number];\n} & GroupProps;\n\nconst c = new THREE.Color();\nconst o = new THREE.Object3D();\n\nfunction Boxes({ edgeCount = 10, size = [0.15, 0.15, 0.15], ...props }: BoxesProps) {\n  const count = edgeCount ** 3;\n  const ref = React.useRef<THREE.InstancedMesh>(null!);\n  const colors = React.useMemo(\n    () =>\n      new Float32Array(\n        Array.from({ length: count }, () => c.set(schemeCategory10[Math.floor(Math.random() * 10)]).toArray()).flat()\n      ),\n    [count]\n  );\n  React.useLayoutEffect(() => {\n    let i = 0;\n    // const root = Math.round(Math.cbrt(count));\n    const root = edgeCount;\n    const halfRoot = root / 2;\n    console.log('root', root, 'halfRoot', halfRoot);\n    for (let x = 0; x < root; x++) {\n      for (let y = 0; y < root; y++) {\n        for (let z = 0; z < root; z++) {\n          const id = i++;\n          o.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n          o.position.set(halfRoot - x + Math.random(), halfRoot - y + Math.random(), halfRoot - z + Math.random());\n          o.updateMatrix();\n          ref.current.setMatrixAt(id, o.matrix);\n\n          // o.position.set(halfRoot - x, halfRoot - y, halfRoot - z);\n          // o.position.set(x, y, z);\n          // console.log('id', id, 'x', x, 'y', y, 'z', z, 'position', o.position);\n        }\n      }\n    }\n    ref.current.instanceMatrix.needsUpdate = true;\n  }, [edgeCount]);\n\n  return (\n    <group {...props}>\n      <instancedMesh ref={ref} args={[undefined, undefined, count]}>\n        <boxGeometry args={size}>\n          {/* <instancedBufferAttribute attach=\"instancePosition\" args={[new Float32Array(length * 3), 3]} /> */}\n          <instancedBufferAttribute attach=\"attributes-color\" args={[colors, 3]} />\n        </boxGeometry>\n        <meshLambertMaterial vertexColors toneMapped={false} />\n        {/* <meshStandardMaterial toneMapped={false} /> */}\n      </instancedMesh>\n    </group>\n  );\n}\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n\n  return (\n    <Area>\n      {() => (\n        <Canvas>\n          <ambientLight intensity={0.85} />\n          <directionalLight position={[150, 150, 150]} intensity={1} />\n          <Boxes />\n          {/* <mesh>\n            <boxGeometry args={[1, 1, 1]} />\n            <meshStandardMaterial color=\"red\" />\n          </mesh> */}\n          <gridHelper args={[10, 10]} />\n          <axesHelper args={[5]} />\n          <CameraControls />\n          {/* <OrbitControls /> */}\n        </Canvas>\n      )}\n    </Area>\n  );\n}\n\nexport default React.memo(App01);\n","import Area from '@/components/Area';\nimport { CameraControls, shaderMaterial } from '@react-three/drei';\nimport { Canvas, extend, GroupProps, ReactThreeFiber } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\n\ntype MeshEdgesMaterialProps = {\n  color?: THREE.ColorRepresentation;\n  size?: THREE.Vector3 | THREE.Vector3Tuple;\n  thickness?: number;\n  smoothness?: number;\n};\n\nconst MeshEdgesMaterial = shaderMaterial(\n  {\n    color: new THREE.Color('white'),\n    size: new THREE.Vector3(1, 1, 1),\n    thickness: 0.01,\n    smoothness: 0.2,\n  },\n  /*glsl*/ `varying vec3 vPosition;\n  void main() {\n    vPosition = position;\n    gl_Position = projectionMatrix * viewMatrix * instanceMatrix * vec4(position, 1.0);\n  }`,\n  /*glsl*/ `varying vec3 vPosition;\n  uniform vec3 size;\n  uniform vec3 color;\n  uniform float thickness;\n  uniform float smoothness;\n  void main() {\n    vec3 d = abs(vPosition) - (size * 0.5);\n    float a = smoothstep(thickness, thickness + smoothness, min(min(length(d.xy), length(d.yz)), length(d.xz)));\n    gl_FragColor = vec4(color, 1.0 - a);\n  }`\n);\n\nextend({ MeshEdgesMaterial });\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      meshEdgesMaterial: ReactThreeFiber.Node<\n        typeof MeshEdgesMaterial & JSX.IntrinsicElements['shaderMaterial'],\n        MeshEdgesMaterialProps\n      > &\n        MeshEdgesMaterialProps;\n    }\n  }\n}\n\ntype BoxesProps = {\n  edgeCount?: number;\n  size?: [number, number, number];\n} & GroupProps;\n\nconst c = new THREE.Color();\nconst o = new THREE.Object3D();\n\nfunction Boxes({ edgeCount = 10, size = [0.15, 0.15, 0.15], ...props }: BoxesProps) {\n  const count = edgeCount ** 3;\n  const ref = React.useRef<THREE.InstancedMesh>(null!);\n  const outlines = React.useRef<THREE.InstancedMesh>(null!);\n  const colors = React.useMemo(\n    () =>\n      new Float32Array(\n        Array.from({ length: count }, () => c.set(schemeCategory10[Math.floor(Math.random() * 10)]).toArray()).flat()\n      ),\n    [count]\n  );\n  React.useLayoutEffect(() => {\n    let i = 0;\n    // const root = Math.round(Math.cbrt(count));\n    const root = edgeCount;\n    const halfRoot = root / 2;\n    console.log('root', root, 'halfRoot', halfRoot);\n    for (let x = 0; x < root; x++) {\n      for (let y = 0; y < root; y++) {\n        for (let z = 0; z < root; z++) {\n          const id = i++;\n          o.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n          o.position.set(halfRoot - x + Math.random(), halfRoot - y + Math.random(), halfRoot - z + Math.random());\n          o.updateMatrix();\n          ref.current.setMatrixAt(id, o.matrix);\n          // o.position.set(halfRoot - x, halfRoot - y, halfRoot - z);\n          // o.position.set(x, y, z);\n          // console.log('id', id, 'x', x, 'y', y, 'z', z, 'position', o.position);\n        }\n      }\n    }\n    ref.current.instanceMatrix.needsUpdate = true;\n    outlines.current.geometry = ref.current.geometry;\n    outlines.current.instanceMatrix = ref.current.instanceMatrix;\n  }, [edgeCount]);\n\n  return (\n    <group {...props}>\n      <instancedMesh ref={ref} args={[undefined, undefined, count]}>\n        <boxGeometry args={size}>\n          {/* <instancedBufferAttribute attach=\"instancePosition\" args={[new Float32Array(length * 3), 3]} /> */}\n          <instancedBufferAttribute attach=\"attributes-color\" args={[colors, 3]} />\n        </boxGeometry>\n        <meshLambertMaterial vertexColors toneMapped={false} />\n        {/* <meshStandardMaterial toneMapped={false} /> */}\n      </instancedMesh>\n      <instancedMesh ref={outlines} args={[undefined, undefined, count]}>\n        <meshEdgesMaterial\n          transparent\n          polygonOffset\n          polygonOffsetFactor={-1}\n          size={size}\n          color=\"black\"\n          thickness={0.001}\n          smoothness={0.05}\n        />\n      </instancedMesh>\n    </group>\n  );\n}\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n\n  return (\n    <Area>\n      {() => (\n        <Canvas>\n          <ambientLight intensity={0.85} />\n          <directionalLight position={[150, 150, 150]} intensity={1} />\n          <Boxes />\n          {/* <mesh>\n            <boxGeometry args={[1, 1, 1]} />\n            <meshStandardMaterial color=\"red\" />\n          </mesh> */}\n          <gridHelper args={[10, 10]} />\n          <axesHelper args={[5]} />\n          <CameraControls />\n          {/* <OrbitControls /> */}\n        </Canvas>\n      )}\n    </Area>\n  );\n}\n\nexport default React.memo(App01);\n",null,"import * as React from 'react';\n\n// import Anchor from './Anchor';\n\nconst Footer = React.memo(() => (\n  <>\n    {/* <footer className=\"bg-white border-t border-gray-400 shadow\">\n        <div className=\"container flex max-w-4xl py-8 mx-auto\">\n          <div className=\"flex flex-wrap w-full mx-auto\">\n            <div className=\"flex w-full md:w-1/2\">\n              <div className=\"px-8\">\n                <h3 className=\"font-bold text-gray-900\">About</h3>\n                <p className=\"py-4 text-sm text-gray-600\">My blog</p>\n              </div>\n            </div>\n\n            <div className=\"flex w-full md:w-1/2\">\n              <div className=\"px-8\">\n                <h3 className=\"font-bold text-gray-900\">Social</h3>\n                <ul className=\"items-center pt-3 text-sm list-reset\">\n                  <li>\n                    <Anchor>Add social link</Anchor>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </footer> */}\n  </>\n));\n\nexport default Footer;\n","import { useRouter } from 'next/dist/client/router';\nimport Link from 'next/link';\n\nimport * as React from 'react';\n\ntype MenuItem = {\n  link: string;\n  text: string;\n};\n\nconst MENU_ITEMS: MenuItem[] = [\n  {\n    link: '/',\n    text: 'Home',\n  },\n  // {\n  //   link: '/about',\n  //   text: 'About',\n  // },\n];\n\nconst Header = React.memo(() => {\n  const router = useRouter();\n  const [openMenu, setOpenMenu] = React.useState(false);\n  // console.log(`Header openMenu=${openMenu}`);\n  return (\n    <nav className=\"w-full\">\n      <div\n        id=\"progress\"\n        className=\"top-0 z-20 h-1\"\n        style={{\n          background: 'linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)',\n        }}\n      />\n\n      <div className=\"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl\">\n        <div className=\"pl-4\">\n          <Link className=\"text-xl font-extrabold text-gray-900 no-underline hover:no-underline\" href=\"/\">\n            lifetime trails\n          </Link>\n        </div>\n\n        <div className=\"block pr-4 lg:hidden\">\n          <button\n            id=\"nav-toggle\"\n            type=\"button\"\n            className=\"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none\"\n            onMouseDown={(e) => e.preventDefault()}\n            onClick={() => setOpenMenu(!openMenu)}\n            onBlur={() => setOpenMenu(false)}\n          >\n            <svg className=\"w-3 h-3 fill-current\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n              <title>Menu</title>\n              <path d=\"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z\" />\n            </svg>\n          </button>\n        </div>\n\n        <div\n          id=\"nav-content\"\n          className={`bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ${\n            openMenu ? 'block' : 'hidden'\n          }`}\n        >\n          <ul className=\"items-center justify-end flex-1 list-reset lg:flex\">\n            {MENU_ITEMS.map(({ link, text }) => (\n              <li key={link} className=\"mr-3\">\n                <Link\n                  className={\n                    router.pathname === link\n                      ? 'inline-block py-2 px-4 text-gray-900 font-bold no-underline'\n                      : 'inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4'\n                  }\n                  href={link}\n                >\n                  {text}\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n});\n\nexport default Header;\n","import Head from 'next/head';\n\nimport React, { PropsWithChildren } from 'react';\n\nimport Footer from './Footer';\nimport Header from './Header';\n\n// import typography from '../utils/typography';\n\ntype Props = PropsWithChildren<{\n  title?: string;\n}>;\n\nconst Layout = React.memo(({ children, title = 'This is the default title' }: Props) => (\n  <div className=\"leading-normal tracking-normal bg-gray-100 min-h-screen\">\n    <Head>\n      <title>{title}</title>\n      <meta charSet=\"utf-8\" />\n      <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n      {/* typography */}\n      {/* <TypographyStyle typography={typography} /> */}\n    </Head>\n    <Header />\n    <div className=\"container w-full px-4 pb-10 mx-auto md:max-w-3xl\">{children}</div>\n    <Footer />\n  </div>\n));\n\nexport default Layout;\n","import React from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst Context = React.createContext<any>({});\n\nexport type Props = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  staticProps: any;\n  children?: React.ReactNode;\n};\n\nexport function BlogContextProvider({ staticProps, children }: Props) {\n  return <Context.Provider value={staticProps}>{children}</Context.Provider>;\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function useBlogPostContext() {\n  return React.useContext(Context);\n}\n","import * as React from 'react';\n\nexport type Props = {\n  meta: MetaData;\n  isBlogPost?: boolean;\n};\n\nconst HeadPost = ({ meta, isBlogPost }: Props) => (\n  <>\n    <h1 className={`font-bold text-gray-800 mb-4 ${isBlogPost ? 'text-5xl mt-8 mb-8' : 'text-lg'}`}>{meta.title}</h1>\n    <div className=\"details\">\n      <p className=\"text-gray-500\">{meta.description}</p>\n      <p className=\"text-gray-400 text-right -mt-1\">\n        <span className=\"mr-4\">{meta.date}</span>\n      </p>\n    </div>\n  </>\n);\n\nexport default HeadPost;\n","import hljs from 'highlight.js';\n\nimport * as React from 'react';\nimport ReactUtterances from 'react-utterances';\n\nimport { BlogContextProvider } from './BlogPostContext';\nimport HeadPost from './HeadPost';\nimport Layout from './Layout';\n\nconst prd = process.env.NODE_ENV === 'production';\n\nexport type Props = React.PropsWithChildren<{\n  meta: MetaData;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, react/require-default-props\n  staticProps?: any;\n}>;\n\nexport default function BlogPost({ children, meta, staticProps }: Props) {\n  React.useEffect(() => {\n    // console.log('initHighlighting');\n    hljs.highlightAll();\n  }, []);\n  // console.log('BlogPost', { staticProps });\n  return (\n    <>\n      <Layout title={meta.title}>\n        <HeadPost meta={meta} isBlogPost />\n        <BlogContextProvider staticProps={staticProps}>\n          <article className=\"markdown\">{children}</article>\n        </BlogContextProvider>\n        {prd && <ReactUtterances repo=\"swcho/blog-comments\" type=\"pathname\" label=\"utterances\" theme=\"github-light\" />}\n      </Layout>\n    </>\n  );\n}\n"],"names":["Area","React","props","ref","children","rest","el","setEl","handleRef","node","current","key","setKey","div","css","position","border","borderRadius","width","height","marginBottom","button","onClick","k","right","zIndex","IconRefresh","o","THREE","Boxes","edgeCount","size","count","i","halfRoot","root","console","log","x","y","z","id","rotation","set","Math","random","PI","updateMatrix","setMatrixAt","matrix","instanceMatrix","needsUpdate","group","instancedMesh","args","undefined","boxGeometry","meshLambertMaterial","vertexColors","toneMapped","App01","Canvas","ambientLight","intensity","directionalLight","gridHelper","axesHelper","CameraControls","c","colors","Float32Array","Array","from","length","schemeCategory10","floor","toArray","flat","instancedBufferAttribute","attach","MeshEdgesMaterial","shaderMaterial","color","thickness","smoothness","extend","outlines","geometry","meshEdgesMaterial","transparent","polygonOffset","polygonOffsetFactor","meta","title","description","date","readTime","BlogPost","Footer","MENU_ITEMS","link","text","Header","router","useRouter","openMenu","setOpenMenu","nav","className","style","background","Link","href","type","onMouseDown","e","preventDefault","onBlur","svg","viewBox","xmlns","path","d","ul","map","li","pathname","Layout","Head","charSet","name","content","Context","BlogContextProvider","staticProps","Provider","value","useBlogPostContext","isBlogPost","HeadPost","h1","p","span","hljs","article","ReactUtterances","repo","label","theme"],"sourceRoot":"","ignoreList":[]}