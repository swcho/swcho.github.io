(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[121],{49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var l=n(18153),s=n(77328),i=n.n(s),r=n(14232);let a=r.memo(()=>(0,l.Y)(l.FK,{}));var c=n(71745),o=n(48230),d=n.n(o);let u=[{link:"/",text:"Home"}],h=r.memo(()=>{let e=(0,c.useRouter)(),[t,n]=r.useState(!1);return(0,l.FD)("nav",{className:"w-full",children:[(0,l.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,l.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,l.Y)("div",{className:"pl-4",children:(0,l.Y)(d(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,l.Y)("div",{className:"block pr-4 lg:hidden",children:(0,l.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,l.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.Y)("title",{children:"Menu"}),(0,l.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,l.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,l.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:u.map(t=>{let{link:n,text:s}=t;return(0,l.Y)("li",{className:"mr-3",children:(0,l.Y)(d(),{legacyBehavior:!0,className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:s})},n)})})})]})]})}),m=r.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,l.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,l.FD)(i(),{children:[(0,l.Y)("title",{children:n}),(0,l.Y)("meta",{charSet:"utf-8"}),(0,l.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,l.Y)(h,{}),(0,l.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,l.Y)(a,{})]})})},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>a,j:()=>r});var l=n(18153),s=n(14232);let i=s.createContext({});function r(e){let{staticProps:t,children:n}=e;return(0,l.Y)(i.Provider,{value:t,children:n})}function a(){return s.useContext(i)}},74021:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j,meta:()=>Y});var l=n(37876),s=n(91668),i=n(91013),r=n(18153),a=n(14232);let c=a.memo(function(e){let{children:t,...n}=e,[l,s]=a.useState(!1);return a.useEffect(()=>{s(!0)},[]),console.log("Area",{show:l}),l?(0,r.Y)("div",{style:{border:"1px solid",borderRadius:"4px",width:"100%",height:"300px",marginBottom:"1rem"},...n,children:t}):(0,r.Y)(r.FK,{})});var o=n(71804),d=n(45302),u=n(35577),h=n(31133),m=n(9929),p=n(67768);function x(e){let{name:t,milliseconds:n=1e3,children:l}=e;return(0,h.U)({queryKey:["delay",t],queryFn:()=>new Promise(e=>setTimeout(()=>e(!0),n))}),l}function g(e){let{url:t,...n}=e,{scene:l}=(0,u.p)(t);return(0,r.Y)("primitive",{object:l,...n})}function f(e){let t=a.useRef(null);return(0,o.D)(e=>{t.current&&(t.current.rotation.x=e.clock.elapsedTime)}),(0,r.Y)("group",{ref:t,...e})}let b=new m.E,v=a.memo(function(e){let{}=e,[t,n]=a.useState(0);return(0,r.Y)(p.Ht,{client:b,children:(0,r.FD)(c,{className:"relative",children:[(0,r.FD)(a.Suspense,{fallback:(0,r.Y)("div",{className:"absolute w-full flex h-full justify-center items-center",children:"Loading..."}),children:[(0,r.Y)(x,{name:"level 1",milliseconds:2e3}),(0,r.FD)(d.Hl,{camera:{position:[-2,2,4],fov:25},children:[(0,r.Y)("directionalLight",{position:[10,10,0],intensity:1.5}),(0,r.Y)("directionalLight",{position:[-10,10,5],intensity:1}),(0,r.Y)("directionalLight",{position:[-10,20,0],intensity:1.5}),(0,r.Y)("directionalLight",{position:[0,-10,0],intensity:.25}),(0,r.Y)(f,{"position-y":-.5,scale:.2,children:(0,r.FD)(a.Suspense,{fallback:(0,r.Y)(g,{url:"/_next/static/chunks/bust-lo-draco.2a6e13219808ecd6fbf98078ebb86ea8.glb"}),children:[(0,r.Y)(x,{name:"level 2",milliseconds:2e3}),(0,r.Y)(g,{url:"/_next/static/chunks/bust-hi.bfda6ac626babf3f56939a0a435c002c.glb"})]})})]})]}),(0,r.Y)("div",{className:"absolute bottom-0 w-full flex justify-end",children:(0,r.Y)("button",{onClick:()=>{b.clear(),n(e=>e+1)},className:"m-2 p-2 bg-blue-500 text-white rounded",children:"Show again"})})]})},t)}),Y={title:"R3f: Progressive loading states with suspense",description:"Suspense를 사용하여 리소스 로딩을 하는 예제를 살펴 봅니다.",date:"2025-05-18",readTime:5},w=e=>{let{children:t}=e;return(0,l.jsx)(i.A,{meta:Y,children:t})};function y(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{children:"Progressive loading states with suspense"}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:["참조: ",(0,l.jsx)(t.a,{href:"https://codesandbox.io/s/7duy8",children:"Progressive loading states with suspense"})]}),"\n"]}),"\n",(0,l.jsx)(v,{}),"\n",(0,l.jsx)(t.p,{children:"이 예제는 r3f와 React Suspense가 어떻게 상호작용할 수 있는지를 보여 줍니다."}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-tsx",children:'      <Area className="relative">\n        <React.Suspense\n          fallback={<div className="absolute w-full flex h-full justify-center items-center">Loading...</div>}\n        >\n          <Delay name="level 1" milliseconds={2000} />\n'})}),"\n",(0,l.jsxs)(t.p,{children:["첫번째 suspense는 1초간 강제로 걸리며 ",(0,l.jsx)(t.code,{children:"Loading..."}),"이라는 텍스트를 중앙에 표시합니다."]}),"\n",(0,l.jsxs)(t.p,{children:["아직 ",(0,l.jsx)(t.code,{children:"<Canvas />"})," 컴포넌트를 마운트 하기 전 이기 때문에 통상적인 React의 Suspense 시나리오를 보여줍니다."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-tsx",children:'<Rotate position-y={-0.5} scale={0.2}>\n  <React.Suspense fallback={<Model url={glbBustLo} />}>\n    <Delay name="level 2" milliseconds={2000} />\n    <Model url={glbBustHi} />\n  </React.Suspense>\n</Rotate>\n'})}),"\n",(0,l.jsx)(t.p,{children:"두번째 suspense부터 흥미롭습니다. 2초간의 시간동안 suspense가 걸리며 이때 저품질의 모델을 표시합니다."}),"\n",(0,l.jsx)(t.p,{children:"2초 후에는 고품질의 모델을 표시합니다."}),"\n",(0,l.jsx)(t.p,{children:"이 과정에서 회전 상태는 끊기지 않고 지속적으로 이루어 집니다."}),"\n",(0,l.jsxs)(t.p,{children:["시뮬레이션을 위해 ",(0,l.jsx)(t.code,{children:"<Delay />"})," 컴포넌트를 사용한 명시적인 suspense를 하였습니다."]}),"\n",(0,l.jsxs)(t.p,{children:["만일 ",(0,l.jsx)(t.code,{children:"<Delay />"}),"를 사용하지 않을 경우 저품질의 모델이 고품질의 모델보다 더 빠르게 네트워크를 통해 전달 받는다는 것을 가정하면, 네트워크가 느린 환경에서는 고품질의 모델 정보를 확보할 때 까지 저품질의 모델을 표시하게 됩니다."]}),"\n",(0,l.jsx)(t.p,{children:"Imperative 하게 코딩할 경우 별도의 로더와 이벤트 프로그래밍을 활용해서 제법 복잡한 코딩을해야 할 것 입니다."}),"\n",(0,l.jsx)(t.p,{children:"React의 프로그래밍 모델이 보다 직관적이고 유지보수가 용이 합니다."})]})}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.jsx)(w,{...e,children:(0,l.jsx)(y,{...e})})}},74518:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-05-18-r3f-with-suspense",function(){return n(74021)}])},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var l=n(18153);n(14232);let s=e=>{let{meta:t,isBlogPost:n}=e;return(0,l.FD)(l.FK,{children:[(0,l.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,l.FD)("div",{className:"details",children:[(0,l.Y)("p",{className:"text-gray-500",children:t.description}),(0,l.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,l.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var l=n(18153),s=n(73146),i=n.n(s),r=n(14232),a=n(86089),c=n(60158),o=n(85419),d=n(49034);function u(e){let{children:t,meta:n,staticProps:s}=e;return r.useEffect(()=>{i().highlightAll()},[]),(0,l.Y)(l.FK,{children:(0,l.FD)(d.A,{title:n.title,children:[(0,l.Y)(o.A,{meta:n,isBlogPost:!0}),(0,l.Y)(c.j,{staticProps:s,children:(0,l.Y)("article",{className:"markdown",children:t})}),(0,l.Y)(a.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[7391,683,5695,5302,3665,1749,636,6593,8792],()=>e(e.s=74518)),_N_E=e.O()}]);
//# sourceMappingURL=2025-05-18-r3f-with-suspense-e31aa73e063dd73d.js.map