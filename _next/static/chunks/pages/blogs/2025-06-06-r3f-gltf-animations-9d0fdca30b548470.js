(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8521],{1568:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(18153),i=n(14232),l=n(6170);let a=i.forwardRef((e,t)=>{let{children:n,...a}=e,[o,s]=i.useState(null),c=i.useCallback(e=>{s(e),"function"==typeof t?t(e):t&&"current"in t&&(t.current=e)},[t]),[d,h]=i.useState(0);return(0,r.FD)("div",{ref:c,css:{position:"relative",border:"1px solid",borderRadius:"4px",width:"100%",height:"300px",marginBottom:"1rem"},...a,children:[(0,r.Y)("button",{onClick:()=>h(e=>e+1),css:{position:"absolute",right:0,zIndex:1},children:(0,r.Y)(l.A,{})}),o&&(0,r.Y)(i.Fragment,{children:n(o)},d)]})}),o=i.memo(a)},6170:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(48092).A)("outline","refresh","Refresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]])},19281:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F,meta:()=>k});var r=n(37876),i=n(91668),l=n(91013),a=n(18153),o=n(14232),s=n(1568),c=n(88360),d=n(45302),h=n(35577),u=n(82627),m=n(49082);let p="/_next/static/chunks/stacy.3f5b94be71e592ad24beddb122028a92.glb",f="/_next/static/chunks/stacy.texture.84da32e0b941a997c0846909034f9169.glb";var g=n(66691);let x={clone:function(e){let t=new Map,n=new Map,r=e.clone();return function e(t,n,r){r(t,n);for(let i=0;i<t.children.length;i++)e(t.children[i],n.children[i],r)}(e,r,function(e,r){t.set(r,e),n.set(e,r)}),r.traverse(function(e){if(!e.isSkinnedMesh)return;let r=t.get(e),i=r.skeleton.bones;e.skeleton=r.skeleton.clone(),e.bindMatrix.copy(r.bindMatrix),e.skeleton.bones=i.map(function(e){return n.get(e)}),e.bind(e.skeleton,e.bindMatrix)}),r}};function v(e){let{...t}=e,{scene:n}=(0,h.p)(p),r=o.useMemo(()=>x.clone(n),[n]),{nodes:i}=(0,c.F)(r),l=i.stacy,s=(0,u.zo)(f);return s.flipY=!1,(0,a.Y)("group",{...t,children:(0,a.FD)("skinnedMesh",{castShadow:!0,receiveShadow:!0,geometry:l.geometry,skeleton:l.skeleton,rotation:[Math.PI/2,0,0],scale:[.01,.01,.01],children:[(0,a.Y)("primitive",{object:i.mixamorigHips}),(0,a.Y)("meshStandardMaterial",{map:s})]})})}let w=o.memo(function(e){let{}=e;return(0,a.Y)(s.A,{css:{height:"400px"},children:()=>(0,a.Y)(a.FK,{children:(0,a.FD)(d.Hl,{shadows:!0,camera:{position:[1,1.5,2.5],fov:50,viewport:new g.IUQ(0,600,0,0)},children:[(0,a.Y)("ambientLight",{intensity:.5}),(0,a.Y)("directionalLight",{position:[-5,5,5],castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,a.Y)("group",{position:[0,-1,0],children:(0,a.Y)(o.Suspense,{fallback:null,children:(0,a.Y)(v,{pose:4,position:[0,0,0]})})}),(0,a.FD)("mesh",{rotation:[-.5*Math.PI,0,0],position:[0,-1,0],receiveShadow:!0,children:[(0,a.Y)("planeGeometry",{args:[10,10,1,1]}),(0,a.Y)("shadowMaterial",{transparent:!0,opacity:.2})]}),(0,a.Y)("gridHelper",{}),(0,a.Y)("axesHelper",{}),(0,a.Y)(m.N,{makeDefault:!0})]})})})});var b=n(33191);function Y(e){let{initialPose:t,...n}=e,{scene:r,animations:i}=(0,h.p)(p),l=o.useMemo(()=>x.clone(r),[r]),{nodes:s}=(0,c.F)(l),d=s.stacy,m=(0,u.zo)(f);m.flipY=!1;let[v,w]=o.useState(t),{ref:Y,names:y,actions:k}=function(e,t){let n=o.useRef(null),[r]=o.useState(()=>n),[i]=o.useState(()=>new g.Iw4(void 0));o.useLayoutEffect(()=>{i._root=r.current});let l=o.useRef({}),a=o.useMemo(()=>{let t={};return e.forEach(e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(r.current)return l.current[e.name]||(l.current[e.name]=i.clipAction(e,r.current))},configurable:!0})),{ref:r,clips:e,actions:t,names:e.map(e=>e.name),mixer:i}},[e]);return(0,c.D)((e,t)=>i.update(t)),o.useEffect(()=>{let e=r.current;return()=>{l.current={},i.stopAllAction(),Object.values(a.actions).forEach(t=>{e&&i.uncacheAction(t,e)})}},[e]),a}(i),j=y[v];return o.useEffect(()=>{let e=k[j];return null==e||e.reset().fadeIn(.5).play(),()=>{null==e||e.fadeOut(.5)}},[k,j]),(0,a.FD)("group",{...n,children:[(0,a.FD)("group",{rotation:[Math.PI/2,0,0],scale:[.01,.01,.01],onClick:()=>w((v+1)%y.length),children:[(0,a.Y)("primitive",{object:s.mixamorigHips}),(0,a.Y)("skinnedMesh",{ref:e=>Y.current=e,castShadow:!0,receiveShadow:!0,geometry:d.geometry,skeleton:d.skeleton,children:(0,a.Y)("meshStandardMaterial",{map:m})})]}),(0,a.Y)(b.E,{position:[0,2,-1],color:"black",anchorX:"center",anchorY:"middle",children:j})]})}let y=o.memo(function(e){let{}=e;return(0,a.Y)(s.A,{css:{height:"400px"},children:()=>(0,a.Y)(a.FK,{children:(0,a.FD)(d.Hl,{shadows:!0,camera:{position:[1,1.5,2.5],fov:50,viewport:new g.IUQ(0,600,0,0)},children:[(0,a.Y)("ambientLight",{intensity:.5}),(0,a.Y)("directionalLight",{position:[-5,5,5],castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,a.Y)("group",{position:[0,-1,0],children:(0,a.Y)(o.Suspense,{fallback:null,children:(0,a.Y)(Y,{initialPose:8,position:[0,0,0]})})}),(0,a.FD)("mesh",{rotation:[-.5*Math.PI,0,0],position:[0,-1,0],receiveShadow:!0,children:[(0,a.Y)("planeGeometry",{args:[10,10,1,1]}),(0,a.Y)("shadowMaterial",{transparent:!0,opacity:.2})]}),(0,a.Y)("gridHelper",{}),(0,a.Y)("axesHelper",{}),(0,a.Y)(m.N,{makeDefault:!0})]})})})}),k={title:"R3f: GLTF Animations re-used",description:"Rag doll 에니메이션 정보가 있는 GLTF를 표시해 봅니다.",date:"2025-06-06",readTime:5},j=e=>{let{children:t}=e;return(0,r.jsx)(l.A,{meta:k,children:t})};function E(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"원본 코드"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://codesandbox.io/s/k8phr",children:"GLTF Animations re-used"})}),"\n"]}),"\n",(0,r.jsx)(t.h1,{children:"GLTF 로드 및 배치"}),"\n",(0,r.jsx)(w,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"useGLTF"}),"와 ",(0,r.jsx)(t.code,{children:"useTexture"}),"를 사용해서 모델을 로드하고 표시합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["카메라 포지션에 맞추어 ",(0,r.jsx)(t.code,{children:"<skinnedMesh />"})," 객체를 정 중앙에 배치합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["그림자를 표시할 평면은 이에 맞추어 ",(0,r.jsx)(t.code,{children:"y = -1"})," 지점에 배치합니다."]}),"\n",(0,r.jsx)(t.h1,{children:"Animation 적용"}),"\n",(0,r.jsx)(y,{}),"\n",(0,r.jsx)(t.p,{children:"로드한 GLTF 모델에 애니메이션을 적용합니다."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"drei"}),"의 ",(0,r.jsx)(t.code,{children:"useAnimations"})," 훅을 사용하여 GLTF에 포함된 animation 목록과 각 에니메이션을 실행할 수 있는 ",(0,r.jsx)(t.code,{children:"actions"})," 객체를 가져옵니다."]}),"\n",(0,r.jsxs)(t.p,{children:["클릭 이벤트를 통해 ",(0,r.jsx)(t.code,{children:"actions"})," 객체에 있는 애니메이션을 순차적으로 변경할 수 있습니다."]})]})}function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(j,{...e,children:(0,r.jsx)(E,{...e})})}},33191:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var r=n(44501),i=n(14232),l=n(1825),a=n(88360),o=n(41401);let s=i.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:s,fontSize:c=1,children:d,characters:h,onSync:u,...m},p)=>{let f=(0,a.C)(({invalidate:e})=>e),[g]=i.useState(()=>new l.EY),[x,v]=i.useMemo(()=>{let e=[],t="";return i.Children.forEach(d,n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)}),[e,t]},[d]);return(0,o.DY)(()=>new Promise(e=>(0,l.PY)({font:s,characters:h},e)),["troika-text",s,h]),i.useLayoutEffect(()=>void g.sync(()=>{f(),u&&u(g)})),i.useEffect(()=>()=>g.dispose(),[g]),i.createElement("primitive",(0,r.A)({object:g,ref:p,font:s,text:v,anchorX:t,anchorY:n,fontSize:c,sdfGlyphSize:e},m),x)})},48092:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(14232),i={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};let l=(e,t,n,l)=>{let a=(0,r.forwardRef)((n,a)=>{let{color:o="currentColor",size:s=24,stroke:c=2,title:d,className:h,children:u,...m}=n;return(0,r.createElement)("svg",{ref:a,...i[e],width:s,height:s,className:["tabler-icon","tabler-icon-".concat(t),h].join(" "),..."filled"===e?{fill:o}:{strokeWidth:c,stroke:o},...m},[d&&(0,r.createElement)("title",{key:"svg-title"},d),...l.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(u)?u:[u]])});return a.displayName="".concat(n),a}},49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(18153),i=n(77328),l=n.n(i),a=n(14232);let o=a.memo(()=>(0,r.Y)(r.FK,{}));var s=n(71745),c=n(48230),d=n.n(c);let h=[{link:"/",text:"Home"}],u=a.memo(()=>{let e=(0,s.useRouter)(),[t,n]=a.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(d(),{className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:h.map(t=>{let{link:n,text:i}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(d(),{className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:i})},n)})})})]})]})}),m=a.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(l(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(u,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(o,{})]})})},49082:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(44501),i=n(88360),l=n(14232),a=n(78961);let o=l.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:o,enableDamping:s=!0,keyEvents:c=!1,onChange:d,onStart:h,onEnd:u,...m},p)=>{let f=(0,i.C)(e=>e.invalidate),g=(0,i.C)(e=>e.camera),x=(0,i.C)(e=>e.gl),v=(0,i.C)(e=>e.events),w=(0,i.C)(e=>e.setEvents),b=(0,i.C)(e=>e.set),Y=(0,i.C)(e=>e.get),y=(0,i.C)(e=>e.performance),k=t||g,j=o||v.connected||x.domElement,E=l.useMemo(()=>new a.N(k),[k]);return(0,i.D)(()=>{E.enabled&&E.update()},-1),l.useEffect(()=>(c&&E.connect(!0===c?j:c),E.connect(j),()=>void E.dispose()),[c,j,n,E,f]),l.useEffect(()=>{let e=e=>{f(),n&&y.regress(),d&&d(e)},t=e=>{h&&h(e)},r=e=>{u&&u(e)};return E.addEventListener("change",e),E.addEventListener("start",t),E.addEventListener("end",r),()=>{E.removeEventListener("start",t),E.removeEventListener("end",r),E.removeEventListener("change",e)}},[d,h,u,E,f,w]),l.useEffect(()=>{if(e){let e=Y().controls;return b({controls:E}),()=>b({controls:e})}},[e,E]),l.createElement("primitive",(0,r.A)({ref:p,object:E,enableDamping:s},m))})},58602:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-06-06-r3f-gltf-animations",function(){return n(19281)}])},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>o,j:()=>a});var r=n(18153),i=n(14232);let l=i.createContext({});function a(e){let{staticProps:t,children:n}=e;return(0,r.Y)(l.Provider,{value:t,children:n})}function o(){return i.useContext(l)}},82627:(e,t,n)=>{"use strict";n.d(t,{zo:()=>o});var r=n(14232),i=n(66691),l=n(88360);let a=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function o(e,t){let n=(0,l.C)(e=>e.gl),o=(0,l.G)(i.Tap,a(e)?Object.values(e):e);return(0,r.useLayoutEffect)(()=>{null==t||t(o)},[t]),(0,r.useEffect)(()=>{if("initTexture"in n){let e=[];Array.isArray(o)?e=o:o instanceof i.gPd?e=[o]:a(o)&&(e=Object.values(o)),e.forEach(e=>{e instanceof i.gPd&&n.initTexture(e)})}},[n,o]),(0,r.useMemo)(()=>{if(!a(e))return o;{let t={},n=0;for(let r in e)t[r]=o[n++];return t}},[e,o])}o.preload=e=>l.G.preload(i.Tap,e),o.clear=e=>l.G.clear(i.Tap,e)},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(18153);n(14232);let i=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(18153),i=n(73146),l=n.n(i),a=n(14232),o=n(86089),s=n(60158),c=n(85419),d=n(49034);function h(e){let{children:t,meta:n,staticProps:i}=e;return a.useEffect(()=>{l().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(d.A,{title:n.title,children:[(0,r.Y)(c.A,{meta:n,isBlogPost:!0}),(0,r.Y)(s.j,{staticProps:i,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(o.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[5334,7391,683,5037,5695,5302,2077,3665,41,636,6593,8792],()=>e(e.s=58602)),_N_E=e.O()}]);
//# sourceMappingURL=2025-06-06-r3f-gltf-animations-9d0fdca30b548470.js.map