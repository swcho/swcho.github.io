(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8521],{1568:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(18153),i=n(14232);let l=i.forwardRef(e=>{let{children:t,...n}=e,l=i.useRef(null),[a,s]=i.useState();return i.useEffect(()=>{s(l.current)},[]),(0,r.Y)("div",{ref:l,css:{border:"1px solid",borderRadius:"4px",width:"100%",height:"300px",marginBottom:"1rem"},...n,children:a&&t(a)})}),a=i.memo(l)},19281:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F,meta:()=>j});var r=n(37876),i=n(91668),l=n(91013),a=n(18153),s=n(14232),o=n(1568),c=n(71804),d=n(45302),h=n(35577),u=n(82627),m=n(49082);let p="/_next/static/chunks/stacy.3f5b94be71e592ad24beddb122028a92.glb",f="/_next/static/chunks/stacy.texture.84da32e0b941a997c0846909034f9169.glb";var x=n(14796);let g={clone:function(e){let t=new Map,n=new Map,r=e.clone();return function e(t,n,r){r(t,n);for(let i=0;i<t.children.length;i++)e(t.children[i],n.children[i],r)}(e,r,function(e,r){t.set(r,e),n.set(e,r)}),r.traverse(function(e){if(!e.isSkinnedMesh)return;let r=t.get(e),i=r.skeleton.bones;e.skeleton=r.skeleton.clone(),e.bindMatrix.copy(r.bindMatrix),e.skeleton.bones=i.map(function(e){return n.get(e)}),e.bind(e.skeleton,e.bindMatrix)}),r}};function v(e){let{...t}=e,{scene:n}=(0,h.p)(p),r=s.useMemo(()=>g.clone(n),[n]),{nodes:i}=(0,c.F)(r),l=i.stacy,o=(0,u.zo)(f);return o.flipY=!1,(0,a.Y)("group",{...t,children:(0,a.FD)("skinnedMesh",{castShadow:!0,receiveShadow:!0,geometry:l.geometry,skeleton:l.skeleton,rotation:[Math.PI/2,0,0],scale:[.01,.01,.01],children:[(0,a.Y)("primitive",{object:i.mixamorigHips}),(0,a.Y)("meshStandardMaterial",{map:o})]})})}let Y=s.memo(function(e){let{}=e;return(0,a.Y)(o.A,{css:{height:"400px"},children:()=>(0,a.Y)(a.FK,{children:(0,a.FD)(d.Hl,{shadows:!0,camera:{position:[1,1.5,2.5],fov:50,viewport:new x.Vector4(0,600,0,0)},children:[(0,a.Y)("ambientLight",{intensity:.5}),(0,a.Y)("directionalLight",{position:[-5,5,5],castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,a.Y)("group",{position:[0,-1,0],children:(0,a.Y)(s.Suspense,{fallback:null,children:(0,a.Y)(v,{pose:4,position:[0,0,0]})})}),(0,a.FD)("mesh",{rotation:[-.5*Math.PI,0,0],position:[0,-1,0],receiveShadow:!0,children:[(0,a.Y)("planeGeometry",{args:[10,10,1,1]}),(0,a.Y)("shadowMaterial",{transparent:!0,opacity:.2})]}),(0,a.Y)("gridHelper",{}),(0,a.Y)("axesHelper",{}),(0,a.Y)(m.N,{makeDefault:!0})]})})})});var b=n(33191);function w(e){let{initialPose:t,...n}=e,{scene:r,animations:i}=(0,h.p)(p),l=s.useMemo(()=>g.clone(r),[r]),{nodes:o}=(0,c.F)(l),d=o.stacy,m=(0,u.zo)(f);m.flipY=!1;let[v,Y]=s.useState(t),{ref:w,names:y,actions:j}=function(e,t){let n=s.useRef(null),[r]=s.useState(()=>n),[i]=s.useState(()=>new x.AnimationMixer(void 0));s.useLayoutEffect(()=>{i._root=r.current});let l=s.useRef({}),a=s.useMemo(()=>{let t={};return e.forEach(e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(r.current)return l.current[e.name]||(l.current[e.name]=i.clipAction(e,r.current))},configurable:!0})),{ref:r,clips:e,actions:t,names:e.map(e=>e.name),mixer:i}},[e]);return(0,c.D)((e,t)=>i.update(t)),s.useEffect(()=>{let e=r.current;return()=>{l.current={},i.stopAllAction(),Object.values(a.actions).forEach(t=>{e&&i.uncacheAction(t,e)})}},[e]),a}(i),k=y[v];return s.useEffect(()=>{let e=j[k];return null==e||e.reset().fadeIn(.5).play(),()=>{null==e||e.fadeOut(.5)}},[j,k]),(0,a.FD)("group",{...n,children:[(0,a.FD)("group",{rotation:[Math.PI/2,0,0],scale:[.01,.01,.01],onClick:()=>Y((v+1)%y.length),children:[(0,a.Y)("primitive",{object:o.mixamorigHips}),(0,a.Y)("skinnedMesh",{ref:e=>w.current=e,castShadow:!0,receiveShadow:!0,geometry:d.geometry,skeleton:d.skeleton,children:(0,a.Y)("meshStandardMaterial",{map:m})})]}),(0,a.Y)(b.E,{position:[0,2,-1],color:"black",anchorX:"center",anchorY:"middle",children:k})]})}let y=s.memo(function(e){let{}=e;return(0,a.Y)(o.A,{css:{height:"400px"},children:()=>(0,a.Y)(a.FK,{children:(0,a.FD)(d.Hl,{shadows:!0,camera:{position:[1,1.5,2.5],fov:50,viewport:new x.Vector4(0,600,0,0)},children:[(0,a.Y)("ambientLight",{intensity:.5}),(0,a.Y)("directionalLight",{position:[-5,5,5],castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),(0,a.Y)("group",{position:[0,-1,0],children:(0,a.Y)(s.Suspense,{fallback:null,children:(0,a.Y)(w,{initialPose:8,position:[0,0,0]})})}),(0,a.FD)("mesh",{rotation:[-.5*Math.PI,0,0],position:[0,-1,0],receiveShadow:!0,children:[(0,a.Y)("planeGeometry",{args:[10,10,1,1]}),(0,a.Y)("shadowMaterial",{transparent:!0,opacity:.2})]}),(0,a.Y)("gridHelper",{}),(0,a.Y)("axesHelper",{}),(0,a.Y)(m.N,{makeDefault:!0})]})})})}),j={title:"R3f: GLTF Animations re-used",description:"Rag doll 에니메이션 정보가 있는 GLTF를 표시해 봅니다.",date:"2025-06-06",readTime:5},k=e=>{let{children:t}=e;return(0,r.jsx)(l.A,{meta:j,children:t})};function E(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"원본 코드"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://codesandbox.io/s/k8phr",children:"GLTF Animations re-used"})}),"\n"]}),"\n",(0,r.jsx)(t.h1,{children:"GLTF 로드 및 배치"}),"\n",(0,r.jsx)(Y,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"useGLTF"}),"와 ",(0,r.jsx)(t.code,{children:"useTexture"}),"를 사용해서 모델을 로드하고 표시합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["카메라 포지션에 맞추어 ",(0,r.jsx)(t.code,{children:"<skinnedMesh />"})," 객체를 정 중앙에 배치합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["그림자를 표시할 평면은 이에 맞추어 ",(0,r.jsx)(t.code,{children:"y = -1"})," 지점에 배치합니다."]}),"\n",(0,r.jsx)(t.h1,{children:"Animation 적용"}),"\n",(0,r.jsx)(y,{}),"\n",(0,r.jsx)(t.p,{children:"로드한 GLTF 모델에 애니메이션을 적용합니다."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"drei"}),"의 ",(0,r.jsx)(t.code,{children:"useAnimations"})," 훅을 사용하여 GLTF에 포함된 animation 목록과 각 에니메이션을 실행할 수 있는 ",(0,r.jsx)(t.code,{children:"actions"})," 객체를 가져옵니다."]}),"\n",(0,r.jsxs)(t.p,{children:["클릭 이벤트를 통해 ",(0,r.jsx)(t.code,{children:"actions"})," 객체에 있는 애니메이션을 순차적으로 변경할 수 있습니다."]})]})}function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(k,{...e,children:(0,r.jsx)(E,{...e})})}},33191:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(44501),i=n(14232),l=n(1825),a=n(71804),s=n(41401);let o=i.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:o,fontSize:c=1,children:d,characters:h,onSync:u,...m},p)=>{let f=(0,a.C)(({invalidate:e})=>e),[x]=i.useState(()=>new l.EY),[g,v]=i.useMemo(()=>{let e=[],t="";return i.Children.forEach(d,n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)}),[e,t]},[d]);return(0,s.DY)(()=>new Promise(e=>(0,l.PY)({font:o,characters:h},e)),["troika-text",o,h]),i.useLayoutEffect(()=>void x.sync(()=>{f(),u&&u(x)})),i.useEffect(()=>()=>x.dispose(),[x]),i.createElement("primitive",(0,r.A)({object:x,ref:p,font:o,text:v,anchorX:t,anchorY:n,fontSize:c,sdfGlyphSize:e},m),g)})},49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(18153),i=n(77328),l=n.n(i),a=n(14232);let s=a.memo(()=>(0,r.Y)(r.FK,{}));var o=n(71745),c=n(48230),d=n.n(c);let h=[{link:"/",text:"Home"}],u=a.memo(()=>{let e=(0,o.useRouter)(),[t,n]=a.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(d(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:h.map(t=>{let{link:n,text:i}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(d(),{legacyBehavior:!0,className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:i})},n)})})})]})]})}),m=a.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(l(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(u,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(s,{})]})})},49082:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n(44501),i=n(71804),l=n(14232),a=n(78961);let s=l.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:s,enableDamping:o=!0,keyEvents:c=!1,onChange:d,onStart:h,onEnd:u,...m},p)=>{let f=(0,i.C)(e=>e.invalidate),x=(0,i.C)(e=>e.camera),g=(0,i.C)(e=>e.gl),v=(0,i.C)(e=>e.events),Y=(0,i.C)(e=>e.setEvents),b=(0,i.C)(e=>e.set),w=(0,i.C)(e=>e.get),y=(0,i.C)(e=>e.performance),j=t||x,k=s||v.connected||g.domElement,E=l.useMemo(()=>new a.N(j),[j]);return(0,i.D)(()=>{E.enabled&&E.update()},-1),l.useEffect(()=>(c&&E.connect(!0===c?k:c),E.connect(k),()=>void E.dispose()),[c,k,n,E,f]),l.useEffect(()=>{let e=e=>{f(),n&&y.regress(),d&&d(e)},t=e=>{h&&h(e)},r=e=>{u&&u(e)};return E.addEventListener("change",e),E.addEventListener("start",t),E.addEventListener("end",r),()=>{E.removeEventListener("start",t),E.removeEventListener("end",r),E.removeEventListener("change",e)}},[d,h,u,E,f,Y]),l.useEffect(()=>{if(e){let e=w().controls;return b({controls:E}),()=>b({controls:e})}},[e,E]),l.createElement("primitive",(0,r.A)({ref:p,object:E,enableDamping:o},m))})},58602:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-06-06-r3f-gltf-animations",function(){return n(19281)}])},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>s,j:()=>a});var r=n(18153),i=n(14232);let l=i.createContext({});function a(e){let{staticProps:t,children:n}=e;return(0,r.Y)(l.Provider,{value:t,children:n})}function s(){return i.useContext(l)}},82627:(e,t,n)=>{"use strict";n.d(t,{zo:()=>s});var r=n(14232),i=n(14796),l=n(71804);let a=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function s(e,t){let n=(0,l.C)(e=>e.gl),s=(0,l.G)(i.TextureLoader,a(e)?Object.values(e):e);return(0,r.useLayoutEffect)(()=>{null==t||t(s)},[t]),(0,r.useEffect)(()=>{if("initTexture"in n){let e=[];Array.isArray(s)?e=s:s instanceof i.Texture?e=[s]:a(s)&&(e=Object.values(s)),e.forEach(e=>{e instanceof i.Texture&&n.initTexture(e)})}},[n,s]),(0,r.useMemo)(()=>{if(!a(e))return s;{let t={},n=0;for(let r in e)t[r]=s[n++];return t}},[e,s])}s.preload=e=>l.G.preload(i.TextureLoader,e),s.clear=e=>l.G.clear(i.TextureLoader,e)},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(18153);n(14232);let i=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(18153),i=n(73146),l=n.n(i),a=n(14232),s=n(86089),o=n(60158),c=n(85419),d=n(49034);function h(e){let{children:t,meta:n,staticProps:i}=e;return a.useEffect(()=>{l().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(d.A,{title:n.title,children:[(0,r.Y)(c.A,{meta:n,isBlogPost:!0}),(0,r.Y)(o.j,{staticProps:i,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(s.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[7391,683,5037,5695,5302,2077,3665,41,636,6593,8792],()=>e(e.s=58602)),_N_E=e.O()}]);
//# sourceMappingURL=2025-06-06-r3f-gltf-animations-8878ff3d4f77a4fb.js.map