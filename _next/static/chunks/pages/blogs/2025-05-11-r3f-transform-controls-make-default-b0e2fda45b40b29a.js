(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1067],{45074:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-05-11-r3f-transform-controls-make-default",function(){return n(50294)}])},49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(18153),o=n(77328),l=n.n(o),i=n(14232);let a=i.memo(()=>(0,r.Y)(r.FK,{}));var s=n(71745),c=n(48230),d=n.n(c);let m=[{link:"/",text:"Home"}],h=i.memo(()=>{let e=(0,s.useRouter)(),[t,n]=i.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(d(),{className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:m.map(t=>{let{link:n,text:o}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(d(),{className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:o})},n)})})})]})]})}),u=i.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(l(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(h,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(a,{})]})})},50294:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T,meta:()=>P});var r=n(37876),o=n(91668),l=n(91013),i=n(18153),a=n(35577),s=n(18364),c=n(45302),d=n(14232),m=n(25828),h=n(36444),u=n(81334),p=n(97214);let f=d.memo(function(e){let{children:t,...n}=e;return(0,i.Y)("div",{style:{border:"1px solid",borderRadius:"4px",width:"100%",height:"300px",marginBottom:"1rem"},...n,children:t})}),x="/_next/static/chunks/compressed.9d646d8f6c772acb56c9a3a7d6a99c8c.glb",g=["translate","rotate","scale"],Y=(0,m.BX)({current:null,mode:0,models:(0,u.zJ)()});function b(e){let{name:t,...n}=e,r=(0,h.s)(Y),{nodes:o}=(0,a.p)(x),[l,c]=d.useState(!1);return(0,s.o)(l),d.useEffect(()=>(Y.models.add(t),()=>{Y.models.delete(t)}),[]),(0,i.Y)("mesh",{onClick:e=>(e.stopPropagation(),Y.current=t),onPointerMissed:e=>"click"===e.type&&(Y.current=null),onContextMenu:e=>r.current===t&&(e.stopPropagation(),Y.mode=(r.mode+1)%g.length),onPointerOver:e=>(e.stopPropagation(),c(!0)),onPointerOut:e=>c(!1),name:t,geometry:o[t].geometry,material:o[t].material,"material-color":r.current===t?"#ff6080":"white",...n,dispose:null})}let v=d.memo(function(e){let{}=e,t=(0,p.C)(Y);return(0,i.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.Y)(f,{children:(0,i.FD)(c.Hl,{camera:{position:[0,-10,80],fov:50},dpr:[1,2],children:[(0,i.Y)("pointLight",{position:[100,100,100],intensity:.8}),(0,i.Y)("hemisphereLight",{color:"#ffffff",groundColor:"#b9b9b9",position:[-7,25,13],intensity:.85}),(0,i.Y)(d.Suspense,{children:(0,i.FD)("group",{position:[0,0,0],children:[(0,i.Y)(b,{name:"Curly",position:[1,-11,-20],rotation:[2,0,-0]}),(0,i.Y)(b,{name:"DNA",position:[20,0,-17],rotation:[1,1,-2]}),(0,i.Y)(b,{name:"Headphones",position:[20,2,4],rotation:[1,0,-1]}),(0,i.Y)(b,{name:"Notebook",position:[-21,-15,-13],rotation:[2,0,1]}),(0,i.Y)(b,{name:"Rocket003",position:[18,15,-25],rotation:[1,1,0]}),(0,i.Y)(b,{name:"Roundcube001",position:[-25,-4,5],rotation:[1,0,0],scale:.5}),(0,i.Y)(b,{name:"Table",position:[1,-4,-28],rotation:[1,0,-1],scale:.5}),(0,i.Y)(b,{name:"VR_Headset",position:[7,-15,28],rotation:[1,0,-1],scale:5}),(0,i.Y)(b,{name:"Zeppelin",position:[-20,10,10],rotation:[3,-1,3],scale:.005})]})})]})}),(0,i.Y)(f,{className:"p-4",children:(0,i.Y)("ul",{className:"flex flex-col items-start",children:Array.from(t.models.values()).map(e=>(0,i.FD)("li",{className:"flex items-center text-xs",children:[(0,i.Y)("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:t.current===e?"#ff6080":"white"}}),e]},e))})})]})});var N=n(99855),y=n(49082),j=n(88360);let w=["translate","rotate","scale"],k=(0,m.BX)({current:null,mode:0,models:(0,u.zJ)()});function C(e){let{name:t,...n}=e,r=(0,h.s)(k),{nodes:o}=(0,a.p)(x),[l,c]=d.useState(!1);return(0,s.o)(l),d.useEffect(()=>(k.models.add(t),()=>{k.models.delete(t)}),[]),(0,i.Y)("mesh",{onClick:e=>(e.stopPropagation(),k.current=t),onPointerMissed:e=>"click"===e.type&&(k.current=null),onContextMenu:e=>r.current===t&&(e.stopPropagation(),k.mode=(r.mode+1)%w.length),onPointerOver:e=>(e.stopPropagation(),c(!0)),onPointerOut:e=>c(!1),name:t,geometry:o[t].geometry,material:o[t].material,"material-color":r.current===t?"#ff6080":"white",...n,dispose:null})}function D(){let e=(0,h.s)(k),t=(0,j.C)(e=>e.scene);return(0,i.FD)(i.FK,{children:[e.current&&(0,i.Y)(N.Z,{object:t.getObjectByName(e.current),mode:w[e.mode]}),(0,i.Y)(y.N,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI/1.75})]})}let F=d.memo(function(e){let{}=e,t=(0,p.C)(k);return(0,i.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.Y)(f,{children:(0,i.FD)(c.Hl,{camera:{position:[0,-10,80],fov:50},dpr:[1,2],children:[(0,i.Y)("pointLight",{position:[100,100,100],intensity:.8}),(0,i.Y)("hemisphereLight",{color:"#ffffff",groundColor:"#b9b9b9",position:[-7,25,13],intensity:.85}),(0,i.Y)(d.Suspense,{children:(0,i.FD)("group",{position:[0,0,0],children:[(0,i.Y)(C,{name:"Curly",position:[1,-11,-20],rotation:[2,0,-0]}),(0,i.Y)(C,{name:"DNA",position:[20,0,-17],rotation:[1,1,-2]}),(0,i.Y)(C,{name:"Headphones",position:[20,2,4],rotation:[1,0,-1]}),(0,i.Y)(C,{name:"Notebook",position:[-21,-15,-13],rotation:[2,0,1]}),(0,i.Y)(C,{name:"Rocket003",position:[18,15,-25],rotation:[1,1,0]}),(0,i.Y)(C,{name:"Roundcube001",position:[-25,-4,5],rotation:[1,0,0],scale:.5}),(0,i.Y)(C,{name:"Table",position:[1,-4,-28],rotation:[1,0,-1],scale:.5}),(0,i.Y)(C,{name:"VR_Headset",position:[7,-15,28],rotation:[1,0,-1],scale:5}),(0,i.Y)(C,{name:"Zeppelin",position:[-20,10,10],rotation:[3,-1,3],scale:.005})]})}),(0,i.Y)(D,{}),(0,i.Y)("axesHelper",{}),(0,i.Y)("gridHelper",{args:[100]})]})}),(0,i.Y)(f,{className:"p-4",children:(0,i.Y)("ul",{className:"flex flex-col items-start",children:Array.from(t.models.values()).map(e=>(0,i.FD)("li",{className:"flex items-center text-xs",children:[(0,i.Y)("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:t.current===e?"#ff6080":"white"}}),e]},e))})})]})}),P={title:"R3f: TransformControls and makeDefault",description:"TransformControls과 카메라 컨트롤의 makeDefault 속성의 용도를 살펴 봅니다.",date:"2025-05-11",readTime:5},_=e=>{let{children:t}=e;return(0,r.jsx)(l.A,{meta:P,children:t})};function A(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"TransformControls and makeDefault"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["참고: ",(0,r.jsx)(t.a,{href:"https://codesandbox.io/s/btsbj",children:"TransformControls and makeDefault"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["이 예제는 ",(0,r.jsx)(t.a,{href:"https://valtio.dev/",children:"Valtio, makes proxy-state simple for React and Vanilla"}),"라는 경량의 상태 관리 라이브러리를 사용합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["Vanilla JS에서 객체를 변경하면 react 컴포넌트에서 ",(0,r.jsx)(t.code,{children:"useSnapshot"}),"을 통해 값 변경에 따른 렌더링을 수행합니다."]}),"\n",(0,r.jsx)(v,{}),"\n",(0,r.jsxs)(t.p,{children:["예제에서 사용하는 GLTF 파일에는 9개의 mesh가 있습니다. 먼저 각 mesh를 랜덤한 위치에 배치합니다.\n클릭시에는 ",(0,r.jsx)(t.code,{children:"valtio"}),"를 통해 선택한 mesh가 무엇인지를 관리합니다."]}),"\n",(0,r.jsx)(F,{}),"\n",(0,r.jsxs)(t.p,{children:["특정 mesh를 클릭하여 그 이름을 valtio를 사용해 설정하면 ",(0,r.jsx)(t.code,{children:"Controls"})," 컴포넌트에서 mesh 이름을 기준으로 three.js object를 찾습니다."]}),"\n",(0,r.jsxs)(t.p,{children:["이 three.js object를 ",(0,r.jsx)(t.code,{children:"TransformControls"}),"에 전달하면 객채의 위치, 크기, 각도 등을 변경할 수 있는 컨트롤을 제공합니다."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"OrbitControl"}),"을 같이 설정하면 마우스 드래그시 카메라 위치를 변경할 수 있습니다."]}),"\n",(0,r.jsxs)(t.p,{children:["문제는 ",(0,r.jsx)(t.code,{children:"TransformControls"}),"과 함께 사용할 경우 두 컨트롤에서 동시에 마우스 이벤트를 처리하기 때문에 transform과 카메라 위치 변경이 동시에 이루어 집니다."]}),"\n",(0,r.jsxs)(t.p,{children:["이때 ",(0,r.jsx)(t.code,{children:"<OrbitControls makeDefault />"}),"를 설정하면 transform 동작시에 카메라 위치 변경이 이루어지지 않습니다."]})]})}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(_,{...e,children:(0,r.jsx)(A,{...e})})}},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>a,j:()=>i});var r=n(18153),o=n(14232);let l=o.createContext({});function i(e){let{staticProps:t,children:n}=e;return(0,r.Y)(l.Provider,{value:t,children:n})}function a(){return o.useContext(l)}},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(18153);n(14232);let o=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(18153),o=n(73146),l=n.n(o),i=n(14232),a=n(86089),s=n(60158),c=n(85419),d=n(49034);function m(e){let{children:t,meta:n,staticProps:o}=e;return i.useEffect(()=>{l().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(d.A,{title:n.title,children:[(0,r.Y)(c.A,{meta:n,isBlogPost:!0}),(0,r.Y)(s.j,{staticProps:o,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(a.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[5334,7391,683,5695,5302,2077,3665,1252,1874,636,6593,8792],()=>e(e.s=45074)),_N_E=e.O()}]);
//# sourceMappingURL=2025-05-11-r3f-transform-controls-make-default-b0e2fda45b40b29a.js.map