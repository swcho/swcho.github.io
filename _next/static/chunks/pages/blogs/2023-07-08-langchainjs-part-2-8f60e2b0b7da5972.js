(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4210],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(18153),i=n(77328),s=n.n(i),c=n(14232);let l=c.memo(()=>(0,r.Y)(r.FK,{}));var o=n(71745),a=n(48230),u=n.n(a);let d=[{link:"/",text:"Home"}],h=c.memo(()=>{let e=(0,o.useRouter)(),[t,n]=c.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(u(),{className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:d.map(t=>{let{link:n,text:i}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(u(),{className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:i})},n)})})})]})]})}),p=c.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(s(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(h,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(l,{})]})})},56486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.identifierTypes=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}(n(14232)),i=function(e){return e&&e.__esModule?e:{default:e}}(n(95062));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=["pathname","url","title","og:title","issue-number","issue-term"],a=function(e,t,n){if(0>o.indexOf(e))return void console.warn("Wrong type: "+e);if("pathname"===e)return"pathname";if("url"===e)return"url";if("title"===e)return"title";if("og:title"===e)return"og:title";if("issue-term"===e)return t;else if("issue-number"===e)return n},u=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(e){var t,i;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return(t=(i=c(n).call(this,e))&&("object"===s(i)||"function"==typeof i)?i:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).myRef=r.default.createRef(),t.state={pending:!0},t}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&l(n,e),t=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.repo,r=t.type,i=t.specificTerm,s=t.issueNumber,c=0>o.indexOf(r)?void console.warn("Wrong type: "+r):"issue-number"===r?"issue-number":"issue-term",l=a(r,i,s);if("issue-term"===r&&!l)return void console.warn("When type is '".concat(r,"', 'specificTerm' prop must be provided"));if("issue-number"===r&&(isNaN(l)||l<1))return void console.warn("When type is '".concat(r,"', valid 'issueNumber' prop must be provided"));var u=document.createElement("script");u.src="https://utteranc.es/client.js",u.async=!0,u.setAttribute("repo",n),u.setAttribute("crossorigin","anonymous"),u.setAttribute(c,l),u.onload=function(){return e.setState({pending:!1})},this.myRef.current.appendChild(u)}},{key:"render",value:function(){return r.default.createElement("div",{className:"react-utterences",ref:this.myRef},this.props.debug&&r.default.createElement("pre",{style:{background:"#cccccc",padding:10}},"\nthis.props: ".concat(JSON.stringify(this.props,null,2),'\nlocation.pathname: "').concat(window.location.pathname,'"\nlocation.href: "').concat(window.location.href,'"\n          ').trim()),this.props.debug&&r.default.createElement("div",null,"\uD83D\uDC47\uD83D\uDC47If the settings are valid, the comment widget appear below\uD83D\uDC47\uD83D\uDC47"),this.state.pending&&r.default.createElement("div",null,"Loading script..."))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(r.Component);t.identifierTypes={pathname:{attrValue:"",summary:"Issue title contains page pathname"},url:{attrValue:"url",summary:"Issue title contains page URL"},title:{attrValue:"title",summary:"Issue title contains page title"},"og:title":{attrValue:"og:title",summary:"Issue title contains page og:title"},"issue-number":{attrValue:-1,summary:"Specific issue number"},"issue-term":{attrValue:"",summary:"Issue title contains specific term"}},u.propTypes={type:i.default.string.isRequired,repo:i.default.string.isRequired,specificTerm:i.default.string,issueNumber:i.default.number,hashKey:i.default.string,debug:i.default.bool},t.default=u},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>l,j:()=>c});var r=n(18153),i=n(14232);let s=i.createContext({});function c(e){let{staticProps:t,children:n}=e;return(0,r.Y)(s.Provider,{value:t,children:n})}function l(){return i.useContext(s)}},79706:(e,t,n)=>{"use strict";var r=n(3717);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,c){if(c!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},84610:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2023-07-08-langchainjs-part-2",function(){return n(95203)}])},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(18153);n(14232);let i=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},86089:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return r.default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}(n(56486))},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(18153),i=n(73146),s=n.n(i),c=n(14232),l=n(86089),o=n(60158),a=n(85419),u=n(49034);function d(e){let{children:t,meta:n,staticProps:i}=e;return c.useEffect(()=>{s().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(u.A,{title:n.title,children:[(0,r.Y)(a.A,{meta:n,isBlogPost:!0}),(0,r.Y)(o.j,{staticProps:i,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(l.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}},95062:(e,t,n)=>{e.exports=n(79706)()},95203:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p,meta:()=>u});var r=n(37876),i=n(91668),s=n(91013);let c={src:"/_next/static/media/buffer.92254132.svg"},l={src:"/_next/static/media/question_answering.13e6b5ea.svg"},o={src:"/_next/static/media/qa_refine.be7163e2.svg"},a={src:"/_next/static/media/retrieval_qa.69aad375.svg"},u={title:"LangchainJS 리뷰 #2",description:"langchain의 memory와 chain에 대해 살펴 봅니다.",date:"2023-07-08",readTime:2},d=e=>{let{children:t}=e;return(0,r.jsx)(s.A,{meta:u,children:t})};function h(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Memory"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://js.langchain.com/docs/modules/memory/",children:"Getting Started: Memory | \uD83E\uDD9C️\uD83D\uDD17 Langchain"})}),"\n"]}),"\n",(0,r.jsx)("img",{src:c.src}),"\n",(0,r.jsx)(t.p,{children:"대화에 필요한 데이터를 가져오고 저장합니다.\n대화형 프롬프트의 경우, 메모리를 사용하여 이전 대화 내용을 저장합니다.\nStateless 한 LLM의 경우 이 대화 이력을 프롬프트와 같이 전달하여 맥락에 맞는 응답을 유도합니다.\n메모리는 한 대회의 이력을 가지기 때문에, 다른 chain 간에 같은 동일한 인스턴스를 공유하지 않도록 유의합니다."}),"\n",(0,r.jsx)(t.h1,{children:"Chains"}),"\n",(0,r.jsxs)(t.h2,{children:[(0,r.jsx)(t.code,{children:"StuffDocumentsChain"}),", ",(0,r.jsx)(t.code,{children:"MapReduceDocumentsChain"})]}),"\n",(0,r.jsxs)(t.p,{children:["여러 문서로 부터 질의를 할 수 있는 ",(0,r.jsx)(t.code,{children:"StuffDocumentsChain"}),", ",(0,r.jsx)(t.code,{children:"MapReduceDocumentsChain"}),"이 있습니다."]}),"\n",(0,r.jsx)("img",{src:l.src}),"\n",(0,r.jsx)(t.h2,{children:(0,r.jsx)(t.code,{children:"RefineDocumentsChain"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"RefineDocumentsChain"}),"은 이전 응답과 다음 문서를 프롬프트에 대입하여 최종 응답을 강화 합니다."]}),"\n",(0,r.jsx)(t.p,{children:"다음은 장문의 텍스트 데이터로 부터 질의하는 과정입니다."}),"\n",(0,r.jsx)("img",{src:o.src}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"텍스트 로드"}),"\n",(0,r.jsxs)(t.li,{children:["텍스트를 처리 단위(",(0,r.jsx)(t.code,{children:"Document"}),")로 분할"]}),"\n",(0,r.jsx)(t.li,{children:"각 문서를 embedding 후 vector store에 저장"}),"\n",(0,r.jsx)(t.li,{children:"질의 embedding"}),"\n",(0,r.jsx)(t.li,{children:"질의 embeeding과 문서 embedding 사이의 consine similarity 검색"}),"\n",(0,r.jsx)(t.li,{children:"Top 4 선정"}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"RefineDocumentsChain"}),"를 사용하여 top 4 문서의 응답을 강화"]}),"\n",(0,r.jsx)(t.li,{children:"최종 응답 반환"}),"\n"]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://www.npmjs.com/package/ml-distance",children:"ml-distance - npm"})}),"\n"]}),"\n",(0,r.jsx)(t.h2,{children:(0,r.jsx)(t.code,{children:"RetrievalQAChain"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"RetrievalQAChain"}),"은 위와 같은 문서의 embedding, 유사도 검색, 질의를 모두 수행하는 기능을 가지고 있습니다."]}),"\n",(0,r.jsx)("img",{src:a.src}),"\n",(0,r.jsx)(t.h1,{children:"마치며"}),"\n",(0,r.jsx)(t.p,{children:"메모리를 사용하는 경우, 대화 내용을 저장하고 맥락의 전달을 위해 이를 포함합니다.\n따라서 대화가 길어질 수록 프롬프트의 양은 늘어납니다.\n주어진 미션에 부합하는 결과도 중요하지만, 예상치 못한 과도한 호출로 이어지지 않도록 프롬프트 관리에 신경써야 합니다."}),"\n",(0,r.jsx)(t.p,{children:"문서를 vector store에 indexing 하는 과정에서 embedding API를 호출합니다.\n따라서 문서를 읽어오는 수 만큼 과금을 합니다.\n대량의 문서의 경우 장기 저장가능한 vector store 구현체를 사용하여 비용적, 시간적 사용을 줄이도록 고민해야 합니다."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"StuffDocumentsChain"}),"은 단순하게 전체 문서를 전달하여 프롬프트를 구성하는 반면,\n",(0,r.jsx)(t.code,{children:"RefineDocumentsChain"}),"은 순차적으로 응답을 개선하는 방식을 사용하고 있습니다.\n두 방법 모두 vector store로 부터 찾은 문서의 개수 만큼 프롬프트를 구성함으로 관련 문서를 최대 몇개를 찾을 것인지(디폴트는 4)등을 고민하여 적용해 보도록 합니다."]}),"\n",(0,r.jsx)(t.p,{children:"그 밖의 많은 chain들이 있지만 오늘은 여기까지 정리 하였습니다.\n다음에는 Agent에 대해서 리뷰할 예정입니다."})]})}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(d,{...e,children:(0,r.jsx)(h,{...e})})}}},e=>{e.O(0,[5695,636,6593,8792],()=>e(e.s=84610)),_N_E=e.O()}]);
//# sourceMappingURL=2023-07-08-langchainjs-part-2-8f60e2b0b7da5972.js.map