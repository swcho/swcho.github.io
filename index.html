
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>SwForge&#39;s Note</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="SwForge">
    

    
    <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="SwForge's Note">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="SwForge's Note">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SwForge's Note">
<meta name="twitter:description">

    
    <link rel="alternative" href="/atom.xml" title="SwForge&#39;s Note" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="SwForge&#39;s Note" title="SwForge&#39;s Note"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="SwForge&#39;s Note">SwForge&#39;s Note</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/16/density-estimation/" title="Density Estimation" itemprop="url">Density Estimation</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-05-16T11:05:49.000Z" itemprop="datePublished"> Published 2016-05-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Scattered-Plot"><a href="#Scattered-Plot" class="headerlink" title="Scattered Plot"></a>Scattered Plot</h1><p>jitter 함수는 렌덤하게 노이즈를 추가한다. 이를 이용해서 다음과 같이 학생 수에 대한 scatterplot을 그린다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(elementary$Students, jitter(rep(<span class="number">1</span>, nrow(elementary))), ylab =<span class="string">""</span>, yaxt = <span class="string">"n"</span>)</span><br></pre></td></tr></table></figure>
<img src="/2016/05/16/density-estimation/density_est_01.png" alt="plot(elementary$Students, jitter(rep(1, nrow(elementary))), ylab =" ",="" yaxt="n" )"="" title="plot(elementary$Students, jitter(rep(1, nrow(elementary))), ylab =">
<h1 id="Histogram"><a href="#Histogram" class="headerlink" title="Histogram"></a>Histogram</h1><p>밀도 측정이니… 히스토그램이 빠질 수 없다..<br>KDE (Kernel Density Estimate)도 빨간 선으로 표시한다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hist(elementary$Students, freq = <span class="literal">FALSE</span>)</span><br><span class="line">rug(elementary$Students)</span><br><span class="line">lines(density(elementary$Students), col=<span class="string">'red'</span>, lwd=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>rug는 표본수가 많아서 그런지 그냥 시꺼멓게 나온다.</p>
<img src="/2016/05/16/density-estimation/density_est_02.png" alt="Histogram & KDE" title="Histogram & KDE">
<h1 id="2d-KDE"><a href="#2d-KDE" class="headerlink" title="2d KDE"></a>2d KDE</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(MASS)</span><br><span class="line">dens &lt;- kde2d(elementary$Students, elementary$Teachers, n=<span class="number">100</span>)</span><br><span class="line">image(dens, xlab=<span class="string">"Students"</span>, ylab=<span class="string">"Teachers"</span>)</span><br><span class="line">contour(dens, add=<span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure>
<img src="/2016/05/16/density-estimation/density_est_03.png" alt="2D KDE" title="2D KDE">
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">points(jitter(elementary$Students, <span class="number">2</span>), jitter(elementary$Teachers, <span class="number">2</span>), cex=<span class="number">.7</span>, pch=<span class="string">"+"</span>)</span><br></pre></td></tr></table></figure>
<img src="/2016/05/16/density-estimation/density_est_04.png" alt="2D KDE with points" title="2D KDE with points">
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">persp(dens, xlab=<span class="string">"Students"</span>, ylab=<span class="string">"Teachers"</span>, zlab=<span class="string">"density"</span>, shade=<span class="number">.5</span>)</span><br></pre></td></tr></table></figure>
<img src="/2016/05/16/density-estimation/density_est_05.png" alt="3D" title="3D">
<h1 id="With-plotly"><a href="#With-plotly" class="headerlink" title="With plotly"></a>With plotly</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(plotly)</span><br><span class="line">plot_ly(dens, z = z, type = <span class="string">"surface"</span>)</span><br></pre></td></tr></table></figure>
<img src="/2016/05/16/density-estimation/density_est_06.png" alt="plotly" title="plotly">
<p>이제서야 data mining을 복습해 봤다…<br>Data Explorating 차례다…</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/05/16/density-estimation/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/03/relationship-between_features/" title="relationship between features" itemprop="url">relationship between features</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-05-03T11:58:37.000Z" itemprop="datePublished"> Published 2016-05-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>데이터를 로드하고.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">temp = read.table(<span class="string">"2015.edu.elementary.csv"</span>, sep=<span class="string">','</span>, header = <span class="literal">TRUE</span>)</span><br><span class="line">elementary &lt;- unique(temp[complete.cases(temp),])</span><br><span class="line">elementary$Province = as.numeric(elementary$Province)</span><br><span class="line">elementary$Gov = as.numeric(elementary$교육지원청)</span><br><span class="line">elementary$Students = as.numeric(elementary$Students)</span><br></pre></td></tr></table></figure></p>
<h1 id="Correlation-for-ratio-interval-scaled-features"><a href="#Correlation-for-ratio-interval-scaled-features" class="headerlink" title="Correlation (for ratio/interval scaled features)"></a>Correlation (for ratio/interval scaled features)</h1><p>상관 관계를 구하면<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; cor(elementary[<span class="number">13</span>:<span class="number">15</span>])</span><br><span class="line">              Rooms   Students   Teachers</span><br><span class="line">Rooms    <span class="number">1.00000000</span> <span class="number">0.05938743</span> <span class="number">0.98902676</span></span><br><span class="line">Students <span class="number">0.05938743</span> <span class="number">1.00000000</span> <span class="number">0.06299264</span></span><br><span class="line">Teachers <span class="number">0.98902676</span> <span class="number">0.06299264</span> <span class="number">1.00000000</span></span><br></pre></td></tr></table></figure></p>
<p>선생님수와 학급수가 강한 상관관계를 가짐을 알 수 있다.</p>
<p>원래는 다음과 같이 각 요소간 상관관계를 전치 행렬로 변환하여 상관관계를 구해<br>pimage로 확인해 봐야 하나…</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cc &lt;- cor(t(elementary[<span class="number">13</span>:<span class="number">15</span>]))</span><br><span class="line">cc[<span class="number">1</span>:<span class="number">50</span>, <span class="number">1</span>:<span class="number">50</span>]</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"seriation"</span>) <span class="comment"># for pimage</span></span><br><span class="line">pimage(cc[<span class="number">1</span>:<span class="number">100</span>, <span class="number">1</span>:<span class="number">100</span>], main = <span class="string">"Correlation between objects"</span>)</span><br><span class="line">dim(cc)</span><br></pre></td></tr></table></figure>
<p>거먼색만 나온다… -,.-</p>
<img src="/2016/05/03/relationship-between_features/relationship_01.png" alt="pimage(cc[1:100, 1:100], main = 'Correlation between objects')" title="pimage(cc[1:100, 1:100], main = 'Correlation between objects')">
<p>대신 좀 뻔하지만, Rooms, Students, Teachers 상관관계를 그려보면 다음과 같다<br><img src="/2016/05/03/relationship-between_features/relationship_02.png" alt="pimage(cor(elementary[13:15]))" title="pimage(cor(elementary[13:15]))"></p>
<h1 id="Rank-Relationship"><a href="#Rank-Relationship" class="headerlink" title="Rank Relationship"></a>Rank Relationship</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; elementary_ord &lt;- data.frame(</span><br><span class="line">+ cut(elementary[,<span class="number">13</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">+ cut(elementary[,<span class="number">14</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">+ cut(elementary[,<span class="number">15</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>))</span><br><span class="line">&gt; colnames(elementary_ord) &lt;- colnames(elementary[<span class="number">13</span>:<span class="number">15</span>])</span><br><span class="line">&gt; summary(elementary_ord)</span><br><span class="line">    Rooms        Students      Teachers   </span><br><span class="line"> short :<span class="number">4461</span>   short :<span class="number">1222</span>   short :<span class="number">4108</span>  </span><br><span class="line"> medium:<span class="number">1764</span>   medium:<span class="number">2764</span>   medium:<span class="number">2056</span>  </span><br><span class="line"> long  :  <span class="number">28</span>   long  :<span class="number">2267</span>   long  :  <span class="number">89</span></span><br></pre></td></tr></table></figure>
<p>Kendall’s tau rank correlation coefficient</p>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient" target="_blank" rel="external">https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient</a><br><a href="http://wolfpack.hnu.ac.kr/lecture/Spring01/nonparametric/nonpara8.pdf" target="_blank" rel="external">http://wolfpack.hnu.ac.kr/lecture/Spring01/nonparametric/nonpara8.pdf</a><br><a href="http://wolfpack.hnu.ac.kr/lecture/Spring01/nonparametric/index.htm" target="_blank" rel="external">http://wolfpack.hnu.ac.kr/lecture/Spring01/nonparametric/index.htm</a></p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; cor(sapply(elementary_ord, xtfrm), method=<span class="string">"kendall"</span>)</span><br><span class="line">             Rooms  Students  Teachers</span><br><span class="line">Rooms    <span class="number">1.0000000</span> <span class="number">0.1421921</span> <span class="number">0.8680415</span></span><br><span class="line">Students <span class="number">0.1421921</span> <span class="number">1.0000000</span> <span class="number">0.1797677</span></span><br><span class="line">Teachers <span class="number">0.8680415</span> <span class="number">0.1797677</span> <span class="number">1.0000000</span></span><br></pre></td></tr></table></figure>
<p>Spearman’s rho<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; cor(sapply(elementary_ord, xtfrm), method=<span class="string">"spearman"</span>)</span><br><span class="line">             Rooms  Students  Teachers</span><br><span class="line">Rooms    <span class="number">1.0000000</span> <span class="number">0.1490474</span> <span class="number">0.8722736</span></span><br><span class="line">Students <span class="number">0.1490474</span> <span class="number">1.0000000</span> <span class="number">0.1865755</span></span><br><span class="line">Teachers <span class="number">0.8722736</span> <span class="number">0.1865755</span> <span class="number">1.0000000</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Relationship-between-nominal-and-ordinal-features"><a href="#Relationship-between-nominal-and-ordinal-features" class="headerlink" title="Relationship between nominal and ordinal features"></a>Relationship between nominal and ordinal features</h1><p>카이제곱 검정<br>명목척도(nominal)를 이용하여 측정된 자료에서 연관성을 찾을 때 사용.<br>상관성은 서열척도(ordinal), 구간척도, 비율척도로 측정된 자료의 연관성을 찾을 때 사용.</p>
<p>일단 ordinal 데이터인 학생수를 3등분하여 short, medium, long의 nominal 데이터로 만든다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; elementary_ord &lt;- data.frame(</span><br><span class="line">+ elementary$교육지원청,</span><br><span class="line">+ cut(elementary[,<span class="number">13</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">+ cut(elementary[,<span class="number">14</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">+ cut(elementary[,<span class="number">15</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>))</span><br><span class="line">&gt; colnames(elementary_ord) &lt;- c(<span class="string">'Gov'</span>, <span class="string">'Rooms'</span>, <span class="string">'Students'</span>, <span class="string">'Teachers'</span>)</span><br><span class="line">&gt; head(elementary_ord)</span><br><span class="line">   Gov  Rooms Students Teachers</span><br><span class="line"><span class="number">1</span> 강릉  short     long    short</span><br><span class="line"><span class="number">2</span> 강릉  short   medium    short</span><br><span class="line"><span class="number">3</span> 강릉  short   medium    short</span><br><span class="line"><span class="number">4</span> 강릉 medium     long   medium</span><br><span class="line"><span class="number">5</span> 강릉  short   medium    short</span><br><span class="line"><span class="number">6</span> 강릉  short     long    short</span><br></pre></td></tr></table></figure>
<p>이렇게 하면, Gov, Rooms, Student, Teachers 모두 범주형 변수가 된다.<br>Gov와 Rooms 변수로 분할표(contigency table)을 다음과 같이 만든다.</p>
<blockquote>
<p><a href="http://dermabae.tistory.com/172" target="_blank" rel="external">http://dermabae.tistory.com/172</a><br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">tbl &lt;- table(Students=elementary_ord$Students, elementary_ord$Gov)</span><br><span class="line">&gt; head(tbl)</span><br><span class="line">대략 이리나옴<span class="keyword">...</span></span><br><span class="line">Students 가평 강남 강동·송파 강릉 강북 강서 강진 강화 거제 거창 경산 경주 고령 고성 고양 고창 고흥</span><br><span class="line">  short     <span class="number">2</span>   <span class="number">25</span>         <span class="number">20</span>    <span class="number">4</span>   <span class="number">10</span>   <span class="number">21</span>    <span class="number">1</span>    <span class="number">4</span>    <span class="number">8</span>    <span class="number">1</span>    <span class="number">5</span>   <span class="number">13</span>    <span class="number">2</span>    <span class="number">4</span>   <span class="number">15</span>    <span class="number">1</span>    <span class="number">4</span></span><br><span class="line">  medium    <span class="number">6</span>   <span class="number">46</span>         <span class="number">12</span>   <span class="number">22</span>   <span class="number">23</span>   <span class="number">19</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">15</span>   <span class="number">13</span>   <span class="number">22</span>    <span class="number">7</span>   <span class="number">25</span>   <span class="number">30</span>   <span class="number">17</span>   <span class="number">12</span></span><br><span class="line">  long      <span class="number">8</span>   <span class="number">50</span>         <span class="number">32</span>   <span class="number">11</span>   <span class="number">24</span>   <span class="number">27</span>    <span class="number">5</span>    <span class="number">7</span>   <span class="number">17</span>    <span class="number">1</span>   <span class="number">14</span>   <span class="number">12</span>    <span class="number">0</span>    <span class="number">6</span>   <span class="number">37</span>    <span class="number">3</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt; chisq.test(tbl)</span><br><span class="line"></span><br><span class="line">	Pearson<span class="string">'s Chi-squared test</span><br><span class="line"></span><br><span class="line">data:  tbl</span><br><span class="line">X-squared = 735.12, df = 320, p-value &lt; 2.2e-16</span><br><span class="line"></span><br><span class="line">Warning message:</span><br><span class="line">In chisq.test(tbl) : Chi-squared approximation may be incorrect</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>값이 몰 의미하는지는 모르겠다… 0.05보다는 훨 작긴한거 같은데.. 관련있다는 뜻인가?</p>
<p>교실수는?<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; chisq.test(table(Students=elementary_ord$Rooms, elementary_ord$Gov))</span><br><span class="line"></span><br><span class="line">	Pearson<span class="string">'s Chi-squared test</span><br><span class="line"></span><br><span class="line">data:  table(Students = elementary_ord$Rooms, elementary_ord$Gov)</span><br><span class="line">X-squared = 1286, df = 320, p-value &lt; 2.2e-16</span><br><span class="line"></span><br><span class="line">Warning message:</span><br><span class="line">In chisq.test(table(Students = elementary_ord$Rooms, elementary_ord$Gov)) :</span><br><span class="line">  Chi-squared approximation may be incorrect</span></span><br></pre></td></tr></table></figure></p>
<p>선생님 수는?<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; chisq.test(table(Students=elementary_ord$Teachers, elementary_ord$Gov))</span><br><span class="line"></span><br><span class="line">	Pearson<span class="string">'s Chi-squared test</span><br><span class="line"></span><br><span class="line">data:  table(Students = elementary_ord$Teachers, elementary_ord$Gov)</span><br><span class="line">X-squared = 1721.1, df = 320, p-value &lt; 2.2e-16</span><br><span class="line"></span><br><span class="line">Warning message:</span><br><span class="line">In chisq.test(table(Students = elementary_ord$Teachers, elementary_ord$Gov)) :</span><br><span class="line">  Chi-squared approximation may be incorrect</span></span><br></pre></td></tr></table></figure></p>
<p>선생님과 교실수 해볼까?<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; chisq.test(table(elementary_ord$Teachers, elementary_ord$Rooms))</span><br><span class="line"></span><br><span class="line">	Pearson<span class="string">'s Chi-squared test</span><br><span class="line"></span><br><span class="line">data:  table(elementary_ord$Teachers, elementary_ord$Rooms)</span><br><span class="line">X-squared = 6493.6, df = 4, p-value &lt; 2.2e-16</span><br><span class="line"></span><br><span class="line">Warning message:</span><br><span class="line">In chisq.test(table(elementary_ord$Teachers, elementary_ord$Rooms)) :</span><br><span class="line">  Chi-squared approximation may be incorrect</span></span><br></pre></td></tr></table></figure></p>
<p>모 p-value는 모에 쓰는지 모르겠네.. X^2은 확연이 차이나는거 같다…</p>
<p>여기까지 하자.. 나중에 다시 고민해 볼 날이 오겠지…</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/05/03/relationship-between_features/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/14/proximities/" title="Proximities - Similarities and distances" itemprop="url">Proximities - Similarities and distances</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-04-14T11:23:41.000Z" itemprop="datePublished"> Published 2016-04-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Note: R actually only uses dissimilarities/distances.</p>
<p>데이터 읽어온다.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">temp = read.table(<span class="string">"2015.edu.elementary.csv"</span>, sep=<span class="string">','</span>, header = <span class="literal">TRUE</span>)</span><br><span class="line">elementary &lt;- unique(temp[complete.cases(temp),])</span><br><span class="line">elementary$Students = as.numeric(edu.elementary$Students)</span><br><span class="line">elementary.scaled = scale(elementary[<span class="number">13</span>:<span class="number">15</span>])</span><br></pre></td></tr></table></figure></p>
<h1 id="Minkovsky-distances"><a href="#Minkovsky-distances" class="headerlink" title="Minkovsky distances"></a>Minkovsky distances</h1><ul>
<li>euclidean<br>두 벡터의 거리<br>sqrt(sum((x_i - y_i)^2)</li>
<li>maximum<br>거리중 최대 값</li>
<li>manhattan<br>절대 거리(absolute distance)</li>
<li>canberra</li>
<li>binary</li>
<li>minkowski</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; elementary.scaled[<span class="number">1</span>:<span class="number">5</span>,]</span><br><span class="line">        Rooms   Students   Teachers</span><br><span class="line"><span class="number">1</span> -<span class="number">0.90044886</span> <span class="number">0.68287923</span> -<span class="number">0.8310046</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.20658203</span> <span class="number">0.39429860</span>  <span class="number">0.0916926</span></span><br><span class="line"><span class="number">3</span> -<span class="number">0.97425092</span> <span class="number">0.07974572</span> -<span class="number">1.0360485</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.87080057</span> <span class="number">1.07246307</span>  <span class="number">0.8093460</span></span><br><span class="line"><span class="number">5</span> -<span class="number">0.01482415</span> <span class="number">0.07397411</span>  <span class="number">0.1429536</span></span><br><span class="line">&gt; dist(elementary.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"euclidean"</span>)</span><br><span class="line">          <span class="number">1</span>         <span class="number">2</span>         <span class="number">3</span>         <span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">1.4697504</span>                              </span><br><span class="line"><span class="number">3</span> <span class="number">0.6412954</span> <span class="number">1.6628620</span>                    </span><br><span class="line"><span class="number">4</span> <span class="number">2.4453733</span> <span class="number">1.1900083</span> <span class="number">2.7919856</span>          </span><br><span class="line"><span class="number">5</span> <span class="number">1.4504107</span> <span class="number">0.3927546</span> <span class="number">1.5200588</span> <span class="number">1.4917742</span></span><br><span class="line">&gt; dist(elementary.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"manhattan"</span>)</span><br><span class="line">          <span class="number">1</span>         <span class="number">2</span>         <span class="number">3</span>         <span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">2.3183088</span>                              </span><br><span class="line"><span class="number">3</span> <span class="number">0.8819794</span> <span class="number">2.6231269</span>                    </span><br><span class="line"><span class="number">4</span> <span class="number">3.8011839</span> <span class="number">2.0600364</span> <span class="number">4.6831633</span>          </span><br><span class="line"><span class="number">5</span> <span class="number">2.4684880</span> <span class="number">0.5929916</span> <span class="number">2.1442004</span> <span class="number">2.5505061</span></span><br><span class="line">&gt; dist(elementary.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"maximum"</span>)</span><br><span class="line">          <span class="number">1</span>         <span class="number">2</span>         <span class="number">3</span>         <span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">1.1070309</span>                              </span><br><span class="line"><span class="number">3</span> <span class="number">0.6031335</span> <span class="number">1.1808330</span>                    </span><br><span class="line"><span class="number">4</span> <span class="number">1.7712494</span> <span class="number">0.7176534</span> <span class="number">1.8453945</span>          </span><br><span class="line"><span class="number">5</span> <span class="number">0.9739582</span> <span class="number">0.3203245</span> <span class="number">1.1790020</span> <span class="number">0.9984890</span></span><br></pre></td></tr></table></figure>
<h1 id="Distances-for-binary-data-Jaccard-and-Hamming"><a href="#Distances-for-binary-data-Jaccard-and-Hamming" class="headerlink" title="Distances for binary data (Jaccard and Hamming)"></a>Distances for binary data (Jaccard and Hamming)</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; b &lt;- rbind(</span><br><span class="line">+ c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>),</span><br><span class="line">+ c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">+ )</span><br><span class="line">&gt; b</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>] [,<span class="number">6</span>] [,<span class="number">7</span>] [,<span class="number">8</span>] [,<span class="number">9</span>] [,<span class="number">10</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">0</span>    <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">0</span>    <span class="number">0</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">1</span>    <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">&gt; dist(b, method=<span class="string">"binary"</span>)</span><br><span class="line">          <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">0.7142857</span></span><br><span class="line">&gt; dist(b, method=<span class="string">"manhattan"</span>)</span><br><span class="line">  <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<h1 id="Gower’s-distance"><a href="#Gower’s-distance" class="headerlink" title="Gower’s distance"></a>Gower’s distance</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; data &lt;- data.frame(</span><br><span class="line">+ height= c(      <span class="number">160</span>,    <span class="number">185</span>,    <span class="number">170</span>),</span><br><span class="line">+ weight= c(       <span class="number">52</span>,     <span class="number">90</span>,     <span class="number">75</span>),</span><br><span class="line">+ sex=    c( <span class="string">"female"</span>, <span class="string">"male"</span>, <span class="string">"male"</span>)</span><br><span class="line">+ )</span><br><span class="line">&gt; data</span><br><span class="line">  height weight    sex</span><br><span class="line"><span class="number">1</span>    <span class="number">160</span>     <span class="number">52</span> female</span><br><span class="line"><span class="number">2</span>    <span class="number">185</span>     <span class="number">90</span>   male</span><br><span class="line"><span class="number">3</span>    <span class="number">170</span>     <span class="number">75</span>   male</span><br><span class="line">&gt; dist(data, method=<span class="string">"Gower"</span>)</span><br><span class="line">          <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">2</span> <span class="number">1.0000000</span>          </span><br><span class="line"><span class="number">3</span> <span class="number">0.6684211</span> <span class="number">0.3315789</span></span><br></pre></td></tr></table></figure>
<h1 id="Additional-proximity-measures-available-in-package-proxy"><a href="#Additional-proximity-measures-available-in-package-proxy" class="headerlink" title="Additional proximity measures available in package proxy"></a>Additional proximity measures available in package proxy</h1>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/14/proximities/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/13/discretize-features/" title="Discretize Features" itemprop="url">Discretize Features</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-04-13T10:28:23.000Z" itemprop="datePublished"> Published 2016-04-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Discretrize-features"><a href="#Discretrize-features" class="headerlink" title="Discretrize features"></a>Discretrize features</h1><p>hist 함수는 히스토그램을 보여준다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist(edu.elementary$Students)</span><br></pre></td></tr></table></figure>
<img src="/2016/04/13/discretize-features/discretize_01.png" alt="hist(edu.elementary$Students)" title="hist(edu.elementary$Students)">
<p>cut, ifelse, within 함수의 사용법</p>
<blockquote>
<p><a href="http://rfriend.tistory.com/38" target="_blank" rel="external">http://rfriend.tistory.com/38</a></p>
</blockquote>
<p>cut 함수는 연속형 데이터(continuous data)를 범주형 데이터(categorical data)로 변형해 준다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; cut_result = cut(edu.elementary$Students, breaks=<span class="number">3</span>)</span><br><span class="line">&gt; summary(cut_result)</span><br><span class="line">  (-<span class="number">0.351</span>,<span class="number">451</span>]      (<span class="number">451</span>,<span class="number">902</span>] (<span class="number">902</span>,<span class="number">1.35e+03</span>] </span><br><span class="line">          <span class="number">1222</span>           <span class="number">2764</span>           <span class="number">2267</span></span><br></pre></td></tr></table></figure>
<img src="/2016/04/13/discretize-features/discretize_02.png" alt="plot(cut_result)" title="plot(cut_result)">
<p>discretize 함수는 연속형 데이터에서 범주형 데이터를 변환하는데 있어 다음과 같은 방식을 지원한다.</p>
<ul>
<li>interval: 단순히 주어진 단위 기준으로 등분</li>
<li>frequency: 데이터 빈도 기준으로 등분</li>
<li>cluster: k means 방법으로 등분</li>
<li>fixed: 사용자가 직접 categories 에 벡터를 대입하여 등분</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(arules)</span><br><span class="line">hist(edu.elementary$Students)</span><br><span class="line">abline(v=discretize(edu.elementary$Students, method=<span class="string">"interval"</span>,categories=<span class="number">3</span>,onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"blue"</span>)</span><br><span class="line">abline(v=discretize(edu.elementary$Students, method=<span class="string">"frequency"</span>,categories=<span class="number">3</span>,onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"red"</span>)</span><br><span class="line">abline(v=discretize(edu.elementary$Students, method=<span class="string">"cluster"</span>,categories=<span class="number">3</span>,onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"yellow"</span>)</span><br></pre></td></tr></table></figure>
<img src="/2016/04/13/discretize-features/discretize_03.png" alt="파랑:inteval, 빨강:빈도, 노랑:kmean" title="파랑:inteval, 빨강:빈도, 노랑:kmean">
<h1 id="Standardize-data-Z-score"><a href="#Standardize-data-Z-score" class="headerlink" title="Standardize data (Z-score)"></a>Standardize data (Z-score)</h1><p>표준화…<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; head(edu.elementary[<span class="number">13</span>:<span class="number">15</span>])</span><br><span class="line">  Rooms Students Teachers</span><br><span class="line"><span class="number">1</span>     <span class="number">7</span>      <span class="number">982</span>       <span class="number">13</span></span><br><span class="line"><span class="number">2</span>    <span class="number">22</span>      <span class="number">882</span>       <span class="number">31</span></span><br><span class="line"><span class="number">3</span>     <span class="number">6</span>      <span class="number">773</span>        <span class="number">9</span></span><br><span class="line"><span class="number">4</span>    <span class="number">31</span>     <span class="number">1117</span>       <span class="number">45</span></span><br><span class="line"><span class="number">5</span>    <span class="number">19</span>      <span class="number">771</span>       <span class="number">32</span></span><br><span class="line"><span class="number">6</span>     <span class="number">6</span>     <span class="number">1070</span>       <span class="number">10</span></span><br><span class="line">&gt; head(scale(edu.elementary[<span class="number">13</span>:<span class="number">15</span>]))</span><br><span class="line">        Rooms   Students   Teachers</span><br><span class="line"><span class="number">1</span> -<span class="number">0.90044886</span> <span class="number">0.68287923</span> -<span class="number">0.8310046</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.20658203</span> <span class="number">0.39429860</span>  <span class="number">0.0916926</span></span><br><span class="line"><span class="number">3</span> -<span class="number">0.97425092</span> <span class="number">0.07974572</span> -<span class="number">1.0360485</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.87080057</span> <span class="number">1.07246307</span>  <span class="number">0.8093460</span></span><br><span class="line"><span class="number">5</span> -<span class="number">0.01482415</span> <span class="number">0.07397411</span>  <span class="number">0.1429536</span></span><br><span class="line"><span class="number">6</span> -<span class="number">0.97425092</span> <span class="number">0.93683018</span> -<span class="number">0.9847875</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/13/discretize-features/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/05/data-mining-ex-feature-2/" title="Feature 21" itemprop="url">Feature 21</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-04-05T11:03:41.000Z" itemprop="datePublished"> Published 2016-04-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Dimensionality-reduciton-Principal-Components-Analysis-PCA"><a href="#Dimensionality-reduciton-Principal-Components-Analysis-PCA" class="headerlink" title="Dimensionality reduciton (Principal Components Analysis - PCA)"></a>Dimensionality reduciton (Principal Components Analysis - PCA)</h1><p><a href="http://darkpgmr.tistory.com/110" target="_blank" rel="external">http://darkpgmr.tistory.com/110</a><br><a href="http://rfriend.tistory.com/61" target="_blank" rel="external">http://rfriend.tistory.com/61</a></p>
<p>먼저 데이터를 로딩하고…<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">temp = read.table(<span class="string">"2015.edu.elementary.csv"</span>, sep=<span class="string">','</span>, header = <span class="literal">TRUE</span>)</span><br><span class="line">edu.elementary &lt;- unique(temp[complete.cases(temp),])</span><br><span class="line">edu.elementary$Students = as.numeric(edu.elementary$Students)</span><br></pre></td></tr></table></figure></p>
<p>학생과 교실수 선생님수를 뽑아본다.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; data_for_plot = data.frame(edu.elementary$Students, edu.elementary$Rooms, edu.elementary$Teachers)</span><br><span class="line">&gt; colnames(data_for_plot) &lt;- c(<span class="string">"Students"</span>, <span class="string">"Rooms"</span>, <span class="string">"Teachers"</span>)</span><br><span class="line">&gt; head(data_for_plot)</span><br><span class="line">  Students Rooms Teachers</span><br><span class="line"><span class="number">1</span>      <span class="number">982</span>     <span class="number">7</span>       <span class="number">13</span></span><br><span class="line"><span class="number">2</span>      <span class="number">882</span>    <span class="number">22</span>       <span class="number">31</span></span><br><span class="line"><span class="number">3</span>      <span class="number">773</span>     <span class="number">6</span>        <span class="number">9</span></span><br><span class="line"><span class="number">4</span>     <span class="number">1117</span>    <span class="number">31</span>       <span class="number">45</span></span><br><span class="line"><span class="number">5</span>      <span class="number">771</span>    <span class="number">19</span>       <span class="number">32</span></span><br><span class="line"><span class="number">6</span>     <span class="number">1070</span>     <span class="number">6</span>       <span class="number">10</span></span><br></pre></td></tr></table></figure></p>
<img src="/2016/04/05/data-mining-ex-feature-2/feature_02_01.png" alt="산점도" title="산점도">
<p>다음과 같이 바로 PCA를 해보면 Students의 값이 크게 나오고 아마도 단위가 크기 때문인 것 같다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; pc_edu = prcomp(as.matrix(edu.elementary[,<span class="number">13</span>:<span class="number">15</span>]))</span><br><span class="line">&gt; pc_edu</span><br><span class="line">Standard deviations:</span><br><span class="line">[<span class="number">1</span>] <span class="number">346.526739</span>  <span class="number">23.649026</span>   <span class="number">1.647658</span></span><br><span class="line"></span><br><span class="line">Rotation:</span><br><span class="line">                 PC1          PC2           PC3</span><br><span class="line">Rooms    <span class="number">0.002333427</span> -<span class="number">0.569054269</span> -<span class="number">0.8222966585</span></span><br><span class="line">Students <span class="number">0.999990932</span>  <span class="number">0.004257316</span> -<span class="number">0.0001085232</span></span><br><span class="line">Teachers <span class="number">0.003562532</span> -<span class="number">0.822288948</span>  <span class="number">0.5690590423</span></span><br><span class="line">&gt; summary(pc_edu)</span><br><span class="line">Importance of components:</span><br><span class="line">                            PC1      PC2     PC3</span><br><span class="line">Standard deviation     <span class="number">346.5267</span> <span class="number">23.64903</span> <span class="number">1.64766</span></span><br><span class="line">Proportion of Variance   <span class="number">0.9953</span>  <span class="number">0.00464</span> <span class="number">0.00002</span></span><br><span class="line">Cumulative Proportion    <span class="number">0.9953</span>  <span class="number">0.99998</span> <span class="number">1.00000</span></span><br></pre></td></tr></table></figure>
<p>PCA를 위해서는 먼저 표준화(standardization)을 해야 하나보다.</p>
<blockquote>
<p><a href="http://rfriend.tistory.com/61" target="_blank" rel="external">http://rfriend.tistory.com/61</a></p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; data_for_plot = data.frame(edu.elementary$Students, edu.elementary$Rooms, edu.elementary$Teachers)</span><br><span class="line">&gt; data_for_plot = scale(data_for_plot)</span><br><span class="line">&gt; colnames(data_for_plot) &lt;- c(<span class="string">"Students"</span>, <span class="string">"Rooms"</span>, <span class="string">"Teachers"</span>)</span><br><span class="line">&gt; head(data_for_plot)</span><br><span class="line">       Students       Rooms   Teachers</span><br><span class="line">[<span class="number">1</span>,] <span class="number">0.68287923</span> -<span class="number">0.90044886</span> -<span class="number">0.8310046</span></span><br><span class="line">[<span class="number">2</span>,] <span class="number">0.39429860</span>  <span class="number">0.20658203</span>  <span class="number">0.0916926</span></span><br><span class="line">[<span class="number">3</span>,] <span class="number">0.07974572</span> -<span class="number">0.97425092</span> -<span class="number">1.0360485</span></span><br><span class="line">[<span class="number">4</span>,] <span class="number">1.07246307</span>  <span class="number">0.87080057</span>  <span class="number">0.8093460</span></span><br><span class="line">[<span class="number">5</span>,] <span class="number">0.07397411</span> -<span class="number">0.01482415</span>  <span class="number">0.1429536</span></span><br><span class="line">[<span class="number">6</span>,] <span class="number">0.93683018</span> -<span class="number">0.97425092</span> -<span class="number">0.9847875</span></span><br></pre></td></tr></table></figure>
<img src="/2016/04/05/data-mining-ex-feature-2/feature_02_02.png" alt="표준화" title="표준화">
<p>다음과 같이 나온다.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; pc_edu_std = prcomp(data_for_plot)</span><br><span class="line">&gt; pc_edu_std</span><br><span class="line">Standard deviations:</span><br><span class="line">[<span class="number">1</span>] <span class="number">1.4129902</span> <span class="number">0.9962390</span> <span class="number">0.1047217</span></span><br><span class="line"></span><br><span class="line">Rotation:</span><br><span class="line">                PC1         PC2         PC3</span><br><span class="line">Students <span class="number">0.08651085</span>  <span class="number">0.99624755</span> -<span class="number">0.00258743</span></span><br><span class="line">Rooms    <span class="number">0.70437723</span> -<span class="number">0.06300206</span> -<span class="number">0.70702437</span></span><br><span class="line">Teachers <span class="number">0.70453431</span> -<span class="number">0.05934276</span>  <span class="number">0.70718445</span></span><br><span class="line">&gt; summary(pc_edu_std)</span><br><span class="line">Importance of components:</span><br><span class="line">                          PC1    PC2     PC3</span><br><span class="line">Standard deviation     <span class="number">1.4130</span> <span class="number">0.9962</span> <span class="number">0.10472</span></span><br><span class="line">Proportion of Variance <span class="number">0.6655</span> <span class="number">0.3308</span> <span class="number">0.00366</span></span><br><span class="line">Cumulative Proportion  <span class="number">0.6655</span> <span class="number">0.9963</span> <span class="number">1.00000</span></span><br></pre></td></tr></table></figure></p>
<img src="/2016/04/05/data-mining-ex-feature-2/feature_02_03.png" alt="plot(pc_edu_std)" title="plot(pc_edu_std)">
<img src="/2016/04/05/data-mining-ex-feature-2/feature_02_04.png" alt="plot(pc_edu_std$x)" title="plot(pc_edu_std$x)">
<img src="/2016/04/05/data-mining-ex-feature-2/feature_02_06.png" alt="biplot(pc_edu_std, col = c('grey', 'red'))" title="biplot(pc_edu_std, col = c('grey', 'red'))">
<p>교실수(Rooms)와 선생님수(Teachers)가 주성분1(PC1)에 기여하고, 학생수(Students)는 주성분2(PC2)에 기여한다.<br>PC2 까지의 누적기여율(0.9963)을 확인한다</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/05/data-mining-ex-feature-2/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/04/data-mining-ex-feature/" title="Feature" itemprop="url">Feature</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-04-04T10:55:13.000Z" itemprop="datePublished"> Published 2016-04-04</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>대략 다음과 같은 느낌의 그림을 뽑아보자.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(scatterplot3d)</span><br><span class="line">scatterplot3d(iris[,<span class="number">1</span>:<span class="number">3</span>], color=as.integer(iris$Species))</span><br></pre></td></tr></table></figure></p>
<img src="/2016/04/04/data-mining-ex-feature/feature_01.png" alt="Iris 데이터로 그린 것" title="Iris 데이터로 그린 것">
<p>늘 그렇듯 먼저 데이터 로드하고..<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">temp = read.table(<span class="string">"2015.edu.elementary.csv"</span>, sep=<span class="string">','</span>, header = <span class="literal">TRUE</span>)</span><br><span class="line">edu.elementary &lt;- unique(temp[complete.cases(temp),])</span><br><span class="line">edu.elementary$Students = as.numeric(edu.elementary$Students)</span><br></pre></td></tr></table></figure></p>
<p>일단 먼저 다음과 같이 시도해 보았지만<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cbind(edu.elementary$시도, edu.elementary$Students, edu.elementary$Rooms, edu.elementary$Teachers)</span><br></pre></td></tr></table></figure></p>
<p>시도가 숫자로 치환된다. cbind는 matrix를 반환하기 때문에 스트링 정보인 시도 정보가 숫자로 바뀌어 버린다.<br>따라서, data.frame을 사용하고 컬럼의 이름도 바꾸어보자<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data_for_plot = data.frame(edu.elementary$Students, edu.elementary$Rooms, edu.elementary$Teachers, edu.elementary$시도)</span><br><span class="line">colnames(data_for_plot) &lt;- c(<span class="string">"Students"</span>, <span class="string">"Rooms"</span>, <span class="string">"Teachers"</span>, <span class="string">"Province"</span>)</span><br><span class="line">head(data_for_plot)</span><br><span class="line">scatterplot3d(data_for_plot[,<span class="number">1</span>:<span class="number">3</span>], color=as.integer(data_for_plot$Province))</span><br></pre></td></tr></table></figure></p>
<img src="/2016/04/04/data-mining-ex-feature/feature_02.png" alt="시도별" title="시도별">
<p>무언가 명확히 보지 않아 시만 뽑아보자<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data_by_city = data_for_plot[data_for_plot$Province %<span class="keyword">in</span>% c(<span class="string">"서울"</span>, <span class="string">"인천"</span>, <span class="string">"대전"</span>, <span class="string">"대구"</span>, <span class="string">"세종"</span>, <span class="string">"광주"</span>, <span class="string">"부산"</span>), ]</span><br><span class="line">scatterplot3d(data_by_city[,<span class="number">1</span>:<span class="number">3</span>], color=as.integer(data_by_city$Province))</span><br></pre></td></tr></table></figure></p>
<img src="/2016/04/04/data-mining-ex-feature/feature_03.png" alt="시별" title="시별">
<p>그래도 잘 보이진 않지만, 무언가 패턴이 3개로 나누어진다는 것을 알 수 있다</p>
<ol>
<li>선생님의 숫자가 60이상이고, 학생의 숫자가 700 이하이면서 학생 숫자에 따라 가파르게 학급수가 증가하는 패턴</li>
<li>학생의 숫자에따라 학급의 수는 늘어나지만 선생님의 수는 그만큼 늘어나지 않는 패턴</li>
<li>다음은 선생님 수는 바닥이고 교실수도 바닥이고 학생만 많은… 그런 곳…</li>
</ol>
<p>아마도 학생과 선생님의 표시만으로 패턴이 보일거 같긴하다</p>
<img src="/2016/04/04/data-mining-ex-feature/feature_04.png" alt="시별" title="시별">
<p>3차원으로보면 보다 극명하게 보인다.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(rgl)</span><br><span class="line">plot3d(data_by_city[,<span class="number">1</span>:<span class="number">3</span>], col=as.integer(data_by_city$Province), size=<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<img src="/2016/04/04/data-mining-ex-feature/feature_05.png" alt="시별" title="시별">
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(plotly)</span><br><span class="line">plot_ly(data_by_city, x = Students, y= Rooms, z = Teachers, color = Province, type=<span class="string">"scatter3d"</span>, mode=<span class="string">"markers"</span>)</span><br></pre></td></tr></table></figure>
<p>Custering 해본다</p>
<p>누구나 1번 타입의 학교를 원하겠지…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line">     Students Rooms Teachers Province               Name cluster</span><br><span class="line">2721      128    44       64     광주       본촌초등학교       1</span><br><span class="line">2738      341    42       63     광주       고실초등학교       1</span><br><span class="line">2747      256    42       58     광주       봉산초등학교       1</span><br><span class="line">2750      251    46       63     광주       산정초등학교       1</span><br><span class="line">2754      223    42       56     광주       선창초등학교       1</span><br><span class="line">2761      308    50       80     광주       수문초등학교       1</span><br><span class="line">2762      446    52       78     광주       수완초등학교       1</span><br><span class="line">2764      351    47       65     광주       신창초등학교       1</span><br><span class="line">2774      380    54       74     광주       장덕초등학교       1</span><br><span class="line">2778      304    47       71     광주       큰별초등학교       1</span><br><span class="line">2817      197    48       75     광주       만호초등학교       1</span><br><span class="line">2823      176    47       69     광주       신암초등학교       1</span><br><span class="line">2859       80    41       62     대구   대구본리초등학교       1</span><br><span class="line">2873      109    42       66     대구   대구신월초등학교       1</span><br><span class="line">2880      401    53       86     대구   대구월서초등학교       1</span><br><span class="line">2882      303    42       60     대구   대구월암초등학교       1</span><br><span class="line">2884      124    43       66     대구   대구유천초등학교       1</span><br><span class="line">2896      329    37       50     대구   대구한샘초등학교       1</span><br><span class="line">2918       69    38       61     대구   대구죽곡초등학교       1</span><br><span class="line">2925      296    47       65     대구   대구강동초등학교       1</span><br><span class="line">2934       51    34       51     대구   대구봉무초등학교       1</span><br><span class="line">2946       88    37       58     대구   대구율원초등학교       1</span><br><span class="line">2957      409    53       78     대구   대구경동초등학교       1</span><br><span class="line">2961      170    39       53     대구   대구동도초등학교       1</span><br><span class="line">2964       41    48       70     대구   대구동성초등학교       1</span><br><span class="line">2966      146    34       58     대구   대구동일초등학교       1</span><br><span class="line">2972       46    43       65     대구   대구매호초등학교       1</span><br><span class="line">2977      253    42       64     대구   대구사월초등학교       1</span><br><span class="line">2979      418    52       74     대구   대구성동초등학교       1</span><br><span class="line">2983      166    46       67     대구   대구용지초등학교       1</span><br><span class="line">2985      313    45       68     대구   대구중앙초등학교       1</span><br><span class="line">3001      207    48       67     대구   대구강북초등학교       1</span><br><span class="line">3004      129    40       56     대구   대구관문초등학교       1</span><br><span class="line">3009      136    49       74     대구   대구달산초등학교       1</span><br><span class="line">3015      369    55       77     대구   대구동평초등학교       1</span><br><span class="line">3029      383    51       79     대구   대구칠성초등학교       1</span><br><span class="line">3035      138    52       75     대구   대구학남초등학교       1</span><br><span class="line">3060      156    46       71     대전   대전매봉초등학교       1</span><br><span class="line">3066      133    44       67     대전   대전송촌초등학교       1</span><br><span class="line">3078       49    37       54     대전   대전가오초등학교       1</span><br><span class="line">3088       57    42       59     대전   대전용전초등학교       1</span><br><span class="line">3089       74    35       55     대전 대전은어송초등학교       1</span><br><span class="line">3091       73    42       57     대전   대전천동초등학교       1</span><br><span class="line">3100      277    46       70     대전   대전글꽃초등학교       1</span><br><span class="line">3110      219    45       70     대전 대전버드내초등학교       1</span><br><span class="line">3136      248    48       66     대전   대전내동초등학교       1</span><br><span class="line">3137       99    44       69     대전 대전느리울초등학교       1</span><br><span class="line">3142      163    45       64     대전   대전둔원초등학교       1</span><br><span class="line">3152      160    44       62     대전 대전샘머리초등학교       1</span><br><span class="line">3154       75    41       56     대전   대전서원초등학교       1</span><br><span class="line">3156      217    44       60     대전   대전성룡초등학교       1</span><br><span class="line">3159      200    45       64     대전   대전신계초등학교       1</span><br><span class="line">3164       55    42       61     대전   대전탄방초등학교       1</span><br><span class="line">3165      417    49       71     대전       한밭초등학교       1</span><br><span class="line">3174       79    41       60     대전   대전노은초등학교       1</span><br><span class="line">3178      329    48       69     대전   대전반석초등학교       1</span><br><span class="line">3181      170    44       62     대전   대전상대초등학교       1</span><br><span class="line">3193      219    50       69     대전   대전전민초등학교       1</span><br><span class="line">3205      204    50       75     부산       대연초등학교       1</span><br><span class="line">3219      174    44       57     부산       용문초등학교       1</span><br><span class="line">3235      107    49       74     부산       가야초등학교       1</span><br><span class="line">3259      287    50       70     부산       연지초등학교       1</span><br><span class="line">3277       60    40       56     부산       두실초등학교       1</span><br><span class="line">3294      274    37       48     부산       명륜초등학교       1</span><br><span class="line">3305      137    37       53     부산       예원초등학교       1</span><br><span class="line">3312      309    41       56     부산       남문초등학교       1</span><br><span class="line">3336      444    47       66     부산       명호초등학교       1</span><br><span class="line">3364       94    46       65     부산       용수초등학교       1</span><br><span class="line">3395      172    45       60     부산       낙동초등학교       1</span><br><span class="line">3400       63    40       53     부산     몰운대초등학교       1</span><br><span class="line">3404       43    43       60     부산       사하초등학교       1</span><br><span class="line">3462      357    44       65     부산       정관초등학교       1</span><br><span class="line">3463      266    37       43     부산       정원초등학교       1</span><br><span class="line">3476       55    45       59     부산       수영초등학교       1</span><br><span class="line">3486      148    46       66     부산       부흥초등학교       1</span><br><span class="line">3489      419    43       64     부산       센텀초등학교       1</span><br><span class="line">3501       64    44       58     부산       장산초등학교       1</span><br><span class="line">3516      130    44       70     서울   서울대곡초등학교       1</span><br><span class="line">3517      466    52       74     서울   서울대도초등학교       1</span><br><span class="line">3518       71    32       56     서울   서울대모초등학교       1</span><br><span class="line">3525      410    44       62     서울   서울도성초등학교       1</span><br><span class="line">3533      467    51       81     서울   서울언북초등학교       1</span><br><span class="line">3534      260    47       69     서울   서울언주초등학교       1</span><br><span class="line">3547      404    50       87     서울   서울반원초등학교       1</span><br><span class="line">3549       32    40       67     서울   서울방배초등학교       1</span><br><span class="line">3552      329    47       70     서울   서울서래초등학교       1</span><br><span class="line">3553       80    39       57     서울   서울서원초등학교       1</span><br><span class="line">3554      241    44       67     서울   서울서이초등학교       1</span><br><span class="line">3557      367    45       60     서울   서울신동초등학교       1</span><br><span class="line">3561       49    40       58     서울   서울우면초등학교       1</span><br><span class="line">3564      361    42       65     서울   서울원명초등학교       1</span><br><span class="line">3565      264    38       60     서울   서울원촌초등학교       1</span><br><span class="line">3567      468    54       82     서울   서울잠원초등학교       1</span><br><span class="line">3570      214    47       70     서울   서울강명초등학교       1</span><br><span class="line">3571      428    55       75     서울   서울강일초등학교       1</span><br><span class="line">3575       42    43       73     서울   서울길동초등학교       1</span><br><span class="line">3578      188    41       56     서울   서울명덕초등학교       1</span><br><span class="line">3580      196    48       71     서울   서울명일초등학교       1</span><br><span class="line">3584      140    46       74     서울   서울선사초등학교       1</span><br><span class="line">3585      149    46       74     서울   서울성내초등학교       1</span><br><span class="line">3586      106    46       68     서울   서울성일초등학교       1</span><br><span class="line">3597       90    42       68     서울   서울가주초등학교       1</span><br><span class="line">3600      271    51       79     서울   서울거원초등학교       1</span><br><span class="line">3602      152    46       72     서울   서울마천초등학교       1</span><br><span class="line">3604       67    45       71     서울   서울문정초등학교       1</span><br><span class="line">3605      144    44       69     서울   서울문현초등학교       1</span><br><span class="line">3609       54    44       72     서울   서울삼전초등학교       1</span><br><span class="line">3610      208    48       77     서울   서울석촌초등학교       1</span><br><span class="line">3612       36    43       60     서울   서울송례초등학교       1</span><br><span class="line">3622      423    50       80     서울   서울잠신초등학교       1</span><br><span class="line">3623      144    40       59     서울   서울잠실초등학교       1</span><br><span class="line">3624      452    57       78     서울   서울잠일초등학교       1</span><br><span class="line">3627       72    44       79     서울   서울중대초등학교       1</span><br><span class="line">3637       47    41       57     서울   서울공항초등학교       1</span><br><span class="line">3638      405    50       73     서울 서울내발산초등학교       1</span><br><span class="line">3646      231    47       70     서울   서울발산초등학교       1</span><br><span class="line">3651      238    50       71     서울   서울송화초등학교       1</span><br><span class="line">3652      331    49       70     서울   서울수명초등학교       1</span><br><span class="line">3655      493    81      112     서울   서울신정초등학교       1</span><br><span class="line">3658       64    37       54     서울   서울염경초등학교       1</span><br><span class="line">3659       73    39       61     서울   서울염동초등학교       1</span><br><span class="line">3662      258    52       82     서울   서울월정초등학교       1</span><br><span class="line">3666       65    43       66     서울   서울화곡초등학교       1</span><br><span class="line">3670      253    49       74     서울   서울강서초등학교       1</span><br><span class="line">3673       89    36       52     서울   서울경인초등학교       1</span><br><span class="line">3676      239    48       71     서울   서울목동초등학교       1</span><br><span class="line">3677      399    49       70     서울   서울목운초등학교       1</span><br><span class="line">3684      171    45       67     서울   서울신서초등학교       1</span><br><span class="line">3686       34    39       54     서울   서울신은초등학교       1</span><br><span class="line">3693      252    50       75     서울   서울영도초등학교       1</span><br><span class="line">3694      255    43       64     서울   서울월촌초등학교       1</span><br><span class="line">3697      282    52       70     서울   서울정목초등학교       1</span><br><span class="line">3700      325    53       79     서울   서울개봉초등학교       1</span><br><span class="line">3707      282    52       81     서울   서울구일초등학교       1</span><br><span class="line">3708      183    40       68     서울   서울덕의초등학교       1</span><br><span class="line">3714      177    44       70     서울 서울신도림초등학교       1</span><br><span class="line">3718       88    43       62     서울 서울오류남초등학교       1</span><br><span class="line">3721      135    44       68     서울   서울온수초등학교       1</span><br><span class="line">3722       63    45       63     서울   서울천왕초등학교       1</span><br><span class="line">3725       71    37       56     서울   서울금동초등학교       1</span><br><span class="line">3742      190    46       69     서울   서울당서초등학교       1</span><br><span class="line">3750      201    42       66     서울   서울문래초등학교       1</span><br><span class="line">3754       76    43       68     서울 서울여의도초등학교       1</span><br><span class="line">3758      127    40       62     서울   서울영문초등학교       1</span><br><span class="line">3759      101    45       76     서울   서울영신초등학교       1</span><br><span class="line">3771       92    43       62     서울   서울안평초등학교       1</span><br><span class="line">3774      167    39       58     서울   서울장평초등학교       1</span><br><span class="line">3789      164    49       78     서울   서울면동초등학교       1</span><br><span class="line">3802       33    41       62     서울   서울원묵초등학교       1</span><br><span class="line">3803      216    52       77     서울   서울중곡초등학교       1</span><br><span class="line">3806      365    53       80     서울   서울중화초등학교       1</span><br><span class="line">3809      470    59       95     서울   서울구암초등학교       1</span><br><span class="line">3811       40    40       60     서울   서울난우초등학교       1</span><br><span class="line">3812       91    43       66     서울   서울난향초등학교       1</span><br><span class="line">3817      194    45       69     서울   서울봉현초등학교       1</span><br><span class="line">3826      260    51       77     서울   서울은천초등학교       1</span><br><span class="line">3827      333    54       85     서울   서울인헌초등학교       1</span><br><span class="line">3834      235    47       68     서울   서울대림초등학교       1</span><br><span class="line">3837      454    52       78     서울 서울보라매초등학교       1</span><br><span class="line">3839       53    36       55     서울   서울삼일초등학교       1</span><br><span class="line">3840       94    44       69     서울   서울상도초등학교       1</span><br><span class="line">3842      312    46       76     서울   서울신길초등학교       1</span><br><span class="line">3844      220    50       79     서울 서울신상도초등학교       1</span><br><span class="line">3845       78    38       64     서울   서울영본초등학교       1</span><br><span class="line">3861      154    43       64     서울   서울불암초등학교       1</span><br><span class="line">3865      144    45       68     서울   서울상수초등학교       1</span><br><span class="line">3881      411    57       80     서울   서울을지초등학교       1</span><br><span class="line">3882       62    39       55     서울   서울중계초등학교       1</span><br><span class="line">3884      438    60       91     서울   서울중평초등학교       1</span><br><span class="line">3887       82    38       56     서울   서울태랑초등학교       1</span><br><span class="line">3888      185    46       67     서울   서울태릉초등학교       1</span><br><span class="line">3889       97    43       60     서울   서울한천초등학교       1</span><br><span class="line">3895       98    44       62     서울   서울누원초등학교       1</span><br><span class="line">3898       36    43       62     서울   서울백운초등학교       1</span><br><span class="line">3907       81    42       59     서울   서울자운초등학교       1</span><br><span class="line">3908      104    43       63     서울   서울창경초등학교       1</span><br><span class="line">3909       32    42       68     서울   서울창도초등학교       1</span><br><span class="line">3911      108    45       64     서울   서울창림초등학교       1</span><br><span class="line">3913       61    41       58     서울   서울창일초등학교       1</span><br><span class="line">3914      117    43       63     서울   서울초당초등학교       1</span><br><span class="line">3917      258    49       82     서울   서울동교초등학교       1</span><br><span class="line">3922      109    45       67     서울   서울서강초등학교       1</span><br><span class="line">3928      163    42       67     서울   서울신북초등학교       1</span><br><span class="line">3931      269    47       69     서울   서울염리초등학교       1</span><br><span class="line">3935      181    44       67     서울   서울하늘초등학교       1</span><br><span class="line">3944      385    61       89     서울 서울북가좌초등학교       1</span><br><span class="line">3947      400    63      104     서울   서울연가초등학교       1</span><br><span class="line">3948      160    48       66     서울   서울연희초등학교       1</span><br><span class="line">3953       56    44       77     서울   서울홍제초등학교       1</span><br><span class="line">3956      364    56       86     서울   서울갈현초등학교       1</span><br><span class="line">3957      135    46       77     서울   서울구산초등학교       1</span><br><span class="line">3959       75    43       64     서울   서울녹번초등학교       1</span><br><span class="line">3961       93    45       68     서울   서울대조초등학교       1</span><br><span class="line">3968      233    45       63     서울   서울신도초등학교       1</span><br><span class="line">3970      450    68      108     서울   서울역촌초등학교       1</span><br><span class="line">3975      354    50       73     서울   서울은명초등학교       1</span><br><span class="line">3976      299    47       67     서울   서울은빛초등학교       1</span><br><span class="line">3981       50    40       59     서울   서울진관초등학교       1</span><br><span class="line">3988      349    50       78     서울   서울광남초등학교       1</span><br><span class="line">3994      285    53       80     서울   서울동자초등학교       1</span><br><span class="line">3999      398    53       80     서울   서울양진초등학교       1</span><br><span class="line">4001      275    54       92     서울   서울용마초등학교       1</span><br><span class="line">4009      163    52       84     서울   서울경동초등학교       1</span><br><span class="line">4027       85    36       54     서울   서울행현초등학교       1</span><br><span class="line">4031      333    46       67     서울 서울삼각산초등학교       1</span><br><span class="line">4035      104    43       74     서울   서울수송초등학교       1</span><br><span class="line">4038      310    56       87     서울   서울우이초등학교       1</span><br><span class="line">4046       97    40       65     서울   서울개운초등학교       1</span><br><span class="line">4047      229    46       69     서울   서울길원초등학교       1</span><br><span class="line">4048      128    42       64     서울   서울길음초등학교       1</span><br><span class="line">4049      339    58       91     서울   서울돈암초등학교       1</span><br><span class="line">4051      300    48       75     서울   서울미아초등학교       1</span><br><span class="line">4057      301    55       88     서울   서울숭덕초등학교       1</span><br><span class="line">4059      362    49       85     서울   서울숭인초등학교       1</span><br><span class="line">4066      165    44       63     서울   서울정덕초등학교       1</span><br><span class="line">4067       39    43       65     서울   서울정릉초등학교       1</span><br><span class="line">4077      448    62       93     서울 서울신용산초등학교       1</span><br><span class="line">4127      261    53       75     세종       아름초등학교       1</span><br><span class="line">4292      317    44       62     인천   인천경원초등학교       1</span><br><span class="line">4297       43    43       66     인천   인천문학초등학교       1</span><br><span class="line">4301      136    46       71     인천   인천숭의초등학교       1</span><br><span class="line">4306      129    45       60     인천 인천용현남초등학교       1</span><br><span class="line">4307      225    50       72     인천   인천용현초등학교       1</span><br><span class="line">4312      120    45       62     인천   인천학산초등학교       1</span><br><span class="line">4337       92    42       53     인천   인천삼목초등학교       1</span><br><span class="line">4343      131    42       59     인천   인천영종초등학교       1</span><br><span class="line">4352      225    43       62     인천   인천고잔초등학교       1</span><br><span class="line">4361      152    43       62     인천   인천동방초등학교       1</span><br><span class="line">4363       67    43       64     인천 인천만수북초등학교       1</span><br><span class="line">4369      268    44       65     인천   인천서창초등학교       1</span><br><span class="line">4370       60    43       59     인천   인천석정초등학교       1</span><br><span class="line">4371      119    45       66     인천   인천석천초등학교       1</span><br><span class="line">4377      226    39       56     인천   인천원동초등학교       1</span><br><span class="line">4379      240    48       67     인천   인천인동초등학교       1</span><br><span class="line">4383      348    46       68     인천   인천정각초등학교       1</span><br><span class="line">4386      113    43       59     인천   인천한빛초등학교       1</span><br><span class="line">4390      173    44       67     인천 인천먼우금초등학교       1</span><br><span class="line">4391      276    45       61     인천   인천명선초등학교       1</span><br><span class="line">4400      379    50       71     인천   인천신정초등학교       1</span><br><span class="line">4401       76    40       56     인천   인천연성초등학교       1</span><br><span class="line">4404      150    47       65     인천   인천옥련초등학교       1</span><br><span class="line">4415      121    43       60     인천   인천굴포초등학교       1</span><br><span class="line">4426      264    52       73     인천   인천부곡초등학교       1</span><br><span class="line">4432      108    46       69     인천 인천부평남초등학교       1</span><br><span class="line">4444      125    44       61     인천   인천영선초등학교       1</span><br><span class="line">4459      295    44       61     인천   인천당산초등학교       1</span><br><span class="line">4463       65    42       62     인천 인천부현동초등학교       1</span><br><span class="line">4475      226    49       70     인천   인천화전초등학교       1</span><br><span class="line">4485       83    41       59     인천 인천간재울초등학교       1</span><br><span class="line">4495      441    60       84     인천   인천당하초등학교       1</span><br><span class="line">4497      160    43       63     인천   인천마전초등학교       1</span><br><span class="line">4499      107    42       62     인천   인천발산초등학교       1</span><br><span class="line">4518      371    58       85     인천   인천청라초등학교       1</span><br><span class="line">4521      135    43       58     인천   인천초은초등학교       1</span><br><span class="line">4522      352    54       80     인천   인천해원초등학교       1</span><br></pre></td></tr></table></figure>
<p>용인이닷..</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">     Students Rooms Teachers Province             Name cluster</span><br><span class="line">1228       36    38       53     용인     갈곡초등학교       2</span><br><span class="line">1238      327    46       67     용인     나산초등학교       2</span><br><span class="line">1246      153    40       59     용인     독정초등학교       2</span><br><span class="line">1247      179    38       50     용인     동막초등학교       2</span><br><span class="line">1248      435    54       76     용인     동백초등학교       2</span><br><span class="line">1264       74    38       52     용인     상하초등학교       2</span><br><span class="line">1266       37    37       49     용인     새빛초등학교       2</span><br><span class="line">1271      272    43       60     용인     석성초등학교       2</span><br><span class="line">1272      241    42       52     용인     석현초등학교       2</span><br><span class="line">1277      169    40       55     용인     손곡초등학교       2</span><br><span class="line">1289       68    36       51     용인     역북초등학교       2</span><br><span class="line">1294       89    40       56     용인 용인둔전초등학교       2</span><br><span class="line">1295      328    44       60     용인 용인백현초등학교       2</span><br><span class="line">1299      156    39       57     용인 용인신촌초등학교       2</span><br><span class="line">1310       65    37       55     용인     정평초등학교       2</span><br><span class="line">1318      342    49       64     용인     청덕초등학교       2</span><br><span class="line">1320       32    38       51     용인     토월초등학교       2</span><br><span class="line">1322       78    39       55     용인     풍덕초등학교       2</span><br><span class="line">1323      185    36       53     용인     풍천초등학교       2</span><br><span class="line">1328       75    37       54     용인     흥덕초등학교       2</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/04/data-mining-ex-feature/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/04/01/data-mining-ex-sampling/" title="샘플링" itemprop="url">샘플링</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-04-01T11:18:08.000Z" itemprop="datePublished"> Published 2016-04-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>R에서 원본데이터가 있을 경우, sample이 왜 필요한지는 모르겠지만…</p>
<h1 id="Random-sampling"><a href="#Random-sampling" class="headerlink" title="Random sampling"></a>Random sampling</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; length(edu.elementary$Students)</span><br><span class="line">[<span class="number">1</span>] <span class="number">6253</span></span><br></pre></td></tr></table></figure>
<p>총 6253 개의 데이터에서 10개 정도만 뽑아 보면, 히스토그램의 분포가 전혀 비슷하게 나오지 않는다.<br>적정 sampling 개수에 대한 수학적 근거가 어디에 있겠지만, 아직은 그 단계가 아니니 대략 10%인 600을 뽑아 모집단의 평균과 샘플의 평균의 차를 내어 본다.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary_all = summary(edu.elementary$Students)</span><br><span class="line">&gt; samples = sample(edu.elementary$Students, <span class="number">600</span>)</span><br><span class="line">&gt; mean(edu.elementary$Students) - mean(samples)</span><br><span class="line">[<span class="number">1</span>] -<span class="number">9.877109</span></span><br><span class="line">&gt; samples = sample(edu.elementary$Students, <span class="number">600</span>)</span><br><span class="line">&gt; mean(edu.elementary$Students) - mean(samples)</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.6495575</span></span><br><span class="line">&gt; samples = sample(edu.elementary$Students, <span class="number">600</span>)</span><br><span class="line">&gt; mean(edu.elementary$Students) - mean(samples)</span><br><span class="line">[<span class="number">1</span>] <span class="number">17.85456</span></span><br><span class="line">&gt; samples = sample(edu.elementary$Students, <span class="number">600</span>)</span><br><span class="line">&gt; mean(edu.elementary$Students) - mean(samples)</span><br><span class="line">[<span class="number">1</span>] -<span class="number">16.42378</span></span><br></pre></td></tr></table></figure>
<p>모집단의 평균이 745.3662 임으로 최대 (18/745) * 100 = 2.416 정도의 오차가 관측되었다.<br>물론 많이 하면, 또 나름의 분포가 그려질 거다…</p>
<h1 id="Stratified-sampling"><a href="#Stratified-sampling" class="headerlink" title="Stratified sampling"></a>Stratified sampling</h1><p>교육지원청이 몇 개인지 쉽게 알 수 있는 방법을 몰라, 배운 aggregate 를 사용해 본다.<br>배보다 배꼽이 큰거 같지만…<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">byCenter = aggregate(cbind(Students,Teachers,Rooms)~교육지원청, data=edu.elementary, FUN=mean)</span><br><span class="line">byCenter</span><br><span class="line">length(byCenter$교육지원청)</span><br></pre></td></tr></table></figure></p>
<p>수행하면, 161로 나온다</p>
<p>그리하야 어렵개 교육지원청 별로 5개씩 샘플을 뽑아 봤다.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; s = strata(edu.elementary, stratanames = <span class="string">"교육지원청"</span>, size=rep(<span class="number">5</span>, <span class="number">161</span>), method=<span class="string">"srswor"</span>)</span><br><span class="line">&gt; head(s)</span><br><span class="line">   교육지원청 ID_unit      Prob Stratum</span><br><span class="line"><span class="number">12</span>       강릉      <span class="number">12</span> <span class="number">0.1351351</span>       <span class="number">1</span></span><br><span class="line"><span class="number">18</span>       강릉      <span class="number">18</span> <span class="number">0.1351351</span>       <span class="number">1</span></span><br><span class="line"><span class="number">20</span>       강릉      <span class="number">20</span> <span class="number">0.1351351</span>       <span class="number">1</span></span><br><span class="line"><span class="number">25</span>       강릉      <span class="number">25</span> <span class="number">0.1351351</span>       <span class="number">1</span></span><br><span class="line"><span class="number">29</span>       강릉      <span class="number">29</span> <span class="number">0.1351351</span>       <span class="number">1</span></span><br><span class="line"><span class="number">40</span>       고성      <span class="number">40</span> <span class="number">0.1428571</span>       <span class="number">2</span></span><br><span class="line">&gt; plot(s2, col=edu.elementary$교육지원청)</span><br></pre></td></tr></table></figure></p>
<p>몬지 모르겠지만 그려진다…</p>
<img src="/2016/04/01/data-mining-ex-sampling/sample.png" alt="교육지원청 별 뽑은거" title="교육지원청 별 뽑은거">

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/04/01/data-mining-ex-sampling/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/03/29/data-mining-ex/" title="교육 정보 분석, 모아보기" itemprop="url">교육 정보 분석, 모아보기</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-03-29T11:05:18.000Z" itemprop="datePublished"> Published 2016-03-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="RStudio-영문-locale-설정"><a href="#RStudio-영문-locale-설정" class="headerlink" title="RStudio 영문 locale 설정"></a>RStudio 영문 locale 설정</h1><p>에러가 한국어로 나오다 보니, 두번 검색해야 함… -,.-<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi /etc/R/Renviron.site <span class="comment"># LANGUAGE=en 추가</span></span><br></pre></td></tr></table></figure></p>
<p>일단 데이터 가져오고</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">temp = read.table(<span class="string">"2015.edu.elementary.csv"</span>, sep=<span class="string">','</span>, header = <span class="literal">TRUE</span>)</span><br><span class="line">edu.elementary &lt;- unique(temp[complete.cases(temp),])</span><br><span class="line">edu.elementary$Students = as.numeric(edu.elementary$Students)</span><br></pre></td></tr></table></figure>
<h1 id="Aggregate-시도"><a href="#Aggregate-시도" class="headerlink" title="Aggregate 시도"></a>Aggregate 시도</h1><p>지역별로 묶어보자<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; byProvince = aggregate(cbind(Students,Teachers)~Province, data=edu.elementary, FUN=mean)</span><br><span class="line">&gt; head(byProvince)</span><br><span class="line">  Province Students Teachers</span><br><span class="line"><span class="number">1</span>   가평군 <span class="number">865.5625</span> <span class="number">14.50000</span></span><br><span class="line"><span class="number">2</span>   강남구 <span class="number">780.8485</span> <span class="number">47.15152</span></span><br><span class="line"><span class="number">3</span>   강동구 <span class="number">750.0385</span> <span class="number">54.76923</span></span><br><span class="line"><span class="number">4</span>   강릉시 <span class="number">769.8378</span> <span class="number">20.67568</span></span><br><span class="line"><span class="number">5</span>   강북구 <span class="number">896.2143</span> <span class="number">56.78571</span></span><br><span class="line"><span class="number">6</span>   강서구 <span class="number">720.7818</span> <span class="number">38.50909</span></span><br></pre></td></tr></table></figure></p>
<p>갑자기 선생님당 학생수가 궁금해 졌는데…<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; byProvince = aggregate(cbind(Students,Teachers,Students/Teachers)~Province, data=edu.elementary, FUN=mean)</span><br><span class="line">&gt; head(byProvince)</span><br><span class="line">  Province Students Teachers       V3</span><br><span class="line"><span class="number">1</span>   가평군 <span class="number">865.5625</span> <span class="number">14.50000</span> <span class="number">80.38243</span></span><br><span class="line"><span class="number">2</span>   강남구 <span class="number">780.8485</span> <span class="number">47.15152</span> <span class="number">17.81257</span></span><br><span class="line"><span class="number">3</span>   강동구 <span class="number">750.0385</span> <span class="number">54.76923</span> <span class="number">15.29937</span></span><br><span class="line"><span class="number">4</span>   강릉시 <span class="number">769.8378</span> <span class="number">20.67568</span> <span class="number">63.86895</span></span><br><span class="line"><span class="number">5</span>   강북구 <span class="number">896.2143</span> <span class="number">56.78571</span> <span class="number">17.25231</span></span><br><span class="line"><span class="number">6</span>   강서구 <span class="number">720.7818</span> <span class="number">38.50909</span>      <span class="literal">Inf</span></span><br></pre></td></tr></table></figure></p>
<p>헐퀴… 가평군은 모냐.. 선생님 중노동인 듯…<br>강남구를 제친 강동구는 또 모냐… 선생님도 금수저인가…<br>이 둘은 가나다 순이라 항상 비교 당하겠네..ㅋㅋ<br>Inf는 모냐.. 무한인가? 0으로 나누지도 않았는데…<br>cbind도 ~도 적응안되는데…<br><a href="http://rfriend.tistory.com/51" target="_blank" rel="external">http://rfriend.tistory.com/51</a><br>잘 설명되있다.. 후후 기본이 약하다…<br><a href="https://drive.google.com/file/d/0B_ss3O1d3bGxeXhuRXdjRWpiSzg/view" target="_blank" rel="external">https://drive.google.com/file/d/0B_ss3O1d3bGxeXhuRXdjRWpiSzg/view</a><br>아름다운 책을 공유해 주셨다…</p>
<p>물결 (tilde) 설명이다..<br><a href="http://stackoverflow.com/questions/14976331/use-of-tilde-in-r-programming-language" target="_blank" rel="external">http://stackoverflow.com/questions/14976331/use-of-tilde-in-r-programming-language</a><br><a href="http://stackoverflow.com/questions/8055508/the-tilde-operator-in-r" target="_blank" rel="external">http://stackoverflow.com/questions/8055508/the-tilde-operator-in-r</a><br><a href="https://www.google.co.kr/search?client=ubuntu&amp;channel=fs&amp;q=r+tilde&amp;ie=utf-8&amp;oe=utf-8&amp;gfe_rd=cr&amp;ei=Xmb6VoejHab98weizoHgCQ" target="_blank" rel="external">https://www.google.co.kr/search?client=ubuntu&amp;channel=fs&amp;q=r+tilde&amp;ie=utf-8&amp;oe=utf-8&amp;gfe_rd=cr&amp;ei=Xmb6VoejHab98weizoHgCQ</a><br>이해 못함…</p>
<p>Int는 벡터 연산 때문에 발생한 것 같다.<br>그럼 강서구에 선생님이 없는 학교가 있다는 걸까?<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; province_filtered &lt;- filter(edu.elementary, Province==<span class="string">'강서구'</span>, Teachers==<span class="number">0</span>)</span><br><span class="line">&gt; province_filtered</span><br><span class="line">  연도     학제 시도 교육지원청 Province                     학교명 본분교 학교상태 설립구분</span><br><span class="line"><span class="number">1</span> <span class="number">2015</span> 초등학교 부산       북부   강서구               세산초등학교   본교 폐(원)교     공립</span><br><span class="line"><span class="number">2</span> <span class="number">2015</span> 초등학교 서울       강서   강서구 서울공진초등학교공진분교장 분교장 폐(원)교     공립</span><br><span class="line">  우편번호                                                  주소                 홈페이지 Rooms</span><br><span class="line"><span class="number">1</span>  <span class="number">618</span>-<span class="number">220</span>     부산광역시 강서구 세산길 <span class="number">89</span> (미음동.세산초등학교)   http://www.sesan.es.kr     <span class="number">0</span></span><br><span class="line"><span class="number">2</span>  <span class="number">157</span>-<span class="number">807</span> 서울특별시 강서구 양천로<span class="number">55</span>길 <span class="number">22</span> (가양동.공진초등학교) http://www.kongjin.es.kr     <span class="number">0</span></span><br><span class="line">  Students Teachers</span><br><span class="line"><span class="number">1</span>       <span class="number">27</span>        <span class="number">0</span></span><br><span class="line"><span class="number">2</span>       <span class="number">27</span>        <span class="number">0</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>헐 공진초, 세산초가 그러네…</p>
<blockquote>
<p>인접한 지역에 서울탑산초등학교가 개교하자 공진초등학교에는 임대아파트 학생들만 배정되게 되었다. 임대아파트는 저소득 주민들이 장기간 거주하는 특성으로 인해 단지째 고령화가 진행되면서 학생수가 급감하였고, 결국 마곡도시개발사업지구로 본교를 이전하게 되었다. 본래는 이전과 동시에 기존 학생들을 전학하려고 했으나, 주민들의 요청에 따라 2014학년도까지 구 교사를 분교장으로 유지하였다<br><a href="https://ko.wikipedia.org/wiki/%EC%84%9C%EC%9A%B8%EA%B3%B5%EC%A7%84%EC%B4%88%EB%93%B1%ED%95%99%EA%B5%90" target="_blank" rel="external">https://ko.wikipedia.org/wiki/%EC%84%9C%EC%9A%B8%EA%B3%B5%EC%A7%84%EC%B4%88%EB%93%B1%ED%95%99%EA%B5%90</a></p>
</blockquote>
<p>니미럴…<br><a href="https://www.youtube.com/watch?v=jJjZ75T5COI" target="_blank" rel="external">https://www.youtube.com/watch?v=jJjZ75T5COI</a></p>
<p>모든 것의 마지막은 먹먹함을 자아낸다…</p>
<p>결국 Inf를 없애기 위해서 다음과 같이 작성한다.<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; byProvince = aggregate(cbind(Students,Teachers)~Province, data=edu.elementary, FUN=mean)</span><br><span class="line">&gt; SByT &lt;- byProvince$Students / byProvince$Teachers</span><br><span class="line">&gt; byProvince = cbind(byProvince, SByT)</span><br><span class="line">&gt; head(byProvince)</span><br><span class="line">  Province Students Teachers     SByT</span><br><span class="line"><span class="number">1</span>   가평군 <span class="number">865.5625</span> <span class="number">14.50000</span> <span class="number">59.69397</span></span><br><span class="line"><span class="number">2</span>   강남구 <span class="number">780.8485</span> <span class="number">47.15152</span> <span class="number">16.56041</span></span><br><span class="line"><span class="number">3</span>   강동구 <span class="number">750.0385</span> <span class="number">54.76923</span> <span class="number">13.69452</span></span><br><span class="line"><span class="number">4</span>   강릉시 <span class="number">769.8378</span> <span class="number">20.67568</span> <span class="number">37.23399</span></span><br><span class="line"><span class="number">5</span>   강북구 <span class="number">896.2143</span> <span class="number">56.78571</span> <span class="number">15.78239</span></span><br><span class="line"><span class="number">6</span>   강서구 <span class="number">720.7818</span> <span class="number">38.50909</span> <span class="number">18.71719</span></span><br></pre></td></tr></table></figure></p>
<p>좋은데는?<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; OrderBySByT = byProvince[order(byProvince$SByT),]</span><br><span class="line">&gt; head(OrderBySByT)</span><br><span class="line">    Province Students Teachers      SByT</span><br><span class="line"><span class="number">183</span>   충주시 <span class="number">193.9231</span> <span class="number">22.07692</span>  <span class="number">8.783972</span></span><br><span class="line"><span class="number">93</span>    서초구 <span class="number">695.9167</span> <span class="number">53.70833</span> <span class="number">12.957331</span></span><br><span class="line"><span class="number">59</span>    도봉구 <span class="number">631.3478</span> <span class="number">48.43478</span> <span class="number">13.035009</span></span><br><span class="line"><span class="number">64</span>    동작구 <span class="number">702.9524</span> <span class="number">53.09524</span> <span class="number">13.239462</span></span><br><span class="line"><span class="number">100</span>   송파구 <span class="number">741.6842</span> <span class="number">54.86842</span> <span class="number">13.517506</span></span><br><span class="line"><span class="number">23</span>    관악구 <span class="number">754.9091</span> <span class="number">55.77273</span> <span class="number">13.535452</span></span><br></pre></td></tr></table></figure></p>
<p>충주로 이사갈까?</p>
<p>옹진군 빡셀듯..<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; OrderBySByT = byProvince[order(-byProvince$SByT),]</span><br><span class="line">&gt; head(OrderBySByT)</span><br><span class="line">    Province Students  Teachers     SByT</span><br><span class="line"><span class="number">138</span>   옹진군 <span class="number">522.6154</span>  <span class="number">6.000000</span> <span class="number">87.10256</span></span><br><span class="line"><span class="number">162</span>   정선군 <span class="number">866.3158</span> <span class="number">11.105263</span> <span class="number">78.00948</span></span><br><span class="line"><span class="number">107</span>   신안군 <span class="number">497.3429</span>  <span class="number">6.457143</span> <span class="number">77.02212</span></span><br><span class="line"><span class="number">170</span>   진도군 <span class="number">766.8235</span> <span class="number">10.235294</span> <span class="number">74.91954</span></span><br><span class="line"><span class="number">75</span>    봉화군 <span class="number">629.2000</span>  <span class="number">8.600000</span> <span class="number">73.16279</span></span><br><span class="line"><span class="number">130</span>   영양군 <span class="number">741.1250</span> <span class="number">10.375000</span> <span class="number">71.43373</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/03/29/data-mining-ex/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/03/28/data-mining-ex/" title="교육 정보 분석, 데이터 확인" itemprop="url">교육 정보 분석, 데이터 확인</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-03-28T11:37:59.000Z" itemprop="datePublished"> Published 2016-03-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="https://www.data.go.kr/subMain.jsp?param=REFUQUAzMDM4ODY2#/L2NvbW0vY29tbW9uU2VhcmNoL29yZ2luRGF0YVNldCRAXjAxMm0xJEBecHVibGljRGF0YVBrPTMwNTkxOTYkQF5vcmdJbmRleD1EQVRBJEBedmlld0ZsYWc9LTEkQF5icm1DZD1PQzAwMDEkQF5ncmlkRmxhZz1ZJEBebWFpbkZsYWc9dHJ1ZSRAXnNraXBSb3dzPTAkQF5tYXhSb3dzPTEw" target="_blank" rel="external">자료 출처</a></p>
<h1 id="파일-읽기"><a href="#파일-읽기" class="headerlink" title="파일 읽기"></a>파일 읽기</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">temp = read.table(<span class="string">"2015.edu.elementary.csv"</span>, sep=<span class="string">','</span>, header = <span class="literal">TRUE</span>)</span><br><span class="line">summary(temp)</span><br></pre></td></tr></table></figure>
<h1 id="데이터-중복을-확인해-볼까"><a href="#데이터-중복을-확인해-볼까" class="headerlink" title="데이터 중복을 확인해 볼까?"></a>데이터 중복을 확인해 볼까?</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">i &lt;- duplicated(temp)</span><br><span class="line">which(i)</span><br><span class="line">edu.elementary[i,]</span><br><span class="line">edu.elementary &lt;- unique(temp[complete.cases(temp),])</span><br><span class="line">summary(edu.elementary)</span><br></pre></td></tr></table></figure>
<h1 id="학생수-histogram-및-summary"><a href="#학생수-histogram-및-summary" class="headerlink" title="학생수 histogram 및 summary"></a>학생수 histogram 및 summary</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary(students)</span><br><span class="line">   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line">    <span class="number">1.0</span>   <span class="number">523.0</span>   <span class="number">773.0</span>   <span class="number">745.4</span>  <span class="number">1015.0</span>  <span class="number">1352.0</span> </span><br><span class="line">&gt; hist(students)</span><br></pre></td></tr></table></figure>
<img src="/2016/03/28/data-mining-ex/students_hist.png" alt="학생수 히스토그램" title="학생수 히스토그램">
<h1 id="학급수-histogram-및-summary"><a href="#학급수-histogram-및-summary" class="headerlink" title="학급수 histogram 및 summary"></a>학급수 histogram 및 summary</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary(class_rooms)</span><br><span class="line">   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line">    <span class="number">0.0</span>     <span class="number">7.0</span>    <span class="number">17.0</span>    <span class="number">19.2</span>    <span class="number">30.0</span>    <span class="number">81.0</span> </span><br><span class="line">&gt; hist(class_rooms)</span><br></pre></td></tr></table></figure>
<img src="/2016/03/28/data-mining-ex/class_rooms_hist.png" alt="학급수 히스토그램" title="학급수 히스토그램">
<h1 id="선생님수-histogram-및-summary"><a href="#선생님수-histogram-및-summary" class="headerlink" title="선생님수 histogram 및 summary"></a>선생님수 histogram 및 summary</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary(teachers)</span><br><span class="line">   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line">   <span class="number">0.00</span>   <span class="number">11.00</span>   <span class="number">26.00</span>   <span class="number">29.21</span>   <span class="number">44.00</span>  <span class="number">112.00</span> </span><br><span class="line">&gt; hist(teachers)</span><br></pre></td></tr></table></figure>
<img src="/2016/03/28/data-mining-ex/teachers_hist.png" alt="선생님수 히스토그램" title="선생님수 히스토그램">
<p>초등학교니까 학급수와 선생님수의 분포가 비슷한데 학생수와는 무관한듯 보이네…</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/03/28/data-mining-ex/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/03/16/data-mining/" title="데이터 준비 정리" itemprop="url">데이터 준비 정리</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-03-16T11:23:37.000Z" itemprop="datePublished"> Published 2016-03-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="http://michael.hahsler.net/SMU/EMIS7332/" target="_blank" rel="external">http://michael.hahsler.net/SMU/EMIS7332/</a><br><a href="http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html" target="_blank" rel="external">http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html</a></p>
<h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data(iris)</span><br></pre></td></tr></table></figure>
<p>데이터를 읽어옴</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head(iris)</span><br></pre></td></tr></table></figure>
<p>데이터 앞부분만 보여줌<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str(iris)</span><br></pre></td></tr></table></figure></p>
<p>구조 표시</p>
<h1 id="Data-Quality"><a href="#Data-Quality" class="headerlink" title="Data Quality"></a>Data Quality</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(iris, col=iris$Species)</span><br></pre></td></tr></table></figure>
<p>노이즈나 outlier 확인</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(iris)</span><br></pre></td></tr></table></figure>
<p>숫자일 경우 Min.(최소), 1st Qu.(25% 가 이 값 밑), 3th Qu. (75%가 이 값 밑), median(중간값), mean(평균)<br>문자열일 경우 개수</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">i &lt;- duplicated(iris)</span><br><span class="line">which(i)</span><br><span class="line">iris[i,]</span><br></pre></td></tr></table></figure>
<p>어느 것이 중복 되었는가?</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clean.data &lt;- unique(iris[complete.cases(iris),])</span><br><span class="line">summary(clean.data)</span><br></pre></td></tr></table></figure>
<p>complete.cases (missing value 가 없는가?) unique(중복 제외)</p>
<h1 id="Aggregation"><a href="#Aggregation" class="headerlink" title="Aggregation"></a>Aggregation</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aggregate(. ~ Species, data = iris, FUN = mean)</span><br></pre></td></tr></table></figure>
<p>종끼리 묶은 후, 평균 값</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aggregate(. ~ Species, data = iris, FUN = median)</span><br></pre></td></tr></table></figure>
<p>종끼리 묶은 후, 중간 값</p>
<h1 id="Sampling"><a href="#Sampling" class="headerlink" title="Sampling"></a>Sampling</h1><h2 id="Random-sampling"><a href="#Random-sampling" class="headerlink" title="Random sampling"></a>Random sampling</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id &lt;- sample(<span class="number">1</span>:nrow(iris), <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<p>1부터 nrow (row 개수) 수 사이에서 20 개 unordered 무작위 검출</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s &lt;- iris[id,]</span><br><span class="line">plot(s, col=s$Species)</span><br></pre></td></tr></table></figure>
<p>이렇게 뽑은 인덱스로 데이터를 뽑아서 그리기</p>
<h2 id="Stratified-sampling-층화-추출법"><a href="#Stratified-sampling-층화-추출법" class="headerlink" title="Stratified sampling (층화 추출법)"></a>Stratified sampling (층화 추출법)</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(sampling)</span><br><span class="line">id2 &lt;- strata(iris, stratanames=<span class="string">"Species"</span>, size=c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>), method=<span class="string">"srswor"</span>)</span><br><span class="line">id2</span><br></pre></td></tr></table></figure>
<p>stratanames (층화할 변수들의 vector) size (층화 크기)<br>method</p>
<ul>
<li>simple random sampling without replacement (srswor)</li>
<li>simple random sampling with replacement (srswr)</li>
<li>Poisson sampling (poisson)</li>
<li>systematic sampling (systematic)</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s2 &lt;- iris[id2$ID_unit,]</span><br><span class="line">plot(s2, col=s2$Species)</span><br></pre></td></tr></table></figure>
<p>뽑은 ID로 그림 그리기</p>
<h1 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h1><h2 id="Dimensionality-reduciton-Principal-Components-Analysis-PCA-주성분-분석"><a href="#Dimensionality-reduciton-Principal-Components-Analysis-PCA-주성분-분석" class="headerlink" title="Dimensionality reduciton (Principal Components Analysis - PCA, 주성분 분석)"></a>Dimensionality reduciton (Principal Components Analysis - PCA, 주성분 분석)</h2><p>다양한 관점으로 바라보기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(scatterplot3d)</span><br><span class="line">scatterplot3d(iris[,<span class="number">1</span>:<span class="number">3</span>], color=as.integer(iris$Species))</span><br></pre></td></tr></table></figure></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(rgl)</span><br><span class="line">plot3d(as.matrix(iris[,<span class="number">1</span>:<span class="number">3</span>]), col=as.integer(iris$Species), size=<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(plotly)</span><br><span class="line">plot_ly(iris, x = Sepal.Length, y= Petal.Length, z = Sepal.Width, size = Petal.Width, color = Species, type=<span class="string">"scatter3d"</span>, mode=<span class="string">"markers"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pc &lt;- prcomp(as.matrix(iris[,<span class="number">1</span>:<span class="number">4</span>]))</span><br><span class="line">plot(pc)</span><br><span class="line">plot(pc$x, col=iris$Species) <span class="comment"># plot the first 2 principal components</span></span><br><span class="line">biplot(pc, col = c(<span class="string">"grey"</span>, <span class="string">"red"</span>))</span><br></pre></td></tr></table></figure>
<h2 id="Feature-selection"><a href="#Feature-selection" class="headerlink" title="Feature selection"></a>Feature selection</h2><h2 id="Discretrize-features"><a href="#Discretrize-features" class="headerlink" title="Discretrize features"></a>Discretrize features</h2><p>단일 변수 그리기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(iris$Petal.Width, <span class="number">1</span>:<span class="number">150</span>, ylab=<span class="string">"index"</span>)</span><br></pre></td></tr></table></figure></p>
<p>히스토그램<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist(iris$Petal.Width)</span><br></pre></td></tr></table></figure></p>
<p>3 등분으로 나누기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut(iris$Petal.Width, breaks=<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<p>3 categories 로 나누기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(arules)</span><br><span class="line">plot(discretize(iris$Petal.Width, method=<span class="string">"interval"</span>, categories=<span class="number">3</span>))</span><br><span class="line">plot(discretize(iris$Petal.Width, method=<span class="string">"frequency"</span>, categories=<span class="number">3</span>))</span><br><span class="line">plot(discretize(iris$Petal.Width, method=<span class="string">"cluster"</span>, categories=<span class="number">3</span>))</span><br></pre></td></tr></table></figure></p>
<p>method</p>
<ul>
<li>interval: equal interval width</li>
<li>frequency: equal frequency</li>
<li>cluster: k-means clustering</li>
</ul>
<p>히스토그램과 discretize 결과값 비교<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hist(iris$Petal.Width, main=<span class="string">"Discretization: interval"</span>, sub=<span class="string">"Blue lines are boundaries"</span>)</span><br><span class="line">abline(v=discretize(iris$Petal.Width, method=<span class="string">"interval"</span>, categories=<span class="number">3</span>, onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"blue"</span>)</span><br><span class="line">abline(v=discretize(iris$Petal.Width, method=<span class="string">"cluster"</span>, categories=<span class="number">3</span>, onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"red"</span>)</span><br><span class="line">abline(v=discretize(iris$Petal.Width, method=<span class="string">"frequency"</span>, categories=<span class="number">3</span>, onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"green"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Standardize-data-Z-score"><a href="#Standardize-data-Z-score" class="headerlink" title="Standardize data (Z-score)"></a>Standardize data (Z-score)</h2><blockquote>
<p>참조 전반적인 내용<br><a href="http://www.dataminingblog.com/standardization-vs-normalization/" target="_blank" rel="external">http://www.dataminingblog.com/standardization-vs-normalization/</a></p>
</blockquote>
<p>Normalization: 모든 값을 0, 1 사이로 scaling 한다.<br><img src="/2016/03/16/data-mining/fig1.png" alt="Normalization" title="Normalization"><br>outlier 에 취약</p>
<p>Standardization, z-transformation, 정규화: 평균이 0이 되도록 함, 데이터에서 평균을 뺀 후, 표준편차로 나누기<br><img src="/2016/03/16/data-mining/fig2.png" alt="Standardization" title="Standardization"></p>
<blockquote>
<p>정규화 잘 설명 됨<br><a href="http://adnoctum.tistory.com/184" target="_blank" rel="external">http://adnoctum.tistory.com/184</a></p>
</blockquote>
<p>정규화, 평균을 확인해 보면 0<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iris.scaled &lt;- scale(iris[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line">head(iris.scaled)</span><br><span class="line">summary(iris.scaled)</span><br></pre></td></tr></table></figure></p>
<h1 id="Proximities-Similarities-and-distances"><a href="#Proximities-Similarities-and-distances" class="headerlink" title="Proximities: Similarities and distances"></a>Proximities: Similarities and distances</h1><h2 id="Minkovsky-distances"><a href="#Minkovsky-distances" class="headerlink" title="Minkovsky distances"></a>Minkovsky distances</h2><p>정규화된 값의 앞 5개 뽑기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iris.scaled[<span class="number">1</span>:<span class="number">5</span>,]</span><br></pre></td></tr></table></figure></p>
<p>거리<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dist(iris.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"euclidean"</span>)</span><br><span class="line">dist(iris.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"manhattan"</span>)</span><br><span class="line">dist(iris.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"maximum"</span>)</span><br></pre></td></tr></table></figure></p>
<p>method<br>the distance measure to be used. This must be one of “euclidean”, “maximum”, “manhattan”, “canberra”, “binary” or “minkowski”. Any unambiguous substring can be given.</p>
<ul>
<li>euclidean: Usual distance between the two vectors (2 norm aka L_2), sqrt(sum((x_i - y_i)^2)).</li>
<li>maximum: Maximum distance between two components of x and y (supremum norm)</li>
<li>manhattan: Absolute distance between the two vectors (1 norm aka L_1).</li>
<li>canberra: sum(|x_i - y_i| / |x_i + y_i|). Terms with zero numerator and denominator are omitted from the sum and treated as if the values were missing.<br>This is intended for non-negative values (e.g., counts): taking the absolute value of the denominator is a 1998 R modification to avoid negative distances.</li>
<li>binary: (aka asymmetric binary): The vectors are regarded as binary bits, so non-zero elements are ‘on’ and zero elements are ‘off’. The distance is the proportion of bits in which only one is on amongst those in which at least one is on.</li>
</ul>
<p>minkowski:<br>The p norm, the pth root of the sum of the pth powers of the differences of the components.</p>
<h2 id="Distances-for-binary-data-Jaccard-and-Hamming"><a href="#Distances-for-binary-data-Jaccard-and-Hamming" class="headerlink" title="Distances for binary data (Jaccard and Hamming)"></a>Distances for binary data (Jaccard and Hamming)</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b &lt;- rbind(</span><br><span class="line">  c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>),</span><br><span class="line">  c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  )</span><br><span class="line">b</span><br><span class="line">dist(b, method=<span class="string">"binary"</span>)</span><br><span class="line">dist(b, method=<span class="string">"manhattan"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Gower’s-distance"><a href="#Gower’s-distance" class="headerlink" title="Gower’s distance"></a>Gower’s distance</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- data.frame(</span><br><span class="line">  height= c(      <span class="number">160</span>,    <span class="number">185</span>,    <span class="number">170</span>),</span><br><span class="line">  weight= c(       <span class="number">52</span>,     <span class="number">90</span>,     <span class="number">75</span>),</span><br><span class="line">  sex=    c( <span class="string">"female"</span>, <span class="string">"male"</span>, <span class="string">"male"</span>)</span><br><span class="line">)</span><br><span class="line">data</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(proxy)</span><br><span class="line">dist(data, method=<span class="string">"Gower"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Additional-proximity-measures-available-in-package-proxy"><a href="#Additional-proximity-measures-available-in-package-proxy" class="headerlink" title="Additional proximity measures available in package proxy"></a>Additional proximity measures available in package proxy</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(proxy)</span><br><span class="line">names(pr_DB$get_entries())</span><br></pre></td></tr></table></figure>
<h1 id="Relationship-between-features"><a href="#Relationship-between-features" class="headerlink" title="Relationship between features"></a>Relationship between features</h1><h2 id="Correlation-for-ratio-interval-scaled-features"><a href="#Correlation-for-ratio-interval-scaled-features" class="headerlink" title="Correlation (for ratio/interval scaled features)"></a>Correlation (for ratio/interval scaled features)</h2><img src="/2016/03/16/data-mining/Correlation_examples2.svg" alt="Correlation Example" title="Correlation Example">
<img src="/2016/03/16/data-mining/correlation_01.png" alt="Correlation" title="Correlation">
<img src="/2016/03/16/data-mining/correlation_02.png" alt="Covariance" title="Covariance">    
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(iris[,<span class="number">1</span>:<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>Correlation between objects (transpose matrix(전치행렬) first)<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cc &lt;- cor(t(iris[,<span class="number">1</span>:<span class="number">4</span>]))</span><br><span class="line">dim(cc)</span><br></pre></td></tr></table></figure></p>
<p>상관관계 표시<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"seriation"</span>) <span class="comment"># for pimage</span></span><br><span class="line">pimage(cc, main = <span class="string">"Correlation between objects"</span>)</span><br></pre></td></tr></table></figure></p>
<p>Convert correlations into a dissimilarities<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d &lt;- as.dist(<span class="number">1</span>-abs(cc))</span><br><span class="line">pimage(d, main = <span class="string">"Dissimilaries between objects"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Rank-correlation-for-ordinal-features"><a href="#Rank-correlation-for-ordinal-features" class="headerlink" title="Rank correlation (for ordinal features)"></a>Rank correlation (for ordinal features)</h2><p>각 컬럼 값(sepal, petal)을 3분위 함<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">iris_ord &lt;- data.frame(</span><br><span class="line">  cut(iris[,<span class="number">1</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  cut(iris[,<span class="number">2</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  cut(iris[,<span class="number">3</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  cut(iris[,<span class="number">4</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  iris[,<span class="number">5</span>])</span><br><span class="line">colnames(iris_ord) &lt;- colnames(iris)</span><br><span class="line">summary(iris_ord)</span><br><span class="line">head(iris_ord$Sepal.Length)</span><br></pre></td></tr></table></figure></p>
<p>Kendall’s tau rank correlation coefficient<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(sapply(iris_ord[,<span class="number">1</span>:<span class="number">4</span>], xtfrm), method=<span class="string">"kendall"</span>)</span><br></pre></td></tr></table></figure></p>
<p>Spearman’s rho<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(sapply(iris_ord[,<span class="number">1</span>:<span class="number">4</span>], xtfrm), method=<span class="string">"spearman"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Relationship-between-nominal-and-ordinal-features"><a href="#Relationship-between-nominal-and-ordinal-features" class="headerlink" title="Relationship between nominal and ordinal features"></a>Relationship between nominal and ordinal features</h2><blockquote>
<p>nominal scale, 명목 척도<br>부여된 수치의 의미가 분류의 의미를 가질 뿐,가감승제 연산을 사용할 수 없다.<br>ex) 주민등록번호, 우편번호, 운동선수의 등번호, 지역구분(서울 1, 경기 2, 등) 등</p>
<p>ordinal scale, 서열 척도<br>서열척도(ordinal scale)는 측정 대상의 분류뿐만 아니라 측정대상을 크기에 따라 순서적으로 배열할 수 있는 측정방법<br>그러나 서열척도는 ‘크기의 정도’를 알 수 없다. 즉 ‘어느 정도 잘했는가’혹은 ‘얼마나 더 선호하는가’와 같은 정보를 제공하지는 않는다. 따라서 가감승제 연산을 사용할 수 없다.<br>ex) 학업석차, 결승점에 도달한 경주마의 순위, 사회계층(상류층, 중류층, 하류층) 등</p>
<p>interval scale, 등간 척도<br>명목척도와 서열척도의 특성을 모두 갖고 있으면서 ‘크기의 정도’를 말할 수 있는 측정척도<br>ex) 온도</p>
<p>ratio scale, 비율 척도<br>가장 포괄적인 정보를 제공하는 최상위 수준의 측정척도로 등간척도의 모든 정보를 제공하면서 절대영점을 갖는다.<br>예)   월 소득, 연령, 휘발유 1리터당 주행거리, TV 시청률 등</p>
</blockquote>
<p>Is sepal length and species related? Use cross tabulation<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tbl &lt;- table(Sepal.Length=iris_ord$Sepal.Length, iris_ord$Species)</span><br><span class="line">tbl</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Chi-square Test, 카이제곱검정<br><a href="http://dermabae.tistory.com/173" target="_blank" rel="external">http://dermabae.tistory.com/173</a><br><a href="https://www.khanacademy.org/math/probability/statistics-inferential/chi-square/v/pearson-s-chi-square-test-goodness-of-fit" target="_blank" rel="external">https://www.khanacademy.org/math/probability/statistics-inferential/chi-square/v/pearson-s-chi-square-test-goodness-of-fit</a></p>
</blockquote>
<p>Test of Independence: Pearson’s chi-squared test is performed with the null hypothesis that the joint distribution of the cell counts in a 2-dimensional contingency table is the product of the row and column marginals. (h0 is independence)</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chisq.test(tbl)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- xtabs(~Sepal.Length + Species, data=iris_ord)</span><br><span class="line">x</span><br></pre></td></tr></table></figure>
<p>그룹 평균<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aggregate(Sepal.Length ~ Species, data=iris, FUN = mean)</span><br><span class="line">aggregate(Sepal.Width ~ Species, data=iris, FUN = mean)</span><br></pre></td></tr></table></figure></p>
<h1 id="Density-estimation"><a href="#Density-estimation" class="headerlink" title="Density estimation"></a>Density estimation</h1><p>단순히 데이터 그리기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(iris$Petal.Length, jitter(rep(<span class="number">1</span>, nrow(iris))), ylab =<span class="string">""</span>, yaxt = <span class="string">"n"</span>)</span><br></pre></td></tr></table></figure></p>
<p>히스토그램을 보여주고, 실제 데이터 위치를 rug 함수를 사용하여 보여주며 KDE 표시<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hist(iris$Petal.Length)</span><br><span class="line">rug(iris$Petal.Length)</span><br><span class="line">lines(density(iris$Petal.Length), col=<span class="string">"red"</span>, lwd = <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p>이차원 Kernel Density Estimation 그래프<br>참조: <a href="http://www.everydayanalytics.ca/2014/09/5-ways-to-do-2d-histograms-in-r.html" target="_blank" rel="external">http://www.everydayanalytics.ca/2014/09/5-ways-to-do-2d-histograms-in-r.html</a><br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(MASS)</span><br><span class="line">dens &lt;- kde2d(iris$Sepal.Length, iris$Sepal.Width, n=<span class="number">100</span>) <span class="comment"># </span></span><br><span class="line">image(dens, xlab=<span class="string">"Sepal.Length"</span>, ylab=<span class="string">"Sepal.Width"</span>) <span class="comment"># 이미지로 표시</span></span><br><span class="line">contour(dens, add=<span class="literal">TRUE</span>) <span class="comment"># 등고선 표시</span></span><br><span class="line">points(jitter(iris$Sepal.Length, <span class="number">2</span>), jitter(iris$Sepal.Width, <span class="number">2</span>), cex=<span class="number">.7</span>, pch=<span class="string">"+"</span>) <span class="comment"># 십자 표시</span></span><br></pre></td></tr></table></figure></p>
<p>3차원 표시<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">persp(dens, xlab=<span class="string">"Sepal.Length"</span>, ylab=<span class="string">"Sepal.Width"</span>, zlab=<span class="string">"density"</span>, shade=<span class="number">.5</span>) <span class="comment"># Perspective Plots</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/03/16/data-mining/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/R-data-mining/" title="R, data mining">R, data mining<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/angularjs/" title="angularjs">angularjs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/rabbitmq/" title="rabbitmq">rabbitmq<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/tech/" title="tech">tech<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/devops/" title="devops">devops<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/lodash/" title="lodash">lodash<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/monitoring/" title="monitoring">monitoring<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/rabiitmq/" title="rabiitmq">rabiitmq<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="#" target="_blank" title="home">home</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<section class="info">
		<p> ^^; <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="SwForge">SwForge</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
