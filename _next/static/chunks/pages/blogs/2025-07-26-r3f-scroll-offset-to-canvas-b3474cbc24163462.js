(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7871],{1568:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(18153),l=n(14232),i=n(6170);let o=l.forwardRef((e,t)=>{let{children:n,...o}=e,[s,c]=l.useState(null),a=l.useCallback(e=>{c(e),"function"==typeof t?t(e):t&&"current"in t&&(t.current=e)},[t]),[d,h]=l.useState(0);return(0,r.FD)("div",{ref:a,css:{position:"relative",border:"1px solid",borderRadius:"4px",width:"100%",height:"300px",marginBottom:"1rem"},...o,children:[(0,r.Y)("button",{onClick:()=>h(e=>e+1),css:{position:"absolute",right:0,zIndex:1},children:(0,r.Y)(i.A,{})}),s&&(0,r.Y)(l.Fragment,{children:n(s)},d)]})}),s=l.memo(o)},20068:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H,meta:()=>N});var r=n(37876),l=n(91668),i=n(91013),o=n(18153),s=n(1568),c=n(33191),a=n(49082),d=n(13462),h=n(24672),u=n(88360),f=n(45302),p=n(14232);function m(e){let{refScrollOffset:t,children:n}=e,r=(0,u.C)(e=>e.viewport),l=p.useRef(null);return(0,u.D)(()=>{let e=l.current;e&&(e.position.y=r.height*t.current)}),(0,o.Y)("group",{ref:l,children:n})}function g(e){let{refScrollOffset:t,...n}=e,r=p.useRef(null);return(0,u.D)(()=>{let e=r.current;e&&(e.text=t.current.toFixed(2))}),(0,o.Y)(c.E,{ref:r,...n,children:"-"})}let x=p.memo(function(e){let{}=e,t=p.useRef(null),n=p.useRef(0);return(0,o.Y)(s.A,{css:{position:"relative",overflow:"hidden"},children:e=>(0,o.FD)(o.FK,{children:[(0,o.FD)(f.Hl,{eventSource:e,eventPrefix:"client",camera:{position:[5,-5,5]},children:[(0,o.Y)("ambientLight",{}),(0,o.Y)("pointLight",{position:[10,0,10]}),(0,o.Y)(m,{refScrollOffset:n}),(0,o.Y)(g,{refScrollOffset:n,position:[4,0,0],scale:2,color:"blue"}),(0,o.Y)("gridHelper",{args:[10,10],rotation:[Math.PI/2,0,0]}),(0,o.Y)(a.N,{enableZoom:!1}),(0,o.Y)("axesHelper",{args:[5]}),(0,o.Y)(d.z,{alignment:"bottom-left",margin:[80,80],children:(0,o.Y)(h.t,{})})]}),(0,o.Y)("div",{ref:t,css:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflowY:"scroll"},onScroll:e=>{let t=e.target;n.current=t.scrollTop/(t.scrollHeight-t.clientHeight)},children:(0,o.Y)("div",{css:{pointerEvents:"none",textAlign:"right",padding:"1rem",color:"red"},children:Array.from({length:10},(e,t)=>(0,o.Y)("p",{children:t}))})})]})})});var v=n(55822);function Y(e){let{text:t,color:n,...r}=e,[l,i]=p.useState(!1);return(0,o.FD)("mesh",{onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),...r,children:[(0,o.Y)("boxGeometry",{args:[2,2,2]}),(0,o.Y)("meshStandardMaterial",{color:l?"hotpink":n}),(0,o.Y)(v.E,{position:[0,0,1],center:!0,css:{pointerEvents:"none"},children:t})]})}function b(){let e=(0,u.C)(e=>e.viewport);return(0,o.FD)(o.FK,{children:[(0,o.Y)(Y,{text:(0,o.Y)("span",{children:"This is HTML"}),color:"aquamarine"}),(0,o.Y)(Y,{text:(0,o.Y)("h1",{children:"H1 caption"}),color:"lightblue",position:[0,-e.height,0]})]})}function w(e){let{refScrollOffset:t,children:n}=e,r=(0,u.C)(e=>e.viewport),l=p.useRef(null);return(0,u.D)(()=>{let e=l.current;e&&(e.position.y=r.height*t.current)}),(0,o.Y)("group",{ref:l,children:n})}function j(e){let{refScrollOffset:t,...n}=e,r=p.useRef(null);return(0,u.D)(()=>{let e=r.current;e&&(e.text=t.current.toFixed(2))}),(0,o.Y)(c.E,{ref:r,...n,children:"-"})}let y=p.memo(function(e){let{}=e,t=p.useRef(null),n=p.useRef(0);return(0,o.Y)(s.A,{css:{position:"relative",overflow:"hidden"},children:e=>(0,o.FD)(o.FK,{children:[(0,o.FD)(f.Hl,{eventSource:e,eventPrefix:"client",children:[(0,o.Y)("ambientLight",{}),(0,o.Y)("pointLight",{position:[10,0,10]}),(0,o.Y)(w,{refScrollOffset:n,children:(0,o.Y)(b,{})}),(0,o.Y)(j,{refScrollOffset:n,position:[4,0,0],scale:2}),(0,o.Y)("gridHelper",{args:[10,10],rotation:[Math.PI/2,0,0]}),(0,o.Y)("axesHelper",{args:[5]}),(0,o.Y)(d.z,{alignment:"bottom-left",margin:[80,80],children:(0,o.Y)(h.t,{})})]}),(0,o.Y)("div",{ref:t,css:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflowY:"scroll"},onScroll:e=>{let t=e.target;n.current=t.scrollTop/(t.scrollHeight-t.clientHeight)},children:(0,o.Y)("div",{css:{height:2*e.clientHeight,pointerEvents:"none"}})})]})})}),N={title:"R3F: Tying canvas to scroll-offset",description:"HTML 영역에서 발생하는 scroll 이벤트를 canvas 영역으로 전달하여, scroll offset에 따라 canvas의 내용을 변경하는 방법을 알아봅니다.",date:"2025-07-26",readTime:5},F=e=>{let{children:t}=e;return(0,r.jsx)(i.A,{meta:N,children:t})};function D(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"예제 소개"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://codesandbox.io/s/itfgk",children:"Tying canvas to scroll-offset"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"HTML 영역에서 발생하는 scroll 이벤트를 canvas 영역으로 전달하여, scroll offset에 따라 canvas의 내용을 변경하는 방법을 알아봅니다."}),"\n",(0,r.jsx)(t.h1,{children:"스크롤 이벤트 전달하기"}),"\n",(0,r.jsx)(x,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"<Canvas />"})," 컴포넌트를 먼저 배치합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["다음 속성을 사용하여 ",(0,r.jsx)(t.code,{children:"<div>"})," 요소를 canvas 위에 꽉 차게 배치 합니다."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', overflowY: 'scroll' }\n"})}),"\n",(0,r.jsx)(t.p,{children:"이 요소 안에 빨간색 글자를 0 ~ 9까지 표시하여 overflow를 만들어 스크롤 이벤트가 발생하도록 합니다."}),"\n",(0,r.jsx)(t.p,{children:"스크롤 이벤트에 따라 스크롤 비율 정보를 계산합니다."}),"\n",(0,r.jsxs)(t.p,{children:["불필요한 re-rendering이 발생하지 않도록 스크롤 비율은 ",(0,r.jsx)(t.code,{children:"useRef"}),"를 사용하여 전달합니다."]}),"\n",(0,r.jsx)(t.p,{children:"캔버스 영역에서는 이 스크롤 비율을 받아서 파란색 글자로 표시합니다."}),"\n",(0,r.jsx)(t.h1,{children:"스크롤 비율을 활용하기"}),"\n",(0,r.jsx)(y,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"<group />"})," 엘리먼트 안에 박스 2개를 그리고 그위에 ",(0,r.jsx)(t.code,{children:"<Html />"})," 컴포넌트를 사용하여 HTML 요소도 배치해 봅니다."]}),"\n",(0,r.jsxs)(t.p,{children:["스크롤 비율에 따라 ",(0,r.jsx)(t.code,{children:"<group />"})," 엘리먼트의 위치를 변경하여, 박스가 위아래로 움직이는 효과를 줍니다."]})]})}function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(F,{...e,children:(0,r.jsx)(D,{...e})})}},27798:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-07-26-r3f-scroll-offset-to-canvas",function(){return n(20068)}])},49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(18153),l=n(77328),i=n.n(l),o=n(14232);let s=o.memo(()=>(0,r.Y)(r.FK,{}));var c=n(71745),a=n(48230),d=n.n(a);let h=[{link:"/",text:"Home"}],u=o.memo(()=>{let e=(0,c.useRouter)(),[t,n]=o.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(d(),{className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:h.map(t=>{let{link:n,text:l}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(d(),{className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:l})},n)})})})]})]})}),f=o.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(i(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(u,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(s,{})]})})},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>s,j:()=>o});var r=n(18153),l=n(14232);let i=l.createContext({});function o(e){let{staticProps:t,children:n}=e;return(0,r.Y)(i.Provider,{value:t,children:n})}function s(){return l.useContext(i)}},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(18153);n(14232);let l=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(18153),l=n(73146),i=n.n(l),o=n(14232),s=n(86089),c=n(60158),a=n(85419),d=n(49034);function h(e){let{children:t,meta:n,staticProps:l}=e;return o.useEffect(()=>{i().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(d.A,{title:n.title,children:[(0,r.Y)(a.A,{meta:n,isBlogPost:!0}),(0,r.Y)(c.j,{staticProps:l,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(s.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[5334,7391,683,5037,5695,5302,2077,41,4764,636,6593,8792],()=>e(e.s=27798)),_N_E=e.O()}]);
//# sourceMappingURL=2025-07-26-r3f-scroll-offset-to-canvas-b3474cbc24163462.js.map