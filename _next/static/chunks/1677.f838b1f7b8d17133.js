"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1677],{2714:(e,t,s)=>{let i;var r=s(3230),n=s(52161),a=s(52295),o=s(15757),h=s(51631),l=s(27440);class d extends l.l{constructor(e=a.g.EMPTY){e instanceof a.g&&(e={texture:e});let{texture:t=a.g.EMPTY,anchor:s,roundPixels:i,width:r,height:o,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new n.o({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=i??!1,void 0!==r&&(this.width=r),void 0!==o&&(this.height=o)}static from(e,t=!1){return new d(e instanceof a.g?e:a.g.from(e,t))}set texture(e){e||(e=a.g.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return(0,o.y)(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return(0,h.t6)("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){let e=this._anchor,t=this._texture,s=this._bounds,{width:i,height:r}=t.orig;s.minX=-e._x*i,s.maxX=s.minX+i,s.minY=-e._y*r,s.maxY=s.minY+r}destroy(e=!1){if(super.destroy(e),"boolean"==typeof e?e:e?.texture){let t="boolean"==typeof e?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){"object"==typeof e?(t=e.height??e.width,e=e.width):t??(t=e),void 0!==e&&this._setWidth(e,this._texture.orig.width),void 0!==t&&this._setHeight(t,this._texture.orig.height)}}var u=s(45033),c=s(7270);let p=new u.c;function f(e,t,s){e.measurable=!0,(0,c.f)(e,s,p),t.addBoundsMask(p),e.measurable=!1}var m=s(58276),g=s(67069),_=s(42577);function x(e,t,s){let i=g.o.get();e.measurable=!0;let r=g.u.get().identity(),n=function e(t,s,i){return t?t!==s&&(e(t.parent,s,i),t.updateLocalTransform(),i.append(t.localTransform)):(0,_.R)("Mask bounds, renderable is not inside the root container"),i}(e,s,r);(0,m.n)(e,i,n),e.measurable=!1,t.addBoundsMask(i),g.u.return(r),g.o.return(i)}class y{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof d),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||f(this.mask,e,t)}addLocalBounds(e,t){x(this.mask,e,t)}containsPoint(e,t){return t(this.mask,e)}destroy(){this.reset()}static test(e){return e instanceof d}}y.extension=r.Ag.MaskEffect;class A{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return"number"==typeof e}}A.extension=r.Ag.MaskEffect;var b=s(38812);class v{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){f(this.mask,e,t)}addLocalBounds(e,t){x(this.mask,e,t)}containsPoint(e,t){return t(this.mask,e)}destroy(){this.reset()}static test(e){return e instanceof b.mc}}v.extension=r.Ag.MaskEffect;var T=s(51126),w=s(45737),M=s(33586);class R extends M.v{constructor(e){e.resource||(e.resource=w.e.get().createCanvas()),!e.width&&(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),!e.height&&(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){let i=super.resize(e,t,s);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}R.extension=r.Ag.TextureSource;var C=s(25460),S=s(66099);async function E(){return i??(i=(async()=>{let e=w.e.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";let t=await new Promise(e=>{let t=document.createElement("video");t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load()});if(!t)return"premultiply-alpha-on-upload";let s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);let r=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),e.deleteFramebuffer(i),e.deleteTexture(s),e.getExtension("WEBGL_lose_context")?.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),i}let I=class e extends M.v{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...e.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==t.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=S.R.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await E(),this._load=new Promise((s,i)=>{this.isValid?s(this):(this._resolve=s,this._reject=i,void 0!==t.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(S.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(S.R.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(S.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};I.extension=r.Ag.TextureSource,I.defaultOptions={...M.v.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},I.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},s(10412),r.XO.add(y,A,v,I,C.b,R,T.P)},3230:(e,t,s)=>{s.d(t,{Ag:()=>i,XO:()=>a});var i=(e=>(e.Application="application",e.WebGLPipes="webgl-pipes",e.WebGLPipesAdaptor="webgl-pipes-adaptor",e.WebGLSystem="webgl-system",e.WebGPUPipes="webgpu-pipes",e.WebGPUPipesAdaptor="webgpu-pipes-adaptor",e.WebGPUSystem="webgpu-system",e.CanvasSystem="canvas-system",e.CanvasPipesAdaptor="canvas-pipes-adaptor",e.CanvasPipes="canvas-pipes",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e.MaskEffect="mask-effect",e.BlendMode="blend-mode",e.TextureSource="texture-source",e.Environment="environment",e.ShapeBuilder="shape-builder",e.Batcher="batcher",e))(i||{});let r=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"==typeof e)e={...e};else throw Error("Invalid extension type");return"string"==typeof e.type&&(e.type=[e.type]),e},n=(e,t)=>r(e).priority??t,a={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(r).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(r).forEach(e=>{e.type.forEach(t=>{let s=this._addHandlers,i=this._queue;s[t]?s[t]?.(e):(i[t]=i[t]||[],i[t]?.push(e))})}),this},handle(e,t,s){let i=this._addHandlers,r=this._removeHandlers;if(i[e]||r[e])throw Error(`Extension type ${e} already has a handler`);i[e]=t,r[e]=s;let n=this._queue;return n[e]&&(n[e]?.forEach(e=>t(e)),delete n[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(e,t,s=-1){return this.handle(e,e=>{t.findIndex(t=>t.name===e.name)>=0||(t.push({name:e.name,value:e.ref}),t.sort((e,t)=>n(t.value,s)-n(e.value,s)))},e=>{let s=t.findIndex(t=>t.name===e.name);-1!==s&&t.splice(s,1)})},handleByList(e,t,s=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>n(t,s)-n(e,s)))},e=>{let s=t.indexOf(e.ref);-1!==s&&t.splice(s,1)})},mixin(e,...t){for(let s of t)Object.defineProperties(e.prototype,Object.getOwnPropertyDescriptors(s))}}},3657:(e,t,s)=>{var i=s(3230),r=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(r||{}),n=s(42577),a=s(45737);function o(e){if("string"!=typeof e)throw TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function h(e){return e.split("?")[0].split("#")[0]}let l={toPosix:e=>{var t,s;return t=0,s=0,e.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),isBlobUrl:e=>e.startsWith("blob:"),hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){o(e),e=this.toPosix(e);let t=/^file:\/\/\//.exec(e);if(t)return t[0];let s=/^[^/:]+:\/{0,2}/.exec(e);return s?s[0]:""},toAbsolute(e,t,s){if(o(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;let i=h(this.toPosix(t??a.e.get().getBaseUrl())),r=h(this.toPosix(s??this.rootname(i)));return(e=this.toPosix(e)).startsWith("/")?l.join(r,e.slice(1)):this.isAbsolute(e)?e:this.join(i,e)},normalize(e){if(o(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;e=this.toPosix(e);let t="",s=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));let i=e.endsWith("/");return((e=function(e,t){let s="",i=0,r=-1,n=0,a=-1;for(let o=0;o<=e.length;++o){if(o<e.length)a=e.charCodeAt(o);else if(47===a)break;else a=47;if(47===a){if(r===o-1||1===n);else if(r!==o-1&&2===n){if(s.length<2||2!==i||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2)){if(s.length>2){let e=s.lastIndexOf("/");if(e!==s.length-1){-1===e?(s="",i=0):i=(s=s.slice(0,e)).length-1-s.lastIndexOf("/"),r=o,n=0;continue}}else if(2===s.length||1===s.length){s="",i=0,r=o,n=0;continue}}t&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+=`/${e.slice(r+1,o)}`:s=e.slice(r+1,o),i=o-r-1;r=o,n=0}else 46===a&&-1!==n?++n:n=-1}return s}(e,!1)).length>0&&i&&(e+="/"),s)?`/${e}`:t+e},isAbsolute(e){return o(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){let t;if(0===e.length)return".";for(let s=0;s<e.length;++s){let i=e[s];if(o(i),i.length>0)if(void 0===t)t=i;else{let r=e[s-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return void 0===t?".":this.normalize(t)},dirname(e){if(o(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0),s=47===t,i=-1,r=!0,n=this.getProtocol(e),a=e;e=e.slice(n.length);for(let s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!r){i=s;break}}else r=!1;return -1===i?s?"/":this.isUrl(a)?n+e:n:s&&1===i?"//":n+e.slice(0,i)},rootname(e){o(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){let s=e.indexOf("/",t.length);(t=-1!==s?e.slice(0,s):e).endsWith("/")||(t+="/")}return t},basename(e,t){let s;o(e),t&&o(t),e=h(this.toPosix(e));let i=0,r=-1,n=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let a=t.length-1,o=-1;for(s=e.length-1;s>=0;--s){let h=e.charCodeAt(s);if(47===h){if(!n){i=s+1;break}}else -1===o&&(n=!1,o=s+1),a>=0&&(h===t.charCodeAt(a)?-1==--a&&(r=s):(a=-1,r=o))}return i===r?r=o:-1===r&&(r=e.length),e.slice(i,r)}for(s=e.length-1;s>=0;--s)if(47===e.charCodeAt(s)){if(!n){i=s+1;break}}else -1===r&&(n=!1,r=s+1);return -1===r?"":e.slice(i,r)},extname(e){o(e),e=h(this.toPosix(e));let t=-1,s=0,i=-1,r=!0,n=0;for(let a=e.length-1;a>=0;--a){let o=e.charCodeAt(a);if(47===o){if(!r){s=a+1;break}continue}-1===i&&(r=!1,i=a+1),46===o?-1===t?t=a:1!==n&&(n=1):-1!==t&&(n=-1)}return -1===t||-1===i||0===n||1===n&&t===i-1&&t===s+1?"":e.slice(t,i)},parse(e){let t;o(e);let s={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return s;let i=(e=h(this.toPosix(e))).charCodeAt(0),r=this.isAbsolute(e);s.root=this.rootname(e),t=r||this.hasProtocol(e)?1:0;let n=-1,a=0,l=-1,d=!0,u=e.length-1,c=0;for(;u>=t;--u){if(47===(i=e.charCodeAt(u))){if(!d){a=u+1;break}continue}-1===l&&(d=!1,l=u+1),46===i?-1===n?n=u:1!==c&&(c=1):-1!==n&&(c=-1)}return -1===n||-1===l||0===c||1===c&&n===l-1&&n===a+1?-1!==l&&(0===a&&r?s.base=s.name=e.slice(1,l):s.base=s.name=e.slice(a,l)):(0===a&&r?(s.name=e.slice(1,n),s.base=e.slice(1,l)):(s.name=e.slice(a,n),s.base=e.slice(a,l)),s.ext=e.slice(n,l)),s.dir=this.dirname(e),s},sep:"/",delimiter:":",joinExtensions:[".html"]};var d=s(33911);let u=e=>!Array.isArray(e);class c{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){"string"==typeof e?this._defaultSearchParams=e:this._defaultSearchParams=Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}getAlias(e){let{alias:t,src:s}=e;return(0,d.z)(t||s,e=>"string"==typeof e?e:Array.isArray(e)?e.map(e=>e?.src??e):e?.src?e.src:e,!0)}addManifest(e){this._manifest&&(0,n.R)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(e,t){let s=[],i=t;Array.isArray(t)||(i=Object.entries(t).map(([e,t])=>"string"==typeof t||Array.isArray(t)?{alias:e,src:t}:{alias:e,...t})),i.forEach(t=>{let i,r=t.src,n=t.alias;if("string"==typeof n){let t=this._createBundleAssetId(e,n);s.push(t),i=[n,t]}else{let t=n.map(t=>this._createBundleAssetId(e,t));s.push(...t),i=[...n,...t]}this.add({...t,alias:i,src:r})}),this._bundles[e]=s}add(e){let t,s=[];Array.isArray(e)?s.push(...e):s.push(e),t=e=>{this.hasKey(e)&&(0,n.R)(`[Resolver] already has key: ${e} overwriting`)},(0,d.z)(s).forEach(e=>{let{src:s}=e,{data:i,format:r,loadParser:n,parser:a}=e,o=(0,d.z)(s).map(e=>{if("string"==typeof e){let t=e.match(/\{(.*?)\}/g),s=[];if(t){let i=[];t.forEach(e=>{let t=e.substring(1,e.length-1).split(",");i.push(t)}),function e(t,s,i,r,n){let a=s[i];for(let o=0;o<a.length;o++){let h=a[o];i<s.length-1?e(t.replace(r[i],h),s,i+1,r,n):n.push(t.replace(r[i],h))}}(e,i,0,t,s)}else s.push(e);return s}return Array.isArray(e)?e:[e]}),h=this.getAlias(e);Array.isArray(h)?h.forEach(t):t(h);let l=[];o.forEach(e=>{e.forEach(e=>{let t={};if("object"!=typeof e){t.src=e;for(let s=0;s<this._parsers.length;s++){let i=this._parsers[s];if(i.test(e)){t=i.parse(e);break}}}else i=e.data??i,r=e.format??r,(e.loadParser||e.parser)&&(n=e.loadParser??n,a=e.parser??a),t={...t,...e};if(!h)throw Error(`[Resolver] alias is undefined for this asset: ${t.src}`);t=this._buildResolvedAsset(t,{aliases:h,data:i,format:r,loadParser:n,parser:a}),l.push(t)})}),h.forEach(e=>{this._assetMap[e]=l})})}resolveBundle(e){let t=u(e);e=(0,d.z)(e);let s={};return e.forEach(e=>{let t=this._bundles[e];if(t){let i=this.resolve(t),r={};for(let t in i){let s=i[t];r[this._extractAssetIdFromBundle(e,t)]=s}s[e]=r}}),t?s[e[0]]:s}resolveUrl(e){let t=this.resolve(e);if("string"!=typeof e){let e={};for(let s in t)e[s]=t[s].src;return e}return t.src}resolve(e){let t=u(e);e=(0,d.z)(e);let s={};return e.forEach(e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e],s=this._getPreferredOrder(t);s?.priority.forEach(e=>{s.params[e].forEach(s=>{let i=t.filter(t=>!!t[e]&&t[e]===s);i.length&&(t=i)})}),this._resolverHash[e]=t[0]}else this._resolverHash[e]=this._buildResolvedAsset({alias:[e],src:e},{});s[e]=this._resolverHash[e]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let s=e[t],i=this._preferredOrder.find(e=>e.params.format.includes(s.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){let{aliases:s,data:i,loadParser:r,parser:n,format:a}=t;return(this._basePath||this._rootPath)&&(e.src=l.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=r??e.loadParser,e.parser=n??e.parser,e.format=a??e.format??e.src.split(".").pop().split("?").shift().split("#").shift(),e}}c.RETINA_PREFIX=/@([0-9\.]+)x/;let p=(e,t)=>{let s=t.split("?")[1];return s&&(e+=`?${s}`),e};var f=s(52295),m=s(92809),g=s(33586);let _=class e{constructor(e,t){this.linkedSheets=[];let s=e;e?.source instanceof g.v&&(s={texture:e,data:t});let{texture:i,data:r,cachePrefix:n=""}=s;this.cachePrefix=n,this._texture=i instanceof f.g?i:null,this.textureSource=i.source,this.textures={},this.animations={},this.data=r;let a=parseFloat(r.meta.scale);a?(this.resolution=a,i.source.resolution=this.resolution):this.resolution=i.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let s=t,i=e.BATCH_SIZE;for(;s-t<i&&s<this._frameKeys.length;){let e=this._frameKeys[s],t=this._frames[e],i=t.frame;if(i){let s=null,r=null,n=!1!==t.trimmed&&t.sourceSize?t.sourceSize:t.frame,a=new m.M(0,0,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution);s=t.rotated?new m.M(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):new m.M(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),!1!==t.trimmed&&t.spriteSourceSize&&(r=new m.M(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[e]=new f.g({source:this.textureSource,frame:s,orig:a,trim:r,rotate:2*!!t.rotated,defaultAnchor:t.anchor,defaultBorders:t.borders,label:e.toString()})}s++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){let i=e[t][s];this.animations[t].push(this.textures[i])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_.BATCH_SIZE=1e3;let x=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],y={extension:i.Ag.Asset,cache:{test:e=>e instanceof _,getCacheableAssets:(e,t)=>(function e(t,s,i){let r={};if(t.forEach(e=>{r[e]=s}),Object.keys(s.textures).forEach(e=>{r[`${s.cachePrefix}${e}`]=s.textures[e]}),!i){let i=l.dirname(t[0]);s.linkedSheets.forEach((t,n)=>{Object.assign(r,e([`${i}/${s.data.meta.related_multi_packs[n]}`],t,!0))})}return r})(e,t,!1)},resolver:{extension:{type:i.Ag.ResolveParser,name:"resolveSpritesheet"},test:e=>{let t=e.split("?")[0].split("."),s=t.pop(),i=t.pop();return"json"===s&&x.includes(i)},parse:e=>{let t=e.split(".");return{resolution:parseFloat(c.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:i.Ag.LoadParser,priority:r.Normal,name:"spritesheetLoader"},testParse:async(e,t)=>".json"===l.extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,s){let i,{texture:r,imageFilename:n,textureOptions:a,cachePrefix:o}=t?.data??{},h=l.dirname(t.src);if(h&&h.lastIndexOf("/")!==h.length-1&&(h+="/"),r instanceof f.g)i=r;else{let r=p(h+(n??e.meta.image),t.src);i=(await s.load([{src:r,data:a}]))[r]}let d=new _({texture:i.source,data:e,cachePrefix:o});await d.parse();let u=e?.meta?.related_multi_packs;if(Array.isArray(u)){let e=[];for(let i of u){if("string"!=typeof i)continue;let r=h+i;t.data?.ignoreMultiPack||(r=p(r,t.src),e.push(s.load({src:r,data:{textureOptions:a,ignoreMultiPack:!0}})))}let i=await Promise.all(e);d.linkedSheets=i,i.forEach(e=>{e.linkedSheets=[d].concat(d.linkedSheets.filter(t=>t!==e))})}return d},async unload(e,t,s){await s.unload(e.textureSource._sourceOrigin),e.destroy(!1)}}};i.XO.add(y)},7270:(e,t,s)=>{s.d(t,{E:()=>a,f:()=>n});var i=s(62104),r=s(67069);function n(e,t,s){let n,o;return s.clear(),n=e.parent?t?e.parent.worldTransform:a(e,o=r.u.get().identity()):i.u.IDENTITY,function e(t,s,n,a){let o;if(!t.visible||!t.measurable)return;a?o=t.worldTransform:(t.updateLocalTransform(),(o=r.u.get()).appendFrom(t.localTransform,n));let h=s,l=!!t.effects.length;if(l&&(s=r.o.get().clear()),t.boundsArea)s.addRect(t.boundsArea,o);else{let i=t.bounds;i&&!i.isEmpty()&&(s.matrix=o,s.addBounds(i));for(let i=0;i<t.children.length;i++)e(t.children[i],s,o,a)}if(l){for(let e=0;e<t.effects.length;e++)t.effects[e].addBounds?.(s);h.addBounds(s,i.u.IDENTITY),r.o.return(s)}a||r.u.return(o)}(e,s,n,t),o&&r.u.return(o),s.isValid||s.set(0,0,0,0),s}function a(e,t){let s=e.parent;return s&&(a(s,t),s.updateLocalTransform(),t.append(s.localTransform)),t}},9715:(e,t,s)=>{s.d(t,{n:()=>h});var i=s(13799),r=s(43428),n=s(51631);let a=Object.create(null),o=class e extends i.A{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...e.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){(0,n.t6)(n.lj,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=function(e){let t=a[e];return void 0===t&&(a[e]=(0,r.L)("resource")),t}(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};o.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let h=o},10412:(e,t,s)=>{var i=s(50878),r=s(3230),n=s(33586),a=s(52295);let o=[];function h(e={}){let t=e&&e.resource,s=t?e.resource:e,i=t?e:{resource:e};for(let e=0;e<o.length;e++){let t=o[e];if(t.test(s))return new t(i)}throw Error(`Could not find a source type for resource: ${i.resource}`)}r.XO.handleByList(r.Ag.TextureSource,o),a.g.from=function(e,t=!1){return"string"==typeof e?i.l.get(e):e instanceof n.v?new a.g({source:e}):function(e={},t=!1){let s=e&&e.resource,r=s?e.resource:e,n=s?e:{resource:e};if(!t&&i.l.has(r))return i.l.get(r);let o=new a.g({source:h(n)});return o.on("destroy",()=>{i.l.has(r)&&i.l.remove(r)}),t||i.l.set(r,o),o}(e,t)},n.v.from=h},12392:e=>{var t=Object.prototype.hasOwnProperty,s="~";function i(){}function r(e,t,s){this.fn=e,this.context=t,this.once=s||!1}function n(e,t,i,n,a){if("function"!=typeof i)throw TypeError("The listener must be a function");var o=new r(i,n||e,a),h=s?s+t:t;return e._events[h]?e._events[h].fn?e._events[h]=[e._events[h],o]:e._events[h].push(o):(e._events[h]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(s=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(s?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=s?s+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,a=Array(n);r<n;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(e){var t=s?s+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,n,a){var o=s?s+e:e;if(!this._events[o])return!1;var h,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,n),!0;case 6:return d.fn.call(d.context,t,i,r,n,a),!0}for(l=1,h=Array(u-1);l<u;l++)h[l-1]=arguments[l];d.fn.apply(d.context,h)}else{var c,p=d.length;for(l=0;l<p;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,i);break;case 4:d[l].fn.call(d[l].context,t,i,r);break;default:if(!h)for(c=1,h=Array(u-1);c<u;c++)h[c-1]=arguments[c];d[l].fn.apply(d[l].context,h)}}return!0},o.prototype.on=function(e,t,s){return n(this,e,t,s,!1)},o.prototype.once=function(e,t,s){return n(this,e,t,s,!0)},o.prototype.removeListener=function(e,t,i,r){var n=s?s+e:e;if(!this._events[n])return this;if(!t)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||a(this,n);else{for(var h=0,l=[],d=o.length;h<d;h++)(o[h].fn!==t||r&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[n]=1===l.length?l[0]:l:a(this,n)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,e.exports=o},13799:(e,t,s)=>{s.d(t,{A:()=>i});let i=s(12392)},15757:(e,t,s)=>{s.d(t,{y:()=>i});function i(e,t,s){let{width:i,height:r}=s.orig,n=s.trim;if(n){let s=n.width,a=n.height;e.minX=n.x-t._x*i,e.maxX=e.minX+s,e.minY=n.y-t._y*r,e.maxY=e.minY+a}else e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*r,e.maxY=e.minY+r}},16889:(e,t,s)=>{s.d(t,{A:()=>i});function i(e){return{all:e=e||new Map,on:function(t,s){var i=e.get(t);i?i.push(s):e.set(t,[s])},off:function(t,s){var i=e.get(t);i&&(s?i.splice(i.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var i=e.get(t);i&&i.slice().map(function(e){e(s)}),(i=e.get("*"))&&i.slice().map(function(e){e(t,s)})}}}},20177:(e,t,s)=>{s.d(t,{Q:()=>P});var i={grad:.9,turn:360,rad:360/(2*Math.PI)},r=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},n=function(e,t,s){return void 0===t&&(t=0),void 0===s&&(s=Math.pow(10,t)),Math.round(s*e)/s+0},a=function(e,t,s){return void 0===t&&(t=0),void 0===s&&(s=1),e>s?s:e>t?e:t},o=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},h=function(e){return{r:a(e.r,0,255),g:a(e.g,0,255),b:a(e.b,0,255),a:a(e.a)}},l=function(e){return{r:n(e.r),g:n(e.g),b:n(e.b),a:n(e.a,3)}},d=/^#([0-9a-f]{3,8})$/i,u=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},c=function(e){var t=e.r,s=e.g,i=e.b,r=e.a,n=Math.max(t,s,i),a=n-Math.min(t,s,i),o=a?n===t?(s-i)/a:n===s?2+(i-t)/a:4+(t-s)/a:0;return{h:60*(o<0?o+6:o),s:n?a/n*100:0,v:n/255*100,a:r}},p=function(e){var t=e.h,s=e.s,i=e.v,r=e.a;t=t/360*6,s/=100,i/=100;var n=Math.floor(t),a=i*(1-s),o=i*(1-(t-n)*s),h=i*(1-(1-t+n)*s),l=n%6;return{r:255*[i,o,a,a,h,i][l],g:255*[h,i,i,o,a,a][l],b:255*[a,a,h,i,i,o][l],a:r}},f=function(e){return{h:o(e.h),s:a(e.s,0,100),l:a(e.l,0,100),a:a(e.a)}},m=function(e){return{h:n(e.h),s:n(e.s),l:n(e.l),a:n(e.a,3)}},g=function(e){var t,s;return p((t=e.s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}))},_=function(e){var t,s,i,r;return{h:(t=c(e)).h,s:(r=(200-(s=t.s))*(i=t.v)/100)>0&&r<200?s*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a}},x=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v={string:[[function(e){var t=d.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?n(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?n(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=A.exec(e)||b.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:h({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t,s,r=x.exec(e)||y.exec(e);return r?g(f({h:(t=r[1],void 0===(s=r[2])&&(s="deg"),Number(t)*(i[s]||1)),s:Number(r[3]),l:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)})):null},"hsl"]],object:[[function(e){var t=e.r,s=e.g,i=e.b,n=e.a;return r(t)&&r(s)&&r(i)?h({r:Number(t),g:Number(s),b:Number(i),a:Number(void 0===n?1:n)}):null},"rgb"],[function(e){var t=e.h,s=e.s,i=e.l,n=e.a;return r(t)&&r(s)&&r(i)?g(f({h:Number(t),s:Number(s),l:Number(i),a:Number(void 0===n?1:n)})):null},"hsl"],[function(e){var t,s=e.h,i=e.s,n=e.v,h=e.a;return r(s)&&r(i)&&r(n)?p({h:o((t={h:Number(s),s:Number(i),v:Number(n),a:Number(void 0===h?1:h)}).h),s:a(t.s,0,100),v:a(t.v,0,100),a:a(t.a)}):null},"hsv"]]},T=function(e,t){for(var s=0;s<t.length;s++){var i=t[s][0](e);if(i)return[i,t[s][1]]}return[null,void 0]},w=function(e,t){var s=_(e);return{h:s.h,s:a(s.s+100*t,0,100),l:s.l,a:s.a}},M=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},R=function(e,t){var s=_(e);return{h:s.h,s:s.s,l:a(s.l+100*t,0,100),a:s.a}},C=function(){function e(e){this.parsed=("string"==typeof e?T(e.trim(),v.string):"object"==typeof e&&null!==e?T(e,v.object):[null,void 0])[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return n(M(this.rgba),2)},e.prototype.isDark=function(){return .5>M(this.rgba)},e.prototype.isLight=function(){return M(this.rgba)>=.5},e.prototype.toHex=function(){var e,t,s,i,r,a;return t=(e=l(this.rgba)).r,s=e.g,i=e.b,a=(r=e.a)<1?u(n(255*r)):"","#"+u(t)+u(s)+u(i)+a},e.prototype.toRgb=function(){return l(this.rgba)},e.prototype.toRgbString=function(){var e,t,s,i,r;return t=(e=l(this.rgba)).r,s=e.g,i=e.b,(r=e.a)<1?"rgba("+t+", "+s+", "+i+", "+r+")":"rgb("+t+", "+s+", "+i+")"},e.prototype.toHsl=function(){return m(_(this.rgba))},e.prototype.toHslString=function(){var e,t,s,i,r;return t=(e=m(_(this.rgba))).h,s=e.s,i=e.l,(r=e.a)<1?"hsla("+t+", "+s+"%, "+i+"%, "+r+")":"hsl("+t+", "+s+"%, "+i+"%)"},e.prototype.toHsv=function(){var e;return{h:n((e=c(this.rgba)).h),s:n(e.s),v:n(e.v),a:n(e.a,3)}},e.prototype.invert=function(){var e;return S({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a})},e.prototype.saturate=function(e){return void 0===e&&(e=.1),S(w(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),S(w(this.rgba,-e))},e.prototype.grayscale=function(){return S(w(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),S(R(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),S(R(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){var t;return"number"==typeof e?S({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):n(this.rgba.a,3)},e.prototype.hue=function(e){var t=_(this.rgba);return"number"==typeof e?S({h:e,s:t.s,l:t.l,a:t.a}):n(t.h)},e.prototype.isEqual=function(e){return this.toHex()===S(e).toHex()},e}(),S=function(e){return e instanceof C?e:new C(e)},E=[];[function(e,t){var s={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in s)i[s[r]]=r;var n={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,a=i[this.toHex()];if(a)return a;if(null==t?void 0:t.closest){var o=this.toRgb(),h=1/0,l="black";if(!n.length)for(var d in s)n[d]=new e(s[d]).toRgb();for(var u in s){var c=(r=n[u],Math.pow(o.r-r.r,2)+Math.pow(o.g-r.g,2)+Math.pow(o.b-r.b,2));c<h&&(h=c,l=u)}return l}},t.string.push([function(t){var i=t.toLowerCase(),r="transparent"===i?"#0000":s[i];return r?new e(r).toRgb():null},"name"])}].forEach(function(e){0>E.indexOf(e)&&(e(C,v),E.push(e))});let I=class e{constructor(e=0xffffff){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=0xffffff,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else if(null===t)throw Error("Cannot set Color#value to null");else null!==this._value&&this._isSourceEqual(this._value,t)||(this._value=this._cloneSource(t),this._normalize(this._value))}get value(){return this._value}_cloneSource(e){if("string"==typeof e||"number"==typeof e||e instanceof Number||null===e);else if(Array.isArray(e)||ArrayBuffer.isView(e))return e.slice(0);else if("object"==typeof e&&null!==e)return{...e};return e}_isSourceEqual(e,t){let s=typeof e;if(s!==typeof t)return!1;if("number"===s||"string"===s||e instanceof Number);else if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((e,s)=>e===t[s]);else if(null!==e&&null!==t){let s=Object.keys(e),i=Object.keys(t);return s.length===i.length&&s.every(s=>e[s]===t[s])}return e===t}toRgba(){let[e,t,s,i]=this._components;return{r:e,g:t,b:s,a:i}}toRgb(){let[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){let[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){let[t,s,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(255*t),e[1]=Math.round(255*s),e[2]=Math.round(255*i),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[t,s,i,r]=this._components;return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[t,s,i]=this._components;return e[0]=t,e[1]=s,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){let[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){let[s,i,r,n]=e._temp.setValue(t)._components;return this._components[0]*=s,this._components[1]*=i,this._components[2]*=r,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return -0x1000000+this._int;if(0===e)return t?0:this._int;let s=this._int>>16&255,i=this._int>>8&255,r=255&this._int;return t&&(s=s*e+.5|0,i=i*e+.5|0,r=r*e+.5|0),(255*e<<24)+(s<<16)+(i<<8)+r}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(t){let s,i,r,n;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=0xffffff){let e=t;s=(e>>16&255)/255,i=(e>>8&255)/255,r=(255&e)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[s,i,r,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[s,i,r,n=255]=t,s/=255,i/=255,r/=255,n/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){let s=e.HEX_PATTERN.exec(t);s&&(t=`#${s[2]}`)}let a=S(t);a.isValid()&&({r:s,g:i,b:r,a:n}=a.rgba,s/=255,i/=255,r/=255)}if(void 0!==s)this._components[0]=s,this._components[1]=i,this._components[2]=r,this._components[3]=n,this._refreshInt();else throw Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);let[e,t,s]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*s|0)}_clamp(e,t=0,s=1){return"number"==typeof e?Math.min(Math.max(e,t),s):(e.forEach((i,r)=>{e[r]=Math.min(Math.max(i,t),s)}),e)}static isColorLike(t){return"number"==typeof t||"string"==typeof t||t instanceof Number||t instanceof e||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||void 0!==t.r&&void 0!==t.g&&void 0!==t.b||void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.l||void 0!==t.h&&void 0!==t.s&&void 0!==t.l&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.v||void 0!==t.h&&void 0!==t.s&&void 0!==t.v&&void 0!==t.a}};I.shared=new I,I._temp=new I,I.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let P=I},25460:(e,t,s)=>{s.d(t,{b:()=>n});var i=s(3230),r=s(33586);class n extends r.v{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}n.extension=i.Ag.TextureSource},27440:(e,t,s)=>{s.d(t,{l:()=>n});var i=s(45033),r=s(38812);class n extends r.mc{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new i.c(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty&&(this.updateBounds(),this._boundsDirty=!1),this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=+!!e}containsPoint(e){let t=this.bounds,{x:s,y:i}=e;return s>=t.minX&&s<=t.maxX&&i>=t.minY&&i<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){for(let t in super.destroy(e),this._bounds=null,this._gpuData)this._gpuData[t].destroy?.();this._gpuData=null}collectRenderablesSimple(e,t,s){let{renderPipes:i}=t;i.blendMode.pushBlendMode(this,this.groupBlendMode,e),i[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;let r=this.children,n=r.length;for(let i=0;i<n;i++)r[i].collectRenderables(e,t,s);i.blendMode.popBlendMode(e)}}},29682:(e,t,s)=>{s.d(t,{FrL:()=>a.F});var i=s(3230);let r={extension:{type:i.Ag.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.all([s.e(3624),s.e(5605)]).then(s.bind(s,45605))}},n={extension:{type:i.Ag.Environment,name:"webworker",priority:0},test:()=>"undefined"!=typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await Promise.all([s.e(3624),s.e(6251)]).then(s.bind(s,86251))}};s(2714),s(3657),s(10412);var a=s(57687);s(13799),i.XO.add(r,n)},33191:(e,t,s)=>{s.d(t,{E:()=>h});var i=s(44501),r=s(14232),n=s(1825),a=s(71804),o=s(41401);let h=r.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:s="middle",font:h,fontSize:l=1,children:d,characters:u,onSync:c,...p},f)=>{let m=(0,a.C)(({invalidate:e})=>e),[g]=r.useState(()=>new n.EY),[_,x]=r.useMemo(()=>{let e=[],t="";return r.Children.forEach(d,s=>{"string"==typeof s||"number"==typeof s?t+=s:e.push(s)}),[e,t]},[d]);return(0,o.DY)(()=>new Promise(e=>(0,n.PY)({font:h,characters:u},e)),["troika-text",h,u]),r.useLayoutEffect(()=>void g.sync(()=>{m(),c&&c(g)})),r.useEffect(()=>()=>g.dispose(),[g]),r.createElement("primitive",(0,i.A)({object:g,ref:f,font:h,text:x,anchorX:t,anchorY:s,fontSize:l,sdfGlyphSize:e},p),_)})},33586:(e,t,s)=>{s.d(t,{v:()=>l});var i=s(13799),r=s(43958),n=s(95011),a=s(43428),o=s(9715);let h=class e extends i.A{constructor(t={}){super(),this.options=t,this.uid=(0,a.L)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,a.L)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...e.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new o.n((0,n.S)(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,a.L)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);let i=Math.round(e*s),r=Math.round(t*s);return this.width=i/s,this.height=r/s,this._resolution=s,(this.pixelWidth!==i||this.pixelHeight!==r)&&(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=r,this.emit("resize",this),this._resourceId=(0,a.L)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,r.f3)(this.pixelWidth)&&(0,r.f3)(this.pixelHeight)}static test(e){throw Error("Unimplemented")}};h.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let l=h},33911:(e,t,s)=>{s.d(t,{z:()=>i});let i=(e,t,s=!1)=>(Array.isArray(e)||(e=[e]),t)?e.map(e=>"string"==typeof e||s?t(e):e):e},34595:(e,t,s)=>{s.d(t,{d:()=>i});var i=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(i||{})},38812:(e,t,s)=>{s.d(t,{mc:()=>O});var i=s(13799),r=s(20177),n=s(3230),a=s(62104),o=s(59545),h=s(52161),l=s(43428),d=s(51631),u=s(42577),c=s(87577),p=s(99882);class f{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class m{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let s=this._tests[t];if(s.test(e))return c.Z.get(s.maskClass,e)}return e}returnMaskEffect(e){c.Z.return(e)}}let g=new m;n.XO.handleByList(n.Ag.MaskEffect,g._effectClasses);var _=s(45033),x=s(67069);let y=new a.u;var A=s(7270),b=s(45193);function v(e,t){return 0xffffff===e?t:0xffffff===t?e:(0,b.u)(e,t)}function T(e){return((255&e)<<16)+(65280&e)+(e>>16&255)}var w=s(58276);let M=new a.u;function R(e,t){return e._zIndex-t._zIndex}var C=s(88188),S=s(95341),E=s(56823);class I{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new a.u,this.worldColorAlpha=0xffffffff,this.worldColor=0xffffff,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new S.L,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;let t=e.children;for(let e=0;e<t.length;e++){let s=t[e];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(E.W.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;let e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){for(let e in this.renderGroupChildren.length=0,this.childrenToUpdate){let t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup)return void this.addRenderGroupChild(e.renderGroup);e._onRender&&this.addOnRender(e);let t=e.children;for(let e=0;e<t.length;e++)this.addChild(t[e])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&!e.renderGroup&&this.removeOnRender(e),e.parentRenderGroup=null,e.renderGroup)return void this._removeRenderGroupChild(e.renderGroup);let t=e.children;for(let e=0;e<t.length;e++)this.removeChild(t[e])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){let t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;let s=e.children;for(let e=0;e<s.length;e++)this._getChildren(s[e],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(1&this._matrixDirty)==0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new a.u),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(2&this._matrixDirty)==0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new a.u),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((4&this._matrixDirty)==0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;let e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new a.u),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}let P=new h.o(null),k=new h.o(null),L=new h.o(null,1,1),B=new h.o(null);class O extends i.A{constructor(e={}){super(),this.uid=(0,l.L)("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new a.u,this.relativeGroupTransform=new a.u,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new h.o(this,0,0),this._scale=L,this._pivot=k,this._origin=B,this._skew=P,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=0xffffff,this.localAlpha=1,this.groupAlpha=1,this.groupColor=0xffffff,this.groupColorAlpha=0xffffffff,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],function(e,t,s={}){for(let i in t)s[i]||void 0===t[i]||(e[i]=t[i])}(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(e=>this.addChild(e)),e.parent?.addChild(this)}static mixin(e){(0,d.t6)("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),n.XO.mixin(O,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=4095&e}get _didChangeId(){return 4095&this._didContainerChangeTick|(4095&this._didViewChangeTick)<<12}addChild(...e){if(this.allowChildren||(0,d.t6)(d.lj,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let t=0;t<e.length;t++)this.addChild(e[t]);return e[0]}let t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0)):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,0!==t._zIndex&&t.depthOfChildModified()),t}removeChild(...e){if(e.length>1){for(let t=0;t<e.length;t++)this.removeChild(e[t]);return e[0]}let t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=c.Z.get(I,this),this.groupTransform=a.u.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),c.Z.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new a.u),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*o.bO}set angle(e){this.rotation=e*o.Td}get pivot(){return this._pivot===k&&(this._pivot=new h.o(this,0,0)),this._pivot}set pivot(e){this._pivot===k&&(this._pivot=new h.o(this,0,0),this._origin!==B&&(0,u.R)("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),"number"==typeof e?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===P&&(this._skew=new h.o(this,0,0)),this._skew}set skew(e){this._skew===P&&(this._skew=new h.o(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===L&&(this._scale=new h.o(this,1,1)),this._scale}set scale(e){this._scale===L&&(this._scale=new h.o(this,0,0)),"string"==typeof e&&(e=parseFloat(e)),"number"==typeof e?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===B&&(this._origin=new h.o(this,0,0)),this._origin}set origin(e){this._origin===B&&(this._origin=new h.o(this,0,0),this._pivot!==k&&(0,u.R)("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),"number"==typeof e?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){let s=this.getLocalBounds();"object"==typeof e?(t=e.height??e.width,e=e.width):t??(t=e),void 0!==e&&this._setWidth(e,s.width),void 0!==t&&this._setHeight(t,s.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set("number"==typeof e.x?e.x:this.position.x,"number"==typeof e.y?e.y:this.position.y),this.scale.set("number"==typeof e.scaleX?e.scaleX||1:this.scale.x,"number"==typeof e.scaleY?e.scaleY||1:this.scale.y),this.rotation="number"==typeof e.rotation?e.rotation:this.rotation,this.skew.set("number"==typeof e.skewX?e.skewX:this.skew.x,"number"==typeof e.skewY?e.skewY:this.skew.y),this.pivot.set("number"==typeof e.pivotX?e.pivotX:this.pivot.x,"number"==typeof e.pivotY?e.pivotY:this.pivot.y),this.origin.set("number"==typeof e.originX?e.originX:this.origin.x,"number"==typeof e.originY?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let t=this.localTransform,s=this._scale,i=this._pivot,r=this._origin,n=this._position,a=s._x,o=s._y,h=i._x,l=i._y,d=-r._x,u=-r._y;t.a=this._cx*a,t.b=this._sx*a,t.c=this._cy*o,t.d=this._sy*o,t.tx=n._x-(h*t.a+l*t.c)+(d*t.a+u*t.c)-d,t.ty=n._y-(h*t.b+l*t.d)+(d*t.b+u*t.d)-u}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=r.Q.shared.setValue(e??0xffffff).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=1,this._onUpdate())}get tint(){return T(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=2,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(e){(2&this.localDisplayStatus)!=2*!!e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(e){(4&this.localDisplayStatus)!=4*!e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(e){(1&this.localDisplayStatus)!=+!!e&&(this._updateFlags|=4,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(e=!1){let t;if(!this.destroyed){if(this.destroyed=!0,this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),("boolean"==typeof e?e:e?.children)&&t)for(let s=0;s<t.length;++s)t[s].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}}n.XO.mixin(O,{allowChildren:!0,removeChildren(e=0,t){let s=t??this.children.length,i=s-e,r=[];if(i>0&&i<=s){for(let t=s-1;t>=e;t--){let e=this.children[t];e&&(r.push(e),e.parent=null)}(0,p.d)(this.children,e,s);let t=this.renderGroup||this.parentRenderGroup;t&&t.removeChildren(r);for(let e=0;e<r.length;++e){let t=r[e];t.parentRenderLayer?.detach(t),this.emit("childRemoved",t,this,e),r[e].emit("removed",this)}return r.length>0&&this._didViewChangeTick++,r}if(0===i&&0===this.children.length)return r;throw RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(e){let t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){let t=this.children.indexOf(e);if(-1===t)throw Error("The supplied Container must be a child of the caller");return t},addChildAt(e,t){this.allowChildren||(0,d.t6)(d.lj,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:s}=this;if(t<0||t>s.length)throw Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${s.length}`);if(e.parent){let s=e.parent.children.indexOf(e);if(e.parent===this&&s===t)return e;-1!==s&&e.parent.children.splice(s,1)}t===s.length?s.push(e):s.splice(t,0,e),e.parent=this,e.didChange=!0,e._updateFlags=15;let i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",e,this,t),e.emit("added",this),e},swapChildren(e,t){if(e===t)return;let s=this.getChildIndex(e),i=this.getChildIndex(t);this.children[s]=t,this.children[i]=e;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...e){return 1===e.length?this.reparentChildAt(e[0],this.children.length):(e.forEach(e=>this.reparentChildAt(e,this.children.length)),e[0])},reparentChildAt(e,t){if(e.parent===this)return this.setChildIndex(e,t),e;let s=e.worldTransform.clone();e.removeFromParent(),this.addChildAt(e,t);let i=this.worldTransform.clone();return i.invert(),s.prepend(i),e.setFromMatrix(s),e},replaceChild(e,t){e.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(e)),t.setFromMatrix(e.localTransform),t.updateLocalTransform(),this.removeChild(e)}},{getFastGlobalBounds(e,t){t||(t=new _.c),t.clear(),this._getGlobalBoundsRecursive(!!e,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);let s=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(s.worldTransform),t},_getGlobalBoundsRecursive(e,t,s){let i=t;if(e&&this.parentRenderLayer&&this.parentRenderLayer!==s||7!==this.localDisplayStatus||!this.measurable)return;let r=!!this.effects.length;if((this.renderGroup||r)&&(i=x.o.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let e=this.bounds;i.addFrame(e.minX,e.minY,e.maxX,e.maxY,this.groupTransform)}let t=this.children;for(let r=0;r<t.length;r++)t[r]._getGlobalBoundsRecursive(e,i,s)}if(r){let e=!1,s=this.renderGroup||this.parentRenderGroup;for(let t=0;t<this.effects.length;t++)this.effects[t].addBounds&&(e||(e=!0,i.applyMatrix(s.worldTransform)),this.effects[t].addBounds(i,!0));e&&i.applyMatrix(s.worldTransform.copyTo(y).invert()),t.addBounds(i),x.o.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),x.o.return(i))}},{getGlobalPosition(e=new C.b,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,s=!1){let i=this.getGlobalTransform(x.u.get(),s);return t=i.apply(e,t),x.u.return(i),t},toLocal(e,t,s,i){t&&(e=t.toGlobal(e,s,i));let r=this.getGlobalTransform(x.u.get(),i);return s=r.applyInverse(e,s),x.u.return(r),s}},{_onRender:null,set onRender(func){let e=this.renderGroup||this.parentRenderGroup;if(!func){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=func},get onRender(){return this._onRender}},{_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(e,t){let s=Math.sign(this.scale.x)||1;0!==t?this.scale.x=e/t*s:this.scale.x=s},_setHeight(e,t){let s=Math.sign(this.scale.y)||1;0!==t?this.scale.y=e/t*s:this.scale.y=s},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new _.c});let e=this._localBoundsCacheData;return e.index=1,e.didChange=!1,e.data[0]!==this._didViewChangeTick&&(e.didChange=!0,e.data[0]=this._didViewChangeTick),!function e(t,s){let i=t.children;for(let t=0;t<i.length;t++){let r=i[t],n=r.uid,a=(65535&r._didViewChangeTick)<<16|65535&r._didContainerChangeTick,o=s.index;(s.data[o]!==n||s.data[o+1]!==a)&&(s.data[s.index]=n,s.data[s.index+1]=a,s.didChange=!0),s.index=o+2,r.children.length&&e(r,s)}return s.didChange}(this,e),e.didChange&&(0,w.n)(this,e.localBounds,M),e.localBounds},getBounds(e,t){return(0,A.f)(this,e,t||new _.c)}},{_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0)},addEffect(e){-1===this.effects.indexOf(e)&&(this.effects.push(e),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(e){let t=this.effects.indexOf(e);-1!==t&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(value){let e=this._maskEffect;if(e?.mask===value||(e&&(this.removeEffect(e),g.returnMaskEffect(e),this._maskEffect=null),null==value))return;this._maskEffect=g.getMaskEffect(value),this.addEffect(this._maskEffect)},get mask(){return this._maskEffect?.mask},setMask(e){this._maskOptions={...this._maskOptions,...e},e.mask&&(this.mask=e.mask),this._markStructureAsChanged()},set filters(value){!Array.isArray(value)&&value&&(value=[value]);let e=this._filterEffect||(this._filterEffect=new f),t=value?.length>0,s=e.filters?.length>0;e.filters=Object.freeze(value=Array.isArray(value)?value.slice(0):value),t!==s&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=value??null))},get filters(){return this._filterEffect?.filters},set filterArea(value){this._filterEffect||(this._filterEffect=new f),this._filterEffect.filterArea=value},get filterArea(){return this._filterEffect?.filterArea}},{label:null,get name(){return(0,d.t6)(d.lj,"Container.name property has been removed, use Container.label instead"),this.label},set name(value){(0,d.t6)(d.lj,"Container.name property has been removed, use Container.label instead"),this.label=value},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){let s=this.children;for(let t=0;t<s.length;t++){let i=s[t];if(i.label===e||e instanceof RegExp&&e.test(i.label))return i}if(t)for(let t=0;t<s.length;t++){let i=s[t].getChildByLabel(e,!0);if(i)return i}return null},getChildrenByLabel(e,t=!1,s=[]){let i=this.children;for(let t=0;t<i.length;t++){let r=i[t];(r.label===e||e instanceof RegExp&&e.test(r.label))&&s.push(r)}if(t)for(let t=0;t<i.length;t++)i[t].getChildrenByLabel(e,!0,s);return s}},{_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(value){if(this._zIndex===value)return;this._zIndex=value,this.depthOfChildModified()},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(R))}},{cullArea:null,cullable:!1,cullableChildren:!0},{get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(e){"boolean"==typeof e&&!1===e?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(!0===e?{}:e))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(val){(0,d.t6)("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(val)}},{getGlobalAlpha(e){if(e)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,s=this.parent;for(;s;)t*=s.alpha,s=s.parent;return t},getGlobalTransform(e=new a.u,t){if(t)return e.copyFrom(this.worldTransform);this.updateLocalTransform();let s=(0,A.E)(this,x.u.get().identity());return e.appendFrom(this.localTransform,s),x.u.return(s),e},getGlobalTint(e){if(e)return this.renderGroup?T(this.renderGroup.worldColor):this.parentRenderGroup?T(v(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,s=this.parent;for(;s;)t=v(t,s.localColor),s=s.parent;return T(t)}},{collectRenderables(e,t,s){this.parentRenderLayer&&this.parentRenderLayer!==s||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(e,t,s):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,e):this.collectRenderablesWithEffects(e,t,s))},collectRenderablesSimple(e,t,s){let i=this.children,r=i.length;for(let n=0;n<r;n++)i[n].collectRenderables(e,t,s)},collectRenderablesWithEffects(e,t,s){let{renderPipes:i}=t;for(let t=0;t<this.effects.length;t++){let s=this.effects[t];i[s.pipe].push(s,this,e)}this.collectRenderablesSimple(e,t,s);for(let t=this.effects.length-1;t>=0;t--){let s=this.effects[t];i[s.pipe].pop(s,this,e)}}})},42577:(e,t,s)=>{s.d(t,{R:()=>r});let i=0;function r(...e){500!==i&&(500==++i?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...e))}},43428:(e,t,s)=>{s.d(t,{L:()=>r});let i={default:-1};function r(e="default"){return void 0===i[e]&&(i[e]=-1),++i[e]}},43958:(e,t,s)=>{function i(e){return e+=+(0===e),--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function r(e){return!(e&e-1)&&!!e}s.d(t,{U5:()=>i,f3:()=>r})},44518:(e,t,s)=>{s.d(t,{L:()=>i});let i={_registeredResources:new Set,register(e){this._registeredResources.add(e)},unregister(e){this._registeredResources.delete(e)},release(){this._registeredResources.forEach(e=>e.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(e){return this._registeredResources.has(e)},reset(){this._registeredResources.clear()}}},45033:(e,t,s)=>{s.d(t,{c:()=>a});var i=s(62104),r=s(92809);let n=new i.u;class a{constructor(e=1/0,t=1/0,s=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=n,this.minX=e,this.minY=t,this.maxX=s,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new r.M);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=n,this}set(e,t,s,i){this.minX=e,this.minY=t,this.maxX=s,this.maxY=i}addFrame(e,t,s,i,r){r||(r=this.matrix);let n=r.a,a=r.b,o=r.c,h=r.d,l=r.tx,d=r.ty,u=this.minX,c=this.minY,p=this.maxX,f=this.maxY,m=n*e+o*t+l,g=a*e+h*t+d;m<u&&(u=m),g<c&&(c=g),m>p&&(p=m),g>f&&(f=g),m=n*s+o*t+l,g=a*s+h*t+d,m<u&&(u=m),g<c&&(c=g),m>p&&(p=m),g>f&&(f=g),m=n*e+o*i+l,g=a*e+h*i+d,m<u&&(u=m),g<c&&(c=g),m>p&&(p=m),g>f&&(f=g),m=n*s+o*i+l,g=a*s+h*i+d,m<u&&(u=m),g<c&&(c=g),m>p&&(p=m),g>f&&(f=g),this.minX=u,this.minY=c,this.maxX=p,this.maxY=f}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,s=this.minY,i=this.maxX,r=this.maxY,{a:n,b:a,c:o,d:h,tx:l,ty:d}=e,u=n*t+o*s+l,c=a*t+h*s+d;this.minX=u,this.minY=c,this.maxX=u,this.maxY=c,u=n*i+o*s+l,c=a*i+h*s+d,this.minX=u<this.minX?u:this.minX,this.minY=c<this.minY?c:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=c>this.maxY?c:this.maxY,u=n*t+o*r+l,c=a*t+h*r+d,this.minX=u<this.minX?u:this.minX,this.minY=c<this.minY?c:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=c>this.maxY?c:this.maxY,u=n*i+o*r+l,c=a*i+h*r+d,this.minX=u<this.minX?u:this.minX,this.minY=c<this.minY?c:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=c>this.maxY?c:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,i){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>i&&(this.maxY=i),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new a(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,i){let r=this.minX,n=this.minY,a=this.maxX,o=this.maxY;i||(i=this.matrix);let h=i.a,l=i.b,d=i.c,u=i.d,c=i.tx,p=i.ty;for(let i=t;i<s;i+=2){let t=e[i],s=e[i+1],f=h*t+d*s+c,m=l*t+u*s+p;r=f<r?f:r,n=m<n?m:n,a=f>a?f:a,o=m>o?m:o}this.minX=r,this.minY=n,this.maxX=a,this.maxY=o}containsPoint(e,t){return!!(this.minX<=e)&&!!(this.minY<=t)&&!!(this.maxX>=e)&&!!(this.maxY>=t)}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}},45193:(e,t,s)=>{s.d(t,{u:()=>i});function i(e,t){return 0xffffff!==e&&t?0xffffff!==t&&e?(((e>>16&255)*(t>>16&255)/255|0)<<16)+(((e>>8&255)*(t>>8&255)/255|0)<<8)+((255&e)*(255&t)/255|0):e:t}},45737:(e,t,s)=>{s.d(t,{e:()=>r});let i={createCanvas:(e,t)=>{let s=document.createElement("canvas");return s.width=e,s.height=t,s},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},r={get:()=>i,set(e){i=e}}},50878:(e,t,s)=>{s.d(t,{l:()=>a});var i=s(42577),r=s(33911);class n{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){let t=this._cache.get(e);return t||(0,i.R)(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){let s,n=(0,r.z)(e);for(let e=0;e<this.parsers.length;e++){let i=this.parsers[e];if(i.test(t)){s=i.getCacheableAssets(n,t);break}}let a=new Map(Object.entries(s||{}));s||n.forEach(e=>{a.set(e,t)});let o=[...a.keys()],h={cacheKeys:o,keys:n};n.forEach(e=>{this._cacheMap.set(e,h)}),o.forEach(e=>{let r=s?s[e]:t;this._cache.has(e)&&this._cache.get(e)!==r&&(0,i.R)("[Cache] already has key:",e),this._cache.set(e,a.get(e))})}remove(e){if(!this._cacheMap.has(e))return void(0,i.R)(`[Assets] Asset id ${e} was not found in the Cache`);let t=this._cacheMap.get(e);t.cacheKeys.forEach(e=>{this._cache.delete(e)}),t.keys.forEach(e=>{this._cacheMap.delete(e)})}get parsers(){return this._parsers}}let a=new n},51126:(e,t,s)=>{s.d(t,{P:()=>n});var i=s(3230),r=s(33586);class n extends r.v{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}n.extension=i.Ag.TextureSource},51631:(e,t,s)=>{s.d(t,{Ek:()=>n,lj:()=>r,t6:()=>o});let i=new Set,r="8.0.0",n="8.3.4",a={quiet:!1,noColor:!1},o=(e,t,s=3)=>{if(a.quiet||i.has(t))return;let r=Error().stack,n=`${t}
Deprecated since v${e}`,o="function"==typeof console.groupCollapsed&&!a.noColor;void 0===r?console.warn("PixiJS Deprecation Warning: ",n):(r=r.split("\n").splice(s).join("\n"),o?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",n),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",n),console.warn(r))),i.add(t)};Object.defineProperties(o,{quiet:{get:()=>a.quiet,set:e=>{a.quiet=e},enumerable:!0,configurable:!1},noColor:{get:()=>a.noColor,set:e=>{a.noColor=e},enumerable:!0,configurable:!1}})},52161:(e,t,s)=>{s.d(t,{o:()=>i});class i{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new i(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}},52295:(e,t,s)=>{s.d(t,{g:()=>b});var i=s(13799),r=s(62104);let n=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],o=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],d=[],u=Math.sign;!function(){for(let e=0;e<16;e++){let t=[];l.push(t);for(let s=0;s<16;s++){let i=u(n[e]*n[s]+o[e]*a[s]),r=u(a[e]*n[s]+h[e]*a[s]),l=u(n[e]*o[s]+o[e]*h[s]),d=u(a[e]*o[s]+h[e]*h[s]);for(let e=0;e<16;e++)if(n[e]===i&&a[e]===r&&o[e]===l&&h[e]===d){t.push(e);break}}}for(let e=0;e<16;e++){let t=new r.u;t.set(n[e],a[e],o[e],h[e],0,0),d.push(t)}}();let c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>n[e],uY:e=>a[e],vX:e=>o[e],vY:e=>h[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>l[e][t],sub:(e,t)=>l[e][c.inv(t)],rotate180:e=>4^e,isVertical:e=>(3&e)==2,byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?c.S:c.N:2*Math.abs(t)<=Math.abs(e)?e>0?c.E:c.W:t>0?e>0?c.SE:c.SW:e>0?c.NE:c.NW,matrixAppendRotationInv:(e,t,s=0,i=0)=>{let r=d[c.inv(t)];r.tx=s,r.ty=i,e.append(r)},transformRectCoords:(e,t,s,i)=>{let{x:r,y:n,width:a,height:o}=e,{x:h,y:l,width:d,height:u}=t;return s===c.E?(i.set(r+h,n+l,a,o),i):s===c.S?i.set(d-n-o+h,r+l,o,a):s===c.W?i.set(d-r-a+h,u-n-o+l,a,o):s===c.N?i.set(n+h,u-r-a+l,o,a):i.set(r+h,n+l,a,o)}};var p=s(92809),f=s(43428),m=s(51631);let g=()=>{};var _=s(51126),x=s(33586);let y=new r.u;class A{constructor(e,t){this.mapCoord=new r.u,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,void 0===t?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){void 0===t&&(t=e);let s=this.mapCoord;for(let i=0;i<e.length;i+=2){let r=e[i],n=e[i+1];t[i]=r*s.a+n*s.c+s.tx,t[i+1]=r*s.b+n*s.d+s.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let s=e.orig,i=e.trim;i&&(y.set(s.width/i.width,0,0,s.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(y));let r=e.source,n=this.uClampFrame,a=this.clampMargin/r._resolution,o=this.clampOffset/r._resolution;return n[0]=(e.frame.x+a+o)/r.width,n[1]=(e.frame.y+a+o)/r.height,n[2]=(e.frame.x+e.frame.width-a+o)/r.width,n[3]=(e.frame.y+e.frame.height-a+o)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=e.frame.width===r.width&&e.frame.height===r.height&&0===e.rotate,!0}}class b extends i.A{constructor({source:e,label:t,frame:s,orig:i,trim:r,defaultAnchor:n,defaultBorders:a,rotate:o,dynamic:h}={}){if(super(),this.uid=(0,f.L)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new p.M,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new x.v,this.noFrame=!s,s)this.frame.copyFrom(s);else{let{width:e,height:t}=this._source;this.frame.width=e,this.frame.height=t}this.orig=i||this.frame,this.trim=r,this.rotate=o??0,this.defaultAnchor=n,this.defaultBorders=a,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new A(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:s,height:i}=this._source,r=t.x/s,n=t.y/i,a=t.width/s,o=t.height/i,h=this.rotate;if(h){let t=a/2,s=o/2,i=r+t,l=n+s;h=c.add(h,c.NW),e.x0=i+t*c.uX(h),e.y0=l+s*c.uY(h),h=c.add(h,2),e.x1=i+t*c.uX(h),e.y1=l+s*c.uY(h),h=c.add(h,2),e.x2=i+t*c.uX(h),e.y2=l+s*c.uY(h),h=c.add(h,2),e.x3=i+t*c.uX(h),e.y3=l+s*c.uY(h)}else e.x0=r,e.y0=n,e.x1=r+a,e.y1=n,e.x2=r+a,e.y2=n+o,e.x3=r,e.y3=n+o}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,m.t6)(m.lj,"Texture.baseTexture is now Texture.source"),this._source}}b.EMPTY=new b({label:"EMPTY",source:new x.v({label:"EMPTY"})}),b.EMPTY.destroy=g,b.WHITE=new b({source:new _.P({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),b.WHITE.destroy=g},56823:(e,t,s)=>{s.d(t,{W:()=>d});var i=s(43958),r=s(44518),n=s(33586),a=s(52295),o=s(9715);let h=0;class l{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new o.n(this.textureOptions)}createTexture(e,t,s){let i=new n.v({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new a.g({source:i,label:`texturePool_${h++}`})}getOptimalTexture(e,t,s=1,r){let n=Math.ceil(e*s-1e-6),a=Math.ceil(t*s-1e-6),o=((n=(0,i.U5)(n))<<17)+((a=(0,i.U5)(a))<<1)+ +!!r;this._texturePool[o]||(this._texturePool[o]=[]);let h=this._texturePool[o].pop();return h||(h=this.createTexture(n,a,r)),h.source._resolution=s,h.source.width=n/s,h.source.height=a/s,h.source.pixelWidth=n,h.source.pixelHeight=a,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=o,h}getSameSizeTexture(e,t=!1){let s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){let s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=!1!==e)for(let e in this._texturePool){let t=this._texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this._texturePool={}}}let d=new l;r.L.register(d)},57687:(e,t,s)=>{s.d(t,{F:()=>A});var i=/iPhone/i,r=/iPod/i,n=/iPad/i,a=/\biOS-universal(?:.+)Mac\b/i,o=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,u=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,_=/Mobile(?:.+)Firefox\b/i,x=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function y(e){var t,s={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?s.userAgent=e:e&&e.userAgent&&(s={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):s={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var y=s.userAgent,A=y.split("[FBAN");void 0!==A[1]&&(y=A[0]),void 0!==(A=y.split("Twitter"))[1]&&(y=A[0]);var b=(t=y,function(e){return e.test(t)}),v={apple:{phone:b(i)&&!b(u),ipod:b(r),tablet:!b(i)&&(b(n)||x(s))&&!b(u),universal:b(a),device:(b(i)||b(r)||b(n)||b(a)||x(s))&&!b(u)},amazon:{phone:b(l),tablet:!b(l)&&b(d),device:b(l)||b(d)},android:{phone:!b(u)&&b(l)||!b(u)&&b(o),tablet:!b(u)&&!b(l)&&!b(o)&&(b(d)||b(h)),device:!b(u)&&(b(l)||b(d)||b(o)||b(h))||b(/\bokhttp\b/i)},windows:{phone:b(u),tablet:b(c),device:b(u)||b(c)},other:{blackberry:b(p),blackberry10:b(f),opera:b(m),firefox:b(_),chrome:b(g),device:b(p)||b(f)||b(m)||b(_)||b(g)},any:!1,phone:!1,tablet:!1};return v.any=v.apple.device||v.android.device||v.windows.device||v.other.device,v.phone=v.apple.phone||v.android.phone||v.windows.phone,v.tablet=v.apple.tablet||v.android.tablet||v.windows.tablet,v}let A=(y.default??y)(globalThis.navigator)},58276:(e,t,s)=>{s.d(t,{n:()=>n});var i=s(62104),r=s(67069);function n(e,t,s){return t.clear(),s||(s=i.u.IDENTITY),function e(t,s,n,a,o){let h;if(o)h=r.u.get(),h=n.copyTo(h);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();let e=t.localTransform;(h=r.u.get()).appendFrom(e,n)}let l=s,d=!!t.effects.length;if(d&&(s=r.o.get().clear()),t.boundsArea)s.addRect(t.boundsArea,h);else{t.renderPipeId&&(s.matrix=h,s.addBounds(t.bounds));let i=t.children;for(let t=0;t<i.length;t++)e(i[t],s,h,a,!1)}if(d){for(let e=0;e<t.effects.length;e++)t.effects[e].addLocalBounds?.(s,a);l.addBounds(s,i.u.IDENTITY),r.o.return(s)}r.u.return(h)}(e,t,s,e,!0),t.isValid||t.set(0,0,0,0),t}},59545:(e,t,s)=>{s.d(t,{TO:()=>i,Td:()=>n,bO:()=>r});let i=2*Math.PI,r=180/Math.PI,n=Math.PI/180},62104:(e,t,s)=>{s.d(t,{u:()=>n});var i=s(59545),r=s(88188);class n{constructor(e=1,t=0,s=0,i=1,r=0,n=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=i,this.tx=r,this.ty=n}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,i,r,n){return this.a=e,this.b=t,this.c=s,this.d=i,this.tx=r,this.ty=n,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0),s[8]=1,s}apply(e,t){t=t||new r.b;let s=e.x,i=e.y;return t.x=this.a*s+this.c*i+this.tx,t.y=this.b*s+this.d*i+this.ty,t}applyInverse(e,t){t=t||new r.b;let s=this.a,i=this.b,n=this.c,a=this.d,o=this.tx,h=this.ty,l=1/(s*a+-(n*i)),d=e.x,u=e.y;return t.x=a*l*d+-n*l*u+(h*n-o*a)*l,t.y=s*l*u+-i*l*d+(-h*s+o*i)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),s=Math.sin(e),i=this.a,r=this.c,n=this.tx;return this.a=i*t-this.b*s,this.b=i*s+this.b*t,this.c=r*t-this.d*s,this.d=r*s+this.d*t,this.tx=n*t-this.ty*s,this.ty=n*s+this.ty*t,this}append(e){let t=this.a,s=this.b,i=this.c,r=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*s+e.b*r,this.c=e.c*t+e.d*i,this.d=e.c*s+e.d*r,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*s+e.ty*r+this.ty,this}appendFrom(e,t){let s=e.a,i=e.b,r=e.c,n=e.d,a=e.tx,o=e.ty,h=t.a,l=t.b,d=t.c,u=t.d;return this.a=s*h+i*d,this.b=s*l+i*u,this.c=r*h+n*d,this.d=r*l+n*u,this.tx=a*h+o*d+t.tx,this.ty=a*l+o*u+t.ty,this}setTransform(e,t,s,i,r,n,a,o,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-o)*n,this.d=Math.cos(a-o)*n,this.tx=e-(s*this.a+i*this.c),this.ty=t-(s*this.b+i*this.d),this}prepend(e){let t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){let t=this.a,s=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,s=this.b,r=this.c,n=this.d,a=e.pivot,o=-Math.atan2(-r,n),h=Math.atan2(s,t),l=Math.abs(o+h);return l<1e-5||1e-5>Math.abs(i.TO-l)?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=h),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(r*r+n*n),e.position.x=this.tx+(a.x*t+a.y*r),e.position.y=this.ty+(a.x*s+a.y*n),e}invert(){let e=this.a,t=this.b,s=this.c,i=this.d,r=this.tx,n=e*i-t*s;return this.a=i/n,this.b=-t/n,this.c=-s/n,this.d=e/n,this.tx=(s*this.ty-i*r)/n,this.ty=-(e*this.ty-t*r)/n,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return o.identity()}static get shared(){return a.identity()}}let a=new n,o=new n},62122:(e,t,s)=>{s.d(t,{W:()=>A});var i=s(14796);let r={c:null,u:[new i.Vector3,new i.Vector3,new i.Vector3],e:[]},n={c:null,u:[new i.Vector3,new i.Vector3,new i.Vector3],e:[]},a=[[],[],[]],o=[[],[],[]],h=[],l=new i.Vector3,d=new i.Vector3,u=new i.Vector3,c=new i.Vector3,p=new i.Vector3,f=new i.Vector3,m=new i.Matrix3,g=new i.Box3,_=new i.Matrix4,x=new i.Matrix4,y=new i.Ray;class A{constructor(e=new i.Vector3,t=new i.Vector3,s=new i.Matrix3){this.center=e,this.halfSize=t,this.rotation=s}set(e,t,s){return this.center=e,this.halfSize=t,this.rotation=s,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,t){let s=this.halfSize;c.subVectors(e,this.center),this.rotation.extractBasis(l,d,u),t.copy(this.center);let r=i.MathUtils.clamp(c.dot(l),-s.x,s.x);t.add(l.multiplyScalar(r));let n=i.MathUtils.clamp(c.dot(d),-s.y,s.y);t.add(d.multiplyScalar(n));let a=i.MathUtils.clamp(c.dot(u),-s.z,s.z);return t.add(u.multiplyScalar(a)),t}containsPoint(e){return c.subVectors(e,this.center),this.rotation.extractBasis(l,d,u),Math.abs(c.dot(l))<=this.halfSize.x&&Math.abs(c.dot(d))<=this.halfSize.y&&Math.abs(c.dot(u))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(b.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,f),f.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,t=Number.EPSILON){let s,i;r.c=this.center,r.e[0]=this.halfSize.x,r.e[1]=this.halfSize.y,r.e[2]=this.halfSize.z,this.rotation.extractBasis(r.u[0],r.u[1],r.u[2]),n.c=e.center,n.e[0]=e.halfSize.x,n.e[1]=e.halfSize.y,n.e[2]=e.halfSize.z,e.rotation.extractBasis(n.u[0],n.u[1],n.u[2]);for(let e=0;e<3;e++)for(let t=0;t<3;t++)a[e][t]=r.u[e].dot(n.u[t]);c.subVectors(n.c,r.c),h[0]=c.dot(r.u[0]),h[1]=c.dot(r.u[1]),h[2]=c.dot(r.u[2]);for(let e=0;e<3;e++)for(let s=0;s<3;s++)o[e][s]=Math.abs(a[e][s])+t;for(let e=0;e<3;e++)if(s=r.e[e],i=n.e[0]*o[e][0]+n.e[1]*o[e][1]+n.e[2]*o[e][2],Math.abs(h[e])>s+i)return!1;for(let e=0;e<3;e++)if(s=r.e[0]*o[0][e]+r.e[1]*o[1][e]+r.e[2]*o[2][e],i=n.e[e],Math.abs(h[0]*a[0][e]+h[1]*a[1][e]+h[2]*a[2][e])>s+i)return!1;return s=r.e[1]*o[2][0]+r.e[2]*o[1][0],i=n.e[1]*o[0][2]+n.e[2]*o[0][1],!(Math.abs(h[2]*a[1][0]-h[1]*a[2][0])>s+i)&&(s=r.e[1]*o[2][1]+r.e[2]*o[1][1],i=n.e[0]*o[0][2]+n.e[2]*o[0][0],!(Math.abs(h[2]*a[1][1]-h[1]*a[2][1])>s+i)&&(s=r.e[1]*o[2][2]+r.e[2]*o[1][2],i=n.e[0]*o[0][1]+n.e[1]*o[0][0],!(Math.abs(h[2]*a[1][2]-h[1]*a[2][2])>s+i)&&(s=r.e[0]*o[2][0]+r.e[2]*o[0][0],i=n.e[1]*o[1][2]+n.e[2]*o[1][1],!(Math.abs(h[0]*a[2][0]-h[2]*a[0][0])>s+i)&&(s=r.e[0]*o[2][1]+r.e[2]*o[0][1],i=n.e[0]*o[1][2]+n.e[2]*o[1][0],!(Math.abs(h[0]*a[2][1]-h[2]*a[0][1])>s+i)&&(s=r.e[0]*o[2][2]+r.e[2]*o[0][2],i=n.e[0]*o[1][1]+n.e[1]*o[1][0],!(Math.abs(h[0]*a[2][2]-h[2]*a[0][2])>s+i)&&(s=r.e[0]*o[1][0]+r.e[1]*o[0][0],i=n.e[1]*o[2][2]+n.e[2]*o[2][1],!(Math.abs(h[1]*a[0][0]-h[0]*a[1][0])>s+i)&&(s=r.e[0]*o[1][1]+r.e[1]*o[0][1],i=n.e[0]*o[2][2]+n.e[2]*o[2][0],!(Math.abs(h[1]*a[0][1]-h[0]*a[1][1])>s+i)&&(s=r.e[0]*o[1][2]+r.e[1]*o[0][2],i=n.e[0]*o[2][1]+n.e[1]*o[2][0],!(Math.abs(h[1]*a[0][2]-h[0]*a[1][2])>s+i)))))))))}intersectsPlane(e){this.rotation.extractBasis(l,d,u);let t=this.halfSize.x*Math.abs(e.normal.dot(l))+this.halfSize.y*Math.abs(e.normal.dot(d))+this.halfSize.z*Math.abs(e.normal.dot(u));return Math.abs(e.normal.dot(this.center)-e.constant)<=t}intersectRay(e,t){return(this.getSize(p),g.setFromCenterAndSize(c.set(0,0,0),p),_.setFromMatrix3(this.rotation),_.setPosition(this.center),x.copy(_).invert(),y.copy(e).applyMatrix4(x),y.intersectBox(g,t))?t.applyMatrix4(_):null}intersectsRay(e){return null!==this.intersectRay(e,c)}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){let t=e.elements,s=c.set(t[0],t[1],t[2]).length(),i=c.set(t[4],t[5],t[6]).length(),r=c.set(t[8],t[9],t[10]).length();0>e.determinant()&&(s=-s),m.setFromMatrix4(e);let n=1/s,a=1/i,o=1/r;return m.elements[0]*=n,m.elements[1]*=n,m.elements[2]*=n,m.elements[3]*=a,m.elements[4]*=a,m.elements[5]*=a,m.elements[6]*=o,m.elements[7]*=o,m.elements[8]*=o,this.rotation.multiply(m),this.halfSize.x*=s,this.halfSize.y*=i,this.halfSize.z*=r,c.setFromMatrixPosition(e),this.center.add(c),this}}let b=new A},66099:(e,t,s)=>{s.d(t,{R:()=>a});var i=s(34595);class r{constructor(e,t=null,s=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=i}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}}let n=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new r(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=i.d.NORMAL){return this._addListener(new r(e,t,s))}addOnce(e,t,s=i.d.NORMAL){return this._addListener(new r(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}else e.connect(s);return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s=s.match(e,t)?s.destroy():s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let s;if(t>this.lastTime){if((s=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(s=this._maxElapsedMS),s*=this.speed,this._minElapsedMS){let e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=s,this.deltaTime=this.deltaMS*e.targetFPMS;let i=this._head,r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){let s=Math.min(Math.max(0,Math.min(this.maxFPS,t))/1e3,e.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){let t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){let t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};n.targetFPMS=.06;let a=n},67069:(e,t,s)=>{s.d(t,{o:()=>o,u:()=>a});var i=s(62104),r=s(87577),n=s(45033);let a=r.Z.getPool(i.u),o=r.Z.getPool(n.c)},69497:(e,t,s)=>{s.d(t,{B:()=>n});var i=s(14796);function r(e,t){if(t===i.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==i.TriangleFanDrawMode&&t!==i.TriangleStripDrawMode)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let s=e.getIndex();if(null===s){let t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),s=e.getIndex()}let r=s.count-2,n=[];if(t===i.TriangleFanDrawMode)for(let e=1;e<=r;e++)n.push(s.getX(0)),n.push(s.getX(e)),n.push(s.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(n.push(s.getX(e)),n.push(s.getX(e+1)),n.push(s.getX(e+2))):(n.push(s.getX(e+2)),n.push(s.getX(e+1)),n.push(s.getX(e)));n.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let a=e.clone();return a.setIndex(n),a.clearGroups(),a}}class n extends i.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new u(e)}),this.register(function(e){return new c(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new T(e)}),this.register(function(e){return new f(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new d(e)}),this.register(function(e){return new x(e)}),this.register(function(e){return new p(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new h(e)}),this.register(function(e){return new w(e)}),this.register(function(e){return new M(e)})}load(e,t,s,r){let n,a=this;if(""!==this.resourcePath)n=this.resourcePath;else if(""!==this.path){let t=i.LoaderUtils.extractUrlBase(e);n=i.LoaderUtils.resolveURL(t,this.path)}else n=i.LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);let o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},h=new i.FileLoader(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(s){try{a.parse(s,n,function(s){t(s),a.manager.itemEnd(e)},o)}catch(e){o(e)}},s,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,i){let r,n={},a={},h=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(h.decode(new Uint8Array(e,0,4))===R){try{n[o.KHR_BINARY_GLTF]=new S(e)}catch(e){i&&i(e);return}r=JSON.parse(n[o.KHR_BINARY_GLTF].content)}else r=JSON.parse(h.decode(e));else r=e;if(void 0===r.asset||r.asset.version[0]<2){i&&i(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let d=new q(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](d);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[t.name]=t,n[t.name]=!0}if(r.extensionsUsed)for(let e=0;e<r.extensionsUsed.length;++e){let t=r.extensionsUsed[e],s=r.extensionsRequired||[];switch(t){case o.KHR_MATERIALS_UNLIT:n[t]=new l;break;case o.KHR_DRACO_MESH_COMPRESSION:n[t]=new E(r,this.dracoLoader);break;case o.KHR_TEXTURE_TRANSFORM:n[t]=new I;break;case o.KHR_MESH_QUANTIZATION:n[t]=new P;break;default:s.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}d.setExtensions(n),d.setPlugins(a),d.parse(s,i)}parseAsync(e,t){let s=this;return new Promise(function(i,r){s.parse(e,t,i,r)})}}function a(){let e={};return{get:function(t){return e[t]},add:function(t,s){e[t]=s},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let o={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class h{constructor(e){this.parser=e,this.name=o.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let s=0,i=t.length;s<i;s++){let i=t[s];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){let t,s=this.parser,r="light:"+e,n=s.cache.get(r);if(n)return n;let a=s.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],h=new i.Color(0xffffff);void 0!==o.color&&h.setRGB(o.color[0],o.color[1],o.color[2],i.LinearSRGBColorSpace);let l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(t=new i.DirectionalLight(h)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new i.PointLight(h)).distance=l;break;case"spot":(t=new i.SpotLight(h)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,t.angle=o.spot.outerConeAngle,t.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return t.position.set(0,0,0),t.decay=2,V(t,o),void 0!==o.intensity&&(t.intensity=o.intensity),t.name=s.createUniqueName(o.name||"light_"+e),n=Promise.resolve(t),s.cache.add(r,n),n}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,s=this.parser,i=s.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return s._getNodeRef(t.cache,r,e)})}}class l{constructor(){this.name=o.KHR_MATERIALS_UNLIT}getMaterialType(){return i.MeshBasicMaterial}extendParams(e,t,s){let r=[];e.color=new i.Color(1,1,1),e.opacity=1;let n=t.pbrMetallicRoughness;if(n){if(Array.isArray(n.baseColorFactor)){let t=n.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],i.LinearSRGBColorSpace),e.opacity=t[3]}void 0!==n.baseColorTexture&&r.push(s.assignTexture(e,"map",n.baseColorTexture,i.SRGBColorSpace))}return Promise.all(r)}}class d{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let i=s.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class u{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let n=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&n.push(s.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&n.push(s.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(n.push(s.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){let e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.Vector2(e,e)}return Promise.all(n)}}class c{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let i=s.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let r=[],n=i.extensions[this.name];return void 0!==n.iridescenceFactor&&(t.iridescence=n.iridescenceFactor),void 0!==n.iridescenceTexture&&r.push(s.assignTexture(t,"iridescenceMap",n.iridescenceTexture)),void 0!==n.iridescenceIor&&(t.iridescenceIOR=n.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==n.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=n.iridescenceThicknessMinimum),void 0!==n.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=n.iridescenceThicknessMaximum),void 0!==n.iridescenceThicknessTexture&&r.push(s.assignTexture(t,"iridescenceThicknessMap",n.iridescenceThicknessTexture)),Promise.all(r)}}class f{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let n=[];t.sheenColor=new i.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;let a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){let e=a.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],i.LinearSRGBColorSpace)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&n.push(s.assignTexture(t,"sheenColorMap",a.sheenColorTexture,i.SRGBColorSpace)),void 0!==a.sheenRoughnessTexture&&n.push(s.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(n)}}class m{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let r=[],n=i.extensions[this.name];return void 0!==n.transmissionFactor&&(t.transmission=n.transmissionFactor),void 0!==n.transmissionTexture&&r.push(s.assignTexture(t,"transmissionMap",n.transmissionTexture)),Promise.all(r)}}class g{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let n=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&n.push(s.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;let o=a.attenuationColor||[1,1,1];return t.attenuationColor=new i.Color().setRGB(o[0],o[1],o[2],i.LinearSRGBColorSpace),Promise.all(n)}}class _{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let i=s.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class x{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let n=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&n.push(s.assignTexture(t,"specularIntensityMap",a.specularTexture));let o=a.specularColorFactor||[1,1,1];return t.specularColor=new i.Color().setRGB(o[0],o[1],o[2],i.LinearSRGBColorSpace),void 0!==a.specularColorTexture&&n.push(s.assignTexture(t,"specularColorMap",a.specularColorTexture,i.SRGBColorSpace)),Promise.all(n)}}class y{constructor(e){this.parser=e,this.name=o.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let r=[],n=i.extensions[this.name];return t.bumpScale=void 0!==n.bumpFactor?n.bumpFactor:1,void 0!==n.bumpTexture&&r.push(s.assignTexture(t,"bumpMap",n.bumpTexture)),Promise.all(r)}}class A{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let r=[],n=i.extensions[this.name];return void 0!==n.anisotropyStrength&&(t.anisotropy=n.anisotropyStrength),void 0!==n.anisotropyRotation&&(t.anisotropyRotation=n.anisotropyRotation),void 0!==n.anisotropyTexture&&r.push(s.assignTexture(t,"anisotropyMap",n.anisotropyTexture)),Promise.all(r)}}class b{constructor(e){this.parser=e,this.name=o.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,s=t.json,i=s.textures[e];if(!i.extensions||!i.extensions[this.name])return null;let r=i.extensions[this.name],n=t.options.ktx2Loader;if(!n)if(!(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0))return null;else throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return t.loadTextureImage(e,r.source,n)}}class v{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,s=this.parser,i=s.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;let n=r.extensions[t],a=i.images[n.source],o=s.textureLoader;if(a.uri){let e=s.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return s.loadTextureImage(e,n.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class T{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,s=this.parser,i=s.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;let n=r.extensions[t],a=i.images[n.source],o=s.textureLoader;if(a.uri){let e=s.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return s.loadTextureImage(e,n.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class w{constructor(e){this.name=o.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,s=t.bufferViews[e];if(!s.extensions||!s.extensions[this.name])return null;{let e=s.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported)if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;else throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return i.then(function(t){let s=e.byteOffset||0,i=e.byteLength||0,n=e.count,a=e.byteStride,o=new Uint8Array(t,s,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(n,a,o,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){let t=new ArrayBuffer(n*a);return r.decodeGltfBuffer(new Uint8Array(t),n,a,o,e.mode,e.filter),t})})}}}class M{constructor(e){this.name=o.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,s=t.nodes[e];if(!s.extensions||!s.extensions[this.name]||void 0===s.mesh)return null;for(let e of t.meshes[s.mesh].primitives)if(e.mode!==O.TRIANGLES&&e.mode!==O.TRIANGLE_STRIP&&e.mode!==O.TRIANGLE_FAN&&void 0!==e.mode)return null;let r=s.extensions[this.name].attributes,n=[],a={};for(let e in r)n.push(this.parser.getDependency("accessor",r[e]).then(t=>(a[e]=t,a[e])));return n.length<1?null:(n.push(this.parser.createNodeMesh(e)),Promise.all(n).then(e=>{let t=e.pop(),s=t.isGroup?t.children:[t],r=e[0].count,n=[];for(let e of s){let t=new i.Matrix4,s=new i.Vector3,o=new i.Quaternion,h=new i.Vector3(1,1,1),l=new i.InstancedMesh(e.geometry,e.material,r);for(let e=0;e<r;e++)a.TRANSLATION&&s.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&o.fromBufferAttribute(a.ROTATION,e),a.SCALE&&h.fromBufferAttribute(a.SCALE,e),l.setMatrixAt(e,t.compose(s,o,h));for(let t in a)if("_COLOR_0"===t){let e=a[t];l.instanceColor=new i.InstancedBufferAttribute(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);i.Object3D.prototype.copy.call(l,e),this.parser.assignFinalMaterial(l),n.push(l)}return t.isGroup?(t.clear(),t.add(...n),t):n[0]}))}}let R="glTF",C={JSON:0x4e4f534a,BIN:5130562};class S{constructor(e){this.name=o.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==R)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let i=this.header.length-12,r=new DataView(e,12),n=0;for(;n<i;){let t=r.getUint32(n,!0);n+=4;let i=r.getUint32(n,!0);if(n+=4,i===C.JSON){let i=new Uint8Array(e,12+n,t);this.content=s.decode(i)}else if(i===C.BIN){let s=12+n;this.body=e.slice(s,s+t)}n+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class E{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=o.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let s=this.json,r=this.dracoLoader,n=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},h={},l={};for(let e in a)o[H[e]||e.toLowerCase()]=a[e];for(let t in e.attributes){let i=H[t]||t.toLowerCase();if(void 0!==a[t]){let r=s.accessors[e.attributes[t]],n=F[r.componentType];l[i]=n.name,h[i]=!0===r.normalized}}return t.getDependency("bufferView",n).then(function(e){return new Promise(function(t,s){r.decodeDracoFile(e,function(e){for(let t in e.attributes){let s=e.attributes[t],i=h[t];void 0!==i&&(s.normalized=i)}t(e)},o,l,i.LinearSRGBColorSpace,s)})})}}class I{constructor(){this.name=o.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class P{constructor(){this.name=o.KHR_MESH_QUANTIZATION}}class k extends i.Interpolant{constructor(e,t,s,i){super(e,t,s,i)}copySampleValue_(e){let t=this.resultBuffer,s=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let e=0;e!==i;e++)t[e]=s[r+e];return t}interpolate_(e,t,s,i){let r=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=2*a,h=3*a,l=i-t,d=(s-t)/l,u=d*d,c=u*d,p=e*h,f=p-h,m=-2*c+3*u,g=c-u,_=1-m,x=g-u+d;for(let e=0;e!==a;e++){let t=n[f+e+a],s=n[f+e+o]*l,i=n[p+e+a],h=n[p+e]*l;r[e]=_*t+x*s+m*i+g*h}return r}}let L=new i.Quaternion;class B extends k{interpolate_(e,t,s,i){let r=super.interpolate_(e,t,s,i);return L.fromArray(r).normalize().toArray(r),r}}let O={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},F={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},G={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},U={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},H={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},D={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},X={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},Y={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function j(e,t,s){for(let i in s.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=s.extensions[i])}function V(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e){let t="",s=Object.keys(e).sort();for(let i=0,r=s.length;i<r;i++)t+=s[i]+":"+e[s[i]]+";";return t}function W(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let K=new i.Matrix4;class q{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new a,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,r=!1,n=-1;"undefined"!=typeof navigator&&(s=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),n=(r=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||s||r&&n<98?this.textureLoader=new i.TextureLoader(this.options.manager):this.textureLoader=new i.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let s=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(t){let n={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:s,userData:{}};return j(r,n,i),V(n,i),Promise.all(s._invokeAll(function(e){return e.afterRoot&&e.afterRoot(n)})).then(function(){for(let e of n.scenes)e.updateMatrixWorld();e(n)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],s=this.json.meshes||[];for(let s=0,i=t.length;s<i;s++){let i=t[s].joints;for(let t=0,s=i.length;t<s;t++)e[i[t]].isBone=!0}for(let t=0,i=e.length;t<i;t++){let i=e[t];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(s[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,s){if(e.refs[t]<=1)return s;let i=s.clone(),r=(e,t)=>{let s=this.associations.get(e);for(let[i,n]of(null!=s&&this.associations.set(t,s),e.children.entries()))r(n,t.children[i])};return r(s,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let s=0;s<t.length;s++){let i=e(t[s]);if(i)return i}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let s=[];for(let i=0;i<t.length;i++){let r=e(t[i]);r&&s.push(r)}return s}getDependency(e,t){let s=e+":"+t,i=this.cache.get(s);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(!(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(s,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){let s=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,i){return s.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],s=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[o.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(e,n){s.load(i.LoaderUtils.resolveURL(t.uri,r.path),e,void 0,function(){n(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let s=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+s)})}loadAccessor(e){let t=this,s=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){let e=U[r.type],t=F[r.componentType],s=!0===r.normalized,n=new t(r.count*e);return Promise.resolve(new i.BufferAttribute(n,e,s))}let n=[];return void 0!==r.bufferView?n.push(this.getDependency("bufferView",r.bufferView)):n.push(null),void 0!==r.sparse&&(n.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(n).then(function(e){let n,a,o=e[0],h=U[r.type],l=F[r.componentType],d=l.BYTES_PER_ELEMENT,u=d*h,c=r.byteOffset||0,p=void 0!==r.bufferView?s.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(p&&p!==u){let e=Math.floor(c/p),s="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count,u=t.cache.get(s);u||(n=new l(o,e*p,r.count*p/d),u=new i.InterleavedBuffer(n,p/d),t.cache.add(s,u)),a=new i.InterleavedBufferAttribute(u,h,c%p/d,f)}else n=null===o?new l(r.count*h):new l(o,c,r.count*h),a=new i.BufferAttribute(n,h,f);if(void 0!==r.sparse){let t=U.SCALAR,s=F[r.sparse.indices.componentType],n=r.sparse.indices.byteOffset||0,d=r.sparse.values.byteOffset||0,u=new s(e[1],n,r.sparse.count*t),c=new l(e[2],d,r.sparse.count*h);null!==o&&(a=new i.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(let e=0,t=u.length;e<t;e++){let t=u[e];if(a.setX(t,c[e*h]),h>=2&&a.setY(t,c[e*h+1]),h>=3&&a.setZ(t,c[e*h+2]),h>=4&&a.setW(t,c[e*h+3]),h>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})}loadTexture(e){let t=this.json,s=this.options,i=t.textures[e].source,r=t.images[i],n=this.textureLoader;if(r.uri){let e=s.manager.getHandler(r.uri);null!==e&&(n=e)}return this.loadTextureImage(e,i,n)}loadTextureImage(e,t,s){let r=this,n=this.json,a=n.textures[e],o=n.images[t],h=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[h])return this.textureCache[h];let l=this.loadImageSource(t,s).then(function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);let s=(n.samplers||{})[a.sampler]||{};return t.magFilter=N[s.magFilter]||i.LinearFilter,t.minFilter=N[s.minFilter]||i.LinearMipmapLinearFilter,t.wrapS=G[s.wrapS]||i.RepeatWrapping,t.wrapT=G[s.wrapT]||i.RepeatWrapping,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[h]=l,l}loadImageSource(e,t){let s=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let n=s.images[e],a=self.URL||self.webkitURL,o=n.uri||"",h=!1;if(void 0!==n.bufferView)o=this.getDependency("bufferView",n.bufferView).then(function(e){h=!0;let t=new Blob([e],{type:n.mimeType});return o=a.createObjectURL(t)});else if(void 0===n.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let l=Promise.resolve(o).then(function(e){return new Promise(function(s,n){let a=s;!0===t.isImageBitmapLoader&&(a=function(e){let t=new i.Texture(e);t.needsUpdate=!0,s(t)}),t.load(i.LoaderUtils.resolveURL(e,r.path),a,void 0,n)})}).then(function(e){var t;return!0===h&&a.revokeObjectURL(o),e.userData.mimeType=n.mimeType||((t=n.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=l,l}assignTexture(e,t,s,i){let r=this;return this.getDependency("texture",s.index).then(function(n){if(!n)return null;if(void 0!==s.texCoord&&s.texCoord>0&&((n=n.clone()).channel=s.texCoord),r.extensions[o.KHR_TEXTURE_TRANSFORM]){let e=void 0!==s.extensions?s.extensions[o.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=r.associations.get(n);n=r.extensions[o.KHR_TEXTURE_TRANSFORM].extendTexture(n,e),r.associations.set(n,t)}}return void 0!==i&&(n.colorSpace=i),e[t]=n,n})}assignFinalMaterial(e){let t=e.geometry,s=e.material,r=void 0===t.attributes.tangent,n=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+s.uuid,t=this.cache.get(e);t||(t=new i.PointsMaterial,i.Material.prototype.copy.call(t,s),t.color.copy(s.color),t.map=s.map,t.sizeAttenuation=!1,this.cache.add(e,t)),s=t}else if(e.isLine){let e="LineBasicMaterial:"+s.uuid,t=this.cache.get(e);t||(t=new i.LineBasicMaterial,i.Material.prototype.copy.call(t,s),t.color.copy(s.color),t.map=s.map,this.cache.add(e,t)),s=t}if(r||n||a){let e="ClonedMaterial:"+s.uuid+":";r&&(e+="derivative-tangents:"),n&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=s.clone(),n&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(s))),s=t}e.material=s}getMaterialType(){return i.MeshStandardMaterial}loadMaterial(e){let t,s=this,r=this.json,n=this.extensions,a=r.materials[e],h={},l=a.extensions||{},d=[];if(l[o.KHR_MATERIALS_UNLIT]){let e=n[o.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),d.push(e.extendParams(h,a,s))}else{let r=a.pbrMetallicRoughness||{};if(h.color=new i.Color(1,1,1),h.opacity=1,Array.isArray(r.baseColorFactor)){let e=r.baseColorFactor;h.color.setRGB(e[0],e[1],e[2],i.LinearSRGBColorSpace),h.opacity=e[3]}void 0!==r.baseColorTexture&&d.push(s.assignTexture(h,"map",r.baseColorTexture,i.SRGBColorSpace)),h.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,h.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(d.push(s.assignTexture(h,"metalnessMap",r.metallicRoughnessTexture)),d.push(s.assignTexture(h,"roughnessMap",r.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,h)})))}!0===a.doubleSided&&(h.side=i.DoubleSide);let u=a.alphaMode||Y.OPAQUE;if(u===Y.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,u===Y.MASK&&(h.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==i.MeshBasicMaterial&&(d.push(s.assignTexture(h,"normalMap",a.normalTexture)),h.normalScale=new i.Vector2(1,1),void 0!==a.normalTexture.scale)){let e=a.normalTexture.scale;h.normalScale.set(e,e)}if(void 0!==a.occlusionTexture&&t!==i.MeshBasicMaterial&&(d.push(s.assignTexture(h,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(h.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==i.MeshBasicMaterial){let e=a.emissiveFactor;h.emissive=new i.Color().setRGB(e[0],e[1],e[2],i.LinearSRGBColorSpace)}return void 0!==a.emissiveTexture&&t!==i.MeshBasicMaterial&&d.push(s.assignTexture(h,"emissiveMap",a.emissiveTexture,i.SRGBColorSpace)),Promise.all(d).then(function(){let i=new t(h);return a.name&&(i.name=a.name),V(i,a),s.associations.set(i,{materials:e}),a.extensions&&j(n,i,a),i})}createUniqueName(e){let t=i.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,s=this.extensions,r=this.primitiveCache,n=[];for(let a=0,h=e.length;a<h;a++){let h=e[a],l=function(e){let t,s=e.extensions&&e.extensions[o.KHR_DRACO_MESH_COMPRESSION];if(t=s?"draco:"+s.bufferView+":"+s.indices+":"+z(s.attributes):e.indices+":"+z(e.attributes)+":"+e.mode,void 0!==e.targets)for(let s=0,i=e.targets.length;s<i;s++)t+=":"+z(e.targets[s]);return t}(h),d=r[l];if(d)n.push(d.promise);else{let e;e=h.extensions&&h.extensions[o.KHR_DRACO_MESH_COMPRESSION]?function(e){return s[o.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(s){return $(s,e,t)})}(h):$(new i.BufferGeometry,h,t),r[l]={primitive:h,promise:e},n.push(e)}}return Promise.all(n)}loadMesh(e){let t=this,s=this.json,n=this.extensions,a=s.meshes[e],o=a.primitives,h=[];for(let e=0,t=o.length;e<t;e++){var l;let t=void 0===o[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new i.MeshStandardMaterial({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),l.DefaultMaterial):this.getDependency("material",o[e].material);h.push(t)}return h.push(t.loadGeometries(o)),Promise.all(h).then(function(s){let h=s.slice(0,s.length-1),l=s[s.length-1],d=[];for(let s=0,u=l.length;s<u;s++){let u,c=l[s],p=o[s],f=h[s];if(p.mode===O.TRIANGLES||p.mode===O.TRIANGLE_STRIP||p.mode===O.TRIANGLE_FAN||void 0===p.mode)!0===(u=!0===a.isSkinnedMesh?new i.SkinnedMesh(c,f):new i.Mesh(c,f)).isSkinnedMesh&&u.normalizeSkinWeights(),p.mode===O.TRIANGLE_STRIP?u.geometry=r(u.geometry,i.TriangleStripDrawMode):p.mode===O.TRIANGLE_FAN&&(u.geometry=r(u.geometry,i.TriangleFanDrawMode));else if(p.mode===O.LINES)u=new i.LineSegments(c,f);else if(p.mode===O.LINE_STRIP)u=new i.Line(c,f);else if(p.mode===O.LINE_LOOP)u=new i.LineLoop(c,f);else if(p.mode===O.POINTS)u=new i.Points(c,f);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(u.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let s=0,i=t.weights.length;s<i;s++)e.morphTargetInfluences[s]=t.weights[s];if(t.extras&&Array.isArray(t.extras.targetNames)){let s=t.extras.targetNames;if(e.morphTargetInfluences.length===s.length){e.morphTargetDictionary={};for(let t=0,i=s.length;t<i;t++)e.morphTargetDictionary[s[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(u,a),u.name=t.createUniqueName(a.name||"mesh_"+e),V(u,a),p.extensions&&j(n,u,p),t.assignFinalMaterial(u),d.push(u)}for(let s=0,i=d.length;s<i;s++)t.associations.set(d[s],{meshes:e,primitives:s});if(1===d.length)return a.extensions&&j(n,d[0],a),d[0];let u=new i.Group;a.extensions&&j(n,u,a),t.associations.set(u,{meshes:e});for(let e=0,t=d.length;e<t;e++)u.add(d[e]);return u})}loadCamera(e){let t,s=this.json.cameras[e],r=s[s.type];return r?("perspective"===s.type?t=new i.PerspectiveCamera(i.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===s.type&&(t=new i.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),V(t,s),Promise.resolve(t)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){let t=this.json.skins[e],s=[];for(let e=0,i=t.joints.length;e<i;e++)s.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?s.push(this.getDependency("accessor",t.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(e){let s=e.pop(),r=[],n=[];for(let a=0,o=e.length;a<o;a++){let o=e[a];if(o){r.push(o);let e=new i.Matrix4;null!==s&&e.fromArray(s.array,16*a),n.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new i.Skeleton(r,n)})}loadAnimation(e){let t=this.json,s=this,r=t.animations[e],n=r.name?r.name:"animation_"+e,a=[],o=[],h=[],l=[],d=[];for(let e=0,t=r.channels.length;e<t;e++){let t=r.channels[e],s=r.samplers[t.sampler],i=t.target,n=i.node,u=void 0!==r.parameters?r.parameters[s.input]:s.input,c=void 0!==r.parameters?r.parameters[s.output]:s.output;void 0!==i.node&&(a.push(this.getDependency("node",n)),o.push(this.getDependency("accessor",u)),h.push(this.getDependency("accessor",c)),l.push(s),d.push(i))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(h),Promise.all(l),Promise.all(d)]).then(function(e){let t=e[0],r=e[1],a=e[2],o=e[3],h=e[4],l=[];for(let e=0,i=t.length;e<i;e++){let i=t[e],n=r[e],d=a[e],u=o[e],c=h[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();let p=s._createAnimationTracks(i,n,d,u,c);if(p)for(let e=0;e<p.length;e++)l.push(p[e])}return new i.AnimationClip(n,void 0,l)})}createNodeMesh(e){let t=this.json,s=this,i=t.nodes[e];return void 0===i.mesh?null:s.getDependency("mesh",i.mesh).then(function(e){let t=s._getNodeRef(s.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,s=i.weights.length;t<s;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],s=this._loadNodeShallow(e),i=[],r=t.children||[];for(let e=0,t=r.length;e<t;e++)i.push(this.getDependency("node",r[e]));let n=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([s,Promise.all(i),n]).then(function(e){let t=e[0],s=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,K)});for(let e=0,i=s.length;e<i;e++)t.add(s[e]);return t})}_loadNodeShallow(e){let t=this.json,s=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let n=t.nodes[e],a=n.name?r.createUniqueName(n.name):"",o=[],h=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return h&&o.push(h),void 0!==n.camera&&o.push(r.getDependency("camera",n.camera).then(function(e){return r._getNodeRef(r.cameraCache,n.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){o.push(e)}),this.nodeCache[e]=Promise.all(o).then(function(t){let o;if((o=!0===n.isBone?new i.Bone:t.length>1?new i.Group:1===t.length?t[0]:new i.Object3D)!==t[0])for(let e=0,s=t.length;e<s;e++)o.add(t[e]);if(n.name&&(o.userData.name=n.name,o.name=a),V(o,n),n.extensions&&j(s,o,n),void 0!==n.matrix){let e=new i.Matrix4;e.fromArray(n.matrix),o.applyMatrix4(e)}else void 0!==n.translation&&o.position.fromArray(n.translation),void 0!==n.rotation&&o.quaternion.fromArray(n.rotation),void 0!==n.scale&&o.scale.fromArray(n.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}),this.nodeCache[e]}loadScene(e){let t=this.extensions,s=this.json.scenes[e],r=this,n=new i.Group;s.name&&(n.name=r.createUniqueName(s.name)),V(n,s),s.extensions&&j(t,n,s);let a=s.nodes||[],o=[];for(let e=0,t=a.length;e<t;e++)o.push(r.getDependency("node",a[e]));return Promise.all(o).then(function(e){for(let t=0,s=e.length;t<s;t++)n.add(e[t]);return r.associations=(e=>{let t=new Map;for(let[e,s]of r.associations)(e instanceof i.Material||e instanceof i.Texture)&&t.set(e,s);return e.traverse(e=>{let s=r.associations.get(e);null!=s&&t.set(e,s)}),t})(n),n})}_createAnimationTracks(e,t,s,r,n){let a,o=[],h=e.name?e.name:e.uuid,l=[];switch(D[n.path]===D.weights?e.traverse(function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)}):l.push(h),D[n.path]){case D.weights:a=i.NumberKeyframeTrack;break;case D.rotation:a=i.QuaternionKeyframeTrack;break;case D.position:case D.scale:a=i.VectorKeyframeTrack;break;default:a=1===s.itemSize?i.NumberKeyframeTrack:i.VectorKeyframeTrack}let d=void 0!==r.interpolation?X[r.interpolation]:i.InterpolateLinear,u=this._getArrayFromAccessor(s);for(let e=0,s=l.length;e<s;e++){let s=new a(l[e]+"."+D[n.path],t.array,u,d);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(s),o.push(s)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=W(t.constructor),s=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)s[i]=t[i]*e;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof i.QuaternionKeyframeTrack?B:k)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function $(e,t,s){let r=t.attributes,n=[];for(let t in r){let i=H[t]||t.toLowerCase();i in e.attributes||n.push(function(t,i){return s.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}(r[t],i))}if(void 0!==t.indices&&!e.index){let i=s.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});n.push(i)}return i.ColorManagement.workingColorSpace!==i.LinearSRGBColorSpace&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${i.ColorManagement.workingColorSpace}" not supported.`),V(e,t),!function(e,t,s){let r=t.attributes,n=new i.Box3;if(void 0===r.POSITION)return;{let e=s.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(n.set(new i.Vector3(t[0],t[1],t[2]),new i.Vector3(a[0],a[1],a[2])),e.normalized){let t=W(F[e.componentType]);n.min.multiplyScalar(t),n.max.multiplyScalar(t)}}let a=t.targets;if(void 0!==a){let e=new i.Vector3,t=new i.Vector3;for(let i=0,r=a.length;i<r;i++){let r=a[i];if(void 0!==r.POSITION){let i=s.json.accessors[r.POSITION],n=i.min,a=i.max;if(void 0!==n&&void 0!==a){if(t.setX(Math.max(Math.abs(n[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(n[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(n[2]),Math.abs(a[2]))),i.normalized){let e=W(F[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(e)}e.boundingBox=n;let o=new i.Sphere;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,e.boundingSphere=o}(e,t,s),Promise.all(n).then(function(){return void 0!==t.targets?function(e,t,s){let i=!1,r=!1,n=!1;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(void 0!==s.POSITION&&(i=!0),void 0!==s.NORMAL&&(r=!0),void 0!==s.COLOR_0&&(n=!0),i&&r&&n)break}if(!i&&!r&&!n)return Promise.resolve(e);let a=[],o=[],h=[];for(let l=0,d=t.length;l<d;l++){let d=t[l];if(i){let t=void 0!==d.POSITION?s.getDependency("accessor",d.POSITION):e.attributes.position;a.push(t)}if(r){let t=void 0!==d.NORMAL?s.getDependency("accessor",d.NORMAL):e.attributes.normal;o.push(t)}if(n){let t=void 0!==d.COLOR_0?s.getDependency("accessor",d.COLOR_0):e.attributes.color;h.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(h)]).then(function(t){let s=t[0],a=t[1],o=t[2];return i&&(e.morphAttributes.position=s),r&&(e.morphAttributes.normal=a),n&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,s):e})}},87577:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(44518);class r{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return t=this._index>0?this._pool[--this._index]:new this._classType,t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class n{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new r(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}let a=new n;i.L.register(a)},88188:(e,t,s)=>{s.d(t,{b:()=>i});class i{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new i(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return r.x=0,r.y=0,r}}let r=new i},92809:(e,t,s)=>{s.d(t,{M:()=>n});var i=s(88188);let r=[new i.b,new i.b,new i.b,new i.b];class n{constructor(e=0,t=0,s=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new n(0,0,0,0)}clone(){return new n(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return!(this.width<=0)&&!(this.height<=0)&&!!(e>=this.x)&&!!(e<this.x+this.width)&&!!(t>=this.y)&&!!(t<this.y+this.height)}strokeContains(e,t,s,i=.5){let{width:r,height:n}=this;if(r<=0||n<=0)return!1;let a=this.x,o=this.y,h=s*(1-i),l=s-h;return e>=a-h&&e<=a+r+h&&t>=o-h&&t<=o+n+h&&!(e>a+l&&e<a+r-l&&t>o+l&&t<o+n-l)}intersects(e,t){if(!t){let t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;let s=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>s}let s=this.left,i=this.right,n=this.top,a=this.bottom;if(i<=s||a<=n)return!1;let o=r[0].set(e.left,e.top),h=r[1].set(e.left,e.bottom),l=r[2].set(e.right,e.top),d=r[3].set(e.right,e.bottom);if(l.x<=o.x||h.y<=o.y)return!1;let u=Math.sign(t.a*t.d-t.b*t.c);if(0===u||(t.apply(o,o),t.apply(h,h),t.apply(l,l),t.apply(d,d),Math.max(o.x,h.x,l.x,d.x)<=s||Math.min(o.x,h.x,l.x,d.x)>=i||Math.max(o.y,h.y,l.y,d.y)<=n||Math.min(o.y,h.y,l.y,d.y)>=a))return!1;let c=u*(h.y-o.y),p=u*(o.x-h.x),f=c*s+p*n,m=c*i+p*n,g=c*s+p*a,_=c*i+p*a;if(Math.max(f,m,g,_)<=c*o.x+p*o.y||Math.min(f,m,g,_)>=c*d.x+p*d.y)return!1;let x=u*(o.y-l.y),y=u*(l.x-o.x),A=x*s+y*n,b=x*i+y*n,v=x*s+y*a,T=x*i+y*a;return!(Math.max(A,b,v,T)<=x*o.x+y*o.y||Math.min(A,b,v,T)>=x*d.x+y*d.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){let t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),r=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=i,this.height=Math.max(r-i,0),this}ceil(e=1,t=.001){let s=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=i-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){let t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=i,this.height=r-i,this}getBounds(e){return e||(e=new n),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;let t=e.x,s=e.y,i=e.x+e.width,r=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&i>=this.x&&i<this.x+this.width&&r>=this.y&&r<this.y+this.height}set(e,t,s,i){return this.x=e,this.y=t,this.width=s,this.height=i,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}},95011:(e,t,s)=>{s.d(t,{S:()=>i});function i(e){let t={};for(let s in e)void 0!==e[s]&&(t[s]=e[s]);return t}},95341:(e,t,s)=>{s.d(t,{L:()=>r});var i=s(43428);class r{constructor(){this.uid=(0,i.L)("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}},99882:(e,t,s)=>{s.d(t,{d:()=>i});function i(e,t,s){let i,r=e.length;if(t>=r||0===s)return;s=t+s>r?r-t:s;let n=r-s;for(i=t;i<n;++i)e[i]=e[i+s];e.length=n}}}]);
//# sourceMappingURL=1677.f838b1f7b8d17133.js.map