(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9341],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},39064:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2023-07-15-langchainjs-part-3",function(){return n(41257)}])},41257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u,meta:()=>a});var r=n(37876),i=n(91668),o=n(91013);let l={src:"/_next/static/media/mrkl.b4359e4d.svg"},a={title:"LangchainJS 리뷰 #3",description:"langchain의 agent에 대해 살펴 봅니다.",date:"2023-07-15",readTime:5},s=e=>{let{children:t}=e;return(0,r.jsx)(o.A,{meta:a,children:t})};function c(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Agent"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://js.langchain.com/docs/modules/agents/",children:"Agents | \uD83E\uDD9C️\uD83D\uDD17 Langchain"})}),"\n"]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://anpigon.tistory.com/399",children:"랭체인 에이전트와 도구 사용하기"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Chain은 이미 정해진 처리 과정에 따라 작업을 수행하지만, agent는 llm의 응답에 따라 작업을 선택적으로 수행합니다."}),"\n",(0,r.jsx)("img",{src:l.src}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"AgentExecutor"}),"는 agent의 실행 계획을 실행합니다."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"ZeroShotAgent"}),"는 주어진 tool들과 질문을 바탕으로 실행 계획을 세우는 프롬프트를 작성하고 LLM에 요청합니다.\nLLM은 주어진 프롬프트에 따라, 질문에 대한 답을 얻어내기 위해 필요한 tool을 선택하고 tool에 전달할 적절한 입력값도 생성합니다.\n이 과정을 반복해서 질문에 대한 최종 답을 얻어냅니다."]}),"\n",(0,r.jsxs)(t.p,{children:["보여준 예시에서는 ",(0,r.jsx)(t.code,{children:"Olivia Wilde의 남자친구가 누구이고, 그의 나이에 0.23 제곱을 하라"}),"(Who is Olivia Wilde's boyfriend? What is his current age raised to the 0.23 power?)라는 질문을 전달합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["또한, 해당 문제를 풀 때 사용할 수 있는 tool을 전달하는데, 각 툴은 식별자와 설명 정보를 가집니다.\n",(0,r.jsx)(t.code,{children:"ZeroShotAgent"}),"는 이 툴둘의 식별정보와 설명을 포함하고 이 툴들을 사용해서 주어진 문제를 풀 수 있는 ",(0,r.jsx)(t.code,{children:"Action"}),"과 해당 action의 입력 값을 최종 답이 나올 때 까지 LLM에 프롬프트를 전달합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["다소 도전적인 요청 같았는데도, OpenAI는 적절하게 구글 검색 툴을 선택해서 ",(0,r.jsx)(t.code,{children:"Olivia Wilde boyfriend"}),"라는 검색어를 전달합니다."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"AgentExecutor"}),"는 LLM이 선택한 tool과 그 입력 값을 바탕으로 ",(0,r.jsx)(t.code,{children:"GoogleCustomSearch"}),"를 선택하여 검색 요청을 하고 그 결과를 받습니다.\n검색 결과는 ",(0,r.jsx)(t.code,{children:"ZeroShotAgent"}),"에서 다룬 프롬프트 패턴에 맞추어 다시 OpenAI LLM에 전달하여 다음 action을 선택하도록 프롬프트를 전달합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["최종적으로는 ",(0,r.jsx)(t.code,{children:"Calculator"}),"에 연산에 필요한 입력 ",(0,r.jsx)(t.code,{children:"36 ^ 0.23"}),"을 전달합니다. 즉 LLM은 구글 검색 결과를 기반으로 Olivia Wilde의 남자친구의 나이가 36임을 알아내고 ",(0,r.jsx)(t.code,{children:"0.23"})," 승수의 답을 얻어낼 수 있는 계산식을 만들어 냅니다."]}),"\n",(0,r.jsx)(t.h1,{children:"마치며"}),"\n",(0,r.jsx)(t.p,{children:"langchain js의 예제를 분석하면서 model, prompt, indexing, memory, chain, agent 등의 개념을 살펴 보았습니다.\n전반적으로 문제 해결의 정답을 찾는다기 보다는 LLM 활용을 위한 에코시스템을 적절히 추상화하고 확장 가능하도록 설계한 것으로 보입니다.\n아직 다듬어지지 않은 개념과 시도로 인해 코드가 다소 복잡하고 때론 모호하게 느껴질 때도 있었고 그만큼 고민과 삽질(?)의 흔적이 보였습니다."}),"\n",(0,r.jsx)(t.p,{children:"결과적으로는 langchain의 역할은 크게 2가지 인 것 같습니다."}),"\n",(0,r.jsx)(t.h2,{children:"프롬프트 엔지니러링 툴"}),"\n",(0,r.jsx)(t.p,{children:"지금까지 살펴 보았듯이, langchain 추상화는 prompt 템플릿을 만들고 그 응답을 적절히 파싱하는데 기반하고 있습니다."}),"\n",(0,r.jsx)(t.p,{children:"복잡도가 높은 작업들은 특정 prompt 템플릿을 기반으로 질문하고, 다시 prompt 템플릿에 그 질문에 대한 답을 붙여 질문하고를 반복하는 것을 알 수 있습니다.\nchain은 이러한 작업들의 추상화 개념이고 LLM만으로 처리할 수 없는 다양한 작업을 tool을 통해 추상화 하여 agent로 이를 처리하도록 설계하였습니다."}),"\n",(0,r.jsx)(t.h2,{children:"Vector DB 연동"}),"\n",(0,r.jsx)(t.p,{children:"Foundation 모델로서 LLM은 기존 상태 의존 없이 질의를 할 수 있습니다.\n하지만 개개인의 실생활에 밀접한 문제해결을 위해서는 개인화한 데이터와 컨텍스트를 유지하고 질의할 필요가 있습니다.\nFoundation 모델은 일종의 CPU로서 사용하고 각 사용자에 특화된 데이터를 저장하는 indexing 추상화 레벨을 제공합니다."}),"\n",(0,r.jsx)(t.p,{children:"indexing은 각 LLM에서 가지고 있는 embedding 구현에 따라 일반적인 거리 연산이 가능한 vector 값으로 저장하는 추상화 레벨입니다."}),"\n",(0,r.jsx)(t.p,{children:"langchain은 다양한 vector store 구현체와 연동할 수 있는 인터페이스를 제공합니다."}),"\n",(0,r.jsx)(t.h2,{children:"맺음말"}),"\n",(0,r.jsx)(t.p,{children:"SF 영화 처럼 실생활에서 정답을 말해주고 추천해주는 foundation model은 당장은 힘들지도 모릅니다."}),"\n",(0,r.jsx)(t.p,{children:"반면 여러 분야에 특화된 인공지능을 개발하기 위해서는 전문인력과 자원이 필요했습니다.\n현 수준의 foundation model은 특화된 데이터와 아이디어를 가지고 국부적인 문제를 해결할 수 있는 AI를 손쉽게 구현할 수 있습니다.\n다시말해 질문의 답을 어떻게 찾을 것인가가 아닌 질문 그 자체의 아이디어만 가지고 문제해결이 가능한 방법이 생긴 것 입니다."}),"\n",(0,r.jsx)(t.p,{children:"langchain은 이러한 미션을 해결해 줄 수 있는 오픈소스 에코시스템을 제시하고 있습니다.\n그리고 스타트업에서 부터 엔터프라이즈까지 다양한 분야의 데이터와 문제해결을 위해 LLM을 활용하고자 한다면 단연 langchain이 첫번째 검토 대상이 될 것입니다."}),"\n",(0,r.jsx)(t.p,{children:"최근 OpenAPI 4의 API 사용이 GA 단계로 접어들었다고 합니다.\n앞으로도 이 분야에서 재미있고 설례는 소식을 기대해 봅니다."})]})}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})})}},49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(18153),i=n(77328),o=n.n(i),l=n(14232);let a=l.memo(()=>(0,r.Y)(r.FK,{}));var s=n(71745),c=n(48230),u=n.n(c);let d=[{link:"/",text:"Home"}],p=l.memo(()=>{let e=(0,s.useRouter)(),[t,n]=l.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(u(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:d.map(t=>{let{link:n,text:i}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(u(),{legacyBehavior:!0,className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:i})},n)})})})]})]})}),h=l.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(o(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(p,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(a,{})]})})},56486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.identifierTypes=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}(n(14232)),i=function(e){return e&&e.__esModule?e:{default:e}}(n(95062));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=["pathname","url","title","og:title","issue-number","issue-term"],c=function(e,t,n){if(0>s.indexOf(e))return void console.warn("Wrong type: "+e);if("pathname"===e)return"pathname";if("url"===e)return"url";if("title"===e)return"title";if("og:title"===e)return"og:title";if("issue-term"===e)return t;else if("issue-number"===e)return n},u=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(e){var t,i;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return(t=(i=l(n).call(this,e))&&("object"===o(i)||"function"==typeof i)?i:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).myRef=r.default.createRef(),t.state={pending:!0},t}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&a(n,e),t=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.repo,r=t.type,i=t.specificTerm,o=t.issueNumber,l=0>s.indexOf(r)?void console.warn("Wrong type: "+r):"issue-number"===r?"issue-number":"issue-term",a=c(r,i,o);if("issue-term"===r&&!a)return void console.warn("When type is '".concat(r,"', 'specificTerm' prop must be provided"));if("issue-number"===r&&(isNaN(a)||a<1))return void console.warn("When type is '".concat(r,"', valid 'issueNumber' prop must be provided"));var u=document.createElement("script");u.src="https://utteranc.es/client.js",u.async=!0,u.setAttribute("repo",n),u.setAttribute("crossorigin","anonymous"),u.setAttribute(l,a),u.onload=function(){return e.setState({pending:!1})},this.myRef.current.appendChild(u)}},{key:"render",value:function(){return r.default.createElement("div",{className:"react-utterences",ref:this.myRef},this.props.debug&&r.default.createElement("pre",{style:{background:"#cccccc",padding:10}},"\nthis.props: ".concat(JSON.stringify(this.props,null,2),'\nlocation.pathname: "').concat(window.location.pathname,'"\nlocation.href: "').concat(window.location.href,'"\n          ').trim()),this.props.debug&&r.default.createElement("div",null,"\uD83D\uDC47\uD83D\uDC47If the settings are valid, the comment widget appear below\uD83D\uDC47\uD83D\uDC47"),this.state.pending&&r.default.createElement("div",null,"Loading script..."))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(r.Component);t.identifierTypes={pathname:{attrValue:"",summary:"Issue title contains page pathname"},url:{attrValue:"url",summary:"Issue title contains page URL"},title:{attrValue:"title",summary:"Issue title contains page title"},"og:title":{attrValue:"og:title",summary:"Issue title contains page og:title"},"issue-number":{attrValue:-1,summary:"Specific issue number"},"issue-term":{attrValue:"",summary:"Issue title contains specific term"}},u.propTypes={type:i.default.string.isRequired,repo:i.default.string.isRequired,specificTerm:i.default.string,issueNumber:i.default.number,hashKey:i.default.string,debug:i.default.bool},t.default=u},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>a,j:()=>l});var r=n(18153),i=n(14232);let o=i.createContext({});function l(e){let{staticProps:t,children:n}=e;return(0,r.Y)(o.Provider,{value:t,children:n})}function a(){return i.useContext(o)}},79706:(e,t,n)=>{"use strict";var r=n(3717);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,l){if(l!==r){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(18153);n(14232);let i=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},86089:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return r.default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}(n(56486))},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(18153),i=n(73146),o=n.n(i),l=n(14232),a=n(86089),s=n(60158),c=n(85419),u=n(49034);function d(e){let{children:t,meta:n,staticProps:i}=e;return l.useEffect(()=>{o().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(u.A,{title:n.title,children:[(0,r.Y)(c.A,{meta:n,isBlogPost:!0}),(0,r.Y)(s.j,{staticProps:i,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(a.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}},95062:(e,t,n)=>{e.exports=n(79706)()}},e=>{e.O(0,[5695,636,6593,8792],()=>e(e.s=39064)),_N_E=e.O()}]);
//# sourceMappingURL=2023-07-15-langchainjs-part-3-e1086509992625db.js.map