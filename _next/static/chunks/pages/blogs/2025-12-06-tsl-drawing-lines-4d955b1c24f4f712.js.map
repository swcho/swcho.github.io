{"version":3,"file":"static/chunks/pages/blogs/2025-12-06-tsl-drawing-lines-4d955b1c24f4f712.js","mappings":"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","sources":["webpack://_N_E/./pages/blogs/2025-12-06-tsl-drawing-lines/src/App01.tsx","webpack://_N_E/./pages/blogs/2025-12-06-tsl-drawing-lines/src/App02.tsx","webpack://_N_E/./pages/blogs/2025-12-06-tsl-drawing-lines/src/App03.tsx","webpack://_N_E/./pages/blogs/2025-12-06-tsl-drawing-lines/src/App04.tsx","webpack://_N_E/./pages/blogs/2025-12-06-tsl-drawing-lines/index.page.mdx","webpack://_N_E/?878b"],"sourcesContent":["import { TslDebug } from '@/components/TslDebug';\nimport TslDebugArea from '@/components/TslDebugArea';\nimport WebGpuCanvas from '@/components/WebGpuCanvas';\nimport { OrbitControls, PerspectiveCamera } from '@react-three/drei';\nimport * as React from 'react';\nimport { positionLocal } from 'three/tsl';\n\nexport type Props = {};\n\nfunction App01(props: Props) {\n  const {} = props;\n  const fragmentNode = React.useMemo(() => {\n    const p = positionLocal;\n    const radius = 0.5;\n    const circle = p.x\n      .mul(p.x)\n      .add(p.y.mul(p.y))\n      .sub(radius * radius)\n      .abs()\n      .step(0.01);\n    const line = circle;\n    return line;\n  }, []);\n  return (\n    <TslDebugArea style={{ backgroundColor: 'black' }}>\n      {(el) => (\n        <WebGpuCanvas>\n          <PerspectiveCamera\n            makeDefault\n            fov={53}\n            aspect={el.clientWidth / el.clientHeight}\n            near={0.1}\n            far={10}\n            position={[0, 0, 1]}\n          />\n          <mesh name=\"node-mesh\">\n            <planeGeometry args={[5, 5]} />\n            <nodeMaterial fragmentNode={fragmentNode} />\n            <TslDebug meshName={'node-mesh'} />\n          </mesh>\n          <gridHelper rotation={[-Math.PI / 2, 0, 0]} />\n          <axesHelper />\n          <OrbitControls />\n        </WebGpuCanvas>\n      )}\n    </TslDebugArea>\n  );\n}\n\nexport default React.memo(App01);\n","import { TslDebug } from '@/components/TslDebug';\nimport TslDebugArea from '@/components/TslDebugArea';\nimport WebGpuCanvas from '@/components/WebGpuCanvas';\nimport { OrbitControls, PerspectiveCamera } from '@react-three/drei';\nimport * as React from 'react';\nimport { Fn, positionLocal, length, abs, smoothstep, vec2 } from 'three/tsl';\n\nexport type Props = {};\n\nconst Circle = Fn(([p, r, t]: [p: typeof positionLocal, radius: number, thickness: number]) => {\n  const distance = length(p).sub(r);\n  return smoothstep(t, 0.0, abs(distance));\n});\n\nfunction App02(props: Props) {\n  const {} = props;\n  const fragmentNode = React.useMemo(() => {\n    const p = positionLocal;\n    const radius = 0.1;\n    const thickness = 0.01;\n    const circleOffset = vec2(-0.33, 0.33);\n    const circle = Circle(p.sub(circleOffset), radius, thickness);\n    return circle;\n  }, []);\n  return (\n    <TslDebugArea style={{ backgroundColor: 'black' }}>\n      {(el) => (\n        <WebGpuCanvas>\n          <PerspectiveCamera\n            makeDefault\n            fov={53}\n            aspect={el.clientWidth / el.clientHeight}\n            near={0.1}\n            far={10}\n            position={[0, 0, 1]}\n          />\n          <mesh name=\"node-mesh\">\n            <planeGeometry args={[5, 5]} />\n            <nodeMaterial fragmentNode={fragmentNode} />\n            <TslDebug meshName={'node-mesh'} />\n          </mesh>\n          <gridHelper rotation={[-Math.PI / 2, 0, 0]} />\n          <axesHelper />\n          <OrbitControls />\n        </WebGpuCanvas>\n      )}\n    </TslDebugArea>\n  );\n}\n\nexport default React.memo(App02);\n","import { TslDebug } from '@/components/TslDebug';\nimport TslDebugArea from '@/components/TslDebugArea';\nimport WebGpuCanvas from '@/components/WebGpuCanvas';\nimport { OrbitControls, PerspectiveCamera } from '@react-three/drei';\nimport * as React from 'react';\nimport { Fn, positionLocal, length, abs, smoothstep, vec2, time, cos, sin, mix, vec3 } from 'three/tsl';\nimport { JoinNode } from 'three/webgpu';\n\nexport type Props = {};\n\nconst Circle = Fn(([p, r, t]: [p: typeof positionLocal, radius: number, thickness: number]) => {\n  const distance = length(p).sub(r);\n  return smoothstep(t, 0.0, abs(distance));\n});\n\nconst Line = Fn(\n  ([p, dir, distance, t]: [p: typeof positionLocal, direction: JoinNode, distance: number, thickness: number]) => {\n    const projected = p.dot(dir);\n    const clampledProjection = projected.clamp(0.0, distance);\n    // return clampledProjection;\n    // return mix(\n    //   smoothstep(t, 0.0, length(projected.mul(dir))),\n    //   vec3(1, 0, 0),\n    //   smoothstep(t, 0.0, length(p.sub(clampledProjection.mul(dir))))\n    // );\n    return smoothstep(t, 0.0, length(p.sub(clampledProjection.mul(dir))));\n  }\n);\n\nfunction App03(props: Props) {\n  const {} = props;\n  const fragmentNode = React.useMemo(() => {\n    const p = positionLocal;\n    const radius = 0.1;\n    const thickness = 0.01;\n    const circleOffset = vec2(-0.33, 0.33);\n    const circleCenter = p.sub(circleOffset);\n    const circle = Circle(circleCenter, radius, thickness);\n\n    const angle = time;\n    const direction = vec2(cos(angle), sin(angle));\n    const radiusLine = Line(circleCenter, direction, radius, thickness);\n\n    return mix(circle, vec3(1, 0, 0), radiusLine);\n  }, []);\n  return (\n    <TslDebugArea style={{ backgroundColor: 'black' }}>\n      {(el) => (\n        <WebGpuCanvas>\n          <PerspectiveCamera\n            makeDefault\n            fov={53}\n            aspect={el.clientWidth / el.clientHeight}\n            near={0.1}\n            far={10}\n            position={[0, 0, 1]}\n          />\n          <mesh name=\"node-mesh\">\n            <planeGeometry args={[5, 5]} />\n            <nodeMaterial fragmentNode={fragmentNode} />\n            <TslDebug meshName={'node-mesh'} />\n          </mesh>\n          <gridHelper rotation={[-Math.PI / 2, 0, 0]} />\n          <axesHelper />\n          <OrbitControls />\n        </WebGpuCanvas>\n      )}\n    </TslDebugArea>\n  );\n}\n\nexport default React.memo(App03);\n","import { TslDebug } from '@/components/TslDebug';\nimport TslDebugArea from '@/components/TslDebugArea';\nimport WebGpuCanvas from '@/components/WebGpuCanvas';\nimport { OrbitControls, PerspectiveCamera } from '@react-three/drei';\nimport * as React from 'react';\nimport {\n  Fn,\n  positionLocal,\n  length,\n  abs,\n  smoothstep,\n  vec2,\n  time,\n  cos,\n  sin,\n  mix,\n  vec3,\n  step,\n  negate,\n  mod,\n} from 'three/tsl';\nimport { JoinNode } from 'three/webgpu';\n\nexport type Props = {};\n\nconst Circle = Fn(([p, r, t]: [p: typeof positionLocal, radius: number, thickness: number]) => {\n  const distance = length(p).sub(r);\n  return smoothstep(t, 0.0, abs(distance));\n});\n\nconst Line = Fn(\n  ([p, dir, distance, t]: [p: typeof positionLocal, direction: JoinNode, distance: number, thickness: number]) => {\n    const projected = p.dot(dir);\n    const clampledProjection = projected.clamp(0.0, distance);\n    // return clampledProjection;\n    // return mix(\n    //   smoothstep(t, 0.0, length(projected.mul(dir))),\n    //   vec3(1, 0, 0),\n    //   smoothstep(t, 0.0, length(p.sub(clampledProjection.mul(dir))))\n    // );\n    return smoothstep(t, 0.0, length(p.sub(clampledProjection.mul(dir))));\n  }\n);\n\nfunction App04(props: Props) {\n  const {} = props;\n  const fragmentNode = React.useMemo(\n    () =>\n      Fn(() => {\n        const p = positionLocal;\n        const radius = 0.1;\n        const thickness = 0.01;\n        const circleOffset = vec2(-0.33, 0.33);\n        const circleCenter = p.sub(circleOffset);\n        const circle = Circle(circleCenter, radius, thickness);\n\n        const angle = time;\n        const direction = vec2(cos(angle), sin(angle));\n        const radiusLine = Line(circleCenter, direction, radius, thickness);\n        const radiusEndPosition = direction.mul(radius);\n        const frequency = Math.PI * 2;\n        const sinWave = smoothstep(\n          thickness,\n          0.0,\n          abs(p.y.sub(circleOffset.y).sub(sin(p.x.mul(frequency).sub(time).sub(Math.PI)).mul(radius)))\n        ); // offset it\n        sinWave.assign(step(0, p.x).mul(sinWave)); // draw only part of it right of p.x = 0\n        const cosWave = smoothstep(\n          thickness,\n          0,\n          abs(p.x.sub(circleOffset.x).sub(cos(p.y.mul(frequency).add(time)).mul(radius)))\n        );\n        cosWave.assign(step(p.y, 0).mul(cosWave)); // draw only part of it above p.y = 0\n\n        const sineReferenceLine = Line(\n          p.sub(circleOffset).sub(radiusEndPosition),\n          vec2(1, 0),\n          negate(radiusEndPosition.x).sub(circleOffset.x),\n          thickness\n        );\n        const cosineReferenceLine = Line(\n          p.sub(circleOffset).sub(radiusEndPosition),\n          vec2(0, -1),\n          radiusEndPosition.y.add(circleOffset.y),\n          thickness\n        );\n        const dottedSineReferenceLine = sineReferenceLine.mul(step(0.5, mod(p.x.mul(10), 1)));\n        const dottedCosineReferenceLine = cosineReferenceLine.mul(step(0.5, mod(p.y.mul(10), 1)));\n\n        const finalColor = mix(circle, vec3(1, 0, 0), radiusLine);\n        finalColor.assign(mix(finalColor, vec3(0, 1, 0), sinWave));\n        finalColor.assign(mix(finalColor, vec3(0, 1, 0), cosWave));\n        finalColor.assign(mix(finalColor, vec3(1, 1, 0), dottedSineReferenceLine));\n        finalColor.assign(mix(finalColor, vec3(1, 1, 0), dottedCosineReferenceLine));\n        return finalColor;\n      }),\n    []\n  );\n  return (\n    <TslDebugArea style={{ backgroundColor: 'black' }}>\n      {(el) => (\n        <WebGpuCanvas>\n          <PerspectiveCamera\n            makeDefault\n            fov={53}\n            aspect={el.clientWidth / el.clientHeight}\n            near={0.1}\n            far={10}\n            position={[0, 0, 1]}\n          />\n          <mesh name=\"node-mesh\">\n            <planeGeometry args={[5, 5]} />\n            <nodeMaterial fragmentNode={fragmentNode()} />\n            <TslDebug meshName={'node-mesh'} />\n          </mesh>\n          <gridHelper rotation={[-Math.PI / 2, 0, 0]} />\n          <axesHelper />\n          <OrbitControls />\n        </WebGpuCanvas>\n      )}\n    </TslDebugArea>\n  );\n}\n\nexport default React.memo(App04);\n",null,"\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/blogs/2025-12-06-tsl-drawing-lines\",\n      function () {\n        return require(\"private-next-pages/blogs/2025-12-06-tsl-drawing-lines/index.page.mdx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/blogs/2025-12-06-tsl-drawing-lines\"])\n      });\n    }\n  "],"names":["React","App01","props","fragmentNode","p","positionLocal","line","x","mul","add","y","sub","radius","abs","step","TslDebugArea","style","backgroundColor","WebGpuCanvas","PerspectiveCamera","makeDefault","fov","aspect","el","clientWidth","clientHeight","near","far","position","mesh","name","planeGeometry","args","nodeMaterial","TslDebug","meshName","gridHelper","rotation","Math","PI","axesHelper","OrbitControls","Circle","Fn","r","t","distance","length","smoothstep","App02","circleOffset","vec2","thickness","Line","dir","clampledProjection","dot","clamp","App03","circleCenter","circle","time","radiusLine","cos","direction","angle","sin","mix","vec3","App04","radiusEndPosition","frequency","sinWave","assign","cosWave","sineReferenceLine","negate","cosineReferenceLine","dottedSineReferenceLine","mod","dottedCosineReferenceLine","finalColor","meta","title","description","date","readTime","children","BlogPost"],"sourceRoot":"","ignoreList":[]}