(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{49034:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(18153),a=n(77328),l=n.n(a),i=n(14232);let s=i.memo(()=>(0,r.Y)(r.FK,{}));var c=n(71745),o=n(48230),h=n.n(o);let d=[{link:"/",text:"Home"}],m=i.memo(()=>{let e=(0,c.useRouter)(),[t,n]=i.useState(!1);return(0,r.FD)("nav",{className:"w-full",children:[(0,r.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,r.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,r.Y)("div",{className:"pl-4",children:(0,r.Y)(h(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,r.Y)("div",{className:"block pr-4 lg:hidden",children:(0,r.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>n(!t),onBlur:()=>n(!1),children:(0,r.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("title",{children:"Menu"}),(0,r.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,r.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,r.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:d.map(t=>{let{link:n,text:a}=t;return(0,r.Y)("li",{className:"mr-3",children:(0,r.Y)(h(),{legacyBehavior:!0,className:e.pathname===n?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:n,children:a})},n)})})})]})]})}),p=i.memo(e=>{let{children:t,title:n="This is the default title"}=e;return(0,r.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,r.FD)(l(),{children:[(0,r.Y)("title",{children:n}),(0,r.Y)("meta",{charSet:"utf-8"}),(0,r.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.Y)(m,{}),(0,r.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,r.Y)(s,{})]})})},50476:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2024-06-09-react-three-fiber-2-spherical-word-cloud",function(){return n(53931)}])},53931:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v,meta:()=>j});var r=n(37876),a=n(91668),l=n(91013),i=n(18153),s=n(31861),c=n(14796),o=n(92015),h=n(33191),d=n(47078),m=n(71804),p=n(45302),x=n(14232);function u(e){let{children:t,...n}=e,r=new c.Color,[a,l]=x.useState(!1);x.useEffect(()=>(a&&(document.body.style.cursor="pointer"),()=>{document.body.style.cursor="auto"}));let s=x.useRef(null);return(0,m.D)(()=>{let e=s.current;null==e||e.material.color.lerp(r.set(a?"#fa2720":"white"),.1)}),(0,i.Y)(o.Q,{...n,children:(0,i.Y)(h.E,{ref:s,fontSize:2.5,letterSpacing:-.05,lineHeight:1,onPointerOver:e=>{e.stopPropagation(),l(!0)},onPointerOut:()=>{l(!1)},children:t})})}function g(e){let{count:t,radius:n}=e;return x.useMemo(()=>{let e=[],r=new c.Spherical,a=Math.PI/(t+1),l=2*Math.PI/t;for(let i=1;i<t+1;i+=1)for(let s=0;s<t;s+=1){let t=a*i,o=l*s;e.push([new c.Vector3().setFromSpherical(r.set(n,t,o)),"phi: ".concat(t.toFixed(2),", theta: ").concat(o.toFixed(2))])}return e},[t,n]).map((e,t)=>{let[n,r]=e;return(0,i.Y)(u,{position:n,children:r},t)})}let f=x.memo(function(e){let{}=e,{count:t,radius:n,rotation:r}=(0,s._5)({count:8,radius:20,rotation:{x:10,y:10.5,z:10}});return(0,i.FD)(p.Hl,{style:{height:"300px",backgroundColor:"#202025"},dpr:[1,2],camera:{position:[0,0,35],fov:90},children:[(0,i.Y)("fog",{attach:"fog",args:["#202025",0,80]}),(0,i.Y)(x.Suspense,{fallback:null,children:(0,i.Y)("group",{rotation:[r.x,r.y,r.z],children:(0,i.Y)(g,{count:t,radius:n})})}),(0,i.Y)(d.V,{})]})}),j={title:"react-three-fiber: Spherical word-cloud 분석",description:"react-three-fiber를 사용한 3차원 워드 클라우드 예제를 살펴 봅니다.",date:"2024-06-09",readTime:5},w=e=>{let{children:t}=e;return(0,r.jsx)(l.A,{meta:j,children:t})};function b(e){let t={a:"a",annotation:"annotation",code:"code",h1:"h1",math:"math",mi:"mi",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"소개"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"react-three-fiber"}),"를 사용한 3차원 워드 클라우드 예제를 살펴 봅니다."]}),"\n",(0,r.jsx)("iframe",{style:{width:"100%",height:900,outline:"1px solid #252525",border:0,borderRadius:8,marginBottom:16,zIndex:100},src:"https://codesandbox.io/p/sandbox/spherical-word-cloud-yup2o?file=%2Fsrc%2FApp.js%3A8%2C34"}),"\n",(0,r.jsx)(t.h1,{children:"Spherical word-cloud"}),"\n",(0,r.jsx)(f,{}),"\n",(0,r.jsx)(t.p,{children:"3차원 word cloud를 구성하기 위해서는 먼저 각 단어의 위치를 3차원 공간상에서 어떻게 배치할 것인지 고민해야 합니다."}),"\n",(0,r.jsxs)(t.p,{children:["먼저 three.js의 ",(0,r.jsx)(t.a,{href:"https://threejs.org/docs/api/en/math/Spherical.html",children:(0,r.jsx)(t.code,{children:"Spherical"})})," 객체 즉 ",(0,r.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Spherical_coordinate_system",children:"Spherical coordinate system - Wikipedia"}),"에 대한 이해가 필요합니다.\nx, y, z라는 3차원 평면의 위치를 지정하는 방식 대신, 반지름(radius, r), z축으로부터 각(",(0,r.jsxs)(t.span,{className:"katex",children:[(0,r.jsx)(t.span,{className:"katex-mathml",children:(0,r.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(t.semantics,{children:[(0,r.jsx)(t.mrow,{children:(0,r.jsx)(t.mi,{children:"ϕ"})}),(0,r.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\phi"})]})})}),(0,r.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(t.span,{className:"base",children:[(0,r.jsx)(t.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,r.jsx)(t.span,{className:"mord mathnormal",children:"ϕ"})]})})]}),"), x축으로부터 각(",(0,r.jsxs)(t.span,{className:"katex",children:[(0,r.jsx)(t.span,{className:"katex-mathml",children:(0,r.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(t.semantics,{children:[(0,r.jsx)(t.mrow,{children:(0,r.jsx)(t.mi,{children:"θ"})}),(0,r.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\theta"})]})})}),(0,r.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(t.span,{className:"base",children:[(0,r.jsx)(t.span,{className:"strut",style:{height:"0.6944em"}}),(0,r.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"θ"})]})})]}),")을 사용하는 구면좌표계를 사용합니다."]}),"\n",(0,r.jsxs)(t.p,{children:["예제에서는 ",(0,r.jsx)(t.code,{children:"count"}),"라는 값으로 단어의 phi, theta 값을 결정합니다. 지도로 치면 각각 위도와 경도가 되겠네요.\nphi는 위도 이기 때문에 0~180도의 값을 가지고, theta는 0~360도의 값을 가집니다.\n실제 단위는 radian을 사용하기 때문에 각각 아래와 같은 수식으로 간격을 구합니다."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const phiSpan = Math.PI / (count + 1);\nconst thetaSpan = (Math.PI * 2) / count;\n"})}),"\n",(0,r.jsx)(t.p,{children:"본 글에는 이해를 돕도록 random word 대신 phi, theta 값을 표시하였습니다."}),"\n",(0,r.jsxs)(t.p,{children:["drei의 ",(0,r.jsx)(t.code,{children:"Billboard"})," 컴포넌트를 사용하여 항상 카메라를 바라보는 평면을 만들어 ",(0,r.jsx)(t.code,{children:"Text"}),"를 배치합니다."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"Text"})," 객체의 hover 시 색 변화를 위해 ",(0,r.jsx)(t.code,{children:"useFrame"}),"을 사용하여 각 frame 별로 lerp 0.1을 적용하여 색 변화 에니메이션을 적용하고 있습니다."]})]})}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(w,{...e,children:(0,r.jsx)(b,{...e})})}},60158:(e,t,n)=>{"use strict";n.d(t,{J:()=>s,j:()=>i});var r=n(18153),a=n(14232);let l=a.createContext({});function i(e){let{staticProps:t,children:n}=e;return(0,r.Y)(l.Provider,{value:t,children:n})}function s(){return a.useContext(l)}},85419:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(18153);n(14232);let a=e=>{let{meta:t,isBlogPost:n}=e;return(0,r.FD)(r.FK,{children:[(0,r.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(n?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,r.FD)("div",{className:"details",children:[(0,r.Y)("p",{className:"text-gray-500",children:t.description}),(0,r.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,r.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(18153),a=n(73146),l=n.n(a),i=n(14232),s=n(86089),c=n(60158),o=n(85419),h=n(49034);function d(e){let{children:t,meta:n,staticProps:a}=e;return i.useEffect(()=>{l().highlightAll()},[]),(0,r.Y)(r.FK,{children:(0,r.FD)(h.A,{title:n.title,children:[(0,r.Y)(o.A,{meta:n,isBlogPost:!0}),(0,r.Y)(c.j,{staticProps:a,children:(0,r.Y)("article",{className:"markdown",children:t})}),(0,r.Y)(s.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[7391,683,5037,5695,5302,41,5003,1861,6504,636,6593,8792],()=>e(e.s=50476)),_N_E=e.O()}]);
//# sourceMappingURL=2024-06-09-react-three-fiber-2-spherical-word-cloud-b9b54657bf328aa5.js.map