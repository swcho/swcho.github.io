
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>데이터 준비 정리 | SwForge&#39;s Note</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="SwForge">
    

    
    <meta name="description" content="http://michael.hahsler.net/SMU/EMIS7332/http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html
Preparation1data(iris)
데이터를 읽어옴
1head(iris)
데이터 앞부분만 보여줌1str(iris)
구조 표시
Data Quality1plot(iris, col=iris$S">
<meta property="og:type" content="article">
<meta property="og:title" content="데이터 준비 정리">
<meta property="og:url" content="http://yoursite.com/2016/03/16/data-mining/index.html">
<meta property="og:site_name" content="SwForge's Note">
<meta property="og:description" content="http://michael.hahsler.net/SMU/EMIS7332/http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html
Preparation1data(iris)
데이터를 읽어옴
1head(iris)
데이터 앞부분만 보여줌1str(iris)
구조 표시
Data Quality1plot(iris, col=iris$S">
<meta property="og:image" content="http://yoursite.com/2016/03/16/data-mining/fig1.png">
<meta property="og:image" content="http://yoursite.com/2016/03/16/data-mining/fig2.png">
<meta property="og:image" content="http://yoursite.com/2016/03/16/data-mining/Correlation_examples2.svg">
<meta property="og:image" content="http://yoursite.com/2016/03/16/data-mining/correlation_01.png">
<meta property="og:image" content="http://yoursite.com/2016/03/16/data-mining/correlation_02.png">
<meta property="og:updated_time" content="2016-03-29T12:27:10.659Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="데이터 준비 정리">
<meta name="twitter:description" content="http://michael.hahsler.net/SMU/EMIS7332/http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html
Preparation1data(iris)
데이터를 읽어옴
1head(iris)
데이터 앞부분만 보여줌1str(iris)
구조 표시
Data Quality1plot(iris, col=iris$S">
<meta name="twitter:image" content="http://yoursite.com/2016/03/16/data-mining/fig1.png">

    
    <link rel="alternative" href="/atom.xml" title="SwForge&#39;s Note" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="SwForge&#39;s Note" title="SwForge&#39;s Note"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="SwForge&#39;s Note">SwForge&#39;s Note</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/03/16/data-mining/" title="데이터 준비 정리" itemprop="url">데이터 준비 정리</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SwForge" target="_blank" itemprop="author">SwForge</a>
		
  <p class="article-time">
    <time datetime="2016-03-16T11:23:37.000Z" itemprop="datePublished"> Published 2016-03-16</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Preparation"><span class="toc-number">1.</span> <span class="toc-text">Preparation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Data-Quality"><span class="toc-number">2.</span> <span class="toc-text">Data Quality</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Aggregation"><span class="toc-number">3.</span> <span class="toc-text">Aggregation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Sampling"><span class="toc-number">4.</span> <span class="toc-text">Sampling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Random-sampling"><span class="toc-number">4.1.</span> <span class="toc-text">Random sampling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stratified-sampling-층화-추출법"><span class="toc-number">4.2.</span> <span class="toc-text">Stratified sampling (층화 추출법)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Features"><span class="toc-number">5.</span> <span class="toc-text">Features</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dimensionality-reduciton-Principal-Components-Analysis-PCA-주성분-분석"><span class="toc-number">5.1.</span> <span class="toc-text">Dimensionality reduciton (Principal Components Analysis - PCA, 주성분 분석)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Feature-selection"><span class="toc-number">5.2.</span> <span class="toc-text">Feature selection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Discretrize-features"><span class="toc-number">5.3.</span> <span class="toc-text">Discretrize features</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Standardize-data-Z-score"><span class="toc-number">5.4.</span> <span class="toc-text">Standardize data (Z-score)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Proximities-Similarities-and-distances"><span class="toc-number">6.</span> <span class="toc-text">Proximities: Similarities and distances</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Minkovsky-distances"><span class="toc-number">6.1.</span> <span class="toc-text">Minkovsky distances</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Distances-for-binary-data-Jaccard-and-Hamming"><span class="toc-number">6.2.</span> <span class="toc-text">Distances for binary data (Jaccard and Hamming)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gower’s-distance"><span class="toc-number">6.3.</span> <span class="toc-text">Gower’s distance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Additional-proximity-measures-available-in-package-proxy"><span class="toc-number">6.4.</span> <span class="toc-text">Additional proximity measures available in package proxy</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Relationship-between-features"><span class="toc-number">7.</span> <span class="toc-text">Relationship between features</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Correlation-for-ratio-interval-scaled-features"><span class="toc-number">7.1.</span> <span class="toc-text">Correlation (for ratio/interval scaled features)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rank-correlation-for-ordinal-features"><span class="toc-number">7.2.</span> <span class="toc-text">Rank correlation (for ordinal features)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Relationship-between-nominal-and-ordinal-features"><span class="toc-number">7.3.</span> <span class="toc-text">Relationship between nominal and ordinal features</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Density-estimation"><span class="toc-number">8.</span> <span class="toc-text">Density estimation</span></a></li></ol>
		
		</div>
		
		<p><a href="http://michael.hahsler.net/SMU/EMIS7332/" target="_blank" rel="external">http://michael.hahsler.net/SMU/EMIS7332/</a><br><a href="http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html" target="_blank" rel="external">http://michael.hahsler.net/SMU/EMIS7332/R/chap2.html</a></p>
<h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data(iris)</span><br></pre></td></tr></table></figure>
<p>데이터를 읽어옴</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head(iris)</span><br></pre></td></tr></table></figure>
<p>데이터 앞부분만 보여줌<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str(iris)</span><br></pre></td></tr></table></figure></p>
<p>구조 표시</p>
<h1 id="Data-Quality"><a href="#Data-Quality" class="headerlink" title="Data Quality"></a>Data Quality</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(iris, col=iris$Species)</span><br></pre></td></tr></table></figure>
<p>노이즈나 outlier 확인</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(iris)</span><br></pre></td></tr></table></figure>
<p>숫자일 경우 Min.(최소), 1st Qu.(25% 가 이 값 밑), 3th Qu. (75%가 이 값 밑), median(중간값), mean(평균)<br>문자열일 경우 개수</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">i &lt;- duplicated(iris)</span><br><span class="line">which(i)</span><br><span class="line">iris[i,]</span><br></pre></td></tr></table></figure>
<p>어느 것이 중복 되었는가?</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clean.data &lt;- unique(iris[complete.cases(iris),])</span><br><span class="line">summary(clean.data)</span><br></pre></td></tr></table></figure>
<p>complete.cases (missing value 가 없는가?) unique(중복 제외)</p>
<h1 id="Aggregation"><a href="#Aggregation" class="headerlink" title="Aggregation"></a>Aggregation</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aggregate(. ~ Species, data = iris, FUN = mean)</span><br></pre></td></tr></table></figure>
<p>종끼리 묶은 후, 평균 값</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aggregate(. ~ Species, data = iris, FUN = median)</span><br></pre></td></tr></table></figure>
<p>종끼리 묶은 후, 중간 값</p>
<h1 id="Sampling"><a href="#Sampling" class="headerlink" title="Sampling"></a>Sampling</h1><h2 id="Random-sampling"><a href="#Random-sampling" class="headerlink" title="Random sampling"></a>Random sampling</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id &lt;- sample(<span class="number">1</span>:nrow(iris), <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<p>1부터 nrow (row 개수) 수 사이에서 20 개 unordered 무작위 검출</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s &lt;- iris[id,]</span><br><span class="line">plot(s, col=s$Species)</span><br></pre></td></tr></table></figure>
<p>이렇게 뽑은 인덱스로 데이터를 뽑아서 그리기</p>
<h2 id="Stratified-sampling-층화-추출법"><a href="#Stratified-sampling-층화-추출법" class="headerlink" title="Stratified sampling (층화 추출법)"></a>Stratified sampling (층화 추출법)</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(sampling)</span><br><span class="line">id2 &lt;- strata(iris, stratanames=<span class="string">"Species"</span>, size=c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>), method=<span class="string">"srswor"</span>)</span><br><span class="line">id2</span><br></pre></td></tr></table></figure>
<p>stratanames (층화할 변수들의 vector) size (층화 크기)<br>method</p>
<ul>
<li>simple random sampling without replacement (srswor)</li>
<li>simple random sampling with replacement (srswr)</li>
<li>Poisson sampling (poisson)</li>
<li>systematic sampling (systematic)</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s2 &lt;- iris[id2$ID_unit,]</span><br><span class="line">plot(s2, col=s2$Species)</span><br></pre></td></tr></table></figure>
<p>뽑은 ID로 그림 그리기</p>
<h1 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h1><h2 id="Dimensionality-reduciton-Principal-Components-Analysis-PCA-주성분-분석"><a href="#Dimensionality-reduciton-Principal-Components-Analysis-PCA-주성분-분석" class="headerlink" title="Dimensionality reduciton (Principal Components Analysis - PCA, 주성분 분석)"></a>Dimensionality reduciton (Principal Components Analysis - PCA, 주성분 분석)</h2><p>다양한 관점으로 바라보기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(scatterplot3d)</span><br><span class="line">scatterplot3d(iris[,<span class="number">1</span>:<span class="number">3</span>], color=as.integer(iris$Species))</span><br></pre></td></tr></table></figure></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(rgl)</span><br><span class="line">plot3d(as.matrix(iris[,<span class="number">1</span>:<span class="number">3</span>]), col=as.integer(iris$Species), size=<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(plotly)</span><br><span class="line">plot_ly(iris, x = Sepal.Length, y= Petal.Length, z = Sepal.Width, size = Petal.Width, color = Species, type=<span class="string">"scatter3d"</span>, mode=<span class="string">"markers"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pc &lt;- prcomp(as.matrix(iris[,<span class="number">1</span>:<span class="number">4</span>]))</span><br><span class="line">plot(pc)</span><br><span class="line">plot(pc$x, col=iris$Species) <span class="comment"># plot the first 2 principal components</span></span><br><span class="line">biplot(pc, col = c(<span class="string">"grey"</span>, <span class="string">"red"</span>))</span><br></pre></td></tr></table></figure>
<h2 id="Feature-selection"><a href="#Feature-selection" class="headerlink" title="Feature selection"></a>Feature selection</h2><h2 id="Discretrize-features"><a href="#Discretrize-features" class="headerlink" title="Discretrize features"></a>Discretrize features</h2><p>단일 변수 그리기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(iris$Petal.Width, <span class="number">1</span>:<span class="number">150</span>, ylab=<span class="string">"index"</span>)</span><br></pre></td></tr></table></figure></p>
<p>히스토그램<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist(iris$Petal.Width)</span><br></pre></td></tr></table></figure></p>
<p>3 등분으로 나누기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut(iris$Petal.Width, breaks=<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<p>3 categories 로 나누기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(arules)</span><br><span class="line">plot(discretize(iris$Petal.Width, method=<span class="string">"interval"</span>, categories=<span class="number">3</span>))</span><br><span class="line">plot(discretize(iris$Petal.Width, method=<span class="string">"frequency"</span>, categories=<span class="number">3</span>))</span><br><span class="line">plot(discretize(iris$Petal.Width, method=<span class="string">"cluster"</span>, categories=<span class="number">3</span>))</span><br></pre></td></tr></table></figure></p>
<p>method</p>
<ul>
<li>interval: equal interval width</li>
<li>frequency: equal frequency</li>
<li>cluster: k-means clustering</li>
</ul>
<p>히스토그램과 discretize 결과값 비교<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hist(iris$Petal.Width, main=<span class="string">"Discretization: interval"</span>, sub=<span class="string">"Blue lines are boundaries"</span>)</span><br><span class="line">abline(v=discretize(iris$Petal.Width, method=<span class="string">"interval"</span>, categories=<span class="number">3</span>, onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"blue"</span>)</span><br><span class="line">abline(v=discretize(iris$Petal.Width, method=<span class="string">"cluster"</span>, categories=<span class="number">3</span>, onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"red"</span>)</span><br><span class="line">abline(v=discretize(iris$Petal.Width, method=<span class="string">"frequency"</span>, categories=<span class="number">3</span>, onlycuts=<span class="literal">TRUE</span>), col=<span class="string">"green"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Standardize-data-Z-score"><a href="#Standardize-data-Z-score" class="headerlink" title="Standardize data (Z-score)"></a>Standardize data (Z-score)</h2><blockquote>
<p>참조 전반적인 내용<br><a href="http://www.dataminingblog.com/standardization-vs-normalization/" target="_blank" rel="external">http://www.dataminingblog.com/standardization-vs-normalization/</a></p>
</blockquote>
<p>Normalization: 모든 값을 0, 1 사이로 scaling 한다.<br><img src="/2016/03/16/data-mining/fig1.png" alt="Normalization" title="Normalization"><br>outlier 에 취약</p>
<p>Standardization, z-transformation, 정규화: 평균이 0이 되도록 함, 데이터에서 평균을 뺀 후, 표준편차로 나누기<br><img src="/2016/03/16/data-mining/fig2.png" alt="Standardization" title="Standardization"></p>
<blockquote>
<p>정규화 잘 설명 됨<br><a href="http://adnoctum.tistory.com/184" target="_blank" rel="external">http://adnoctum.tistory.com/184</a></p>
</blockquote>
<p>정규화, 평균을 확인해 보면 0<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iris.scaled &lt;- scale(iris[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line">head(iris.scaled)</span><br><span class="line">summary(iris.scaled)</span><br></pre></td></tr></table></figure></p>
<h1 id="Proximities-Similarities-and-distances"><a href="#Proximities-Similarities-and-distances" class="headerlink" title="Proximities: Similarities and distances"></a>Proximities: Similarities and distances</h1><h2 id="Minkovsky-distances"><a href="#Minkovsky-distances" class="headerlink" title="Minkovsky distances"></a>Minkovsky distances</h2><p>정규화된 값의 앞 5개 뽑기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iris.scaled[<span class="number">1</span>:<span class="number">5</span>,]</span><br></pre></td></tr></table></figure></p>
<p>거리<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dist(iris.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"euclidean"</span>)</span><br><span class="line">dist(iris.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"manhattan"</span>)</span><br><span class="line">dist(iris.scaled[<span class="number">1</span>:<span class="number">5</span>,], method=<span class="string">"maximum"</span>)</span><br></pre></td></tr></table></figure></p>
<p>method<br>the distance measure to be used. This must be one of “euclidean”, “maximum”, “manhattan”, “canberra”, “binary” or “minkowski”. Any unambiguous substring can be given.</p>
<ul>
<li>euclidean: Usual distance between the two vectors (2 norm aka L_2), sqrt(sum((x_i - y_i)^2)).</li>
<li>maximum: Maximum distance between two components of x and y (supremum norm)</li>
<li>manhattan: Absolute distance between the two vectors (1 norm aka L_1).</li>
<li>canberra: sum(|x_i - y_i| / |x_i + y_i|). Terms with zero numerator and denominator are omitted from the sum and treated as if the values were missing.<br>This is intended for non-negative values (e.g., counts): taking the absolute value of the denominator is a 1998 R modification to avoid negative distances.</li>
<li>binary: (aka asymmetric binary): The vectors are regarded as binary bits, so non-zero elements are ‘on’ and zero elements are ‘off’. The distance is the proportion of bits in which only one is on amongst those in which at least one is on.</li>
</ul>
<p>minkowski:<br>The p norm, the pth root of the sum of the pth powers of the differences of the components.</p>
<h2 id="Distances-for-binary-data-Jaccard-and-Hamming"><a href="#Distances-for-binary-data-Jaccard-and-Hamming" class="headerlink" title="Distances for binary data (Jaccard and Hamming)"></a>Distances for binary data (Jaccard and Hamming)</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b &lt;- rbind(</span><br><span class="line">  c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>),</span><br><span class="line">  c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  )</span><br><span class="line">b</span><br><span class="line">dist(b, method=<span class="string">"binary"</span>)</span><br><span class="line">dist(b, method=<span class="string">"manhattan"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Gower’s-distance"><a href="#Gower’s-distance" class="headerlink" title="Gower’s distance"></a>Gower’s distance</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- data.frame(</span><br><span class="line">  height= c(      <span class="number">160</span>,    <span class="number">185</span>,    <span class="number">170</span>),</span><br><span class="line">  weight= c(       <span class="number">52</span>,     <span class="number">90</span>,     <span class="number">75</span>),</span><br><span class="line">  sex=    c( <span class="string">"female"</span>, <span class="string">"male"</span>, <span class="string">"male"</span>)</span><br><span class="line">)</span><br><span class="line">data</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(proxy)</span><br><span class="line">dist(data, method=<span class="string">"Gower"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Additional-proximity-measures-available-in-package-proxy"><a href="#Additional-proximity-measures-available-in-package-proxy" class="headerlink" title="Additional proximity measures available in package proxy"></a>Additional proximity measures available in package proxy</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(proxy)</span><br><span class="line">names(pr_DB$get_entries())</span><br></pre></td></tr></table></figure>
<h1 id="Relationship-between-features"><a href="#Relationship-between-features" class="headerlink" title="Relationship between features"></a>Relationship between features</h1><h2 id="Correlation-for-ratio-interval-scaled-features"><a href="#Correlation-for-ratio-interval-scaled-features" class="headerlink" title="Correlation (for ratio/interval scaled features)"></a>Correlation (for ratio/interval scaled features)</h2><img src="/2016/03/16/data-mining/Correlation_examples2.svg" alt="Correlation Example" title="Correlation Example">
<img src="/2016/03/16/data-mining/correlation_01.png" alt="Correlation" title="Correlation">
<img src="/2016/03/16/data-mining/correlation_02.png" alt="Covariance" title="Covariance">    
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(iris[,<span class="number">1</span>:<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>Correlation between objects (transpose matrix(전치행렬) first)<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cc &lt;- cor(t(iris[,<span class="number">1</span>:<span class="number">4</span>]))</span><br><span class="line">dim(cc)</span><br></pre></td></tr></table></figure></p>
<p>상관관계 표시<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"seriation"</span>) <span class="comment"># for pimage</span></span><br><span class="line">pimage(cc, main = <span class="string">"Correlation between objects"</span>)</span><br></pre></td></tr></table></figure></p>
<p>Convert correlations into a dissimilarities<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d &lt;- as.dist(<span class="number">1</span>-abs(cc))</span><br><span class="line">pimage(d, main = <span class="string">"Dissimilaries between objects"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Rank-correlation-for-ordinal-features"><a href="#Rank-correlation-for-ordinal-features" class="headerlink" title="Rank correlation (for ordinal features)"></a>Rank correlation (for ordinal features)</h2><p>각 컬럼 값(sepal, petal)을 3분위 함<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">iris_ord &lt;- data.frame(</span><br><span class="line">  cut(iris[,<span class="number">1</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  cut(iris[,<span class="number">2</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  cut(iris[,<span class="number">3</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  cut(iris[,<span class="number">4</span>], <span class="number">3</span>, labels=c(<span class="string">"short"</span>, <span class="string">"medium"</span>, <span class="string">"long"</span>), ordered=<span class="literal">T</span>),</span><br><span class="line">  iris[,<span class="number">5</span>])</span><br><span class="line">colnames(iris_ord) &lt;- colnames(iris)</span><br><span class="line">summary(iris_ord)</span><br><span class="line">head(iris_ord$Sepal.Length)</span><br></pre></td></tr></table></figure></p>
<p>Kendall’s tau rank correlation coefficient<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(sapply(iris_ord[,<span class="number">1</span>:<span class="number">4</span>], xtfrm), method=<span class="string">"kendall"</span>)</span><br></pre></td></tr></table></figure></p>
<p>Spearman’s rho<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(sapply(iris_ord[,<span class="number">1</span>:<span class="number">4</span>], xtfrm), method=<span class="string">"spearman"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="Relationship-between-nominal-and-ordinal-features"><a href="#Relationship-between-nominal-and-ordinal-features" class="headerlink" title="Relationship between nominal and ordinal features"></a>Relationship between nominal and ordinal features</h2><blockquote>
<p>nominal scale, 명목 척도<br>부여된 수치의 의미가 분류의 의미를 가질 뿐,가감승제 연산을 사용할 수 없다.<br>ex) 주민등록번호, 우편번호, 운동선수의 등번호, 지역구분(서울 1, 경기 2, 등) 등</p>
<p>ordinal scale, 서열 척도<br>서열척도(ordinal scale)는 측정 대상의 분류뿐만 아니라 측정대상을 크기에 따라 순서적으로 배열할 수 있는 측정방법<br>그러나 서열척도는 ‘크기의 정도’를 알 수 없다. 즉 ‘어느 정도 잘했는가’혹은 ‘얼마나 더 선호하는가’와 같은 정보를 제공하지는 않는다. 따라서 가감승제 연산을 사용할 수 없다.<br>ex) 학업석차, 결승점에 도달한 경주마의 순위, 사회계층(상류층, 중류층, 하류층) 등</p>
<p>interval scale, 등간 척도<br>명목척도와 서열척도의 특성을 모두 갖고 있으면서 ‘크기의 정도’를 말할 수 있는 측정척도<br>ex) 온도</p>
<p>ratio scale, 비율 척도<br>가장 포괄적인 정보를 제공하는 최상위 수준의 측정척도로 등간척도의 모든 정보를 제공하면서 절대영점을 갖는다.<br>예)   월 소득, 연령, 휘발유 1리터당 주행거리, TV 시청률 등</p>
</blockquote>
<p>Is sepal length and species related? Use cross tabulation<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tbl &lt;- table(Sepal.Length=iris_ord$Sepal.Length, iris_ord$Species)</span><br><span class="line">tbl</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Chi-square Test, 카이제곱검정<br><a href="http://dermabae.tistory.com/173" target="_blank" rel="external">http://dermabae.tistory.com/173</a><br><a href="https://www.khanacademy.org/math/probability/statistics-inferential/chi-square/v/pearson-s-chi-square-test-goodness-of-fit" target="_blank" rel="external">https://www.khanacademy.org/math/probability/statistics-inferential/chi-square/v/pearson-s-chi-square-test-goodness-of-fit</a></p>
</blockquote>
<p>Test of Independence: Pearson’s chi-squared test is performed with the null hypothesis that the joint distribution of the cell counts in a 2-dimensional contingency table is the product of the row and column marginals. (h0 is independence)</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chisq.test(tbl)</span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- xtabs(~Sepal.Length + Species, data=iris_ord)</span><br><span class="line">x</span><br></pre></td></tr></table></figure>
<p>그룹 평균<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aggregate(Sepal.Length ~ Species, data=iris, FUN = mean)</span><br><span class="line">aggregate(Sepal.Width ~ Species, data=iris, FUN = mean)</span><br></pre></td></tr></table></figure></p>
<h1 id="Density-estimation"><a href="#Density-estimation" class="headerlink" title="Density estimation"></a>Density estimation</h1><p>단순히 데이터 그리기<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(iris$Petal.Length, jitter(rep(<span class="number">1</span>, nrow(iris))), ylab =<span class="string">""</span>, yaxt = <span class="string">"n"</span>)</span><br></pre></td></tr></table></figure></p>
<p>히스토그램을 보여주고, 실제 데이터 위치를 rug 함수를 사용하여 보여주며 KDE 표시<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hist(iris$Petal.Length)</span><br><span class="line">rug(iris$Petal.Length)</span><br><span class="line">lines(density(iris$Petal.Length), col=<span class="string">"red"</span>, lwd = <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p>이차원 Kernel Density Estimation 그래프<br>참조: <a href="http://www.everydayanalytics.ca/2014/09/5-ways-to-do-2d-histograms-in-r.html" target="_blank" rel="external">http://www.everydayanalytics.ca/2014/09/5-ways-to-do-2d-histograms-in-r.html</a><br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(MASS)</span><br><span class="line">dens &lt;- kde2d(iris$Sepal.Length, iris$Sepal.Width, n=<span class="number">100</span>) <span class="comment"># </span></span><br><span class="line">image(dens, xlab=<span class="string">"Sepal.Length"</span>, ylab=<span class="string">"Sepal.Width"</span>) <span class="comment"># 이미지로 표시</span></span><br><span class="line">contour(dens, add=<span class="literal">TRUE</span>) <span class="comment"># 등고선 표시</span></span><br><span class="line">points(jitter(iris$Sepal.Length, <span class="number">2</span>), jitter(iris$Sepal.Width, <span class="number">2</span>), cex=<span class="number">.7</span>, pch=<span class="string">"+"</span>) <span class="comment"># 십자 표시</span></span><br></pre></td></tr></table></figure></p>
<p>3차원 표시<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">persp(dens, xlab=<span class="string">"Sepal.Length"</span>, ylab=<span class="string">"Sepal.Width"</span>, zlab=<span class="string">"density"</span>, shade=<span class="number">.5</span>) <span class="comment"># Perspective Plots</span></span><br></pre></td></tr></table></figure></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/R-data-mining/">R, data mining</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/03/16/data-mining/" data-title="데이터 준비 정리 | SwForge&#39;s Note" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/03/28/data-mining-ex/" title="교육 정보 분석, 데이터 확인">
  <strong>이전글：</strong><br/>
  <span>
  교육 정보 분석, 데이터 확인</span>
</a>
</div>


<div class="next">
<a href="/2016/02/18/rabbitmq/"  title="RabbitMQ 패턴">
 <strong>다음글：</strong><br/> 
 <span>RabbitMQ 패턴
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Preparation"><span class="toc-number">1.</span> <span class="toc-text">Preparation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Data-Quality"><span class="toc-number">2.</span> <span class="toc-text">Data Quality</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Aggregation"><span class="toc-number">3.</span> <span class="toc-text">Aggregation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Sampling"><span class="toc-number">4.</span> <span class="toc-text">Sampling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Random-sampling"><span class="toc-number">4.1.</span> <span class="toc-text">Random sampling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stratified-sampling-층화-추출법"><span class="toc-number">4.2.</span> <span class="toc-text">Stratified sampling (층화 추출법)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Features"><span class="toc-number">5.</span> <span class="toc-text">Features</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dimensionality-reduciton-Principal-Components-Analysis-PCA-주성분-분석"><span class="toc-number">5.1.</span> <span class="toc-text">Dimensionality reduciton (Principal Components Analysis - PCA, 주성분 분석)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Feature-selection"><span class="toc-number">5.2.</span> <span class="toc-text">Feature selection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Discretrize-features"><span class="toc-number">5.3.</span> <span class="toc-text">Discretrize features</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Standardize-data-Z-score"><span class="toc-number">5.4.</span> <span class="toc-text">Standardize data (Z-score)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Proximities-Similarities-and-distances"><span class="toc-number">6.</span> <span class="toc-text">Proximities: Similarities and distances</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Minkovsky-distances"><span class="toc-number">6.1.</span> <span class="toc-text">Minkovsky distances</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Distances-for-binary-data-Jaccard-and-Hamming"><span class="toc-number">6.2.</span> <span class="toc-text">Distances for binary data (Jaccard and Hamming)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gower’s-distance"><span class="toc-number">6.3.</span> <span class="toc-text">Gower’s distance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Additional-proximity-measures-available-in-package-proxy"><span class="toc-number">6.4.</span> <span class="toc-text">Additional proximity measures available in package proxy</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Relationship-between-features"><span class="toc-number">7.</span> <span class="toc-text">Relationship between features</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Correlation-for-ratio-interval-scaled-features"><span class="toc-number">7.1.</span> <span class="toc-text">Correlation (for ratio/interval scaled features)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rank-correlation-for-ordinal-features"><span class="toc-number">7.2.</span> <span class="toc-text">Rank correlation (for ordinal features)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Relationship-between-nominal-and-ordinal-features"><span class="toc-number">7.3.</span> <span class="toc-text">Relationship between nominal and ordinal features</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Density-estimation"><span class="toc-number">8.</span> <span class="toc-text">Density estimation</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/R-data-mining/" title="R, data mining">R, data mining<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/angularjs/" title="angularjs">angularjs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/rabbitmq/" title="rabbitmq">rabbitmq<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/tech/" title="tech">tech<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/devops/" title="devops">devops<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/lodash/" title="lodash">lodash<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/monitoring/" title="monitoring">monitoring<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/rabiitmq/" title="rabiitmq">rabiitmq<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/data-mining/" title="data mining">data mining<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="#" target="_blank" title="home">home</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<section class="info">
		<p> ^^; <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="SwForge">SwForge</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'sungwoosnotes';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
