(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7870],{49034:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var l=r(18153),i=r(77328),n=r.n(i),o=r(14232);let c=o.memo(()=>(0,l.Y)(l.FK,{}));var a=r(71745),d=r(48230),s=r.n(d);let h=[{link:"/",text:"Home"}],m=o.memo(()=>{let e=(0,a.useRouter)(),[t,r]=o.useState(!1);return(0,l.FD)("nav",{className:"w-full",children:[(0,l.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,l.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,l.Y)("div",{className:"pl-4",children:(0,l.Y)(s(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,l.Y)("div",{className:"block pr-4 lg:hidden",children:(0,l.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>r(!t),onBlur:()=>r(!1),children:(0,l.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.Y)("title",{children:"Menu"}),(0,l.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,l.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,l.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:h.map(t=>{let{link:r,text:i}=t;return(0,l.Y)("li",{className:"mr-3",children:(0,l.Y)(s(),{legacyBehavior:!0,className:e.pathname===r?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:r,children:i})},r)})})})]})]})}),u=o.memo(e=>{let{children:t,title:r="This is the default title"}=e;return(0,l.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,l.FD)(n(),{children:[(0,l.Y)("title",{children:r}),(0,l.Y)("meta",{charSet:"utf-8"}),(0,l.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,l.Y)(m,{}),(0,l.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,l.Y)(c,{})]})})},60158:(e,t,r)=>{"use strict";r.d(t,{J:()=>c,j:()=>o});var l=r(18153),i=r(14232);let n=i.createContext({});function o(e){let{staticProps:t,children:r}=e;return(0,l.Y)(n.Provider,{value:t,children:r})}function c(){return i.useContext(n)}},79290:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U,meta:()=>V});var l=r(37876),i=r(91668),n=r(91013),o=r(18153),c=r(14232);let a=c.forwardRef(e=>{let{children:t,...r}=e,l=c.useRef(null),[i,n]=c.useState();return c.useEffect(()=>{n(l.current)},[]),console.log("Area",{el:i}),(0,o.Y)("div",{ref:l,style:{border:"1px solid",borderRadius:"4px",width:"100%",height:"300px",marginBottom:"1rem"},...r,children:i&&t(i)})}),d=c.memo(a);var s=r(45302),h=r(58566),m=r(73022),u=r(2104),p=r(22836),f=r(64344),Y=r(68165),w=r(86886),g=r(21591),v=r(75824),x=r(77143),b=r(55632),k=r(16397),N=r(36674);let j=(0,m.v)(e=>({projection:"Perspective",top:"Back",middle:"Top",bottom:"Right",setPanelView:(t,r)=>e({[t]:r}),setProjection:t=>e({projection:t})})),F=c.forwardRef((e,t)=>{let{...r}=e,l=j(e=>e.projection),i=j(e=>e.setProjection);return(0,o.Y)("div",{ref:t,className:"panel",style:{gridArea:"main"},...r,children:(0,o.FD)(u.W,{shadow:"md",width:200,children:[(0,o.Y)(u.W.Target,{children:(0,o.Y)(p.$,{children:l})}),(0,o.FD)(u.W.Dropdown,{children:[(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(Y.A,{size:14}),onClick:()=>i("Perspective"),children:"Perspective"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(w.A,{size:14}),onClick:()=>i("Orthographic"),children:"Orthographic"})]})]})})}),D=c.forwardRef((e,t)=>{let{which:r}=e,l=j(e=>e[r]),i=j(e=>e.setPanelView);return(0,o.Y)("div",{ref:t,className:"panel",style:{gridArea:r},children:(0,o.FD)(u.W,{shadow:"md",width:200,children:[(0,o.Y)(u.W.Target,{children:(0,o.Y)(p.$,{children:l})}),(0,o.FD)(u.W.Dropdown,{children:[(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(g.A,{size:14}),onClick:()=>i(r,"Top"),children:"Top"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(v.A,{size:14}),onClick:()=>i(r,"Bottom"),children:"Bottom"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(x.A,{size:14}),onClick:()=>i(r,"Left"),children:"Left"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(b.A,{size:14}),onClick:()=>i(r,"Right"),children:"Right"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(k.A,{size:14}),onClick:()=>i(r,"Front"),children:"Front"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(N.A,{size:14}),onClick:()=>i(r,"Back"),children:"Back"})]})]})})}),S=c.memo(function(e){let{}=e;return(0,o.Y)(f.y,{children:(0,o.Y)(d,{className:"relative",children:()=>(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{className:"absolute",children:(0,o.Y)(s.Hl,{className:"top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:(0,o.Y)(h.S.Port,{})})}),(0,o.FD)("div",{className:"top-0 left-0 grid grid-cols-2 grid-rows-3 w-full h-full gap-2",children:[(0,o.Y)("div",{className:"border border-red-500 row-span-3 col-start-1 row-start-1",children:(0,o.Y)(F,{})}),(0,o.Y)("div",{className:"border border-red-500 col-start-2 row-start-1",children:(0,o.Y)(D,{which:"top"})}),(0,o.Y)("div",{className:"border border-red-500 col-start-2 row-start-2",children:(0,o.Y)(D,{which:"middle"})}),(0,o.Y)("div",{className:"border border-red-500 col-start-2 row-start-3",children:(0,o.Y)(D,{which:"bottom"})})]})]})})})});var y=r(35577),A=r(84618),P=r(99893),W=r(70245),z=r(49082),C=r(64870),R=r(87620),B=r(14796);let T=(0,m.v)(e=>({projection:"Perspective",top:"Back",middle:"Top",bottom:"Right",setPanelView:(t,r)=>e({[t]:r}),setProjection:t=>e({projection:t})})),I=c.forwardRef((e,t)=>{let{children:r,...l}=e,i=T(e=>e.projection),n=T(e=>e.setProjection);return(0,o.FD)("div",{ref:t,className:"relative w-full h-full",...l,children:[(0,o.Y)(o.FK,{children:r}),(0,o.FD)(u.W,{shadow:"md",width:200,children:[(0,o.Y)(u.W.Target,{children:(0,o.Y)(p.$,{children:i})}),(0,o.FD)(u.W.Dropdown,{children:[(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(Y.A,{size:14}),onClick:()=>n("Perspective"),children:"Perspective"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(w.A,{size:14}),onClick:()=>n("Orthographic"),children:"Orthographic"})]})]})]})}),M=c.forwardRef((e,t)=>{let{which:r,children:l}=e,i=T(e=>e[r]),n=T(e=>e.setPanelView);return(0,o.FD)("div",{ref:t,className:"relative w-full h-full",children:[(0,o.Y)(o.FK,{children:l}),(0,o.FD)(u.W,{shadow:"md",width:200,children:[(0,o.Y)(u.W.Target,{children:(0,o.Y)(p.$,{children:i})}),(0,o.FD)(u.W.Dropdown,{children:[(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(g.A,{size:14}),onClick:()=>n(r,"Top"),children:"Top"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(v.A,{size:14}),onClick:()=>n(r,"Bottom"),children:"Bottom"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(x.A,{size:14}),onClick:()=>n(r,"Left"),children:"Left"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(b.A,{size:14}),onClick:()=>n(r,"Right"),children:"Right"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(k.A,{size:14}),onClick:()=>n(r,"Front"),children:"Front"}),(0,o.Y)(u.W.Item,{leftSection:(0,o.Y)(N.A,{size:14}),onClick:()=>n(r,"Back"),children:"Back"})]})]})]})}),_=new B.Matrix4;function L(e){let{background:t="white",matrix:r,children:l,...i}=e,{nodes:n,materials:c}=(0,y.p)("https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/bricks/model.gltf"),a=n.bricks;return(0,o.FD)(o.FK,{children:[(0,o.Y)("color",{attach:"background",args:[t]}),(0,o.Y)("ambientLight",{}),(0,o.Y)("directionalLight",{position:[10,10,-15],castShadow:!0,"shadow-bias":-1e-4,"shadow-mapSize":1024}),(0,o.Y)(A.OH,{preset:"city"}),(0,o.FD)("group",{matrixAutoUpdate:!1,onUpdate:e=>e.matrix=r,...i,children:[(0,o.Y)(P.o,{children:(0,o.Y)("mesh",{castShadow:!0,geometry:a.geometry,material:c["Stone.014"],rotation:[Math.PI/2,0,0],children:(0,o.Y)("meshStandardMaterial",{color:"goldenrod",roughness:0,metalness:1})})}),l]})]})}let E={Top:[0,10,0],Bottom:[0,-10,0],Left:[-10,0,0],Right:[10,0,0],Back:[0,0,-10],Front:[0,0,10]};function H(e){let{which:t}=e,r=T(e=>e[t]);return(0,o.Y)(W.q,{makeDefault:!0,position:E[r],zoom:100})}let K=c.memo(function(e){let{}=e;return(0,o.Y)(f.y,{children:(0,o.Y)(d,{className:"relative",children:e=>(0,o.FD)(o.FK,{children:[(0,o.Y)(s.Hl,{style:{position:"fixed",top:0,bottom:0,left:0,right:0,overflow:"hidden",pointerEvents:"none"},eventSource:e,children:(0,o.Y)(h.S.Port,{})}),(0,o.FD)("div",{className:"top-0 left-0 grid grid-cols-2 grid-rows-3 w-full h-full gap-2",children:[(0,o.Y)("div",{className:"border border-red-500 row-span-3 col-start-1 row-start-1",children:(0,o.Y)(I,{children:(0,o.FD)(h.S,{className:"absolute top-0 left-0 w-full h-full",children:[(0,o.Y)(L,{background:"aquamarine",matrix:_}),(0,o.Y)(z.N,{makeDefault:!0}),(0,o.Y)(C.n,{scale:1,depthTest:!1,matrix:_})]})})}),(0,o.Y)("div",{className:"border border-red-500 col-start-2 row-start-1",children:(0,o.Y)(M,{which:"top",children:(0,o.FD)(h.S,{className:"absolute w-full h-full",children:[(0,o.Y)(H,{which:"top"}),(0,o.Y)(L,{background:"lightpink",matrix:_}),(0,o.Y)(R.r,{makeDefault:!0,screenSpacePanning:!0,enableRotate:!1})]})})}),(0,o.Y)("div",{className:"border border-red-500 col-start-2 row-start-2",children:(0,o.Y)(M,{which:"middle",children:(0,o.FD)(h.S,{className:"absolute w-full h-full",children:[(0,o.Y)(H,{which:"middle"}),(0,o.Y)(L,{background:"peachpuff",matrix:_}),(0,o.Y)(R.r,{makeDefault:!0,screenSpacePanning:!0,enableRotate:!1})]})})}),(0,o.Y)("div",{className:"border border-red-500 col-start-2 row-start-3",children:(0,o.Y)(M,{which:"bottom",children:(0,o.FD)(h.S,{className:"absolute w-full h-full",children:[(0,o.Y)(H,{which:"bottom"}),(0,o.Y)(L,{background:"skyblue",matrix:_}),(0,o.Y)(R.r,{makeDefault:!0,screenSpacePanning:!0,enableRotate:!1})]})})})]})]})})})});r(28747);let V={title:"R3f: Multiple views with uniform controls",description:"3d 객체의 이동 회전을 할 수 있는 control과 함께 다양한 시점의 view를 표시하는 예제를 살펴 봅니다.",date:"2025-06-03",readTime:5},O=e=>{let{children:t}=e;return(0,l.jsx)(n.A,{meta:V,children:t})};function q(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{children:"Multiple views with uniform controls"}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:["예제 코드: ",(0,l.jsx)(t.a,{href:"https://codesandbox.io/s/r9w2ob",children:"Multiple views with uniform controls"})]}),"\n"]}),"\n",(0,l.jsx)(t.h1,{children:"HTML 기반 Layout"}),"\n",(0,l.jsx)(t.p,{children:"먼저 html tag를 사용하여 view 영역을 잡습니다."}),"\n",(0,l.jsx)(S,{}),"\n",(0,l.jsxs)(t.p,{children:["main view의 perspective와 우측 3개의 side panel에 대한 view side 정보를 ",(0,l.jsx)(t.a,{href:"https://zustand-demo.pmnd.rs/",children:"Zustand"})," 상태로 관리합니다."]}),"\n",(0,l.jsxs)(t.p,{children:["이 상태 값을 ",(0,l.jsx)(t.a,{href:"https://mantine.dev/",children:"Mantine"})," 컴포넌트를 사용하여 표시합니다."]}),"\n",(0,l.jsx)(t.h1,{children:"View"}),"\n",(0,l.jsx)(K,{}),"\n",(0,l.jsx)(t.p,{children:"4개로 나눈 영역에 동일한 Scene을 표시합니다.\n다만, 각각의 view는 다른 카메라를 사용합니다.\n각 카메라는 동일한 Scene을 바라보지만, 서로 다른 위치와 방향을 가집니다.\n이렇게 하면 동일한 Scene을 바라보는 여러 개의 카메라를 사용하여 다양한 시점의 view를 표시할 수 있습니다."}),"\n",(0,l.jsxs)(t.p,{children:["Main view는 ",(0,l.jsx)(t.code,{children:"<PivotControls />"})," 컴포넌트를 사용하여 대상 객체를 이동 및 회전할 수 있습니다."]}),"\n",(0,l.jsxs)(t.p,{children:["객체를 ",(0,l.jsx)(t.code,{children:"<PivotControls />"})," 의 하위 컴포넌트로 추가하지 않고 ",(0,l.jsx)(t.code,{children:"matrix"})," 속성을 사용하여 ",(0,l.jsx)(t.code,{children:"<PivotControls />"}),"이 제어하는 transform 정보를 공유합니다.\n따라서 ",(0,l.jsx)(t.code,{children:"matrix"})," 속성에 전달한 객체를 전역으로 정의하고 모든 scene에 전달함으로서 객체의 이동 및 회전을 모든 view에서 동일하게 적용할 수 있습니다."]}),"\n",(0,l.jsxs)(t.p,{children:["주의할 점은 ",(0,l.jsx)(t.code,{children:"matrix"})," 속성을 사용하지 않고 ",(0,l.jsx)(t.code,{children:"onUpdate"})," 속성을 사용했다는 것 입니다.\n이유는 Three.js의 transform 객체(예: Matrix4, Vector3 등)가 읽기 전용(read-only)으로 정의되어 있어서, 직접 덮어쓸 수 없기 때문입니다.\n그래서 특별한 경우에는 복사(copy) 대신 참조(reference)를 유지해야 하므로 onUpdate를 사용합니다."]})]})}function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.jsx)(O,{...e,children:(0,l.jsx)(q,{...e})})}},83642:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-06-03-r3f-multiple-views",function(){return r(79290)}])},85419:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var l=r(18153);r(14232);let i=e=>{let{meta:t,isBlogPost:r}=e;return(0,l.FD)(l.FK,{children:[(0,l.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(r?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,l.FD)("div",{className:"details",children:[(0,l.Y)("p",{className:"text-gray-500",children:t.description}),(0,l.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,l.Y)("span",{className:"mr-4",children:t.date})})]})]})}},91013:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var l=r(18153),i=r(73146),n=r.n(i),o=r(14232),c=r(86089),a=r(60158),d=r(85419),s=r(49034);function h(e){let{children:t,meta:r,staticProps:i}=e;return o.useEffect(()=>{n().highlightAll()},[]),(0,l.Y)(l.FK,{children:(0,l.FD)(s.A,{title:r.title,children:[(0,l.Y)(d.A,{meta:r,isBlogPost:!0}),(0,l.Y)(a.j,{staticProps:i,children:(0,l.Y)("article",{className:"markdown",children:t})}),(0,l.Y)(c.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}}},e=>{e.O(0,[7391,683,6701,5695,5302,2077,3665,1611,9745,3857,9194,483,8562,636,6593,8792],()=>e(e.s=83642)),_N_E=e.O()}]);
//# sourceMappingURL=2025-06-03-r3f-multiple-views-3e8893449ad4df80.js.map