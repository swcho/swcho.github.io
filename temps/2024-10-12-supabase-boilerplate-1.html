<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="initial-scale=1.0, width=device-width" data-next-head=""/><title data-next-head=""></title><link rel="preload" href="/_next/static/css/d20c50ed748cd26f.css" as="style"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous"/><link rel="stylesheet" href="/_next/static/css/d20c50ed748cd26f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-0b9df2340104f8e1.js" defer=""></script><script src="/_next/static/chunks/framework-80cff53c93df8ff7.js" defer=""></script><script src="/_next/static/chunks/main-beade485850481f6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5b36dff9503cb490.js" defer=""></script><script src="/_next/static/chunks/5695-9c01eff236121af5.js" defer=""></script><script src="/_next/static/chunks/pages/temps/2024-10-12-supabase-boilerplate-1-27f2551a24dc187c.js" defer=""></script><script src="/_next/static/qfjDRDkI7hbaUN0YCN0K0/_buildManifest.js" defer=""></script><script src="/_next/static/qfjDRDkI7hbaUN0YCN0K0/_ssgManifest.js" defer=""></script><style id="__jsx-4134105190">.markdown html{font:118.75%/1.58 'Roboto',serif;box-sizing:border-box;overflow-y:scroll;}.markdown *{box-sizing:inherit;}.markdown *:before{box-sizing:inherit;}.markdown *:after{box-sizing:inherit;}.markdown body{color:hsla(0,0%,0%,0.73);font-family:'Roboto',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}.markdown img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;color:hsla(0,0%,0%,0.9);font-family:'Roboto Slab',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}.markdown h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;color:hsla(0,0%,0%,0.9);font-family:'Roboto Slab',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}.markdown h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;color:hsla(0,0%,0%,0.9);font-family:'Roboto Slab',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}.markdown h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;color:hsla(0,0%,0%,0.9);font-family:'Roboto Slab',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}.markdown h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;color:hsla(0,0%,0%,0.9);font-family:'Roboto Slab',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}.markdown h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;color:hsla(0,0%,0%,0.9);font-family:'Roboto Slab',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}.markdown hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown ul{margin-left:1.58rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;list-style-position:outside;list-style-image:none;}.markdown ol{margin-left:1.58rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;list-style-position:outside;list-style-image:none;}.markdown dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;font-size:0.85rem;line-height:1.58rem;}.markdown table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;font-size:1rem;line-height:1.58rem;border-collapse:collapse;width:100%;}.markdown fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;font-size:0.94737rem;line-height:1.58rem;border-left:0.5925rem solid #017698;color:hsla(0,0%,0%,0.65);background-color:hsla(0,0%,0%,0.1);padding:0.29625rem 0.9875rem;font-style:italic;}.markdown form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.58rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}.markdown address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.58rem;}.markdown b{font-weight:700;}.markdown strong{font-weight:700;}.markdown dt{font-weight:700;}.markdown th{font-weight:700;}.markdown li{margin-bottom:calc(1.58rem / 2);}.markdown ol li{padding-left:0;}.markdown ul li{padding-left:0;}.markdown li > ol{margin-left:1.58rem;margin-bottom:calc(1.58rem / 2);margin-top:calc(1.58rem / 2);}.markdown li > ul{margin-left:1.58rem;margin-bottom:calc(1.58rem / 2);margin-top:calc(1.58rem / 2);}.markdown blockquote *:last-child{margin-bottom:0;}.markdown li *:last-child{margin-bottom:0;}.markdown p *:last-child{margin-bottom:0;}.markdown li > p{margin-bottom:calc(1.58rem / 2);}.markdown code{font-size:0.85rem;line-height:1.58rem;}.markdown kbd{font-size:0.85rem;line-height:1.58rem;}.markdown samp{font-size:0.85rem;line-height:1.58rem;}.markdown abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}.markdown acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}.markdown abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}.markdown thead{text-align:left;}.markdown td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.05333rem;padding-right:1.05333rem;padding-top:0.79rem;padding-bottom:calc(0.79rem - 1px);}.markdown th:first-child,td:first-child{padding-left:0;}.markdown th:last-child,td:last-child{padding-right:0;}.markdown a{color:#017698;text-decoration:none;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #017698 1px, #017698 2px, rgba(0, 0, 0, 0) 2px);}.markdown a:hover,a:active{text-shadow:none;background-image:none;}.markdown h1,h2,h3,h4,h5,h6{margin-top:3.16rem;}.markdown li>ol,li>ul{margin-left:20px;margin-bottom:0;}.markdown blockquote > :last-child{margin-bottom:0;}.markdown blockquote cite{font-size:1rem;line-height:1.58rem;color:hsla(0,0%,0%,0.73);font-style:normal;font-weight:400;}.markdown blockquote cite:before{content:"— ";}.markdown @media only screen and (max-width:480px){html{font-size:106.25%;line-height:28px;}blockquote{border-left:0.29625rem solid #017698;color:hsla(0,0%,0%,0.59);padding-left:0.88875rem;font-style:italic;margin-left:-1.185rem;margin-right:0;}} .markdown{color:#3d3d3d}.markdown ul li{list-style-type:disc}.markdown ol{list-style-type:decimal}:not(pre) code{background-color:rgb(203 208 218);border-radius:3px;font-family:D2Coding,Consolas,"Roboto Mono","Liberation Mono",Menlo,Courier,monospace;padding:.2rem .3rem;margin:0 .2rem}.markdown * code{font-size:inherit}.markdown code[class*="language-"]{font-family:D2Coding,Consolas,"Roboto Mono","Liberation Mono",Menlo,Courier,monospace;padding:1rem;background-color:#2d2d2d}</style></head><body><div id="__next"><div class="leading-normal tracking-normal bg-gray-100 min-h-screen"><nav class="w-full"><div id="progress" class="top-0 z-20 h-1" style="background:linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"></div><div class="flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl"><div class="pl-4"><a class="text-xl font-extrabold text-gray-900 no-underline hover:no-underline" href="/">lifetime trails</a></div><div class="block pr-4 lg:hidden"><button id="nav-toggle" type="button" class="flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none"><svg class="w-3 h-3 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button></div><div id="nav-content" class="bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 hidden"><ul class="items-center justify-end flex-1 list-reset lg:flex"><li class="mr-3"><a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4" href="/">Home</a></li></ul></div></div></nav><div class="container w-full px-4 pb-10 mx-auto md:max-w-3xl"><h1 class="font-bold text-gray-800 mb-4 text-5xl mt-8 mb-8"></h1><div class="details"><p class="text-gray-500"></p><p class="text-gray-400 text-right -mt-1"><span class="mr-4"></span></p></div><article class="markdown"><h1>소개</h1>
<h1>의존 패키지</h1>
<h2><code>@supabase/supabase-js</code></h2>
<p>JavaScript SDK 라이브러리 입니다.</p>
<blockquote>
<p>참조: <a href="https://supabase.com/docs/reference/javascript/start">JavaScript API Reference</a></p>
</blockquote>
<p>Database, Auth, Storage, Realtime 등의 기능을 사용할 수 있습니다.</p>
<h2><code>@supabase/ssr</code></h2>
<p>SSR을 할 수 있는 라이브러리 입니다.</p>
<blockquote>
<p>참조: <a href="https://supabase.com/docs/guides/auth/server-side">Server-Side Rendering | Supabase Docs</a></p>
</blockquote>
<h2><code>stripe</code>, <code>@stripe/stripe-js</code></h2>
<p>결제 서비스인 stripe의 node, browser SDK 입니다.</p>
<blockquote>
<p>Node: <a href="https://github.com/stripe/stripe-node">stripe/stripe-node: Node.js library for the Stripe API.</a>
Browser: <a href="https://docs.stripe.com/js">Stripe JS Reference</a></p>
</blockquote>
<h2>next, tailwind, @radix-ui, lucide</h2>
<ul>
<li>프레임워크: next</li>
<li>style: tailwind</li>
<li>컴포넌트: radix-ui</li>
<li>아이콘: lucide</li>
</ul>
<h1>Remote Supabase 연동</h1>
<p>먼저 Supabase dashboard에서 프로젝트를 생성합니다.</p>
<p><code>npx supabase login</code>으로 Remote Supabase에 로그인 후 <code>npx supabase link</code>로 연동합니다.</p>
<p><code>npx supabase db push</code> 명령을 수행하면 <code>supabase/migrations/20230530034630_init.sql</code> 위치에 있는 sql을 수행합니다.</p>
<p>Supabase dashboard의 <code>Table Editor</code>를 확인하면 다음과 같이 테이블이 생성되어 있습니다.</p>
<p><img alt="Table Editor" loading="lazy" width="670" height="658" decoding="async" data-nimg="1" class="shadow" style="color:transparent;width:100%;height:auto" src="/_next/static/media/image.a6bedba4.png"/></p>
<h1>Local Supabase 초기화</h1>
<p>개발 의존 패키지 중에는 <code>supabase</code>라는 CLI 툴이 있습니다.</p>
<blockquote>
<p>참조: <a href="https://supabase.com/docs/reference/cli/start">CLI Reference | Supabase Docs</a></p>
</blockquote>
<pre><code>Supabase CLI 1.172.2

Usage:
  supabase [command]

Quick Start:
  bootstrap            Bootstrap a Supabase project from a starter template

Local Development:
  db                   Manage Postgres databases
  gen                  Run code generation tools
  init                 Initialize a local project
  inspect              Tools to inspect your Supabase project
  link                 Link to a Supabase project
  login                Authenticate using an access token
  logout               Log out and delete access tokens locally
  migration            Manage database migration scripts
  start                Start containers for Supabase local development
  status               Show status of local Supabase containers
  stop                 Stop all local Supabase containers
  test                 Run tests on local Supabase containers
  unlink               Unlink a Supabase project

Management APIs:
  branches             Manage Supabase preview branches
  domains              Manage custom domain names for Supabase projects
  encryption           Manage encryption keys of Supabase projects
  functions            Manage Supabase Edge functions
  network-bans         Manage network bans
  network-restrictions Manage network restrictions
  orgs                 Manage Supabase organizations
  postgres-config      Manage Postgres database config
  projects             Manage Supabase projects
  secrets              Manage Supabase secrets
  services             Show versions of all Supabase services
  snippets             Manage Supabase SQL snippets
  ssl-enforcement      Manage SSL enforcement configuration
  sso                  Manage Single Sign-On (SSO) authentication for projects
  storage              Manage Supabase Storage objects
  vanity-subdomains    Manage vanity subdomains for Supabase projects

Additional Commands:
  completion           Generate the autocompletion script for the specified shell
  help                 Help about any command

Flags:
      --create-ticket                     create a support ticket for any CLI error
      --debug                             output debug logs to stderr
      --dns-resolver [ native | https ]   lookup domain names using the specified resolver (default native)
      --experimental                      enable experimental features
  -h, --help                              help for supabase
  -v, --version                           version for supabase
      --workdir string                    path to a Supabase project directory

Use &quot;supabase [command] --help&quot; for more information about a command.
</code></pre>
<p>먼저 다음 명렁으로 supabase를 local에 구동합니다. 이때, Docker 설치가 되어 있어야 합니다.</p>
<pre><code>pnpm supabase:start
</code></pre>
<p>이 때 <code>SUPABASE_AUTH_EXTERNAL_GITHUB_CLIENT_ID</code>를 설정하라는 오류 메시지가 뜹니다.</p>
<p>Github OAuth 설정을 하는 것인데, <code>superbase/config.toml</code> 파일에서 다음과 같이 설정하면 외부 OAuth 인증을 하지 않습니다.</p>
<pre><code class="language-toml">[auth.external.github]
enabled = false
</code></pre>
<p><code>npx supabase start</code> 명령이 수행되면서 다음의 docker 이미지를 가져옵니다.</p>
<pre><code>public.ecr.aws/supabase/postgres:15.1.1.41
public.ecr.aws/supabase/realtime:v2.28.32
public.ecr.aws/supabase/gotrue:v2.151.0
public.ecr.aws/supabase/kong:2.8.1
public.ecr.aws/supabase/inbucket:3.0.3
public.ecr.aws/supabase/postgrest:v12.0.1
public.ecr.aws/supabase/imgproxy:v3.8.0
public.ecr.aws/supabase/edge-runtime:v1.53.3
public.ecr.aws/supabase/postgres-meta:v0.80.0
public.ecr.aws/supabase/studio:20240422-5cf8f30
         API URL: http://127.0.0.1:54321
     GraphQL URL: http://127.0.0.1:54321/graphql/v1
  S3 Storage URL: http://127.0.0.1:54321/storage/v1/s3
          DB URL: postgresql://postgres:postgres@127.0.0.1:54322/postgres
      Studio URL: http://127.0.0.1:54323
    Inbucket URL: http://127.0.0.1:54324
      JWT secret: super-secret-jwt-token-with-at-least-32-characters-long
        anon key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
service_role key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
   S3 Access Key: 625729a08b95bf1b7ff351a663f3a23c
   S3 Secret Key: 850181e4652dd023b7a98c58ae0d2d34bd487ee0cc3254aed6eda37307425907
       S3 Region: local
</code></pre>
<p><code>docker ps</code>로 살펴보면 다음과 같습니다.</p>
<pre><code>CONTAINER ID   IMAGE                                             COMMAND                  CREATED              STATUS                        PORTS                                                                  NAMES
05e99fc24b00   public.ecr.aws/supabase/studio:20240422-5cf8f30   &quot;docker-entrypoint.s…&quot;   About a minute ago   Up About a minute (healthy)   0.0.0.0:54323-&gt;3000/tcp, :::54323-&gt;3000/tcp                            supabase_studio_nextjs-subscription-payments
44bc1b1e4dff   public.ecr.aws/supabase/postgres-meta:v0.80.0     &quot;docker-entrypoint.s…&quot;   2 minutes ago        Up 2 minutes (healthy)        8080/tcp                                                               supabase_pg_meta_nextjs-subscription-payments
869d40ba69d4   public.ecr.aws/supabase/edge-runtime:v1.53.3      &quot;sh -c &#x27;cat &lt;&lt;&#x27;EOF&#x27; …&quot;   3 minutes ago        Up 3 minutes                  0.0.0.0:49153-&gt;8081/tcp, :::49153-&gt;8081/tcp                            supabase_edge_runtime_nextjs-subscription-payments
c138dd64355e   public.ecr.aws/supabase/imgproxy:v3.8.0           &quot;imgproxy&quot;               3 minutes ago        Up 3 minutes (healthy)        8080/tcp                                                               supabase_imgproxy_nextjs-subscription-payments
3a266659f3e5   public.ecr.aws/supabase/storage-api:v1.0.6        &quot;docker-entrypoint.s…&quot;   4 minutes ago        Up 4 minutes (healthy)        5000/tcp                                                               supabase_storage_nextjs-subscription-payments
df4c53fd4ed7   public.ecr.aws/supabase/postgrest:v12.0.1         &quot;postgrest&quot;              4 minutes ago        Up 4 minutes                  3000/tcp                                                               supabase_rest_nextjs-subscription-payments
291f123c194d   public.ecr.aws/supabase/realtime:v2.28.32         &quot;/usr/bin/tini -s -g…&quot;   4 minutes ago        Up 4 minutes (healthy)        4000/tcp                                                               supabase_realtime_nextjs-subscription-payments
7fafdf6cafa7   public.ecr.aws/supabase/inbucket:3.0.3            &quot;/start-inbucket.sh …&quot;   4 minutes ago        Up 4 minutes (healthy)        1100/tcp, 2500/tcp, 0.0.0.0:54324-&gt;9000/tcp, :::54324-&gt;9000/tcp        supabase_inbucket_nextjs-subscription-payments
0791704f9484   public.ecr.aws/supabase/gotrue:v2.151.0           &quot;auth&quot;                   4 minutes ago        Up 4 minutes (healthy)        9999/tcp                                                               supabase_auth_nextjs-subscription-payments
ce077331d527   public.ecr.aws/supabase/kong:2.8.1                &quot;sh -c &#x27;cat &lt;&lt;&#x27;EOF&#x27; …&quot;   4 minutes ago        Up 4 minutes (healthy)        8001/tcp, 8443-8444/tcp, 0.0.0.0:54321-&gt;8000/tcp, :::54321-&gt;8000/tcp   supabase_kong_nextjs-subscription-payments
dff52b33e0b3   public.ecr.aws/supabase/postgres:15.1.1.41        &quot;sh -c &#x27;cat &lt;&lt;&#x27;EOF&#x27; …&quot;   5 minutes ago        Up 5 minutes (healthy)        0.0.0.0:54322-&gt;5432/tcp, :::54322-&gt;5432/tcp                            supabase_db_nextjs-subscription-payments
</code></pre></article><div class="react-utterences"><div>Loading script...</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/temps/2024-10-12-supabase-boilerplate-1","query":{},"buildId":"qfjDRDkI7hbaUN0YCN0K0","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>