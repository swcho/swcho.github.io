(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6985],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8550:(e,t,r)=>{"use strict";let n,i,o,s,a,l;r.d(t,{G:()=>eG});var u=r(14796),c=r(47984);function d(e){return(e.index?e.index.count:e.attributes.position.count)/3}function f(e,t){let r=d(e),n=t||e.drawRange,i=n.start/3,o=(n.start+n.count)/3,s=Math.max(0,i),a=Math.min(r,o)-s;return[{offset:Math.floor(s),count:Math.floor(a)}]}function p(e,t){if(!e.groups||!e.groups.length)return f(e,t);let r=[],n=new Set,i=t||e.drawRange,o=i.start/3,s=(i.start+i.count)/3;for(let t of e.groups){let e=t.start/3,r=(t.start+t.count)/3;n.add(Math.max(o,e)),n.add(Math.min(s,r))}let a=Array.from(n.values()).sort((e,t)=>e-t);for(let e=0;e<a.length-1;e++){let t=a[e],n=a[e+1];r.push({offset:Math.floor(t),count:Math.floor(n-t)})}return r}function h(e,t,r,n,i){let o=1/0,s=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0,d=1/0,f=1/0,p=1/0,h=-1/0,y=-1/0,m=-1/0;for(let n=6*t,i=(t+r)*6;n<i;n+=6){let t=e[n+0],r=e[n+1],i=t-r,g=t+r;i<o&&(o=i),g>l&&(l=g),t<d&&(d=t),t>h&&(h=t);let x=e[n+2],b=e[n+3],w=x-b,B=x+b;w<s&&(s=w),B>u&&(u=B),x<f&&(f=x),x>y&&(y=x);let v=e[n+4],T=e[n+5],A=v-T,P=v+T;A<a&&(a=A),P>c&&(c=P),v<p&&(p=v),v>m&&(m=v)}n[0]=o,n[1]=s,n[2]=a,n[3]=l,n[4]=u,n[5]=c,i[0]=d,i[1]=f,i[2]=p,i[3]=h,i[4]=y,i[5]=m}var y=r(57135);let m=(e,t)=>e.candidate-t.candidate,g=Array(32).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),x=new Float32Array(6);class b{constructor(){this.boundingData=new Float32Array(6)}}function w(e,t,r,n,i,o){let s=n,a=n+i-1,l=o.pos,u=2*o.axis;for(;;){for(;s<=a&&r[6*s+u]<l;)s++;for(;s<=a&&r[6*a+u]>=l;)a--;if(!(s<a))return s;for(let e=0;e<3;e++){let r=t[3*s+e];t[3*s+e]=t[3*a+e],t[3*a+e]=r}for(let e=0;e<6;e++){let t=r[6*s+e];r[6*s+e]=r[6*a+e],r[6*a+e]=t}s++,a--}}function B(e,t,r,n,i,o){let s=n,a=n+i-1,l=o.pos,u=2*o.axis;for(;;){for(;s<=a&&r[6*s+u]<l;)s++;for(;s<=a&&r[6*a+u]>=l;)a--;if(!(s<a))return s;{let t=e[s];e[s]=e[a],e[a]=t;for(let e=0;e<6;e++){let t=r[6*s+e];r[6*s+e]=r[6*a+e],r[6*a+e]=t}s++,a--}}}function v(e,t){return 65535===t[e+15]}function T(e,t){return t[e+14]}class A{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,n=-1/0;for(let i=0,o=e.length;i<o;i++){let o=e[i][t];r=o<r?o:r,n=o>n?o:n}this.min=r,this.max=n}setFromPoints(e,t){let r=1/0,n=-1/0;for(let i=0,o=t.length;i<o;i++){let o=t[i],s=e.dot(o);r=s<r?s:r,n=s>n?s:n}this.min=r,this.max=n}isSeparated(e){return this.min>e.max||e.min>this.max}}A.prototype.setFromBox=function(){let e=new u.Vector3;return function(t,r){let n=r.min,i=r.max,o=1/0,s=-1/0;for(let r=0;r<=1;r++)for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){e.x=n.x*r+i.x*(1-r),e.y=n.y*a+i.y*(1-a),e.z=n.z*l+i.z*(1-l);let u=t.dot(e);o=Math.min(u,o),s=Math.max(u,s)}this.min=o,this.max=s}}(),new A;let P=function(){let e=new u.Vector3,t=new u.Vector3,r=new u.Vector3;return function(n,i,o){let s,a,l=n.start,u=i.start;r.subVectors(l,u),e.subVectors(n.end,n.start),t.subVectors(i.end,i.start);let c=r.dot(t),d=t.dot(e),f=t.dot(t),p=r.dot(e),h=e.dot(e)*f-d*d;s=0!==h?(c*d-p*f)/h:0,a=(c+s*d)/f,o.x=s,o.y=a}}(),M=function(){let e=new u.Vector2,t=new u.Vector3,r=new u.Vector3;return function(n,i,o,s){P(n,i,e);let a=e.x,l=e.y;if(a>=0&&a<=1&&l>=0&&l<=1){n.at(a,o),i.at(l,s);return}if(a>=0&&a<=1){l<0?i.at(0,s):i.at(1,s),n.closestPointToPoint(s,!0,o);return}if(l>=0&&l<=1){a<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,s);return}{let e,u;if(e=a<0?n.start:n.end,u=l<0?i.start:i.end,n.closestPointToPoint(u,!0,t),i.closestPointToPoint(e,!0,r),t.distanceToSquared(u)<=r.distanceToSquared(e)){o.copy(t),s.copy(u);return}o.copy(e),s.copy(r);return}}}(),V=function(){let e=new u.Vector3,t=new u.Vector3,r=new u.Plane,n=new u.Line3;return function(i,o){let{radius:s,center:a}=i,{a:l,b:u,c}=o;if(n.start=l,n.end=u,n.closestPointToPoint(a,!0,e).distanceTo(a)<=s||(n.start=l,n.end=c,n.closestPointToPoint(a,!0,e).distanceTo(a)<=s)||(n.start=u,n.end=c,n.closestPointToPoint(a,!0,e).distanceTo(a)<=s))return!0;let d=o.getPlane(r);if(Math.abs(d.distanceToPoint(a))<=s){let e=d.projectPoint(a,t);if(o.containsPoint(e))return!0}return!1}}();function _(e){return 1e-15>Math.abs(e)}class S extends u.Triangle{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=[,,,,].fill().map(()=>new u.Vector3),this.satBounds=[,,,,].fill().map(()=>new A),this.points=[this.a,this.b,this.c],this.sphere=new u.Sphere,this.plane=new u.Plane,this.needsUpdate=!0}intersectsSphere(e){return V(e,this)}update(){let e=this.a,t=this.b,r=this.c,n=this.points,i=this.satAxes,o=this.satBounds,s=i[0],a=o[0];this.getNormal(s),a.setFromPoints(s,n);let l=i[1],u=o[1];l.subVectors(e,t),u.setFromPoints(l,n);let c=i[2],d=o[2];c.subVectors(t,r),d.setFromPoints(c,n);let f=i[3],p=o[3];f.subVectors(r,e),p.setFromPoints(f,n),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}}S.prototype.closestPointToSegment=function(){let e=new u.Vector3,t=new u.Vector3,r=new u.Line3;return function(n,i=null,o=null){let s,{start:a,end:l}=n,u=this.points,c=1/0;for(let a=0;a<3;a++){let l=(a+1)%3;r.start.copy(u[a]),r.end.copy(u[l]),M(r,n,e,t),(s=e.distanceToSquared(t))<c&&(c=s,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(a,e),(s=a.distanceToSquared(e))<c&&(c=s,i&&i.copy(e),o&&o.copy(a)),this.closestPointToPoint(l,e),(s=l.distanceToSquared(e))<c&&(c=s,i&&i.copy(e),o&&o.copy(l)),Math.sqrt(c)}}(),S.prototype.intersectsTriangle=function(){let e=new S,t=[,,,],r=[,,,],n=new A,i=new A,o=new u.Vector3,s=new u.Vector3,a=new u.Vector3,l=new u.Vector3,c=new u.Vector3,d=new u.Line3,f=new u.Line3,p=new u.Line3,h=new u.Vector3;function y(e,t,r){let n=e.points,i=0,o=-1;for(let e=0;e<3;e++){let{start:a,end:l}=d;a.copy(n[e]),l.copy(n[(e+1)%3]),d.delta(s);let u=_(t.distanceToPoint(a));if(_(t.normal.dot(s))&&u){r.copy(d),i=2;break}let c=t.intersectLine(d,h);if(!c&&u&&h.copy(a),(c||u)&&!_(h.distanceTo(l))){if(i<=1)(1===i?r.start:r.end).copy(h),u&&(o=i);else if(i>=2){(1===o?r.start:r.end).copy(h),i=2;break}if(2==++i&&-1===o)break}}return i}return function(s,u=null,d=!1){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let h=this.plane,m=s.plane;if(Math.abs(h.normal.dot(m.normal))>1-1e-10){let e=this.satBounds,a=this.satAxes;r[0]=s.a,r[1]=s.b,r[2]=s.c;for(let t=0;t<4;t++){let i=e[t],o=a[t];if(n.setFromPoints(o,r),i.isSeparated(n))return!1}let l=s.satBounds,c=s.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let e=0;e<4;e++){let r=l[e],i=c[e];if(n.setFromPoints(i,t),r.isSeparated(n))return!1}for(let e=0;e<4;e++){let s=a[e];for(let e=0;e<4;e++){let a=c[e];if(o.crossVectors(s,a),n.setFromPoints(o,t),i.setFromPoints(o,r),n.isSeparated(i))return!1}}return u&&(d||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),u.start.set(0,0,0),u.end.set(0,0,0)),!0}{let e=y(this,m,f);if(1===e&&s.containsPoint(f.end))return u&&(u.start.copy(f.end),u.end.copy(f.end)),!0;if(2!==e)return!1;let t=y(s,h,p);if(1===t&&this.containsPoint(p.end))return u&&(u.start.copy(p.end),u.end.copy(p.end)),!0;if(2!==t)return!1;if(f.delta(a),p.delta(l),0>a.dot(l)){let e=p.start;p.start=p.end,p.end=e}let r=f.start.dot(a),n=f.end.dot(a),i=p.start.dot(a),o=p.end.dot(a);return(r===o||i===n||n<i!=r<o)&&(u&&(c.subVectors(f.start,p.start),c.dot(a)>0?u.start.copy(f.start):u.start.copy(p.start),c.subVectors(f.end,p.end),0>c.dot(a)?u.end.copy(f.end):u.end.copy(p.end)),!0)}}}(),S.prototype.distanceToPoint=function(){let e=new u.Vector3;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),S.prototype.distanceToTriangle=function(){let e=new u.Vector3,t=new u.Vector3,r=["a","b","c"],n=new u.Line3,i=new u.Line3;return function(o,s=null,a=null){let l=s||a?n:null;if(this.intersectsTriangle(o,l))return(s||a)&&(s&&l.getCenter(s),a&&l.getCenter(a)),0;let u=1/0;for(let t=0;t<3;t++){let n,i=r[t],l=o[i];this.closestPointToPoint(l,e),(n=l.distanceToSquared(e))<u&&(u=n,s&&s.copy(e),a&&a.copy(l));let c=this[i];o.closestPointToPoint(c,e),(n=c.distanceToSquared(e))<u&&(u=n,s&&s.copy(c),a&&a.copy(e))}for(let l=0;l<3;l++){let c=r[l],d=r[(l+1)%3];n.set(this[c],this[d]);for(let l=0;l<3;l++){let c=r[l],d=r[(l+1)%3];i.set(o[c],o[d]),M(n,i,e,t);let f=e.distanceToSquared(t);f<u&&(u=f,s&&s.copy(e),a&&a.copy(t))}}return Math.sqrt(u)}}();class I{constructor(e,t,r){this.isOrientedBox=!0,this.min=new u.Vector3,this.max=new u.Vector3,this.matrix=new u.Matrix4,this.invMatrix=new u.Matrix4,this.points=Array(8).fill().map(()=>new u.Vector3),this.satAxes=[,,,].fill().map(()=>new u.Vector3),this.satBounds=[,,,].fill().map(()=>new A),this.alignedSatBounds=[,,,].fill().map(()=>new A),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}I.prototype.update=function(){let e=this.matrix,t=this.min,r=this.max,n=this.points;for(let i=0;i<=1;i++)for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){let a=n[i|2*o|4*s];a.x=i?r.x:t.x,a.y=o?r.y:t.y,a.z=s?r.z:t.z,a.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,s=n[0];for(let e=0;e<3;e++){let t=o[e],r=i[e],a=n[1<<e];t.subVectors(s,a),r.setFromPoints(t,n)}let a=this.alignedSatBounds;a[0].setFromPointsField(n,"x"),a[1].setFromPointsField(n,"y"),a[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},I.prototype.intersectsBox=function(){let e=new A;return function(t){this.needsUpdate&&this.update();let r=t.min,n=t.max,i=this.satBounds,o=this.satAxes,s=this.alignedSatBounds;if(e.min=r.x,e.max=n.x,s[0].isSeparated(e)||(e.min=r.y,e.max=n.y,s[1].isSeparated(e))||(e.min=r.z,e.max=n.z,s[2].isSeparated(e)))return!1;for(let r=0;r<3;r++){let n=o[r],s=i[r];if(e.setFromBox(n,t),s.isSeparated(e))return!1}return!0}}(),I.prototype.intersectsTriangle=function(){let e=new S,t=[,,,],r=new A,n=new A,i=new u.Vector3;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let s=this.satBounds,a=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let e=0;e<3;e++){let n=s[e],i=a[e];if(r.setFromPoints(i,t),n.isSeparated(r))return!1}let l=o.satBounds,u=o.satAxes,c=this.points;for(let e=0;e<3;e++){let t=l[e],n=u[e];if(r.setFromPoints(n,c),t.isSeparated(r))return!1}for(let e=0;e<3;e++){let o=a[e];for(let e=0;e<4;e++){let s=u[e];if(i.crossVectors(o,s),r.setFromPoints(i,t),n.setFromPoints(i,c),r.isSeparated(n))return!1}}return!0}}(),I.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},I.prototype.distanceToPoint=function(){let e=new u.Vector3;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),I.prototype.distanceToBox=function(){let e=["x","y","z"],t=Array(12).fill().map(()=>new u.Line3),r=Array(12).fill().map(()=>new u.Line3),n=new u.Vector3,i=new u.Vector3;return function(o,s=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(a||l)&&(o.getCenter(i),this.closestPointToPoint(i,n),o.closestPointToPoint(n,i),a&&a.copy(n),l&&l.copy(i)),0;let u=s*s,c=o.min,d=o.max,f=this.points,p=1/0;for(let e=0;e<8;e++){let t=f[e];i.copy(t).clamp(c,d);let r=t.distanceToSquared(i);if(r<p&&(p=r,a&&a.copy(t),l&&l.copy(i),r<u))return Math.sqrt(r)}let h=0;for(let n=0;n<3;n++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let s=(n+1)%3,a=(n+2)%3,l=i<<s|o<<a,u=1<<n|i<<s|o<<a,p=f[l],y=f[u];t[h].set(p,y);let m=e[n],g=e[s],x=e[a],b=r[h],w=b.start,B=b.end;w[m]=c[m],w[g]=i?c[g]:d[g],w[x]=o?c[x]:d[g],B[m]=d[m],B[g]=i?c[g]:d[g],B[x]=o?c[x]:d[g],h++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let r=0;r<=1;r++){i.x=e?d.x:c.x,i.y=t?d.y:c.y,i.z=r?d.z:c.z,this.closestPointToPoint(i,n);let o=i.distanceToSquared(n);if(o<p&&(p=o,a&&a.copy(n),l&&l.copy(i),o<u))return Math.sqrt(o)}for(let e=0;e<12;e++){let o=t[e];for(let e=0;e<12;e++){M(o,r[e],n,i);let t=n.distanceToSquared(i);if(t<p&&(p=t,a&&a.copy(n),l&&l.copy(i),t<u))return Math.sqrt(t)}}return Math.sqrt(p)}}();class E{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class U extends E{constructor(){super(()=>new S)}}let O=new U;class F{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;let e=[],t=null;this.setBuffer=r=>{t&&e.push(t),t=r,this.float32Array=new Float32Array(r),this.uint16Array=new Uint16Array(r),this.uint32Array=new Uint32Array(r)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,0!==e.length&&this.setBuffer(e.pop())}}}let C=new F,R=[],j=new E(()=>new u.Box3),D=new u.Vector3,z=new u.Vector3,L=parseInt(u.REVISION)>=169,N=new u.Vector3,q=new u.Vector3,H=new u.Vector3,W=new u.Vector2,k=new u.Vector2,X=new u.Vector2,G=new u.Vector3,Y=new u.Vector3,Q=new u.Vector3,Z=new u.Vector3;function $(e,t,r,n,i,o,s){let a=3*n,l=a+0,c=a+1,d=a+2,f=e.index;e.index&&(l=f.getX(l),c=f.getX(c),d=f.getX(d));let{position:p,normal:h,uv:y,uv1:m}=e.attributes,g=function(e,t,r,n,i,o,s,a,l,c,d){N.fromBufferAttribute(t,o),q.fromBufferAttribute(t,s),H.fromBufferAttribute(t,a);let f=function(e,t,r,n,i,o,s,a){if(null===(o===u.BackSide?e.intersectTriangle(n,r,t,!0,i):e.intersectTriangle(t,r,n,o!==u.DoubleSide,i)))return null;let l=e.origin.distanceTo(i);return l<s||l>a?null:{distance:l,point:i.clone()}}(e,N,q,H,Z,l,c,d);if(f){let t=new u.Vector3;u.Triangle.getBarycoord(Z,N,q,H,t),n&&(W.fromBufferAttribute(n,o),k.fromBufferAttribute(n,s),X.fromBufferAttribute(n,a),f.uv=u.Triangle.getInterpolation(Z,N,q,H,W,k,X,new u.Vector2)),i&&(W.fromBufferAttribute(i,o),k.fromBufferAttribute(i,s),X.fromBufferAttribute(i,a),f.uv1=u.Triangle.getInterpolation(Z,N,q,H,W,k,X,new u.Vector2)),r&&(G.fromBufferAttribute(r,o),Y.fromBufferAttribute(r,s),Q.fromBufferAttribute(r,a),f.normal=u.Triangle.getInterpolation(Z,N,q,H,G,Y,Q,new u.Vector3),f.normal.dot(e.direction)>0&&f.normal.multiplyScalar(-1));let l={a:o,b:s,c:a,normal:new u.Vector3,materialIndex:0};u.Triangle.getNormal(N,q,H,l.normal),f.face=l,f.faceIndex=o,L&&(f.barycoord=t)}return f}(r,p,h,y,m,l,c,d,t,o,s);return g?(g.faceIndex=n,i&&i.push(g),g):null}function J(e,t,r,n){let i=e.a,o=e.b,s=e.c,a=t,l=t+1,u=t+2;r&&(a=r.getX(a),l=r.getX(l),u=r.getX(u)),i.x=n.getX(a),i.y=n.getY(a),i.z=n.getZ(a),o.x=n.getX(l),o.y=n.getY(l),o.z=n.getZ(l),s.x=n.getX(u),s.y=n.getY(u),s.z=n.getZ(u)}function K(e,t,r,n,i,o,s){let{geometry:a}=r,{index:l}=a,u=a.attributes.position;for(let r=e,a=t+e;r<a;r++){let e;if(J(s,3*(e=r),l,u),s.needsUpdate=!0,n(s,e,i,o))return!0}return!1}function ee(e,t,r,n,i){let o,s,a,l,u,c,d=1/r.direction.x,f=1/r.direction.y,p=1/r.direction.z,h=r.origin.x,y=r.origin.y,m=r.origin.z,g=t[e],x=t[e+3],b=t[e+1],w=t[e+3+1],B=t[e+2],v=t[e+3+2];return d>=0?(o=(g-h)*d,s=(x-h)*d):(o=(x-h)*d,s=(g-h)*d),f>=0?(a=(b-y)*f,l=(w-y)*f):(a=(w-y)*f,l=(b-y)*f),!(o>l)&&!(a>s)&&((a>o||isNaN(o))&&(o=a),(l<s||isNaN(s))&&(s=l),p>=0?(u=(B-m)*p,c=(v-m)*p):(u=(v-m)*p,c=(B-m)*p),!(o>c)&&!(u>s)&&((u>o||o!=o)&&(o=u),(c<s||s!=s)&&(s=c),o<=i&&s>=n))}function et(e,t,r,n,i,o,s){C.setBuffer(e._roots[t]),function e(t,r,n,i,o,s,a){let{float32Array:l,uint16Array:u,uint32Array:c}=C,d=2*t;if(v(d,u)){let e=c[t+6],l=T(d,u),{geometry:f,_indirectBuffer:p}=r;for(let t=e,r=e+l;t<r;t++)$(f,n,i,t,o,s,a)}else{let u=t+8;ee(u,l,i,s,a)&&e(u,r,n,i,o,s,a);let d=c[t+6];ee(d,l,i,s,a)&&e(d,r,n,i,o,s,a)}}(0,e,r,n,i,o,s),C.clearBuffer()}let er=["x","y","z"];function en(e,t,r,n,i,o){C.setBuffer(e._roots[t]);let s=function e(t,r,n,i,o,s){let{float32Array:a,uint16Array:l,uint32Array:u}=C,c=2*t;if(v(c,l))return function(e,t,r,n,i,o,s){let{geometry:a,_indirectBuffer:l}=e,u=1/0,c=null;for(let e=n,l=n+i;e<l;e++){let n;(n=$(a,t,r,e,null,o,s))&&n.distance<u&&(c=n,u=n.distance)}return c}(r,n,i,u[t+6],T(c,l),o,s);{let l,c,d=u[t+7],f=er[d],p=i.direction[f]>=0;p?(l=t+8,c=u[t+6]):(l=u[t+6],c=t+8);let h=ee(l,a,i,o,s)?e(l,r,n,i,o,s):null;if(h){let e=h.point[f];if(p?e<=a[c+d]:e>=a[c+d+3])return h}let y=ee(c,a,i,o,s)?e(c,r,n,i,o,s):null;return h&&y?h.distance<=y.distance?h:y:h||y||null}}(0,e,r,n,i,o);return C.clearBuffer(),s}let ei=new u.Box3,eo=new S,es=new S,ea=new u.Matrix4,el=new I,eu=new I;function ec(e,t,r,n){C.setBuffer(e._roots[t]);let i=function e(t,r,n,i,o=null){let{float32Array:s,uint16Array:a,uint32Array:l}=C,u=2*t;if(null===o&&(n.boundingBox||n.computeBoundingBox(),el.set(n.boundingBox.min,n.boundingBox.max,i),o=el),v(u,a)){let e=r.geometry,o=e.index,c=e.attributes.position,d=n.index,f=n.attributes.position,p=l[t+6],h=T(u,a);if(ea.copy(i).invert(),n.boundsTree)return(0,y.yA)(t,s,eu),eu.matrix.copy(ea),eu.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:e=>eu.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=3*p,r=(h+p)*3;t<r;t+=3)if(J(es,t,o,c),es.needsUpdate=!0,e.intersectsTriangle(es))return!0;return!1}});for(let e=3*p,t=(h+p)*3;e<t;e+=3){J(eo,e,o,c),eo.a.applyMatrix4(ea),eo.b.applyMatrix4(ea),eo.c.applyMatrix4(ea),eo.needsUpdate=!0;for(let e=0,t=d.count;e<t;e+=3)if(J(es,e,d,f),es.needsUpdate=!0,eo.intersectsTriangle(es))return!0}}else{let a=t+8,u=l[t+6];return(0,y.yA)(a,s,ei),!!(o.intersectsBox(ei)&&e(a,r,n,i,o))||((0,y.yA)(u,s,ei),!!(o.intersectsBox(ei)&&e(u,r,n,i,o)))}}(0,e,r,n);return C.clearBuffer(),i}let ed=new u.Matrix4,ef=new I,ep=new I,eh=new u.Vector3,ey=new u.Vector3,em=new u.Vector3,eg=new u.Vector3;function ex(e,t,r,n,i,o,s){let{geometry:a}=r,{index:l}=a,u=a.attributes.position;for(let a=e,c=t+e;a<c;a++){let e;if(J(s,3*(e=r.resolveTriangleIndex(a)),l,u),s.needsUpdate=!0,n(s,e,i,o))return!0}return!1}function eb(e,t,r,n,i,o,s){C.setBuffer(e._roots[t]),function e(t,r,n,i,o,s,a){let{float32Array:l,uint16Array:u,uint32Array:c}=C,d=2*t;if(v(d,u)){let e=c[t+6],l=T(d,u),{geometry:f,_indirectBuffer:p}=r;for(let t=e,r=e+l;t<r;t++)$(f,n,i,p?p[t]:t,o,s,a)}else{let u=t+8;ee(u,l,i,s,a)&&e(u,r,n,i,o,s,a);let d=c[t+6];ee(d,l,i,s,a)&&e(d,r,n,i,o,s,a)}}(0,e,r,n,i,o,s),C.clearBuffer()}let ew=["x","y","z"];function eB(e,t,r,n,i,o){C.setBuffer(e._roots[t]);let s=function e(t,r,n,i,o,s){let{float32Array:a,uint16Array:l,uint32Array:u}=C,c=2*t;if(v(c,l))return function(e,t,r,n,i,o,s){let{geometry:a,_indirectBuffer:l}=e,u=1/0,c=null;for(let e=n,d=n+i;e<d;e++){let n;(n=$(a,t,r,l?l[e]:e,null,o,s))&&n.distance<u&&(c=n,u=n.distance)}return c}(r,n,i,u[t+6],T(c,l),o,s);{let l,c,d=u[t+7],f=ew[d],p=i.direction[f]>=0;p?(l=t+8,c=u[t+6]):(l=u[t+6],c=t+8);let h=ee(l,a,i,o,s)?e(l,r,n,i,o,s):null;if(h){let e=h.point[f];if(p?e<=a[c+d]:e>=a[c+d+3])return h}let y=ee(c,a,i,o,s)?e(c,r,n,i,o,s):null;return h&&y?h.distance<=y.distance?h:y:h||y||null}}(0,e,r,n,i,o);return C.clearBuffer(),s}let ev=new u.Box3,eT=new S,eA=new S,eP=new u.Matrix4,eM=new I,eV=new I;function e_(e,t,r,n){C.setBuffer(e._roots[t]);let i=function e(t,r,n,i,o=null){let{float32Array:s,uint16Array:a,uint32Array:l}=C,u=2*t;if(null===o&&(n.boundingBox||n.computeBoundingBox(),eM.set(n.boundingBox.min,n.boundingBox.max,i),o=eM),v(u,a)){let e=r.geometry,o=e.index,c=e.attributes.position,d=n.index,f=n.attributes.position,p=l[t+6],h=T(u,a);if(eP.copy(i).invert(),n.boundsTree)return(0,y.yA)(t,s,eV),eV.matrix.copy(eP),eV.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:e=>eV.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let t=p,n=h+p;t<n;t++)if(J(eA,3*r.resolveTriangleIndex(t),o,c),eA.needsUpdate=!0,e.intersectsTriangle(eA))return!0;return!1}});for(let e=p,t=h+p;e<t;e++){J(eT,3*r.resolveTriangleIndex(e),o,c),eT.a.applyMatrix4(eP),eT.b.applyMatrix4(eP),eT.c.applyMatrix4(eP),eT.needsUpdate=!0;for(let e=0,t=d.count;e<t;e+=3)if(J(eA,e,d,f),eA.needsUpdate=!0,eT.intersectsTriangle(eA))return!0}}else{let a=t+8,u=l[t+6];return(0,y.yA)(a,s,ev),!!(o.intersectsBox(ev)&&e(a,r,n,i,o))||((0,y.yA)(u,s,ev),!!(o.intersectsBox(ev)&&e(u,r,n,i,o)))}}(0,e,r,n);return C.clearBuffer(),i}let eS=new u.Matrix4,eI=new I,eE=new I,eU=new u.Vector3,eO=new u.Vector3,eF=new u.Vector3,eC=new u.Vector3,eR=new C.constructor,ej=new C.constructor,eD=new E(()=>new u.Box3),ez=new u.Box3,eL=new u.Box3,eN=new u.Box3,eq=new u.Box3,eH=!1,eW=new I,ek=new u.Box3,eX={strategy:c.Q7,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class eG{static serialize(e,t={}){t={cloneBuffers:!0,...t};let r=e.geometry,n=e._roots,i=e._indirectBuffer,o=r.getIndex();return t.cloneBuffers?{roots:n.map(e=>e.slice()),index:o?o.array.slice():null,indirectBuffer:i?i.slice():null}:{roots:n,index:o?o.array:null,indirectBuffer:i}}static deserialize(e,t,r={}){r={setIndex:!0,indirect:!!e.indirectBuffer,...r};let{index:n,roots:i,indirectBuffer:o}=e,s=new eG(t,{...r,[c.vl]:!0});if(s._roots=i,s._indirectBuffer=o||null,r.setIndex){let r=t.getIndex();if(null===r){let r=new u.BufferAttribute(e.index,1,!1);t.setIndex(r)}else r.array!==n&&(r.array.set(n),r.needsUpdate=!0)}return s}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw Error("MeshBVH: Only BufferGeometries are supported.");if((t=Object.assign({...eX,[c.vl]:!1},t)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[c.vl]||(!function(e,t){let r=e.geometry;t.indirect&&(e._indirectBuffer=function(e,t){let r=(e.index?e.index.count:e.attributes.position.count)/3,n=r>65536,i=n?4:2,o=t?new SharedArrayBuffer(r*i):new ArrayBuffer(r*i),s=n?new Uint32Array(o):new Uint16Array(o);for(let e=0,t=s.length;e<t;e++)s[e]=e;return s}(r,t.useSharedArrayBuffer),function(e,t){let r=d(e),n=p(e,t).sort((e,t)=>e.offset-t.offset),i=n[n.length-1];i.count=Math.min(r-i.offset,i.count);let o=0;return n.forEach(({count:e})=>o+=e),r!==o}(r,t.range)&&!t.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),e._indirectBuffer||function(e,t){if(!e.index){let r=e.attributes.position.count,n=function(e,t=ArrayBuffer){return e>65535?new Uint32Array(new t(4*e)):new Uint16Array(new t(2*e))}(r,t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer);e.setIndex(new u.BufferAttribute(n,1));for(let e=0;e<r;e++)n[e]=e}}(r,t);let a=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,l=function(e,t=null,r=null,n=null){let i,o=e.attributes.position,s=e.index?e.index.array:null,a=d(e),l=o.normalized;null===t?(i=new Float32Array(6*a),r=0,n=a):(i=t,r=r||0,n=n||a);let u=o.array,f=o.offset||0,p=3;o.isInterleavedBufferAttribute&&(p=o.data.stride);let h=["getX","getY","getZ"];for(let e=r;e<r+n;e++){let t=3*e,r=6*e,n=t+0,a=t+1,d=t+2;s&&(n=s[n],a=s[a],d=s[d]),l||(n=n*p+f,a=a*p+f,d=d*p+f);for(let e=0;e<3;e++){let t,s,f;l?(t=o[h[e]](n),s=o[h[e]](a),f=o[h[e]](d)):(t=u[n+e],s=u[a+e],f=u[d+e]);let p=t;s<p&&(p=s),f<p&&(p=f);let y=t;s>y&&(y=s),f>y&&(y=f);let m=(y-p)/2,g=2*e;i[r+g+0]=p+m,i[r+g+1]=m+(Math.abs(p)+m)*c.bf}}return i}(r);e._roots=(t.indirect?f(r,t.range):p(r,t.range)).map(r=>{let u=function(e,t,r,n,i){let{maxDepth:o,verbose:s,maxLeafTris:a,strategy:l,onProgress:u,indirect:f}=i,p=e._indirectBuffer,v=e.geometry,T=v.index?v.index.array:null,A=f?B:w,P=d(v),M=new Float32Array(6),V=!1,_=new b;return h(t,r,n,_.boundingData,M),function e(r,n,i,u=null,d=0){if(!V&&d>=o&&(V=!0,s&&(console.warn(`MeshBVH: Max depth of ${o} reached when generating BVH. Consider increasing maxDepth.`),console.warn(v))),i<=a||d>=o)return S(n+i),r.offset=n,r.count=i,r;let f=function(e,t,r,n,i,o){let s=-1,a=0;if(o===c.Q7)-1!==(s=(0,y._V)(t))&&(a=(t[s]+t[s+3])/2);else if(o===c.Gm)-1!==(s=(0,y._V)(e))&&(a=function(e,t,r,n){let i=0;for(let o=t,s=t+r;o<s;o++)i+=e[6*o+2*n];return i/r}(r,n,i,s));else if(o===c.Xe){let o=(0,y.S_)(e),l=c.$J*i,u=6*n,d=(n+i)*6;for(let e=0;e<3;e++){let n=t[e],f=(t[e+3]-n)/32;if(i<8){let t=[...g];t.length=i;let n=0;for(let i=u;i<d;i+=6,n++){let o=t[n];o.candidate=r[i+2*e],o.count=0;let{bounds:s,leftCacheBounds:a,rightCacheBounds:l}=o;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,a[e]=1/0,a[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0;(0,y.nd)(i,r,s)}t.sort(m);let f=i;for(let e=0;e<f;e++){let r=t[e];for(;e+1<f&&t[e+1].candidate===r.candidate;)t.splice(e+1,1),f--}for(let n=u;n<d;n+=6){let i=r[n+2*e];for(let e=0;e<f;e++){let o=t[e];i>=o.candidate?(0,y.nd)(n,r,o.rightCacheBounds):((0,y.nd)(n,r,o.leftCacheBounds),o.count++)}}for(let r=0;r<f;r++){let n=t[r],u=n.count,d=i-n.count,f=n.leftCacheBounds,p=n.rightCacheBounds,h=0;0!==u&&(h=(0,y.S_)(f)/o);let m=0;0!==d&&(m=(0,y.S_)(p)/o);let g=c.nw+c.$J*(h*u+m*d);g<l&&(s=e,l=g,a=n.candidate)}}else{for(let e=0;e<32;e++){let t=g[e];t.count=0,t.candidate=n+f+e*f;let r=t.bounds;for(let e=0;e<3;e++)r[e]=1/0,r[e+3]=-1/0}for(let t=u;t<d;t+=6){let i=~~((r[t+2*e]-n)/f);i>=32&&(i=31);let o=g[i];o.count++,(0,y.nd)(t,r,o.bounds)}let t=g[31];(0,y.p4)(t.bounds,t.rightCacheBounds);for(let e=30;e>=0;e--){let t=g[e],r=g[e+1];(0,y.zH)(t.bounds,r.rightCacheBounds,t.rightCacheBounds)}let p=0;for(let t=0;t<31;t++){let r=g[t],n=r.count,u=r.bounds,d=g[t+1].rightCacheBounds;0!==n&&(0===p?(0,y.p4)(u,x):(0,y.zH)(u,x,x));let f=0,h=0;0!==(p+=n)&&(f=(0,y.S_)(x)/o);let m=i-p;0!==m&&(h=(0,y.S_)(d)/o);let b=c.nw+c.$J*(f*p+h*m);b<l&&(s=e,l=b,a=r.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:s,pos:a}}(r.boundingData,u,t,n,i,l);if(-1===f.axis)return S(n+i),r.offset=n,r.count=i,r;let w=A(p,T,t,n,i,f);if(w===n||w===n+i)S(n+i),r.offset=n,r.count=i;else{r.splitAxis=f.axis;let o=new b,s=w-n;r.left=o,h(t,n,s,o.boundingData,M),e(o,n,s,M,d+1);let a=new b,l=i-s;r.right=a,h(t,w,l,a.boundingData,M),e(a,w,l,M,d+1)}return r}(_,r,n,M),_;function S(e){u&&u(e/P)}}(e,l,r.offset,r.count,t),f=function e(t){return"count"in t?1:1+e(t.left)+e(t.right)}(u),p=new a(c.Ne*f);return n=new Float32Array(p),i=new Uint32Array(p),o=new Uint16Array(p),s=new Uint8Array(p),function e(t,r){let a=t/4,l=t/2,u="count"in r,d=r.boundingData;for(let e=0;e<6;e++)n[a+e]=d[e];if(u)if(r.buffer){let e=r.buffer;s.set(new Uint8Array(e),t);for(let r=t,n=t+e.byteLength;r<n;r+=c.Ne)v(r/2,o)||(i[r/4+6]+=a);return t+e.byteLength}else{let e=r.offset,n=r.count;return i[a+6]=e,o[l+14]=n,o[l+15]=c.BE,t+c.Ne}{let n,o=r.left,s=r.right,l=r.splitAxis;if((n=e(t+c.Ne,o))/4>0x100000000)throw Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[a+6]=n/4,n=e(n,s),i[a+7]=l,n}}(0,u),p})}(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new u.Box3))),this.resolveTriangleIndex=t.indirect?e=>this._indirectBuffer[e]:e=>e}refit(e=null){return(this.indirect?function(e,t=null){let r,n,i,o;t&&Array.isArray(t)&&(t=new Set(t));let s=e.geometry,a=s.index?s.index.array:null,l=s.attributes.position,u=0,d=e._roots;for(let s=0,f=d.length;s<f;s++)n=new Uint32Array(r=d[s]),i=new Uint16Array(r),o=new Float32Array(r),function r(s,u,d=!1){let f=2*s;if(i[f+15]===c.BE){let t=n[s+6],r=i[f+14],u=1/0,c=1/0,d=1/0,p=-1/0,h=-1/0,y=-1/0;for(let n=t,i=t+r;n<i;n++){let t=3*e.resolveTriangleIndex(n);for(let e=0;e<3;e++){let r=t+e;r=a?a[r]:r;let n=l.getX(r),i=l.getY(r),o=l.getZ(r);n<u&&(u=n),n>p&&(p=n),i<c&&(c=i),i>h&&(h=i),o<d&&(d=o),o>y&&(y=o)}}return(o[s+0]!==u||o[s+1]!==c||o[s+2]!==d||o[s+3]!==p||o[s+4]!==h||o[s+5]!==y)&&(o[s+0]=u,o[s+1]=c,o[s+2]=d,o[s+3]=p,o[s+4]=h,o[s+5]=y,!0)}{let e=s+8,i=n[s+6],a=e+u,l=i+u,c=d,f=!1,p=!1;t?c||(f=t.has(a),p=t.has(l),c=!f&&!p):(f=!0,p=!0);let h=c||f,y=c||p,m=!1;h&&(m=r(e,u,c));let g=!1;y&&(g=r(i,u,c));let x=m||g;if(x)for(let t=0;t<3;t++){let r=e+t,n=i+t,a=o[r],l=o[r+3],u=o[n],c=o[n+3];o[s+t]=a<u?a:u,o[s+t+3]=l>c?l:c}return x}}(0,u),u+=r.byteLength}:function(e,t=null){let r,n,i,o;t&&Array.isArray(t)&&(t=new Set(t));let s=e.geometry,a=s.index?s.index.array:null,l=s.attributes.position,u=0,d=e._roots;for(let e=0,s=d.length;e<s;e++)n=new Uint32Array(r=d[e]),i=new Uint16Array(r),o=new Float32Array(r),function e(r,s,u=!1){let d=2*r;if(i[d+15]===c.BE){let e=n[r+6],t=i[d+14],s=1/0,u=1/0,c=1/0,f=-1/0,p=-1/0,h=-1/0;for(let r=3*e,n=3*(e+t);r<n;r++){let e=a[r],t=l.getX(e),n=l.getY(e),i=l.getZ(e);t<s&&(s=t),t>f&&(f=t),n<u&&(u=n),n>p&&(p=n),i<c&&(c=i),i>h&&(h=i)}return(o[r+0]!==s||o[r+1]!==u||o[r+2]!==c||o[r+3]!==f||o[r+4]!==p||o[r+5]!==h)&&(o[r+0]=s,o[r+1]=u,o[r+2]=c,o[r+3]=f,o[r+4]=p,o[r+5]=h,!0)}{let i=r+8,a=n[r+6],l=i+s,c=a+s,d=u,f=!1,p=!1;t?d||(f=t.has(l),p=t.has(c),d=!f&&!p):(f=!0,p=!0);let h=d||f,y=d||p,m=!1;h&&(m=e(i,s,d));let g=!1;y&&(g=e(a,s,d));let x=m||g;if(x)for(let e=0;e<3;e++){let t=i+e,n=a+e,s=o[t],l=o[t+3],u=o[n],c=o[n+3];o[r+e]=s<u?s:u,o[r+e+3]=l>c?l:c}return x}}(0,u),u+=r.byteLength})(this,e)}traverse(e,t=0){let r=this._roots[t],n=new Uint32Array(r),i=new Uint16Array(r);!function t(o,s=0){let a=2*o,l=i[a+15]===c.BE;if(l){let t=n[o+6],u=i[a+14];e(s,l,new Float32Array(r,4*o,6),t,u)}else{let i=o+c.Ne/4,a=n[o+6],u=n[o+7];e(s,l,new Float32Array(r,4*o,6),u)||(t(i,s+1),t(a,s+1))}}(0)}raycast(e,t=u.FrontSide,r=0,n=1/0){let i=this._roots,o=this.geometry,s=[],a=t.isMaterial,l=Array.isArray(t),c=o.groups,d=a?t.side:t,f=this.indirect?eb:et;for(let o=0,a=i.length;o<a;o++){let i=l?t[c[o].materialIndex].side:d,a=s.length;if(f(this,o,i,e,s,r,n),l){let e=c[o].materialIndex;for(let t=a,r=s.length;t<r;t++)s[t].face.materialIndex=e}}return s}raycastFirst(e,t=u.FrontSide,r=0,n=1/0){let i=this._roots,o=this.geometry,s=t.isMaterial,a=Array.isArray(t),l=null,c=o.groups,d=s?t.side:t,f=this.indirect?eB:en;for(let o=0,s=i.length;o<s;o++){let i=a?t[c[o].materialIndex].side:d,s=f(this,o,i,e,r,n);null!=s&&(null==l||s.distance<l.distance)&&(l=s,a&&(s.face.materialIndex=c[o].materialIndex))}return l}intersectsGeometry(e,t){let r=!1,n=this._roots,i=this.indirect?e_:ec;for(let o=0,s=n.length;o<s&&!(r=i(this,o,e,t));o++);return r}shapecast(e){let t=O.getPrimitive(),r=this.indirect?ex:K,{boundsTraverseOrder:n,intersectsBounds:i,intersectsRange:o,intersectsTriangle:s}=e;if(o&&s){let e=o;o=(n,i,o,a,l)=>!!e(n,i,o,a,l)||r(n,i,this,s,o,a,t)}else o||(o=s?(e,n,i,o)=>r(e,n,this,s,i,o,t):(e,t,r)=>r);let u=!1,d=0,f=this._roots;for(let e=0,t=f.length;e<t;e++){let t=f[e];if(u=function(e,t,r,n,i,o){a=j.getPrimitive(),l=j.getPrimitive(),R.push(a,l),C.setBuffer(e._roots[t]);let s=function e(t,r,n,i,o=null,s=0,u=0){let{float32Array:d,uint16Array:f,uint32Array:p}=C,h=2*t;if(v(h,f)){let e=p[t+6],r=T(h,f);return(0,y.yA)(t,d,a),i(e,r,!1,u,s+t,a)}{let h,x,b,w,B,A,P=t+8,M=p[t+6],V=P,_=M;if(o&&(b=a,w=l,(0,y.yA)(V,d,b),(0,y.yA)(_,d,w),h=o(b),(x=o(w))<h)){V=M,_=P;let e=h;h=x,x=e,b=w}b||(b=a,(0,y.yA)(V,d,b));let S=n(b,v(2*V,f),h,u+1,s+V);if(S===c.yj){let e=m(V);B=i(e,g(V)-e,!0,u+1,s+V,b)}else B=S&&e(V,r,n,i,o,s,u+1);if(B)return!0;w=l,(0,y.yA)(_,d,w);let I=n(w,v(2*_,f),x,u+1,s+_);if(I===c.yj){let e=m(_);A=i(e,g(_)-e,!0,u+1,s+_,w)}else A=I&&e(_,r,n,i,o,s,u+1);if(A)return!0;return!1;function m(e){let{uint16Array:t,uint32Array:r}=C,n=2*e;for(;!v(n,t);)n=2*(e+=8);return r[e+6]}function g(e){let{uint16Array:t,uint32Array:r}=C,n=2*e;for(;!v(n,t);)n=2*(e=r[e+6]);return r[e+6]+T(n,t)}}}(0,e.geometry,r,n,i,o);C.clearBuffer(),j.releasePrimitive(a),j.releasePrimitive(l),R.pop(),R.pop();let u=R.length;return u>0&&(l=R[u-1],a=R[u-2]),s}(this,e,i,o,n,d))break;d+=t.byteLength}return O.releasePrimitive(t),u}bvhcast(e,t,r){let{intersectsRanges:n,intersectsTriangles:i}=r,o=O.getPrimitive(),s=this.geometry.index,a=this.geometry.attributes.position,l=this.indirect?e=>{J(o,3*this.resolveTriangleIndex(e),s,a)}:e=>{J(o,3*e,s,a)},c=O.getPrimitive(),d=e.geometry.index,f=e.geometry.attributes.position,p=e.indirect?t=>{J(c,3*e.resolveTriangleIndex(t),d,f)}:e=>{J(c,3*e,d,f)};if(i){let e=(e,r,n,s,a,u,d,f)=>{for(let h=n,y=n+s;h<y;h++){p(h),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let t=e,n=e+r;t<n;t++)if(l(t),o.needsUpdate=!0,i(o,c,t,h,a,u,d,f))return!0}return!1};if(n){let t=n;n=function(r,n,i,o,s,a,l,u){return!!t(r,n,i,o,s,a,l,u)||e(r,n,i,o,s,a,l,u)}}else n=e}return function(e,t,r,n){let i;if(eH)throw Error("MeshBVH: Recursive calls to bvhcast not supported.");eH=!0;let o=e._roots,s=t._roots,a=0,l=0,c=new u.Matrix4().copy(r).invert();for(let e=0,t=o.length;e<t;e++){eR.setBuffer(o[e]),l=0;let t=eD.getPrimitive();(0,y.yA)(0,eR.float32Array,t),t.applyMatrix4(c);for(let e=0,o=s.length;e<o&&(ej.setBuffer(s[e]),i=function e(t,r,n,i,o,s=0,a=0,l=0,u=0,c=null,d=!1){let f,p;d?(f=ej,p=eR):(f=eR,p=ej);let h=f.float32Array,m=f.uint32Array,g=f.uint16Array,x=p.float32Array,b=p.uint32Array,w=p.uint16Array,B=2*r,A=v(2*t,g),P=v(B,w),M=!1;if(P&&A)M=d?o(b[r+6],T(2*r,w),m[t+6],T(2*t,g),u,a+r,l,s+t):o(m[t+6],T(2*t,g),b[r+6],T(2*r,w),l,s+t,u,a+r);else if(P){let c=eD.getPrimitive();(0,y.yA)(r,x,c),c.applyMatrix4(n);let f=t+8,p=m[t+6];(0,y.yA)(f,h,ez),(0,y.yA)(p,h,eL);let g=c.intersectsBox(ez),b=c.intersectsBox(eL);M=g&&e(r,f,i,n,o,a,s,u,l+1,c,!d)||b&&e(r,p,i,n,o,a,s,u,l+1,c,!d),eD.releasePrimitive(c)}else{let f=r+8,p=b[r+6];(0,y.yA)(f,x,eN),(0,y.yA)(p,x,eq);let g=c.intersectsBox(eN),w=c.intersectsBox(eq);if(g&&w)M=e(t,f,n,i,o,s,a,l,u+1,c,d)||e(t,p,n,i,o,s,a,l,u+1,c,d);else if(g)if(A)M=e(t,f,n,i,o,s,a,l,u+1,c,d);else{let r=eD.getPrimitive();r.copy(eN).applyMatrix4(n);let c=t+8,p=m[t+6];(0,y.yA)(c,h,ez),(0,y.yA)(p,h,eL);let g=r.intersectsBox(ez),x=r.intersectsBox(eL);M=g&&e(f,c,i,n,o,a,s,u,l+1,r,!d)||x&&e(f,p,i,n,o,a,s,u,l+1,r,!d),eD.releasePrimitive(r)}else if(w)if(A)M=e(t,p,n,i,o,s,a,l,u+1,c,d);else{let r=eD.getPrimitive();r.copy(eq).applyMatrix4(n);let c=t+8,f=m[t+6];(0,y.yA)(c,h,ez),(0,y.yA)(f,h,eL);let g=r.intersectsBox(ez),x=r.intersectsBox(eL);M=g&&e(p,c,i,n,o,a,s,u,l+1,r,!d)||x&&e(p,f,i,n,o,a,s,u,l+1,r,!d),eD.releasePrimitive(r)}}return M}(0,0,r,c,n,a,l,0,0,t),ej.clearBuffer(),l+=s[e].length,!i);e++);if(eD.releasePrimitive(t),eR.clearBuffer(),a+=o[e].length,i)break}return eH=!1,i}(this,e,t,n)}intersectsBox(e,t){return eW.set(e.min,e.max,t),eW.needsUpdate=!0,this.shapecast({intersectsBounds:e=>eW.intersectsBox(e),intersectsTriangle:e=>eW.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},n={},i=0,o=1/0){return(this.indirect?function(e,t,r,n={},i={},o=0,s=1/0){t.boundingBox||t.computeBoundingBox(),eI.set(t.boundingBox.min,t.boundingBox.max,r),eI.needsUpdate=!0;let a=e.geometry,l=a.attributes.position,u=a.index,c=t.attributes.position,f=t.index,p=O.getPrimitive(),h=O.getPrimitive(),y=null,m=null;i&&(y=eF,m=eC);let g=1/0,x=null,b=null;return(eS.copy(r).invert(),eE.matrix.copy(eS),e.shapecast({boundsTraverseOrder:e=>eI.distanceToBox(e),intersectsBounds:(e,t,r)=>r<g&&r<s&&(t&&(eE.min.copy(e.min),eE.max.copy(e.max),eE.needsUpdate=!0),!0),intersectsRange:(n,i)=>{if(t.boundsTree){let a=t.boundsTree;return a.shapecast({boundsTraverseOrder:e=>eE.distanceToBox(e),intersectsBounds:(e,t,r)=>r<g&&r<s,intersectsRange:(t,s)=>{for(let d=t,w=t+s;d<w;d++){J(h,3*a.resolveTriangleIndex(d),f,c),h.a.applyMatrix4(r),h.b.applyMatrix4(r),h.c.applyMatrix4(r),h.needsUpdate=!0;for(let t=n,r=n+i;t<r;t++){J(p,3*e.resolveTriangleIndex(t),u,l),p.needsUpdate=!0;let r=p.distanceToTriangle(h,eU,y);if(r<g&&(eO.copy(eU),m&&m.copy(y),g=r,x=t,b=d),r<o)return!0}}}})}{let s=d(t);for(let t=0;t<s;t++){J(h,3*t,f,c),h.a.applyMatrix4(r),h.b.applyMatrix4(r),h.c.applyMatrix4(r),h.needsUpdate=!0;for(let r=n,s=n+i;r<s;r++){J(p,3*e.resolveTriangleIndex(r),u,l),p.needsUpdate=!0;let n=p.distanceToTriangle(h,eU,y);if(n<g&&(eO.copy(eU),m&&m.copy(y),g=n,x=r,b=t),n<o)return!0}}}}}),O.releasePrimitive(p),O.releasePrimitive(h),g===1/0)?null:(n.point?n.point.copy(eO):n.point=eO.clone(),n.distance=g,n.faceIndex=x,i&&(i.point?i.point.copy(m):i.point=m.clone(),i.point.applyMatrix4(eS),eO.applyMatrix4(eS),i.distance=eO.sub(i.point).length(),i.faceIndex=b),n)}:function(e,t,r,n={},i={},o=0,s=1/0){t.boundingBox||t.computeBoundingBox(),ef.set(t.boundingBox.min,t.boundingBox.max,r),ef.needsUpdate=!0;let a=e.geometry,l=a.attributes.position,u=a.index,c=t.attributes.position,f=t.index,p=O.getPrimitive(),h=O.getPrimitive(),y=null,m=null;i&&(y=em,m=eg);let g=1/0,x=null,b=null;return(ed.copy(r).invert(),ep.matrix.copy(ed),e.shapecast({boundsTraverseOrder:e=>ef.distanceToBox(e),intersectsBounds:(e,t,r)=>r<g&&r<s&&(t&&(ep.min.copy(e.min),ep.max.copy(e.max),ep.needsUpdate=!0),!0),intersectsRange:(e,n)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:e=>ep.distanceToBox(e),intersectsBounds:(e,t,r)=>r<g&&r<s,intersectsRange:(t,i)=>{for(let s=t,a=t+i;s<a;s++){J(h,3*s,f,c),h.a.applyMatrix4(r),h.b.applyMatrix4(r),h.c.applyMatrix4(r),h.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++){J(p,3*t,u,l),p.needsUpdate=!0;let e=p.distanceToTriangle(h,eh,y);if(e<g&&(ey.copy(eh),m&&m.copy(y),g=e,x=t,b=s),e<o)return!0}}}});{let i=d(t);for(let t=0;t<i;t++){J(h,3*t,f,c),h.a.applyMatrix4(r),h.b.applyMatrix4(r),h.c.applyMatrix4(r),h.needsUpdate=!0;for(let r=e,i=e+n;r<i;r++){J(p,3*r,u,l),p.needsUpdate=!0;let e=p.distanceToTriangle(h,eh,y);if(e<g&&(ey.copy(eh),m&&m.copy(y),g=e,x=r,b=t),e<o)return!0}}}}}),O.releasePrimitive(p),O.releasePrimitive(h),g===1/0)?null:(n.point?n.point.copy(ey):n.point=ey.clone(),n.distance=g,n.faceIndex=x,i&&(i.point?i.point.copy(m):i.point=m.clone(),i.point.applyMatrix4(ed),ey.applyMatrix4(ed),i.distance=ey.sub(i.point).length(),i.faceIndex=b),n)})(this,e,t,r,n,i,o)}closestPointToPoint(e,t={},r=0,n=1/0){return function(e,t,r={},n=0,i=1/0){let o=n*n,s=i*i,a=1/0,l=null;if(e.shapecast({boundsTraverseOrder:e=>(D.copy(t).clamp(e.min,e.max),D.distanceToSquared(t)),intersectsBounds:(e,t,r)=>r<a&&r<s,intersectsTriangle:(e,r)=>{e.closestPointToPoint(t,D);let n=t.distanceToSquared(D);return n<a&&(z.copy(D),a=n,l=r),n<o}}),a===1/0)return null;let u=Math.sqrt(a);return r.point?r.point.copy(z):r.point=z.clone(),r.distance=u,r.faceIndex=l,r}(this,e,t,r,n)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{(0,y.yA)(0,new Float32Array(t),ek),e.union(ek)}),e}}},28724:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(14232),i=r(71804);function o(e,t,...r){let s=n.useRef(null),a=(0,i.C)(e=>e.scene);return n.useLayoutEffect(()=>{let n;if(e&&null!=e&&e.current&&t&&(s.current=n=new t(e.current,...r)),n)return n.traverse(e=>e.raycast=()=>null),a.add(n),()=>{s.current=void 0,a.remove(n),null==n.dispose||n.dispose()}},[a,t,e,...r]),(0,i.D)(()=>{var e;null==(e=s.current)||null==e.update||e.update()}),s}},33191:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var n=r(44501),i=r(14232),o=r(1825),s=r(71804),a=r(41401);let l=i.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:r="middle",font:l,fontSize:u=1,children:c,characters:d,onSync:f,...p},h)=>{let y=(0,s.C)(({invalidate:e})=>e),[m]=i.useState(()=>new o.EY),[g,x]=i.useMemo(()=>{let e=[],t="";return i.Children.forEach(c,r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)}),[e,t]},[c]);return(0,a.DY)(()=>new Promise(e=>(0,o.PY)({font:l,characters:d},e)),["troika-text",l,d]),i.useLayoutEffect(()=>void m.sync(()=>{y(),f&&f(m)})),i.useEffect(()=>()=>m.dispose(),[m]),i.createElement("primitive",(0,n.A)({object:m,ref:h,font:l,text:x,anchorX:t,anchorY:r,fontSize:u,sdfGlyphSize:e},p),g)})},47984:(e,t,r)=>{"use strict";r.d(t,{$J:()=>a,BE:()=>c,Gm:()=>i,Ne:()=>u,Q7:()=>n,Xe:()=>o,bf:()=>d,nw:()=>l,vl:()=>f,yj:()=>s});let n=0,i=1,o=2,s=2,a=1.25,l=1,u=32,c=65535,d=5960464477539063e-23,f=Symbol("SKIP_GENERATION")},49082:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(44501),i=r(71804),o=r(14232),s=r(78961);let a=o.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:a,enableDamping:l=!0,keyEvents:u=!1,onChange:c,onStart:d,onEnd:f,...p},h)=>{let y=(0,i.C)(e=>e.invalidate),m=(0,i.C)(e=>e.camera),g=(0,i.C)(e=>e.gl),x=(0,i.C)(e=>e.events),b=(0,i.C)(e=>e.setEvents),w=(0,i.C)(e=>e.set),B=(0,i.C)(e=>e.get),v=(0,i.C)(e=>e.performance),T=t||m,A=a||x.connected||g.domElement,P=o.useMemo(()=>new s.N(T),[T]);return(0,i.D)(()=>{P.enabled&&P.update()},-1),o.useEffect(()=>(u&&P.connect(!0===u?A:u),P.connect(A),()=>void P.dispose()),[u,A,r,P,y]),o.useEffect(()=>{let e=e=>{y(),r&&v.regress(),c&&c(e)},t=e=>{d&&d(e)},n=e=>{f&&f(e)};return P.addEventListener("change",e),P.addEventListener("start",t),P.addEventListener("end",n),()=>{P.removeEventListener("start",t),P.removeEventListener("end",n),P.removeEventListener("change",e)}},[c,d,f,P,y,b]),o.useEffect(()=>{if(e){let e=B().controls;return w({controls:P}),()=>w({controls:e})}},[e,P]),o.createElement("primitive",(0,n.A)({ref:h,object:P,enableDamping:l},p))})},56486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.identifierTypes=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}(r(14232)),i=function(e){return e&&e.__esModule?e:{default:e}}(r(95062));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=["pathname","url","title","og:title","issue-number","issue-term"],u=function(e,t,r){if(0>l.indexOf(e))return void console.warn("Wrong type: "+e);if("pathname"===e)return"pathname";if("url"===e)return"url";if("title"===e)return"title";if("og:title"===e)return"og:title";if("issue-term"===e)return t;else if("issue-number"===e)return r},c=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,i;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return(t=(i=s(r).call(this,e))&&("object"===o(i)||"function"==typeof i)?i:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).myRef=n.default.createRef(),t.state={pending:!0},t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&a(r,e),t=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.repo,n=t.type,i=t.specificTerm,o=t.issueNumber,s=0>l.indexOf(n)?void console.warn("Wrong type: "+n):"issue-number"===n?"issue-number":"issue-term",a=u(n,i,o);if("issue-term"===n&&!a)return void console.warn("When type is '".concat(n,"', 'specificTerm' prop must be provided"));if("issue-number"===n&&(isNaN(a)||a<1))return void console.warn("When type is '".concat(n,"', valid 'issueNumber' prop must be provided"));var c=document.createElement("script");c.src="https://utteranc.es/client.js",c.async=!0,c.setAttribute("repo",r),c.setAttribute("crossorigin","anonymous"),c.setAttribute(s,a),c.onload=function(){return e.setState({pending:!1})},this.myRef.current.appendChild(c)}},{key:"render",value:function(){return n.default.createElement("div",{className:"react-utterences",ref:this.myRef},this.props.debug&&n.default.createElement("pre",{style:{background:"#cccccc",padding:10}},"\nthis.props: ".concat(JSON.stringify(this.props,null,2),'\nlocation.pathname: "').concat(window.location.pathname,'"\nlocation.href: "').concat(window.location.href,'"\n          ').trim()),this.props.debug&&n.default.createElement("div",null,"\uD83D\uDC47\uD83D\uDC47If the settings are valid, the comment widget appear below\uD83D\uDC47\uD83D\uDC47"),this.state.pending&&n.default.createElement("div",null,"Loading script..."))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(r.prototype,t),r}(n.Component);t.identifierTypes={pathname:{attrValue:"",summary:"Issue title contains page pathname"},url:{attrValue:"url",summary:"Issue title contains page URL"},title:{attrValue:"title",summary:"Issue title contains page title"},"og:title":{attrValue:"og:title",summary:"Issue title contains page og:title"},"issue-number":{attrValue:-1,summary:"Specific issue number"},"issue-term":{attrValue:"",summary:"Issue title contains specific term"}},c.propTypes={type:i.default.string.isRequired,repo:i.default.string.isRequired,specificTerm:i.default.string,issueNumber:i.default.number,hashKey:i.default.string,debug:i.default.bool},t.default=c},56699:(e,t,r)=>{"use strict";r.d(t,{e:()=>u});var n=r(14796),i=r(57135),o=r(8550);let s=new n.Box3,a=new n.Matrix4;class l extends n.Object3D{get isMesh(){return!this.displayEdges}get isLineSegments(){return this.displayEdges}get isLine(){return this.displayEdges}getVertexPosition(...e){return n.Mesh.prototype.getVertexPosition.call(this,...e)}constructor(e,t,r=10,i=0){super(),this.material=t,this.geometry=new n.BufferGeometry,this.name="MeshBVHRootHelper",this.depth=r,this.displayParents=!1,this.bvh=e,this.displayEdges=!0,this._group=i}raycast(){}update(){let e=this.geometry,t=this.bvh,r=this._group;if(e.dispose(),this.visible=!1,t){let o,a,l=this.depth-1,u=this.displayParents,c=0;t.traverse((e,t)=>{if(e>=l||t)return c++,!0;u&&c++},r);let d=0,f=new Float32Array(24*c);t.traverse((e,t,r)=>{let n=e>=l||t;if(n||u){(0,i.yA)(0,r,s);let{min:e,max:t}=s;for(let r=-1;r<=1;r+=2){let n=r<0?e.x:t.x;for(let r=-1;r<=1;r+=2){let i=r<0?e.y:t.y;for(let r=-1;r<=1;r+=2){let o=r<0?e.z:t.z;f[d+0]=n,f[d+1]=i,f[d+2]=o,d+=3}}}return n}},r),a=new Uint8Array(this.displayEdges?[0,4,1,5,2,6,3,7,0,2,1,3,4,6,5,7,0,1,2,3,4,5,6,7]:[0,1,2,2,1,3,4,6,5,6,7,5,1,4,5,0,4,1,2,3,6,3,7,6,0,2,4,2,6,4,1,5,3,3,5,7]),o=f.length>65535?new Uint32Array(a.length*c):new Uint16Array(a.length*c);let p=a.length;for(let e=0;e<c;e++){let t=8*e,r=e*p;for(let e=0;e<p;e++)o[r+e]=t+a[e]}e.setIndex(new n.BufferAttribute(o,1,!1)),e.setAttribute("position",new n.BufferAttribute(f,3,!1)),this.visible=!0}}}class u extends n.Group{get color(){return this.edgeMaterial.color}get opacity(){return this.edgeMaterial.opacity}set opacity(e){this.edgeMaterial.opacity=e,this.meshMaterial.opacity=e}constructor(e=null,t=null,r=10){e instanceof o.G&&(r=t||10,t=e,e=null),"number"==typeof t&&(r=t,t=null),super(),this.name="MeshBVHHelper",this.depth=r,this.mesh=e,this.bvh=t,this.displayParents=!1,this.displayEdges=!0,this.objectIndex=0,this._roots=[];let i=new n.LineBasicMaterial({color:65416,transparent:!0,opacity:.3,depthWrite:!1}),s=new n.MeshBasicMaterial({color:65416,transparent:!0,opacity:.3,depthWrite:!1});s.color=i.color,this.edgeMaterial=i,this.meshMaterial=s,this.update()}update(){let e=this.mesh,t=this.bvh||e.geometry.boundsTree||null;if(e.isBatchedMesh&&e.boundsTrees&&!t){let r=e._drawInfo[this.objectIndex];r&&(t=e.boundsTrees[r.geometryIndex]||t)}let r=t?t._roots.length:0;for(;this._roots.length>r;){let e=this._roots.pop();e.geometry.dispose(),this.remove(e)}for(let e=0;e<r;e++){let{depth:r,edgeMaterial:n,meshMaterial:i,displayParents:o,displayEdges:s}=this;if(e>=this._roots.length){let i=new l(t,n,r,e);this.add(i),this._roots.push(i)}let a=this._roots[e];a.bvh=t,a.depth=r,a.displayParents=o,a.displayEdges=s,a.material=s?n:i,a.update()}}updateMatrixWorld(...e){let t=this.mesh,r=this.parent;null!==t&&(t.updateWorldMatrix(!0,!1),r?this.matrix.copy(r.matrixWorld).invert().multiply(t.matrixWorld):this.matrix.copy(t.matrixWorld),(t.isInstancedMesh||t.isBatchedMesh)&&(t.getMatrixAt(this.objectIndex,a),this.matrix.multiply(a)),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(...e)}copy(e){this.depth=e.depth,this.mesh=e.mesh,this.bvh=e.bvh,this.opacity=e.opacity,this.color.copy(e.color)}clone(){return new u(this.mesh,this.bvh,this.depth)}dispose(){this.edgeMaterial.dispose(),this.meshMaterial.dispose();let e=this.children;for(let t=0,r=e.length;t<r;t++)e[t].geometry.dispose()}}},57135:(e,t,r)=>{"use strict";function n(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function i(e){let t=-1,r=-1/0;for(let n=0;n<3;n++){let i=e[n+3]-e[n];i>r&&(r=i,t=n)}return t}function o(e,t){t.set(e)}function s(e,t,r){let n,i;for(let o=0;o<3;o++){let s=o+3;n=e[o],i=t[o],r[o]=n<i?n:i,n=e[s],i=t[s],r[s]=n>i?n:i}}function a(e,t,r){for(let n=0;n<3;n++){let i=t[e+2*n],o=t[e+2*n+1],s=i-o,a=i+o;s<r[n]&&(r[n]=s),a>r[n+3]&&(r[n+3]=a)}}function l(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return 2*(t*r+r*n+n*t)}r.d(t,{S_:()=>l,_V:()=>i,nd:()=>a,p4:()=>o,yA:()=>n,zH:()=>s})},73531:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(44501),i=r(71804),o=r(14232),s=r(14796),a=r(47984);function l(e,t,r){return null===e?null:(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(r.ray.origin),e.object=t,e)}var u=r(8550);parseInt(s.REVISION);let c=new s.Ray,d=new s.Vector3,f=new s.Matrix4,p=s.Mesh.prototype.raycast,h=s.BatchedMesh.prototype.raycast,y=new s.Vector3,m=new s.Mesh,g=[];function x(e,t){this.isBatchedMesh?b.call(this,e,t):w.call(this,e,t)}function b(e,t){if(this.boundsTrees){let r=this.boundsTrees,n=this._drawInfo||this._instanceInfo,i=this._drawRanges||this._geometryInfo,o=this.matrixWorld;m.material=this.material,m.geometry=this.geometry;let a=m.geometry.boundsTree,l=m.geometry.drawRange;null===m.geometry.boundingSphere&&(m.geometry.boundingSphere=new s.Sphere);for(let s=0,a=n.length;s<a;s++){if(!this.getVisibleAt(s))continue;let a=n[s].geometryIndex;if(m.geometry.boundsTree=r[a],this.getMatrixAt(s,m.matrixWorld).premultiply(o),!m.geometry.boundsTree){this.getBoundingBoxAt(a,m.geometry.boundingBox),this.getBoundingSphereAt(a,m.geometry.boundingSphere);let e=i[a];m.geometry.setDrawRange(e.start,e.count)}m.raycast(e,g);for(let e=0,r=g.length;e<r;e++){let r=g[e];r.object=this,r.batchId=s,t.push(r)}g.length=0}m.geometry.boundsTree=a,m.geometry.drawRange=l,m.material=null,m.geometry=null}else h.call(this,e,t)}function w(e,t){if(this.geometry.boundsTree){if(void 0===this.material)return;f.copy(this.matrixWorld).invert(),c.copy(e.ray).applyMatrix4(f),y.setFromMatrixScale(this.matrixWorld),d.copy(c.direction).multiply(y);let r=d.length(),n=e.near/r,i=e.far/r,o=this.geometry.boundsTree;if(!0===e.firstHitOnly){let r=l(o.raycastFirst(c,this.material,n,i),this,e);r&&t.push(r)}else{let r=o.raycast(c,this.material,n,i);for(let n=0,i=r.length;n<i;n++){let i=l(r[n],this,e);i&&t.push(i)}}}else p.call(this,e,t)}function B(e={}){return this.boundsTree=new u.G(this,e),this.boundsTree}function v(){this.boundsTree=null}let T=o.forwardRef(({enabled:e=!0,firstHitOnly:t=!1,children:r,strategy:l=a.Xe,verbose:u=!1,setBoundingBox:c=!0,maxDepth:d=40,maxLeafTris:f=10,indirect:p=!1,...h},y)=>{let m=o.useRef(null),g=(0,i.C)(e=>e.raycaster);return o.useImperativeHandle(y,()=>m.current,[]),o.useEffect(()=>{if(e){let e={strategy:l,verbose:u,setBoundingBox:c,maxDepth:d,maxLeafTris:f,indirect:p},r=m.current;return g.firstHitOnly=t,r.traverse(t=>{t.isMesh&&!t.geometry.boundsTree&&t.raycast===s.Mesh.prototype.raycast&&(t.raycast=x,t.geometry.computeBoundsTree=B,t.geometry.disposeBoundsTree=v,t.geometry.computeBoundsTree(e))}),()=>{delete g.firstHitOnly,r.traverse(e=>{e.isMesh&&e.geometry.boundsTree&&(e.geometry.disposeBoundsTree(),e.raycast=s.Mesh.prototype.raycast)})}}},[]),o.createElement("group",(0,n.A)({ref:m},h),r)})},79706:(e,t,r)=>{"use strict";var n=r(3717);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,s){if(s!==n){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},86089:(e,t,r)=>{"use strict";Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return n.default}});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}(r(56486))},92015:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});var n=r(44501),i=r(14232),o=r(14796),s=r(71804);let a=i.forwardRef(function({children:e,follow:t=!0,lockX:r=!1,lockY:a=!1,lockZ:l=!1,...u},c){let d=i.useRef(null),f=i.useRef(null),p=new o.Quaternion;return(0,s.D)(({camera:e})=>{if(!t||!f.current)return;let n=d.current.rotation.clone();f.current.updateMatrix(),f.current.updateWorldMatrix(!1,!1),f.current.getWorldQuaternion(p),e.getWorldQuaternion(d.current.quaternion).premultiply(p.invert()),r&&(d.current.rotation.x=n.x),a&&(d.current.rotation.y=n.y),l&&(d.current.rotation.z=n.z)}),i.useImperativeHandle(c,()=>f.current,[]),i.createElement("group",(0,n.A)({ref:f},u),i.createElement("group",{ref:d},e))})},95062:(e,t,r)=>{e.exports=r(79706)()}}]);
//# sourceMappingURL=6985-eed120c9625bfa28.js.map