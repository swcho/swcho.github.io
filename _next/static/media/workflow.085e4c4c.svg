<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="626px" preserveAspectRatio="none" style="width:1535px;height:626px;background:#FFFFFF;" version="1.1" viewBox="0 0 1535 626" width="1535px" zoomAndPan="magnify"><defs/><g><!--MD5=[a789fb4c3d5598a0fc6aae53bd036181]
cluster workflowOperator--><g id="cluster_workflowOperator"><rect fill="none" height="613" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="811" x="371" y="7"/><path d="M493,7 L493,16.24 L483,26.24 L371,26.24 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="112" x="374" y="21.02">workflowOperator</text></g><!--MD5=[69c359175ed85d9ab4d7490b2dc6f79b]
cluster 01--><g id="cluster_01"><rect fill="none" height="96" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="360" x="401" y="50"/><path d="M523,50 L523,59.24 L513,69.24 L401,69.24 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="112" x="404" y="64.02">closeableGroupBy</text></g><!--MD5=[63abe65537b6f4e9555de22561e9c750]
cluster mergeMapWithState--><g id="cluster_mergeMapWithState"><rect fill="none" height="96" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="192" x="850" y="407"/><path d="M979,407 L979,416.24 L969,426.24 L850,426.24 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="119" x="853" y="421.02">mergeMapWithState</text></g><!--MD5=[5809b3c58fc2373ab9d98a93aabb658e]
entity mergeMap01--><g id="elem_mergeMap01"><path d="M697,235 L763,235 C768,235 768,248.12 768,248.12 C768,248.12 768,261.24 763,261.24 L697,261.24 C692,261.24 692,248.12 692,248.12 C692,248.12 692,235 697,235 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M763,235 C758,235 758,248.12 758,248.12 C758,261.24 763,261.24 763,261.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="56" x="697" y="253.02">mergeMap</text></g><!--MD5=[d87f94bd8199cb4135855b129aacf33a]
entity filter01--><g id="elem_filter01"><path d="M392,334 L514,334 C519,334 519,347.12 519,347.12 C519,347.12 519,360.24 514,360.24 L392,360.24 C387,360.24 387,347.12 387,347.12 C387,347.12 387,334 392,334 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M514,334 C509,334 509,347.12 509,347.12 C509,360.24 514,360.24 514,360.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="112" x="392" y="352.02">filter(~POLLING)</text></g><!--MD5=[79e62f7c92bd1f2e7218a474c5a76248]
entity first01--><g id="elem_first01"><path d="M559.5,334 L604.5,334 C609.5,334 609.5,347.12 609.5,347.12 C609.5,347.12 609.5,360.24 604.5,360.24 L559.5,360.24 C554.5,360.24 554.5,347.12 554.5,347.12 C554.5,347.12 554.5,334 559.5,334 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M604.5,334 C599.5,334 599.5,347.12 599.5,347.12 C599.5,360.24 604.5,360.24 604.5,360.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="35" x="559.5" y="352.02">first</text></g><!--MD5=[f4a8d8d7e3844fa3ec100a2c4960facd]
entity map02--><g id="elem_map02"><path d="M650,334 L912,334 C917,334 917,347.12 917,347.12 C917,347.12 917,360.24 912,360.24 L650,360.24 C645,360.24 645,347.12 645,347.12 C645,347.12 645,334 650,334 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M912,334 C907,334 907,347.12 907,347.12 C907,360.24 912,360.24 912,360.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="252" x="650" y="352.02">map({ activation, synthetic: true })</text></g><!--MD5=[06596b78cb1c4252e348b862d44fe203]
entity takeUntil01--><g id="elem_takeUntil01"><path d="M957.5,334 L1030.5,334 C1035.5,334 1035.5,347.12 1035.5,347.12 C1035.5,347.12 1035.5,360.24 1030.5,360.24 L957.5,360.24 C952.5,360.24 952.5,347.12 952.5,347.12 C952.5,347.12 952.5,334 957.5,334 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1030.5,334 C1025.5,334 1025.5,347.12 1025.5,347.12 C1025.5,360.24 1030.5,360.24 1030.5,360.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="63" x="957.5" y="352.02">takeUntil</text></g><!--MD5=[29163aec49521185ace1cdb6c1f55ccf]
entity last01--><g id="elem_last01"><path d="M808,235 L846,235 C851,235 851,248.12 851,248.12 C851,248.12 851,261.24 846,261.24 L808,261.24 C803,261.24 803,248.12 803,248.12 C803,248.12 803,235 808,235 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M846,235 C841,235 841,248.12 841,248.12 C841,261.24 846,261.24 846,261.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="28" x="808" y="253.02">last</text></g><!--MD5=[f48070279dd5017dc2e241391385ab1e]
entity map03--><g id="elem_map03"><path d="M891.5,235 L1160.5,235 C1165.5,235 1165.5,248.12 1165.5,248.12 C1165.5,248.12 1165.5,261.24 1160.5,261.24 L891.5,261.24 C886.5,261.24 886.5,248.12 886.5,248.12 C886.5,248.12 886.5,235 891.5,235 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1160.5,235 C1155.5,235 1155.5,248.12 1155.5,248.12 C1155.5,261.24 1160.5,261.24 1160.5,261.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="259" x="891.5" y="253.02">map({ activation, synthetic: false })</text></g><!--MD5=[9963f831aaa9872bd8e7f2a581ba4848]
entity merge01--><g id="elem_merge01"><ellipse cx="1080" cy="347" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="35" x="1062.5" y="377.02">merge</text></g><!--MD5=[1c2976bc761ce3703a3c6294ad84db80]
entity tap02--><g id="elem_tap02"><path d="M1129.5,334 L1160.5,334 C1165.5,334 1165.5,347.12 1165.5,347.12 C1165.5,347.12 1165.5,360.24 1160.5,360.24 L1129.5,360.24 C1124.5,360.24 1124.5,347.12 1124.5,347.12 C1124.5,347.12 1124.5,334 1129.5,334 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1160.5,334 C1155.5,334 1155.5,347.12 1155.5,347.12 C1155.5,360.24 1160.5,360.24 1160.5,360.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="21" x="1129.5" y="352.02">tap</text></g><!--MD5=[eeca8d6b7f38dead8dd358629ff5020a]
entity tap03--><g id="elem_tap03"><path d="M836.5,578 L867.5,578 C872.5,578 872.5,591.12 872.5,591.12 C872.5,591.12 872.5,604.24 867.5,604.24 L836.5,604.24 C831.5,604.24 831.5,591.12 831.5,591.12 C831.5,591.12 831.5,578 836.5,578 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M867.5,578 C862.5,578 862.5,591.12 862.5,591.12 C862.5,604.24 867.5,604.24 867.5,604.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="21" x="836.5" y="596.02">tap</text></g><!--MD5=[b4a26e741e39f475c2084539ec8fe52e]
entity takeWhile01--><g id="elem_takeWhile01"><path d="M912.5,578 L985.5,578 C990.5,578 990.5,591.12 990.5,591.12 C990.5,591.12 990.5,604.24 985.5,604.24 L912.5,604.24 C907.5,604.24 907.5,591.12 907.5,591.12 C907.5,591.12 907.5,578 912.5,578 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M985.5,578 C980.5,578 980.5,591.12 980.5,591.12 C980.5,604.24 985.5,604.24 985.5,604.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="63" x="912.5" y="596.02">takeWhile</text></g><!--MD5=[dcf0bd811d4ea77158b32bcbf9ef80cd]
entity map05--><g id="elem_map05"><path d="M1030.5,578 L1061.5,578 C1066.5,578 1066.5,591.12 1066.5,591.12 C1066.5,591.12 1066.5,604.24 1061.5,604.24 L1030.5,604.24 C1025.5,604.24 1025.5,591.12 1025.5,591.12 C1025.5,591.12 1025.5,578 1030.5,578 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1061.5,578 C1056.5,578 1056.5,591.12 1056.5,591.12 C1056.5,604.24 1061.5,604.24 1061.5,604.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="21" x="1030.5" y="596.02">map</text></g><!--MD5=[5590e49311e5909d99a93932067b80e7]
entity filter02--><g id="elem_filter02"><path d="M1107,578 L1159,578 C1164,578 1164,591.12 1164,591.12 C1164,591.12 1164,604.24 1159,604.24 L1107,604.24 C1102,604.24 1102,591.12 1102,591.12 C1102,591.12 1102,578 1107,578 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1159,578 C1154,578 1154,591.12 1154,591.12 C1154,604.24 1159,604.24 1159,604.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="42" x="1107" y="596.02">filter</text></g><!--MD5=[5ba77ddced669ea715a6f0d23c84175a]
entity groupBy01--><g id="elem_groupBy01"><path d="M422.5,104 L663.5,104 C668.5,104 668.5,117.12 668.5,117.12 C668.5,117.12 668.5,130.24 663.5,130.24 L422.5,130.24 C417.5,130.24 417.5,117.12 417.5,117.12 C417.5,117.12 417.5,104 422.5,104 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M663.5,104 C658.5,104 658.5,117.12 658.5,117.12 C658.5,130.24 663.5,130.24 663.5,130.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="231" x="422.5" y="122.02">groupBy(WorkflowActivation.runId)</text></g><!--MD5=[7b21fbe47d62e9a075188c7166e13062]
entity map01--><g id="elem_map01"><path d="M708.5,104 L739.5,104 C744.5,104 744.5,117.12 744.5,117.12 C744.5,117.12 744.5,130.24 739.5,130.24 L708.5,130.24 C703.5,130.24 703.5,117.12 703.5,117.12 C703.5,117.12 703.5,104 708.5,104 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M739.5,104 C734.5,104 734.5,117.12 734.5,117.12 C734.5,130.24 739.5,130.24 739.5,130.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="21" x="708.5" y="122.02">map</text></g><!--MD5=[9ea0f7722be0771dad19b50d201fe975]
entity mergeScan01--><g id="elem_mergeScan01"><path d="M871.5,461 L944.5,461 C949.5,461 949.5,474.12 949.5,474.12 C949.5,474.12 949.5,487.24 944.5,487.24 L871.5,487.24 C866.5,487.24 866.5,474.12 866.5,474.12 C866.5,474.12 866.5,461 871.5,461 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M944.5,461 C939.5,461 939.5,474.12 939.5,474.12 C939.5,487.24 944.5,487.24 944.5,487.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="63" x="871.5" y="479.02">mergeScan</text></g><!--MD5=[4302c0f9956a5e9f3aff2fcd68dd1104]
entity map04--><g id="elem_map04"><path d="M989.5,461 L1020.5,461 C1025.5,461 1025.5,474.12 1025.5,474.12 C1025.5,474.12 1025.5,487.24 1020.5,487.24 L989.5,487.24 C984.5,487.24 984.5,474.12 984.5,474.12 C984.5,474.12 984.5,461 989.5,461 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1020.5,461 C1015.5,461 1015.5,474.12 1015.5,474.12 C1015.5,487.24 1020.5,487.24 1020.5,487.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="21" x="989.5" y="479.02">map</text></g><g id="elem_workflowPoll"><rect fill="#F1F1F1" height="50.16" style="stroke:#181818;stroke-width:0.5;" width="98" x="257" y="92"/><text fill="#000000" font-family="D2Coding" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="72" x="270" y="103.16">«Observable»</text><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="84" x="264" y="120.94">workflowPoll</text><line style="stroke:#181818;stroke-width:0.5;" x1="258" x2="354" y1="126.16" y2="126.16"/></g><g id="elem_pollLoop"><rect fill="#F1F1F1" height="58.4" style="stroke:#181818;stroke-width:0.5;" width="138" x="7" y="88"/><text fill="#000000" font-family="D2Coding" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="72" x="40" y="99.16">«Observable»</text><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="56" x="48" y="116.94">pollLoop</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="144" y1="122.16" y2="122.16"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="126" x="13" y="139.18">WorkflowActivation</text></g><g id="elem_workflowPollerStateSubject"><rect fill="#F1F1F1" height="50.16" style="stroke:#181818;stroke-width:0.5;" width="196" x="150" y="223"/><text fill="#000000" font-family="D2Coding" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="108" x="194" y="234.16">«BehaviourSubject»</text><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="182" x="157" y="251.94">workflowPollerStateSubject</text><line style="stroke:#181818;stroke-width:0.5;" x1="151" x2="345" y1="257.16" y2="257.16"/></g><!--MD5=[fc4e39cd4238b57a3039d77c692bedc9]
entity tap01--><g id="elem_tap01"><path d="M185.5,104 L216.5,104 C221.5,104 221.5,117.12 221.5,117.12 C221.5,117.12 221.5,130.24 216.5,130.24 L185.5,130.24 C180.5,130.24 180.5,117.12 180.5,117.12 C180.5,117.12 180.5,104 185.5,104 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M216.5,104 C211.5,104 211.5,117.12 211.5,117.12 C211.5,130.24 216.5,130.24 216.5,130.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="21" x="185.5" y="122.02">tap</text></g><!--MD5=[1894eb28d25ff04e4a62c4ab02ae36a9]
entity mergeMap02--><g id="elem_mergeMap02"><path d="M1457,578 L1523,578 C1528,578 1528,591.12 1528,591.12 C1528,591.12 1528,604.24 1523,604.24 L1457,604.24 C1452,604.24 1452,591.12 1452,591.12 C1452,591.12 1452,578 1457,578 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M1523,578 C1518,578 1518,591.12 1518,591.12 C1518,604.24 1523,604.24 1523,604.24 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="56" x="1457" y="596.02">mergeMap</text></g><g id="elem_numInFlightActivationsSubject"><rect fill="#F1F1F1" height="50.16" style="stroke:#181818;stroke-width:0.5;" width="217" x="1199.5" y="566"/><text fill="#000000" font-family="D2Coding" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="108" x="1254" y="577.16">«BehaviourSubject»</text><text fill="#000000" font-family="D2Coding" font-size="14" lengthAdjust="spacing" textLength="203" x="1206.5" y="594.94">numInFlightActivationsSubject</text><line style="stroke:#181818;stroke-width:0.5;" x1="1200.5" x2="1415.5" y1="600.16" y2="600.16"/></g><!--MD5=[003ebb6b6d4943057f7a4c65071746c7]
link pollLoop to tap01--><g id="link_pollLoop_tap01"><path codeLine="14" d="M145.34,117 C154.85,117 164.36,117 173.87,117 " fill="none" id="pollLoop-to-tap01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="178.61,117,169.61,113,173.61,117,169.61,121,178.61,117" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6104d54cf67a50d389e1cdd54de17314]
link tap01 to workflowPollerStateSubject--><g id="link_tap01_workflowPollerStateSubject"><path codeLine="15" d="M190.65,130.49 C183.42,138.39 173.1,148.19 162,154 C120.1,175.92 34.63,155.16 63,193 C73.7,207.27 107.55,219.01 143.43,227.87 " fill="none" id="tap01-to-workflowPollerStateSubject" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="148.21,229.02,140.4113,223.005,143.3518,227.8375,138.5193,230.7781,148.21,229.02" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="140" x="64" y="189.09">SHUTDOWN on complete</text></g><!--MD5=[6104d54cf67a50d389e1cdd54de17314]
link tap01 to workflowPollerStateSubject--><g id="link_tap01_workflowPollerStateSubject"><path codeLine="16" d="M205.51,130.37 C212.68,150.07 226.92,189.14 236.93,216.62 " fill="none" id="tap01-to-workflowPollerStateSubject-1" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="238.61,221.22,239.2839,211.3942,236.8967,216.5227,231.7682,214.1355,238.61,221.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="105" x="229" y="189.09">FAILED on error</text></g><!--MD5=[0aff7c0c1479ecce50e933257da53083]
link tap01 to workflowPoll--><g id="link_tap01_workflowPoll"><path codeLine="18" d="M221.92,117 C231.44,117 240.96,117 250.48,117 " fill="none" id="tap01-to-workflowPoll" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="255.22,117,246.22,113,250.22,117,246.22,121,255.22,117" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4c888b968dcef6a7bd384c392c746e70]
link workflowPoll to groupBy01--><g id="link_workflowPoll_groupBy01"><path codeLine="103" d="M355.07,117 C373.64,117 392.22,117 410.8,117 " fill="none" id="workflowPoll-to-groupBy01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="415.59,117,406.59,113,410.59,117,406.59,121,415.59,117" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a735fab305ece5ed38fb50003945cf92]
link groupBy01 to map01--><g id="link_groupBy01_map01"><path codeLine="104" d="M668.85,117 C678.19,117 687.52,117 696.86,117 " fill="none" id="groupBy01-to-map01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="701.81,117,692.81,113,696.81,117,692.81,121,701.81,117" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[763f4bad513a7d4b3882d3fe12754422]
link map01 to mergeMap01--><g id="link_map01_mergeMap01"><path codeLine="105" d="M724.58,130.37 C725.64,153.16 727.9,201.88 729.14,228.57 " fill="none" id="map01-to-mergeMap01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="729.36,233.34,732.9448,224.1667,729.1317,228.3452,724.9532,224.5321,729.36,233.34" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1294d1bb2b20e174e97f14b17560b32e]
link workflowPollerStateSubject to filter01--><g id="link_workflowPollerStateSubject_filter01"><path codeLine="107" d="M299.73,273.48 C337.81,291.49 388.39,315.43 420.83,330.78 " fill="none" id="workflowPollerStateSubject-to-filter01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="425.3,332.89,418.8757,325.4249,420.7804,330.7514,415.4539,332.6562,425.3,332.89" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[254fb39313f6fe3d9c3af711ab4a2f1b]
link filter01 to first01--><g id="link_filter01_first01"><path codeLine="108" d="M519.26,347 C528.78,347 538.29,347 547.81,347 " fill="none" id="filter01-to-first01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="552.55,347,543.55,343,547.55,347,543.55,351,552.55,347" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1be6a5675435fd90fc8b385e9cd06a6e]
link first01 to map02--><g id="link_first01_map02"><path codeLine="109" d="M609.98,347 C619.39,347 628.8,347 638.21,347 " fill="none" id="first01-to-map02" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="643.21,347,634.21,343,638.21,347,634.21,351,643.21,347" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b3e1e9cf8c534ebee0b7d270253251ac]
link map02 to takeUntil01--><g id="link_map02_takeUntil01"><path codeLine="110" d="M917.45,347 C926.85,347 936.24,347 945.63,347 " fill="none" id="map02-to-takeUntil01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="950.62,347,941.62,343,945.62,347,941.62,351,950.62,347" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f13aadcbae07094fe5824a8655230c23]
link mergeMap01 to last01--><g id="link_mergeMap01_last01"><path codeLine="112" d="M768.27,248 C777.59,248 786.91,248 796.23,248 " fill="none" id="mergeMap01-to-last01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="801.17,248,792.17,244,796.17,248,792.17,252,801.17,248" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[24ac2f391838ad8d6fecbacff95756ab]
link mergeMap01 to map03--><g id="link_mergeMap01_map03"><path codeLine="113" d="M741.1,234.74 C754.25,220.18 777.65,197.65 803.5,188.5 C873.48,163.72 958.99,206.18 1000.69,231.38 " fill="none" id="mergeMap01-to-map03" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1004.75,233.87,999.1739,225.7517,1000.4893,231.2535,994.9875,232.5689,1004.75,233.87" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6406d780a5d43346f740b5ea225a380f]
link last01 to takeUntil01--><g id="link_last01_takeUntil01"><path codeLine="115" d="M848.49,261.48 C878.8,279.09 934.09,311.2 967.1,330.37 " fill="none" id="last01-to-takeUntil01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="971.28,332.81,965.5067,324.8307,966.9565,330.2986,961.4885,331.7484,971.28,332.81" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6156c44494583c54eb17ec112028ce46]
link map03 to merge01--><g id="link_map03_merge01"><path codeLine="117" d="M1032.84,261.29 C1042.88,279.32 1061.55,312.87 1072.14,331.89 " fill="none" id="map03-to-merge01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1074.54,336.19,1073.6658,326.38,1072.1118,331.8192,1066.6726,330.2652,1074.54,336.19" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9e7d06fcd24e83afff0625e5aba6ee22]
link takeUntil01 to merge01--><g id="link_takeUntil01_merge01"><path codeLine="118" d="M1035.99,347 C1045.4,347 1054.8,347 1064.21,347 " fill="none" id="takeUntil01-to-merge01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1069.2,347,1060.2,343,1064.2,347,1060.2,351,1069.2,347" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0a30359fc57b7422ce6adb88fceeae54]
link merge01 to tap02--><g id="link_merge01_tap02"><path codeLine="121" d="M1089.39,347 C1098.9,347 1108.4,347 1117.9,347 " fill="none" id="merge01-to-tap02" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1122.63,347,1113.63,343,1117.63,347,1113.63,351,1122.63,347" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[20b4db99ffa48e3d2928d6884c82d758]
link tap02 to numInFlightActivationsSubject--><g id="link_tap02_numInFlightActivationsSubject"><path codeLine="122" d="M1153.31,360.33 C1178.14,397.21 1252.33,507.35 1288.18,560.57 " fill="none" id="tap02-to-numInFlightActivationsSubject" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1290.89,564.59,1289.2028,554.8867,1288.1066,560.4363,1282.557,559.3401,1290.89,564.59" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="63" x="1254" y="478.59">value + 1</text></g><!--MD5=[01b5d1fe17097cec6fdd8eb14c06061c]
link tap02 to mergeScan01--><g id="link_tap02_mergeScan01"><path codeLine="124" d="M1124.13,354.73 C1118.58,356.48 1112.57,358.35 1107,360 C1045.08,378.39 1020.86,363.35 967,399 C945.33,413.34 927.92,438.2 917.78,455.11 " fill="none" id="tap02-to-mergeScan01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="915.38,459.21,923.3676,453.4482,917.8976,454.8901,916.4557,449.4201,915.38,459.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[91227fb09f1a15fe102f99bfaea9fd96]
link mergeScan01 to map04--><g id="link_mergeScan01_map04"><path codeLine="125" d="M949.68,474 C959.04,474 968.41,474 977.77,474 " fill="none" id="mergeScan01-to-map04" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="982.74,474,973.74,470,977.74,474,973.74,478,982.74,474" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[11897f6d40a209d499aaf6910ab281b3]
link map04 to tap03--><g id="link_map04_tap03"><path codeLine="126" d="M995.81,487.26 C988.88,495.5 978.6,505.78 967,511 C948.49,519.33 891.96,506.45 876,519 C860.11,531.49 854.66,554.98 852.84,571.51 " fill="none" id="map04-to-tap03" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="852.43,576.17,857.2128,567.5604,852.8736,571.1897,849.2443,566.8506,852.43,576.17" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9d2a7d693e31dd3716999f288529e4f2]
link tap03 to takeWhile01--><g id="link_tap03_takeWhile01"><path codeLine="127" d="M872.84,591 C882.11,591 891.37,591 900.64,591 " fill="none" id="tap03-to-takeWhile01" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="905.54,591,896.54,587,900.54,591,896.54,595,905.54,591" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a1d43bc216d7af07768059840309426b]
link tap03 to numInFlightActivationsSubject--><g id="link_tap03_numInFlightActivationsSubject"><path codeLine="128" d="M869.38,577.54 C875.59,573.29 882.84,568.94 890,566 C943.52,544.03 1090.67,516.76 1147.5,527.58 C1183.65,534.47 1222.05,549.34 1252.23,562.95 " fill="none" id="tap03-to-numInFlightActivationsSubject" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1256.77,565.03,1250.2406,557.6566,1252.2206,562.9556,1246.9216,564.9356,1256.77,565.03" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="63" x="1083.5" y="532.09">value - 1</text></g><!--MD5=[a1d43bc216d7af07768059840309426b]
link tap03 to numInFlightActivationsSubject--><g id="link_tap03_numInFlightActivationsSubject"><path codeLine="129" d="M869.38,577.54 C875.59,573.29 882.84,568.94 890,566 C943.52,544.03 1090.67,516.76 1147.5,527.58 C1183.65,534.47 1222.05,549.34 1252.23,562.95 " fill="none" id="tap03-to-numInFlightActivationsSubject-1" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1256.77,565.03,1250.2406,557.6566,1252.2206,562.9556,1246.9216,564.9356,1256.77,565.03" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="D2Coding" font-size="13" lengthAdjust="spacing" textLength="126" x="1052" y="532.09">value - 1 on close</text></g><!--MD5=[bdc247e250f4e3bc6032083f39f53537]
link takeWhile01 to map05--><g id="link_takeWhile01_map05"><path codeLine="131" d="M990.68,591 C1000.04,591 1009.41,591 1018.77,591 " fill="none" id="takeWhile01-to-map05" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1023.74,591,1014.74,587,1018.74,591,1014.74,595,1023.74,591" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[27584ab860800f6dd4acde6399d669c8]
link map05 to filter02--><g id="link_map05_filter02"><path codeLine="132" d="M1066.73,591 C1076.29,591 1085.84,591 1095.4,591 " fill="none" id="map05-to-filter02" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1100.16,591,1091.16,587,1095.16,591,1091.16,595,1100.16,591" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2b46f133554d95e989155994387d5985]
link filter02 to mergeMap02--><g id="link_filter02_mergeMap02"><path codeLine="134" d="M1144.66,577.64 C1156.85,564.8 1177.27,546.22 1199.5,538.5 C1290.61,506.87 1324.66,509.07 1416.5,538.5 C1437.97,545.38 1458.5,561.09 1472.38,573.54 " fill="none" id="filter02-to-mergeMap02" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1475.71,576.6,1471.788,567.5657,1472.0278,573.2175,1466.376,573.4573,1475.71,576.6" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[90dc11af22e09fbb7d200c14a715cb75]
@startuml workflow
skinparam defaultFontName D2Coding

object workflowPoll <<Observable>>
object pollLoop <<Observable>> {
  WorkflowActivation
}

object workflowPollerStateSubject <<BehaviourSubject>>

queue tap01 [
  tap
]

pollLoop -> tap01
tap01 ..> workflowPollerStateSubject: SHUTDOWN on complete
tap01 ..> workflowPollerStateSubject: FAILED on error

tap01 -> workflowPoll

frame workflowOperator {
  frame closeableGroupBy as 01 {

    queue groupBy01 [
      groupBy(WorkflowActivation.runId)
    ]

    queue map01 [
      map
    ]

  }

  queue mergeMap01 [
    mergeMap
  ]

  queue filter01 [
    filter(~POLLING)
  ]

  queue first01 [
    first
  ]

  queue map02 [
    map({ activation, synthetic: true })
  ]

  queue takeUntil01 [
    takeUntil
  ]

  queue last01 [
    last
  ]

  queue map03 [
    map({ activation, synthetic: false })
  ]

  circle merge01 [
    merge
  ]

  queue tap02 [
    tap
  ]


  frame mergeMapWithState {

    queue mergeScan01 [
      mergeScan
    ]

    queue map04 [
      map
    ]

  }

  queue tap03 [
    tap
  ]

  queue takeWhile01 [
    takeWhile
  ]

  queue map05 [
    map
  ]

  queue filter02 [
    filter
  ]
}

queue mergeMap02 [
  mergeMap
]

workflowPoll -right-> groupBy01
groupBy01 -right-> map01
map01 - -> mergeMap01

workflowPollerStateSubject -> filter01
filter01 -> first01
first01 -> map02
map02 -> takeUntil01

mergeMap01 -> last01
mergeMap01 -> map03

last01 - -> takeUntil01

map03 -> merge01
takeUntil01 -> merge01

object numInFlightActivationsSubject <<BehaviourSubject>>
merge01 -> tap02
tap02 .> numInFlightActivationsSubject: value + 1

tap02 - -> mergeScan01
mergeScan01 -> map04
map04 - -> tap03
tap03 -> takeWhile01
tap03 .> numInFlightActivationsSubject: value - 1
tap03 .d.> numInFlightActivationsSubject: value - 1 on close

takeWhile01 -> map05
map05 -> filter02

filter02 -> mergeMap02

@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 KST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ko
Country: KR
--></g></svg>