(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6613],{3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},45966:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b,meta:()=>h});var n=r(37876),i=r(91668),s=r(91013),a=r(18153),o=r(49082),c=r(45302),l=r(14232),u=r(71804);let d=l.memo(function(e){let[t,r]=l.useState(!1),[n,i]=l.useState(!1),s=l.useRef(null);return(0,u.D)((e,t)=>{let r=s.current;r.rotation.z+=t}),(0,a.FD)("mesh",{ref:s,onClick:()=>r(!t),onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),scale:t?1.5:1,...e,children:[(0,a.Y)("boxGeometry",{args:[1,1,1]}),(0,a.Y)("meshStandardMaterial",{color:n?"hotpink":"orange"})]})}),p=l.memo(function(){return(0,a.FD)(c.Hl,{style:{userSelect:"none"},children:[(0,a.Y)("ambientLight",{intensity:Math.PI/2}),(0,a.Y)("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),(0,a.Y)("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),(0,a.Y)(d,{position:[-1.5,0,0]}),(0,a.Y)(d,{}),(0,a.Y)(d,{position:[1.5,0,0]}),(0,a.Y)(o.N,{})]})}),h={title:"react-three-fiber: basic demo 분석",description:"react-three-fiber를 소개하고 간단한 basic demo를 분석해 봅니다.",date:"2024-06-02",readTime:5},m=e=>{let{children:t}=e;return(0,n.jsx)(s.A,{meta:h,children:t})};function f(e){let t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",p:"p",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{children:"소개"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"react-three-fiber"}),"는 three.js를 react 기반으로 작성할 수 있도록 도와 줍니다."]}),"\n",(0,n.jsx)(t.p,{children:"three.js는 web 생태계에서 가장 대표적인 3D 렌더링 라이브러리 입니다.\nWebGL을 사용하려면 vertex, fragment shader의 개념을 충분히 이해하고 WebGL API를 호출해여 원하는 결과물을 만들어야 합니다.\nthree.js는 하위 수준의 WebGL을 조금더 추상화 해서 Geometry, Material, Camera와 같이 일반적으로 3D 업계에서 사용하는 추상화 레벨을 제공하여 보다 쉽게 3D 결과물을 얻을 수 있도록 도와 줍니다."}),"\n",(0,n.jsx)(t.p,{children:"three.js는 OOP와 절차적 프로그래밍 멘탈 모델을 가지고 작업을 해야 합니다."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"react-three-fiber"}),"의 경우 OOP와 절차적인 방식 대신 보다 선언적인고 react의 flux 패턴을 사용할 수 있도록 해 줍니다."]}),"\n",(0,n.jsxs)(t.p,{children:["특별히 react fiber 아키텍쳐가 적용된 v16 부터는 상대적으로 많은 연산이 필요한 3D 렌더링 작업에 필요한 병목 요소를 적절히 해소하였기 때문에 ",(0,n.jsx)(t.code,{children:"react-three-fiber"}),"의 탄생이 가능했으리라 생각합니다."]}),"\n",(0,n.jsxs)(t.p,{children:["이런 ",(0,n.jsx)(t.code,{children:"react-three-fiber"}),"를 알아 봄으로서 3D 관련 문제를 해결할 때 활용할 수 있다면 좋을 것 같습니다."]}),"\n",(0,n.jsx)(t.h1,{children:"Basic demo"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://codesandbox.io/s/rrppl0y8l4",children:"Basic demo"})}),"\n"]}),"\n",(0,n.jsx)(p,{}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"<Canvas />"})," 컴포넌트를 사용하여 3D 렌더링 공간을 만들어 줍니다.\n기본적으로 ",(0,n.jsx)(t.code,{children:"THREE.PerspectiveCamera"}),"를 적용하여 원근감 있는 시점을 제공합니다."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"<mesh />"})," 컴포넌트는 ",(0,n.jsx)(t.code,{children:"THREE.Mesh"})," 객체를 생성하며, geometry 컴포넌트와 material 컴포넌트를 children 컴포넌트로 설정하는 것 만으로 3D 물체를 표현할 수 있습니다."]}),"\n",(0,n.jsxs)(t.p,{children:["색상 표현을 위해서는 기본적으로 ",(0,n.jsx)(t.code,{children:"<ambientLight />"}),"(",(0,n.jsx)(t.code,{children:"THREE.AmbientLight"}),") 컴포넌트를 ",(0,n.jsx)(t.code,{children:"<Canvas />"}),"의 children 컴포넌트로 작성해 줍니다."]}),"\n",(0,n.jsxs)(t.p,{children:["지금까지 확인한 것과 같이 three.js의 객체를 react 컴포넌트로 구조화 할 수 있습니다.\n이는 ",(0,n.jsx)(t.a,{href:"https://www.npmjs.com/package/react-reconciler",children:"react-reconciler"})," 패키지를 활용하여 JSX factory를 확장함으로 가능합니다."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://github.com/pmndrs/react-three-fiber/blob/10372e8710a48da6259ffc79a2988406435c9074/packages/fiber/src/three-types.ts#L291",children:(0,n.jsx)(t.code,{children:"ThreeElements"})})," 정의에 따라 사용가능한 jsx tag와 그 prop들을 살펴 볼 수 있습니다."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"react-three-fiber"}),"의 경우, ",(0,n.jsx)(t.code,{children:"three.js"})," 객체를 react 컴포넌트화 한 것입니다.\n하지만, 실제로 3D 프로젝트를 수행하다보면 많은 boilerplate를 필요로 하는데 이러한 유틸리티들을 모아 놓은 것이 ",(0,n.jsx)(t.a,{href:"https://github.com/pmndrs/drei#readme",children:"pmndrs/drei"})," 패키지 입니다.\n위 예제와 같이 ",(0,n.jsx)(t.code,{children:"<OrbitControls />"}),"을 단순히 ",(0,n.jsx)(t.code,{children:"<Canvas />"}),"의 child로 붙여주는 것 만으로 마우스 드레그에 의한 시점 전환이 가능합니다."]}),"\n",(0,n.jsx)(t.h1,{children:"마치며"}),"\n",(0,n.jsx)(t.p,{children:"간단한 데모와 함께 react-three-fiber에 대한 소개를 했습니다."}),"\n",(0,n.jsx)(t.p,{children:"앞으로도 하나씩 react-three-fiber의 예제를 살펴보고 구현 테크닉 및 팁들을 알아가 보도록 하겠습니다."})]})}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.jsx)(m,{...e,children:(0,n.jsx)(f,{...e})})}},49034:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(18153),i=r(77328),s=r.n(i),a=r(14232);let o=a.memo(()=>(0,n.Y)(n.FK,{}));var c=r(71745),l=r(48230),u=r.n(l);let d=[{link:"/",text:"Home"}],p=a.memo(()=>{let e=(0,c.useRouter)(),[t,r]=a.useState(!1);return(0,n.FD)("nav",{className:"w-full",children:[(0,n.Y)("div",{id:"progress",className:"top-0 z-20 h-1",style:{background:"linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0)"}}),(0,n.FD)("div",{className:"flex flex-wrap items-center justify-between w-full py-3 mx-auto mt-0 md:max-w-4xl",children:[(0,n.Y)("div",{className:"pl-4",children:(0,n.Y)(u(),{legacyBehavior:!0,className:"text-xl font-extrabold text-gray-900 no-underline hover:no-underline",href:"/",children:"lifetime trails"})}),(0,n.Y)("div",{className:"block pr-4 lg:hidden",children:(0,n.Y)("button",{id:"nav-toggle",type:"button",className:"flex items-center px-3 py-2 text-gray-500 appearance-none hover:text-gray-900 hover:border-teal-500 focus:outline-none",onMouseDown:e=>e.preventDefault(),onClick:()=>r(!t),onBlur:()=>r(!1),children:(0,n.FD)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.Y)("title",{children:"Menu"}),(0,n.Y)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),(0,n.Y)("div",{id:"nav-content",className:"bg-gray-100 border-b flex-grow lg:border-none lg:flex lg:items-center lg:mt-0 lg:shadow-none lg:w-auto md:bg-transparent mt-2 shadow w-full z-20 ".concat(t?"block":"hidden"),children:(0,n.Y)("ul",{className:"items-center justify-end flex-1 list-reset lg:flex",children:d.map(t=>{let{link:r,text:i}=t;return(0,n.Y)("li",{className:"mr-3",children:(0,n.Y)(u(),{legacyBehavior:!0,className:e.pathname===r?"inline-block py-2 px-4 text-gray-900 font-bold no-underline":"inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4",href:r,children:i})},r)})})})]})]})}),h=a.memo(e=>{let{children:t,title:r="This is the default title"}=e;return(0,n.FD)("div",{className:"leading-normal tracking-normal bg-gray-100 min-h-screen",children:[(0,n.FD)(s(),{children:[(0,n.Y)("title",{children:r}),(0,n.Y)("meta",{charSet:"utf-8"}),(0,n.Y)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,n.Y)(p,{}),(0,n.Y)("div",{className:"container w-full px-4 pb-10 mx-auto md:max-w-3xl",children:t}),(0,n.Y)(o,{})]})})},49082:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var n=r(44501),i=r(71804),s=r(14232),a=r(78961);let o=s.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:o,enableDamping:c=!0,keyEvents:l=!1,onChange:u,onStart:d,onEnd:p,...h},m)=>{let f=(0,i.C)(e=>e.invalidate),b=(0,i.C)(e=>e.camera),y=(0,i.C)(e=>e.gl),g=(0,i.C)(e=>e.events),v=(0,i.C)(e=>e.setEvents),x=(0,i.C)(e=>e.set),j=(0,i.C)(e=>e.get),w=(0,i.C)(e=>e.performance),O=t||b,D=o||g.connected||y.domElement,E=s.useMemo(()=>new a.N(O),[O]);return(0,i.D)(()=>{E.enabled&&E.update()},-1),s.useEffect(()=>(l&&E.connect(!0===l?D:l),E.connect(D),()=>void E.dispose()),[l,D,r,E,f]),s.useEffect(()=>{let e=e=>{f(),r&&w.regress(),u&&u(e)},t=e=>{d&&d(e)},n=e=>{p&&p(e)};return E.addEventListener("change",e),E.addEventListener("start",t),E.addEventListener("end",n),()=>{E.removeEventListener("start",t),E.removeEventListener("end",n),E.removeEventListener("change",e)}},[u,d,p,E,f,v]),s.useEffect(()=>{if(e){let e=j().controls;return x({controls:E}),()=>x({controls:e})}},[e,E]),s.createElement("primitive",(0,n.A)({ref:m,object:E,enableDamping:c},h))})},56486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.identifierTypes=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}(r(14232)),i=function(e){return e&&e.__esModule?e:{default:e}}(r(95062));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=["pathname","url","title","og:title","issue-number","issue-term"],l=function(e,t,r){if(0>c.indexOf(e))return void console.warn("Wrong type: "+e);if("pathname"===e)return"pathname";if("url"===e)return"url";if("title"===e)return"title";if("og:title"===e)return"og:title";if("issue-term"===e)return t;else if("issue-number"===e)return r},u=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,i;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return(t=(i=a(r).call(this,e))&&("object"===s(i)||"function"==typeof i)?i:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).myRef=n.default.createRef(),t.state={pending:!0},t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&o(r,e),t=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.repo,n=t.type,i=t.specificTerm,s=t.issueNumber,a=0>c.indexOf(n)?void console.warn("Wrong type: "+n):"issue-number"===n?"issue-number":"issue-term",o=l(n,i,s);if("issue-term"===n&&!o)return void console.warn("When type is '".concat(n,"', 'specificTerm' prop must be provided"));if("issue-number"===n&&(isNaN(o)||o<1))return void console.warn("When type is '".concat(n,"', valid 'issueNumber' prop must be provided"));var u=document.createElement("script");u.src="https://utteranc.es/client.js",u.async=!0,u.setAttribute("repo",r),u.setAttribute("crossorigin","anonymous"),u.setAttribute(a,o),u.onload=function(){return e.setState({pending:!1})},this.myRef.current.appendChild(u)}},{key:"render",value:function(){return n.default.createElement("div",{className:"react-utterences",ref:this.myRef},this.props.debug&&n.default.createElement("pre",{style:{background:"#cccccc",padding:10}},"\nthis.props: ".concat(JSON.stringify(this.props,null,2),'\nlocation.pathname: "').concat(window.location.pathname,'"\nlocation.href: "').concat(window.location.href,'"\n          ').trim()),this.props.debug&&n.default.createElement("div",null,"\uD83D\uDC47\uD83D\uDC47If the settings are valid, the comment widget appear below\uD83D\uDC47\uD83D\uDC47"),this.state.pending&&n.default.createElement("div",null,"Loading script..."))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(r.prototype,t),r}(n.Component);t.identifierTypes={pathname:{attrValue:"",summary:"Issue title contains page pathname"},url:{attrValue:"url",summary:"Issue title contains page URL"},title:{attrValue:"title",summary:"Issue title contains page title"},"og:title":{attrValue:"og:title",summary:"Issue title contains page og:title"},"issue-number":{attrValue:-1,summary:"Specific issue number"},"issue-term":{attrValue:"",summary:"Issue title contains specific term"}},u.propTypes={type:i.default.string.isRequired,repo:i.default.string.isRequired,specificTerm:i.default.string,issueNumber:i.default.number,hashKey:i.default.string,debug:i.default.bool},t.default=u},60158:(e,t,r)=>{"use strict";r.d(t,{J:()=>o,j:()=>a});var n=r(18153),i=r(14232);let s=i.createContext({});function a(e){let{staticProps:t,children:r}=e;return(0,n.Y)(s.Provider,{value:t,children:r})}function o(){return i.useContext(s)}},79706:(e,t,r)=>{"use strict";var n=r(3717);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,s,a){if(a!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return r.PropTypes=r,r}},83748:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2024-06-02-react-three-fiber-1-basic-demo",function(){return r(45966)}])},85419:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(18153);r(14232);let i=e=>{let{meta:t,isBlogPost:r}=e;return(0,n.FD)(n.FK,{children:[(0,n.Y)("h1",{className:"font-bold text-gray-800 mb-4 ".concat(r?"text-5xl mt-8 mb-8":"text-lg"),children:t.title}),(0,n.FD)("div",{className:"details",children:[(0,n.Y)("p",{className:"text-gray-500",children:t.description}),(0,n.Y)("p",{className:"text-gray-400 text-right -mt-1",children:(0,n.Y)("span",{className:"mr-4",children:t.date})})]})]})}},86089:(e,t,r)=>{"use strict";Object.defineProperty(t,"Ay",{enumerable:!0,get:function(){return n.default}});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}(r(56486))},91013:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(18153),i=r(73146),s=r.n(i),a=r(14232),o=r(86089),c=r(60158),l=r(85419),u=r(49034);function d(e){let{children:t,meta:r,staticProps:i}=e;return a.useEffect(()=>{s().highlightAll()},[]),(0,n.Y)(n.FK,{children:(0,n.FD)(u.A,{title:r.title,children:[(0,n.Y)(l.A,{meta:r,isBlogPost:!0}),(0,n.Y)(c.j,{staticProps:i,children:(0,n.Y)("article",{className:"markdown",children:t})}),(0,n.Y)(o.Ay,{repo:"swcho/blog-comments",type:"pathname",label:"utterances",theme:"github-light"})]})})}},95062:(e,t,r)=>{e.exports=r(79706)()}},e=>{e.O(0,[7391,683,5695,5302,2077,636,6593,8792],()=>e(e.s=83748)),_N_E=e.O()}]);
//# sourceMappingURL=2024-06-02-react-three-fiber-1-basic-demo-c7f78a3373d9cb93.js.map