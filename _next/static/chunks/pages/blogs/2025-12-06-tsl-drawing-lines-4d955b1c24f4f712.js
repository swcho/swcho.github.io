(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9413],{72771:(s,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>R,meta:()=>k});var a=n(37876),l=n(91668),i=n(91013),t=n(18153),r=n(36453),c=n(56366),m=n(92647),h=n(59341),d=n(49082),p=n(14232),x=n(30539);let o=p.memo(function(s){let{}=s,e=p.useMemo(()=>{let s=x.pot;return s.x.mul(s.x).add(s.y.mul(s.y)).sub(.25).abs().step(.01)},[]);return(0,t.Y)(c.A,{style:{backgroundColor:"black"},children:s=>(0,t.FD)(m.A,{children:[(0,t.Y)(h.u,{makeDefault:!0,fov:53,aspect:s.clientWidth/s.clientHeight,near:.1,far:10,position:[0,0,1]}),(0,t.FD)("mesh",{name:"node-mesh",children:[(0,t.Y)("planeGeometry",{args:[5,5]}),(0,t.Y)("nodeMaterial",{fragmentNode:e}),(0,t.Y)(r.ZP,{meshName:"node-mesh"})]}),(0,t.Y)("gridHelper",{rotation:[-Math.PI/2,0,0]}),(0,t.Y)("axesHelper",{}),(0,t.Y)(d.N,{})]})})}),j=(0,x.Fn)(s=>{let[e,n,a]=s,l=(0,x.Bw9)(e).sub(n);return(0,x.TF7)(a,0,(0,x.tnl)(l))}),u=p.memo(function(s){let{}=s,e=p.useMemo(()=>{let s=x.pot,e=(0,x.ZcS)(-.33,.33);return j(s.sub(e),.1,.01)},[]);return(0,t.Y)(c.A,{style:{backgroundColor:"black"},children:s=>(0,t.FD)(m.A,{children:[(0,t.Y)(h.u,{makeDefault:!0,fov:53,aspect:s.clientWidth/s.clientHeight,near:.1,far:10,position:[0,0,1]}),(0,t.FD)("mesh",{name:"node-mesh",children:[(0,t.Y)("planeGeometry",{args:[5,5]}),(0,t.Y)("nodeMaterial",{fragmentNode:e}),(0,t.Y)(r.ZP,{meshName:"node-mesh"})]}),(0,t.Y)("gridHelper",{rotation:[-Math.PI/2,0,0]}),(0,t.Y)("axesHelper",{}),(0,t.Y)(d.N,{})]})})}),g=(0,x.Fn)(s=>{let[e,n,a]=s,l=(0,x.Bw9)(e).sub(n);return(0,x.TF7)(a,0,(0,x.tnl)(l))}),N=(0,x.Fn)(s=>{let[e,n,a,l]=s,i=e.dot(n).clamp(0,a);return(0,x.TF7)(l,0,(0,x.Bw9)(e.sub(i.mul(n))))}),y=p.memo(function(s){let{}=s,e=p.useMemo(()=>{let s=x.pot,e=(0,x.ZcS)(-.33,.33),n=s.sub(e),a=g(n,.1,.01),l=x.kBw,i=N(n,(0,x.ZcS)((0,x.gnS)(l),(0,x.F8e)(l)),.1,.01);return(0,x.jhA)(a,(0,x.eR5)(1,0,0),i)},[]);return(0,t.Y)(c.A,{style:{backgroundColor:"black"},children:s=>(0,t.FD)(m.A,{children:[(0,t.Y)(h.u,{makeDefault:!0,fov:53,aspect:s.clientWidth/s.clientHeight,near:.1,far:10,position:[0,0,1]}),(0,t.FD)("mesh",{name:"node-mesh",children:[(0,t.Y)("planeGeometry",{args:[5,5]}),(0,t.Y)("nodeMaterial",{fragmentNode:e}),(0,t.Y)(r.ZP,{meshName:"node-mesh"})]}),(0,t.Y)("gridHelper",{rotation:[-Math.PI/2,0,0]}),(0,t.Y)("axesHelper",{}),(0,t.Y)(d.N,{})]})})}),b=(0,x.Fn)(s=>{let[e,n,a]=s,l=(0,x.Bw9)(e).sub(n);return(0,x.TF7)(a,0,(0,x.tnl)(l))}),f=(0,x.Fn)(s=>{let[e,n,a,l]=s,i=e.dot(n).clamp(0,a);return(0,x.TF7)(l,0,(0,x.Bw9)(e.sub(i.mul(n))))}),w=p.memo(function(s){let{}=s,e=p.useMemo(()=>(0,x.Fn)(()=>{let s=x.pot,e=(0,x.ZcS)(-.33,.33),n=s.sub(e),a=b(n,.1,.01),l=x.kBw,i=(0,x.ZcS)((0,x.gnS)(l),(0,x.F8e)(l)),t=f(n,i,.1,.01),r=i.mul(.1),c=2*Math.PI,m=(0,x.TF7)(.01,0,(0,x.tnl)(s.y.sub(e.y).sub((0,x.F8e)(s.x.mul(c).sub(x.kBw).sub(Math.PI)).mul(.1))));m.assign((0,x.PMw)(0,s.x).mul(m));let h=(0,x.TF7)(.01,0,(0,x.tnl)(s.x.sub(e.x).sub((0,x.gnS)(s.y.mul(c).add(x.kBw)).mul(.1))));h.assign((0,x.PMw)(s.y,0).mul(h));let d=f(s.sub(e).sub(r),(0,x.ZcS)(1,0),(0,x.zed)(r.x).sub(e.x),.01),p=f(s.sub(e).sub(r),(0,x.ZcS)(0,-1),r.y.add(e.y),.01),o=d.mul((0,x.PMw)(.5,(0,x.ziu)(s.x.mul(10),1))),j=p.mul((0,x.PMw)(.5,(0,x.ziu)(s.y.mul(10),1))),u=(0,x.jhA)(a,(0,x.eR5)(1,0,0),t);return u.assign((0,x.jhA)(u,(0,x.eR5)(0,1,0),m)),u.assign((0,x.jhA)(u,(0,x.eR5)(0,1,0),h)),u.assign((0,x.jhA)(u,(0,x.eR5)(1,1,0),o)),u.assign((0,x.jhA)(u,(0,x.eR5)(1,1,0),j)),u}),[]);return(0,t.Y)(c.A,{style:{backgroundColor:"black"},children:s=>(0,t.FD)(m.A,{children:[(0,t.Y)(h.u,{makeDefault:!0,fov:53,aspect:s.clientWidth/s.clientHeight,near:.1,far:10,position:[0,0,1]}),(0,t.FD)("mesh",{name:"node-mesh",children:[(0,t.Y)("planeGeometry",{args:[5,5]}),(0,t.Y)("nodeMaterial",{fragmentNode:e()}),(0,t.Y)(r.ZP,{meshName:"node-mesh"})]}),(0,t.Y)("gridHelper",{rotation:[-Math.PI/2,0,0]}),(0,t.Y)("axesHelper",{}),(0,t.Y)(d.N,{})]})})}),k={title:"TSL: Drawing Lines",description:"TSL(Three.js Shading Language)을 사용하여 셰이더에서 선과 원을 그리는 방법을 살펴봅니다.",date:"2025-12-06",readTime:5},Y=s=>{let{children:e}=s;return(0,a.jsx)(i.A,{meta:k,children:e})};function v(s){let e={a:"a",annotation:"annotation",blockquote:"blockquote",code:"code",h1:"h1",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",...(0,l.R)(),...s.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{children:"소개"}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"https://sbcode.net/tsl/lines/",children:"Drawing Lines - Three.js Shading Language Tutorials"})}),"\n"]}),"\n",(0,a.jsx)(e.h1,{children:"원그리기"}),"\n",(0,a.jsxs)(e.p,{children:["원의 공식은 ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mn,{children:"2"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"x^2 + y^2 = r^2"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8974em",verticalAlign:"-0.0833em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.0085em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]})]})]})]})," 입니다. 이를 셰이더 코드로 변환하면 다음과 같습니다."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mn,{children:"0"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"x^2 + y^2 - r^2 = 0"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8974em",verticalAlign:"-0.0833em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.0085em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"−"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"})]})]})]})," 임으로 각 픽셀의 색상을 정하는 fragment shader에 전달하는 x, y 좌표값을 사용하여 다음과 같이 셰이더 코드를 작성할 수 있습니다."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"const fragmentNode = React.useMemo(() => {\n  const p = positionLocal;\n  const radius = 0.5;\n  const circle = p.x\n    .mul(p.x)\n    .add(p.y.mul(p.y))\n    .sub(radius * radius)\n    .abs()\n    .step(0.01);\n  const line = circle;\n  return line;\n}, []);\n"})}),"\n",(0,a.jsx)(e.p,{children:"즉, x, y 좌표가 원의 경계에 있을 때 0에 가까운 값이 되고, 원 내부에서는 음수, 원 외부에서는 양수가 됩니다."}),"\n",(0,a.jsx)(e.p,{children:"절대 값을 취한 뒤, 특정 임계값(예: 0.01)을 기준으로 계단 함수를 적용하여 원의 경계 근처에서만 1에 가까운 값을 갖도록 합니다. 이를 통해 원의 테두리를 그릴 수 있습니다."}),"\n",(0,a.jsx)(o,{}),"\n",(0,a.jsx)(e.h1,{children:"함수 화"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"Circle"})," 함수를 정의하여 재사용할 수 있습니다."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"const Circle = Fn(([p, r, t]: [p: typeof positionLocal, radius: number, thickness: number]) => {\n  const distance = length(p).sub(r);\n  return smoothstep(t, 0.0, abs(distance));\n});\n\nconst fragmentNode = React.useMemo(() => {\n  const p = positionLocal;\n  const radius = 0.1;\n  const thickness = 0.01;\n  const circleOffset = vec2(-0.33, 0.33);\n  const circle = Circle(p.sub(circleOffset), radius, thickness);\n  return circle;\n}, []);\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"circleOffset"})," 값을 변경하여 원의 위치를 조정할 수 있습니다."]}),"\n",(0,a.jsx)(u,{}),"\n",(0,a.jsx)(e.h1,{children:"원 안의 회전하는 선"}),"\n",(0,a.jsxs)(e.p,{children:["먼저 특정 원 안에 선을 그리는 ",(0,a.jsx)(e.code,{children:"Line"})," 함수를 정의합니다."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"const Line = Fn(\n  ([p, dir, distance, t]: [p: typeof positionLocal, direction: JoinNode, distance: number, thickness: number]) => {\n    const projected = p.dot(dir);\n    const clampledProjection = projected.clamp(0.0, distance);\n    return smoothstep(t, 0.0, length(p.sub(clampledProjection.mul(dir))));\n  }\n);\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"direction"}),"은 선의 방향을 말합니다. 임의의 점과 내적을하면 원 내부는 음수, 원 외부는 양수가 됩니다. 이 값을 ",(0,a.jsx)(e.code,{children:"clamp"})," 함수를 사용하여 0과 ",(0,a.jsx)(e.code,{children:"distance"})," 사이로 제한합니다."]}),"\n",(0,a.jsx)(e.p,{children:"그런 다음, 이 값을 다시 방향 벡터와 곱하여 원 내부의 점으로 투영합니다. 마지막으로, 원 내부의 점과 원의 중심에서 투영된 점 사이의 거리를 계산하여 선의 두께에 따라 계단 함수를 적용합니다."}),"\n",(0,a.jsx)(e.p,{children:"이제 원과 선을 결합하여 원 내부에서 회전하는 선을 그릴 수 있습니다."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"return mix(circle, vec3(1, 0, 0), radiusLine);\n"})}),"\n",(0,a.jsx)(y,{}),"\n",(0,a.jsx)(e.h1,{children:"마치며"}),"\n",(0,a.jsx)(e.p,{children:"최종 결과물은 다음과 같습니다."}),"\n",(0,a.jsx)(w,{}),"\n",(0,a.jsx)(e.p,{children:"tsl를 사용하여 원, 선, 곡선 등을 그려보았습니다."}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"mix"})," 함수와 ",(0,a.jsx)(e.code,{children:"smoothstep"})," 함수를 적절히 활용하면 다양한 도형과 패턴을 셰이더로 구현할 수 있습니다."]})]})}function R(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsx)(Y,{...s,children:(0,a.jsx)(v,{...s})})}},86798:(s,e,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/2025-12-06-tsl-drawing-lines",function(){return n(72771)}])}},s=>{s.O(0,[5334,7391,683,7544,5695,5302,2077,3629,4128,636,6593,8792],()=>s(s.s=86798)),_N_E=s.O()}]);
//# sourceMappingURL=2025-12-06-tsl-drawing-lines-4d955b1c24f4f712.js.map